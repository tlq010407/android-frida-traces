package org.telegram.messenger;

import android.appwidget.AppWidgetManager;
import android.text.SpannableStringBuilder;
import android.text.TextUtils;
import android.text.style.ForegroundColorSpan;
import android.util.Pair;
import android.util.SparseArray;
import android.util.SparseIntArray;
import androidx.collection.LongSparseArray;
import j$.util.function.Consumer;
import java.io.File;
import java.util.AbstractMap;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Locale;
import java.util.Map;
import java.util.Objects;
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.atomic.AtomicLong;
import java.util.concurrent.atomic.AtomicReference;
import org.telegram.PhoneFormat.PhoneFormat;
import org.telegram.SQLite.SQLiteCursor;
import org.telegram.SQLite.SQLiteDatabase;
import org.telegram.SQLite.SQLiteException;
import org.telegram.SQLite.SQLitePreparedStatement;
import org.telegram.messenger.ContactsController;
import org.telegram.messenger.MessagesController;
import org.telegram.messenger.NotificationsController;
import org.telegram.messenger.Timer;
import org.telegram.messenger.TopicsController;
import org.telegram.messenger.Utilities;
import org.telegram.messenger.support.LongSparseIntArray;
import org.telegram.tgnet.InputSerializedData;
import org.telegram.tgnet.NativeByteBuffer;
import org.telegram.tgnet.RequestDelegate;
import org.telegram.tgnet.TLObject;
import org.telegram.tgnet.TLRPC;
import org.telegram.tgnet.Vector;
import org.telegram.tgnet.tl.TL_account$RequirementToContact;
import org.telegram.tgnet.tl.TL_bots$BotInfo;
import org.telegram.tgnet.tl.TL_stories$StoryFwdHeader;
import org.telegram.tgnet.tl.TL_stories$StoryItem;
import org.telegram.tgnet.tl.TL_stories$TL_mediaAreaChannelPost;
import org.telegram.ui.ActionBar.Theme;
import org.telegram.ui.Adapters.DialogsSearchAdapter;
import org.telegram.ui.Components.Forum.ForumUtilities;
import org.telegram.ui.Components.Reactions.ReactionsLayoutInBubble;

/* loaded from: /Users/liqi/android-frida-traces/apk_test/dex_files/classes3.dex */
public class MessagesStorage extends BaseController {
    public static final String[] DATABASE_TABLES;
    public static final int LAST_DB_VERSION = 165;
    public static final int SENT_FILE_TYPE_AUDIO = 1;
    public static final int SENT_FILE_TYPE_AUDIO_ENCRYPTED = 4;
    public static final int SENT_FILE_TYPE_PHOTO = 0;
    public static final int SENT_FILE_TYPE_PHOTO_ENCRYPTED = 3;
    public static final int SENT_FILE_TYPE_PHOTO_HIGH_QUALITY = 6;
    public static final int SENT_FILE_TYPE_PHOTO_HIGH_QUALITY_ENCRYPTED = 7;
    public static final int SENT_FILE_TYPE_VIDEO = 2;
    public static final int SENT_FILE_TYPE_VIDEO_ENCRYPTED = 5;
    private int archiveUnreadCount;
    private int[][] bots;
    private File cacheFile;
    private int[][] channels;
    private int[][] contacts;
    private SQLiteDatabase database;
    private boolean databaseCreated;
    private boolean databaseMigrationInProgress;
    private final ArrayList<MessagesController.DialogFilter> dialogFilters;
    private final SparseArray<MessagesController.DialogFilter> dialogFiltersMap;
    private final LongSparseIntArray dialogIsForum;
    private final LongSparseIntArray dialogIsForumOrMonoForumWithTabs;
    private final LongSparseIntArray dialogIsMonoForum;
    private LongSparseArray dialogsWithMentions;
    private LongSparseArray dialogsWithUnread;
    private int[][] groups;
    private int lastDateValue;
    private int lastPtsValue;
    private int lastQtsValue;
    private int lastSavedDate;
    private int lastSavedPts;
    private int lastSavedQts;
    private int lastSavedSeq;
    private int lastSecretVersion;
    private int lastSeqValue;
    private final AtomicLong lastTaskId;
    private int mainUnreadCount;
    private int[] mentionChannels;
    private int[] mentionGroups;
    private int[][] nonContacts;
    private final CountDownLatch openSync;
    private volatile int pendingArchiveUnreadCount;
    private volatile int pendingMainUnreadCount;
    private int secretG;
    private byte[] secretPBytes;
    private File shmCacheFile;
    public boolean showClearDatabaseAlert;
    private DispatchQueue storageQueue;
    private final SparseArray<ArrayList<Runnable>> tasks;
    boolean tryRecover;
    private final LongSparseArray unknownDialogsIds;
    private File walCacheFile;
    private static volatile MessagesStorage[] Instance = new MessagesStorage[4];
    private static final Object[] lockObjects = new Object[4];

    public interface BooleanCallback {
        void run(boolean z);
    }

    private static class Hole {
        public int end;
        public int start;
        public int type;

        public Hole(int i, int i2) {
            this.start = i;
            this.end = i2;
        }

        public Hole(int i, int i2, int i3) {
            this.type = i;
            this.start = i2;
            this.end = i3;
        }
    }

    public interface IntCallback {
        void run(int i);
    }

    public interface LongCallback {
        void run(long j);
    }

    private static class ReadDialog {
        public int date;
        public int lastMid;
        public int unreadCount;

        private ReadDialog() {
        }
    }

    private class SavedReactionsUpdate {
        TLRPC.TL_messageReactions last;
        TLRPC.TL_messageReactions old;
        long topic_id;

        public SavedReactionsUpdate(long j, TLRPC.Message message, TLRPC.Message message2) {
            this.topic_id = MessageObject.getSavedDialogId(j, message2);
            this.old = message.reactions;
            this.last = message2.reactions;
        }
    }

    public interface StringCallback {
        void run(String str);
    }

    public static class TopicKey {
        public long dialogId;
        public long topicId;

        public static TopicKey of(long j, long j2) {
            TopicKey topicKey = new TopicKey();
            topicKey.dialogId = j;
            topicKey.topicId = j2;
            return topicKey;
        }

        public boolean equals(Object obj) {
            if (this == obj) {
                return true;
            }
            if (obj == null || getClass() != obj.getClass()) {
                return false;
            }
            TopicKey topicKey = (TopicKey) obj;
            return this.dialogId == topicKey.dialogId && this.topicId == topicKey.topicId;
        }

        public int hashCode() {
            return Objects.hash(Long.valueOf(this.dialogId), Long.valueOf(this.topicId));
        }

        public String toString() {
            return "TopicKey{dialogId=" + this.dialogId + ", topicId=" + this.topicId + '}';
        }
    }

    static {
        for (int i = 0; i < 4; i++) {
            lockObjects[i] = new Object();
        }
        DATABASE_TABLES = new String[]{"messages_holes", "media_holes_v2", "scheduled_messages_v2", "quick_replies", "messages_v2", "download_queue", "user_contacts_v7", "user_phones_v7", "dialogs", "dialog_filter", "dialog_filter_ep", "dialog_filter_pin_v2", "randoms_v2", "enc_tasks_v4", "messages_seq", "params", "media_v4", "bot_keyboard", "bot_keyboard_topics", "chat_settings_v2", "user_settings", "chat_pinned_v2", "chat_pinned_count", "chat_hints", "botcache", "users_data", "users", "chats", "enc_chats", "channel_users_v2", "channel_admins_v3", "contacts", "dialog_photos", "dialog_settings", "web_recent_v3", "stickers_v2", "stickers_featured", "stickers_dice", "stickersets", "hashtag_recent_v2", "webpage_pending_v2", "sent_files_v2", "search_recent", "media_counts_v2", "keyvalue", "bot_info_v2", "pending_tasks", "requested_holes", "sharing_locations", "shortcut_widget", "emoji_keywords_v2", "emoji_keywords_info_v2", "wallpapers2", "unread_push_messages", "polls_v2", "reactions", "reaction_mentions", "downloading_documents", "animated_emoji", "attach_menu_bots", "premium_promo", "emoji_statuses", "messages_holes_topics", "messages_topics", "saved_dialogs", "media_topics", "media_holes_topics", "topics", "media_counts_topics", "reaction_mentions_topics", "emoji_groups"};
    }

    public MessagesStorage(int i) {
        super(i);
        this.lastTaskId = new AtomicLong(System.currentTimeMillis());
        this.tasks = new SparseArray<>();
        this.lastDateValue = 0;
        this.lastPtsValue = 0;
        this.lastQtsValue = 0;
        this.lastSeqValue = 0;
        this.lastSecretVersion = 0;
        this.secretPBytes = null;
        this.secretG = 0;
        this.lastSavedSeq = 0;
        this.lastSavedPts = 0;
        this.lastSavedDate = 0;
        this.lastSavedQts = 0;
        this.dialogFilters = new ArrayList<>();
        this.dialogFiltersMap = new SparseArray<>();
        this.unknownDialogsIds = new LongSparseArray();
        this.openSync = new CountDownLatch(1);
        this.dialogIsForum = new LongSparseIntArray();
        this.dialogIsMonoForum = new LongSparseIntArray();
        this.dialogIsForumOrMonoForumWithTabs = new LongSparseIntArray();
        this.contacts = new int[][]{new int[2], new int[2]};
        this.nonContacts = new int[][]{new int[2], new int[2]};
        this.bots = new int[][]{new int[2], new int[2]};
        this.channels = new int[][]{new int[2], new int[2]};
        this.groups = new int[][]{new int[2], new int[2]};
        this.mentionChannels = new int[2];
        this.mentionGroups = new int[2];
        this.dialogsWithMentions = new LongSparseArray();
        this.dialogsWithUnread = new LongSparseArray();
        DispatchQueue dispatchQueue = new DispatchQueue("storageQueue_" + i);
        this.storageQueue = dispatchQueue;
        dispatchQueue.setPriority(8);
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda224
            @Override // java.lang.Runnable
            public final void run() throws Exception {
                this.f$0.lambda$new$0();
            }
        });
    }

    private boolean addFilesToDelete(TLRPC.Message message, ArrayList<File> arrayList, ArrayList<Pair<Long, Integer>> arrayList2, ArrayList<String> arrayList3, boolean z) {
        long j;
        int i;
        int i2 = 0;
        if (message == null) {
            return false;
        }
        TLRPC.Document document = MessageObject.getDocument(message);
        TLRPC.Photo photo = MessageObject.getPhoto(message);
        if (!MessageObject.isVoiceMessage(message)) {
            if (MessageObject.isStickerMessage(message) || MessageObject.isAnimatedStickerMessage(message)) {
                if (document == null) {
                    return false;
                }
                j = document.id;
            } else if (MessageObject.isVideoMessage(message) || MessageObject.isRoundVideoMessage(message) || MessageObject.isGifMessage(message)) {
                if (document == null) {
                    return false;
                }
                j = document.id;
                i = 4;
            } else if (document != null) {
                if (getMediaDataController().ringtoneDataStore.contains(document.id)) {
                    return false;
                }
                j = document.id;
                i = 8;
            } else if (photo == null || FileLoader.getClosestPhotoSizeWithSize(photo.sizes, AndroidUtilities.getPhotoSize()) == null) {
                j = 0;
                i = 0;
            } else {
                j = photo.id;
            }
            i = 1;
        } else {
            if (document == null || getMediaDataController().ringtoneDataStore.contains(document.id)) {
                return false;
            }
            j = document.id;
            i = 2;
        }
        if (j != 0) {
            arrayList2.add(new Pair<>(Long.valueOf(j), Integer.valueOf(i)));
        }
        if (photo != null) {
            int size = photo.sizes.size();
            while (i2 < size) {
                TLRPC.PhotoSize photoSize = (TLRPC.PhotoSize) photo.sizes.get(i2);
                String attachFileName = FileLoader.getAttachFileName(photoSize);
                if (!TextUtils.isEmpty(attachFileName)) {
                    arrayList3.add(attachFileName);
                }
                File pathToAttach = getFileLoader().getPathToAttach(photoSize, z);
                if (pathToAttach.toString().length() > 0) {
                    arrayList.add(pathToAttach);
                }
                i2++;
            }
            return true;
        }
        if (document == null) {
            return false;
        }
        String attachFileName2 = FileLoader.getAttachFileName(document);
        if (!TextUtils.isEmpty(attachFileName2)) {
            arrayList3.add(attachFileName2);
        }
        File pathToAttach2 = getFileLoader().getPathToAttach(document, z);
        if (pathToAttach2.toString().length() > 0) {
            arrayList.add(pathToAttach2);
        }
        int size2 = document.thumbs.size();
        while (i2 < size2) {
            File pathToAttach3 = getFileLoader().getPathToAttach(document.thumbs.get(i2));
            if (pathToAttach3.toString().length() > 0) {
                arrayList.add(pathToAttach3);
            }
            i2++;
        }
        return true;
    }

    public static void addLoadPeerInfo(TLRPC.Peer peer, ArrayList<Long> arrayList, ArrayList<Long> arrayList2) {
        long j;
        if (peer instanceof TLRPC.TL_peerUser) {
            if (arrayList.contains(Long.valueOf(peer.user_id))) {
                return;
            }
            arrayList.add(Long.valueOf(peer.user_id));
            return;
        }
        if (peer instanceof TLRPC.TL_peerChannel) {
            if (arrayList2.contains(Long.valueOf(peer.channel_id))) {
                return;
            } else {
                j = peer.channel_id;
            }
        } else if (!(peer instanceof TLRPC.TL_peerChat) || arrayList2.contains(Long.valueOf(peer.chat_id))) {
            return;
        } else {
            j = peer.chat_id;
        }
        arrayList2.add(Long.valueOf(j));
    }

    protected static void addReplyMessages(TLRPC.Message message, LongSparseArray longSparseArray, LongSparseArray longSparseArray2) {
        int i = message.reply_to.reply_to_msg_id;
        long replyToDialogId = (message.flags & 1073741824) != 0 ? message.quick_reply_shortcut_id : MessageObject.getReplyToDialogId(message);
        SparseArray sparseArray = (SparseArray) longSparseArray.get(replyToDialogId);
        ArrayList arrayList = (ArrayList) longSparseArray2.get(replyToDialogId);
        if (sparseArray == null) {
            sparseArray = new SparseArray();
            longSparseArray.put(replyToDialogId, sparseArray);
        }
        if (arrayList == null) {
            arrayList = new ArrayList();
            longSparseArray2.put(replyToDialogId, arrayList);
        }
        ArrayList arrayList2 = (ArrayList) sparseArray.get(message.reply_to.reply_to_msg_id);
        if (arrayList2 == null) {
            arrayList2 = new ArrayList();
            sparseArray.put(message.reply_to.reply_to_msg_id, arrayList2);
            if (!arrayList.contains(Integer.valueOf(message.reply_to.reply_to_msg_id))) {
                arrayList.add(Integer.valueOf(message.reply_to.reply_to_msg_id));
            }
        }
        arrayList2.add(message);
    }

    public static void addUsersAndChatsFromMessage(TLRPC.Message message, ArrayList<Long> arrayList, ArrayList<Long> arrayList2, ArrayList<Long> arrayList3) {
        TLRPC.Peer peer;
        String str;
        TLRPC.MessageFwdHeader messageFwdHeader;
        TLRPC.Peer peer2;
        TLRPC.Peer peer3;
        TLRPC.WebPage webPage;
        TLRPC.Peer peer4;
        TL_stories$StoryFwdHeader tL_stories$StoryFwdHeader;
        TL_stories$StoryItem tL_stories$StoryItem;
        TLRPC.Peer peer5;
        long j;
        long fromChatId = MessageObject.getFromChatId(message);
        if (DialogObject.isUserDialog(fromChatId)) {
            if (!arrayList.contains(Long.valueOf(fromChatId))) {
                arrayList.add(Long.valueOf(fromChatId));
            }
        } else if (DialogObject.isChatDialog(fromChatId)) {
            long j2 = -fromChatId;
            if (!arrayList2.contains(Long.valueOf(j2))) {
                arrayList2.add(Long.valueOf(j2));
            }
        }
        long j3 = message.via_bot_id;
        if (j3 != 0 && !arrayList.contains(Long.valueOf(j3))) {
            arrayList.add(Long.valueOf(message.via_bot_id));
        }
        TLRPC.MessageAction messageAction = message.action;
        if (messageAction != null) {
            long j4 = messageAction.user_id;
            if (j4 != 0 && !arrayList.contains(Long.valueOf(j4))) {
                arrayList.add(Long.valueOf(message.action.user_id));
            }
            long j5 = message.action.channel_id;
            if (j5 != 0 && !arrayList2.contains(Long.valueOf(j5))) {
                arrayList2.add(Long.valueOf(message.action.channel_id));
            }
            long j6 = message.action.chat_id;
            if (j6 != 0 && !arrayList2.contains(Long.valueOf(j6))) {
                arrayList2.add(Long.valueOf(message.action.chat_id));
            }
            TLRPC.MessageAction messageAction2 = message.action;
            if (messageAction2 instanceof TLRPC.TL_messageActionGiftCode) {
                addLoadPeerInfo(((TLRPC.TL_messageActionGiftCode) messageAction2).boost_peer, arrayList, arrayList2);
            }
            TLRPC.MessageAction messageAction3 = message.action;
            if (messageAction3 instanceof TLRPC.TL_messageActionGeoProximityReached) {
                TLRPC.TL_messageActionGeoProximityReached tL_messageActionGeoProximityReached = (TLRPC.TL_messageActionGeoProximityReached) messageAction3;
                addLoadPeerInfo(tL_messageActionGeoProximityReached.from_id, arrayList, arrayList2);
                addLoadPeerInfo(tL_messageActionGeoProximityReached.to_id, arrayList, arrayList2);
            }
            if (!message.action.users.isEmpty()) {
                for (int i = 0; i < message.action.users.size(); i++) {
                    Long l = (Long) message.action.users.get(i);
                    if (!arrayList.contains(l)) {
                        arrayList.add(l);
                    }
                }
            }
        }
        if (!message.entities.isEmpty()) {
            for (int i2 = 0; i2 < message.entities.size(); i2++) {
                TLRPC.MessageEntity messageEntity = (TLRPC.MessageEntity) message.entities.get(i2);
                if (messageEntity instanceof TLRPC.TL_messageEntityMentionName) {
                    j = ((TLRPC.TL_messageEntityMentionName) messageEntity).user_id;
                } else if (messageEntity instanceof TLRPC.TL_inputMessageEntityMentionName) {
                    j = ((TLRPC.TL_inputMessageEntityMentionName) messageEntity).user_id.user_id;
                } else {
                    if (arrayList3 != null && (messageEntity instanceof TLRPC.TL_messageEntityCustomEmoji)) {
                        arrayList3.add(Long.valueOf(((TLRPC.TL_messageEntityCustomEmoji) messageEntity).document_id));
                    }
                }
                arrayList.add(Long.valueOf(j));
            }
        }
        TLRPC.MessageMedia messageMedia = message.media;
        if (messageMedia != null) {
            long j7 = messageMedia.user_id;
            if (j7 != 0 && !arrayList.contains(Long.valueOf(j7))) {
                arrayList.add(Long.valueOf(message.media.user_id));
            }
            TLRPC.MessageMedia messageMedia2 = message.media;
            if (messageMedia2 instanceof TLRPC.TL_messageMediaGiveaway) {
                Iterator it = ((TLRPC.TL_messageMediaGiveaway) messageMedia2).channels.iterator();
                while (it.hasNext()) {
                    Long l2 = (Long) it.next();
                    if (!arrayList2.contains(l2)) {
                        arrayList2.add(l2);
                    }
                }
            }
            TLRPC.MessageMedia messageMedia3 = message.media;
            if (messageMedia3 instanceof TLRPC.TL_messageMediaGiveawayResults) {
                Iterator it2 = ((TLRPC.TL_messageMediaGiveawayResults) messageMedia3).winners.iterator();
                while (it2.hasNext()) {
                    Long l3 = (Long) it2.next();
                    if (!arrayList.contains(l3)) {
                        arrayList.add(l3);
                    }
                }
            }
            TLRPC.MessageMedia messageMedia4 = message.media;
            if (messageMedia4 instanceof TLRPC.TL_messageMediaPoll) {
                TLRPC.TL_messageMediaPoll tL_messageMediaPoll = (TLRPC.TL_messageMediaPoll) messageMedia4;
                if (!tL_messageMediaPoll.results.recent_voters.isEmpty()) {
                    for (int i3 = 0; i3 < tL_messageMediaPoll.results.recent_voters.size(); i3++) {
                        addLoadPeerInfo((TLRPC.Peer) tL_messageMediaPoll.results.recent_voters.get(i3), arrayList, arrayList2);
                    }
                }
            }
            TLRPC.MessageMedia messageMedia5 = message.media;
            if ((messageMedia5 instanceof TLRPC.TL_messageMediaStory) && (tL_stories$StoryItem = messageMedia5.storyItem) != null) {
                TL_stories$StoryFwdHeader tL_stories$StoryFwdHeader2 = tL_stories$StoryItem.fwd_from;
                if (tL_stories$StoryFwdHeader2 != null) {
                    addLoadPeerInfo(tL_stories$StoryFwdHeader2.from, arrayList, arrayList2);
                }
                TL_stories$StoryItem tL_stories$StoryItem2 = message.media.storyItem;
                if (tL_stories$StoryItem2 != null && tL_stories$StoryItem2.media_areas != null) {
                    for (int i4 = 0; i4 < message.media.storyItem.media_areas.size(); i4++) {
                        if (message.media.storyItem.media_areas.get(i4) instanceof TL_stories$TL_mediaAreaChannelPost) {
                            long j8 = ((TL_stories$TL_mediaAreaChannelPost) message.media.storyItem.media_areas.get(i4)).channel_id;
                            if (!arrayList2.contains(Long.valueOf(j8))) {
                                arrayList2.add(Long.valueOf(j8));
                            }
                        }
                    }
                }
                TL_stories$StoryItem tL_stories$StoryItem3 = message.media.storyItem;
                if (tL_stories$StoryItem3 != null && (peer5 = tL_stories$StoryItem3.from_id) != null) {
                    addLoadPeerInfo(peer5, arrayList, arrayList2);
                }
            }
            TLRPC.MessageMedia messageMedia6 = message.media;
            if ((messageMedia6 instanceof TLRPC.TL_messageMediaWebPage) && (webPage = messageMedia6.webpage) != null && webPage.attributes != null) {
                for (int i5 = 0; i5 < message.media.webpage.attributes.size(); i5++) {
                    if (message.media.webpage.attributes.get(i5) instanceof TLRPC.TL_webPageAttributeStory) {
                        TLRPC.TL_webPageAttributeStory tL_webPageAttributeStory = (TLRPC.TL_webPageAttributeStory) message.media.webpage.attributes.get(i5);
                        TL_stories$StoryItem tL_stories$StoryItem4 = tL_webPageAttributeStory.storyItem;
                        if (tL_stories$StoryItem4 != null && (tL_stories$StoryFwdHeader = tL_stories$StoryItem4.fwd_from) != null) {
                            addLoadPeerInfo(tL_stories$StoryFwdHeader.from, arrayList, arrayList2);
                        }
                        TL_stories$StoryItem tL_stories$StoryItem5 = tL_webPageAttributeStory.storyItem;
                        if (tL_stories$StoryItem5 != null && tL_stories$StoryItem5.media_areas != null) {
                            for (int i6 = 0; i6 < tL_webPageAttributeStory.storyItem.media_areas.size(); i6++) {
                                if (tL_webPageAttributeStory.storyItem.media_areas.get(i6) instanceof TL_stories$TL_mediaAreaChannelPost) {
                                    long j9 = ((TL_stories$TL_mediaAreaChannelPost) tL_webPageAttributeStory.storyItem.media_areas.get(i6)).channel_id;
                                    if (!arrayList2.contains(Long.valueOf(j9))) {
                                        arrayList2.add(Long.valueOf(j9));
                                    }
                                }
                            }
                        }
                        TL_stories$StoryItem tL_stories$StoryItem6 = tL_webPageAttributeStory.storyItem;
                        if (tL_stories$StoryItem6 != null && (peer4 = tL_stories$StoryItem6.from_id) != null) {
                            addLoadPeerInfo(peer4, arrayList, arrayList2);
                        }
                    }
                }
            }
            TLRPC.Peer peer6 = message.media.peer;
            if (peer6 != null) {
                addLoadPeerInfo(peer6, arrayList, arrayList2);
            }
        }
        TLRPC.MessageReplies messageReplies = message.replies;
        if (messageReplies != null) {
            int size = messageReplies.recent_repliers.size();
            for (int i7 = 0; i7 < size; i7++) {
                addLoadPeerInfo((TLRPC.Peer) message.replies.recent_repliers.get(i7), arrayList, arrayList2);
            }
        }
        TLRPC.MessageReplyHeader messageReplyHeader = message.reply_to;
        if (messageReplyHeader != null && (peer3 = messageReplyHeader.reply_to_peer_id) != null) {
            addLoadPeerInfo(peer3, arrayList, arrayList2);
        }
        TLRPC.MessageFwdHeader messageFwdHeader2 = message.fwd_from;
        if (messageFwdHeader2 != null) {
            addLoadPeerInfo(messageFwdHeader2.from_id, arrayList, arrayList2);
            addLoadPeerInfo(message.fwd_from.saved_from_peer, arrayList, arrayList2);
        }
        TLRPC.MessageReplyHeader messageReplyHeader2 = message.reply_to;
        if (messageReplyHeader2 != null && (messageFwdHeader = messageReplyHeader2.reply_from) != null && (peer2 = messageFwdHeader.from_id) != null) {
            addLoadPeerInfo(peer2, arrayList, arrayList2);
        }
        HashMap map = message.params;
        if (map != null && (str = (String) map.get("fwd_peer")) != null) {
            long jLongValue = Utilities.parseLong(str).longValue();
            if (jLongValue < 0) {
                long j10 = -jLongValue;
                if (!arrayList2.contains(Long.valueOf(j10))) {
                    arrayList2.add(Long.valueOf(j10));
                }
            }
        }
        TLRPC.TL_messageReactions tL_messageReactions = message.reactions;
        if (tL_messageReactions == null || tL_messageReactions.top_reactors == null) {
            return;
        }
        for (int i8 = 0; i8 < message.reactions.top_reactors.size(); i8++) {
            TLRPC.MessageReactor messageReactor = (TLRPC.MessageReactor) message.reactions.top_reactors.get(i8);
            if (messageReactor != null && (peer = messageReactor.peer_id) != null) {
                addLoadPeerInfo(peer, arrayList, arrayList2);
            }
        }
    }

    private void bindMessageTags(SQLitePreparedStatement sQLitePreparedStatement, TLRPC.Message message) {
        ArrayList arrayList;
        long clientUserId = getUserConfig().getClientUserId();
        TLRPC.TL_messageReactions tL_messageReactions = message.reactions;
        if (tL_messageReactions == null || !tL_messageReactions.reactions_as_tags || (arrayList = tL_messageReactions.results) == null || arrayList.isEmpty()) {
            return;
        }
        LocaleController localeController = LocaleController.getInstance();
        String str = message.message;
        if (str == null) {
            str = "";
        }
        String translitString = localeController.getTranslitString(str);
        Iterator it = message.reactions.results.iterator();
        while (it.hasNext()) {
            TLRPC.ReactionCount reactionCount = (TLRPC.ReactionCount) it.next();
            TLRPC.Reaction reaction = reactionCount.reaction;
            if ((reaction instanceof TLRPC.TL_reactionEmoji) || (reaction instanceof TLRPC.TL_reactionCustomEmoji)) {
                sQLitePreparedStatement.requery();
                sQLitePreparedStatement.bindLong(1, message.id);
                sQLitePreparedStatement.bindLong(2, MessageObject.getSavedDialogId(clientUserId, message));
                TLRPC.Reaction reaction2 = reactionCount.reaction;
                sQLitePreparedStatement.bindLong(3, reaction2 instanceof TLRPC.TL_reactionEmoji ? ((TLRPC.TL_reactionEmoji) reaction2).emoticon.hashCode() : reaction2 instanceof TLRPC.TL_reactionCustomEmoji ? ((TLRPC.TL_reactionCustomEmoji) reaction2).document_id : 0L);
                sQLitePreparedStatement.bindString(4, translitString == null ? "" : translitString);
                sQLitePreparedStatement.step();
            }
        }
    }

    private void broadcastQuickRepliesMessagesChange(Long l, long j) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda83
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$broadcastQuickRepliesMessagesChange$206();
            }
        });
    }

    private void broadcastScheduledMessagesChange(final Long l) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT COUNT(mid) FROM scheduled_messages_v2 WHERE uid = %d", l), new Object[0]);
            } catch (Throwable th) {
                th = th;
            }
        } catch (Exception e) {
            e = e;
        }
        try {
            final int iIntValue = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : 0;
            sQLiteCursorQueryFinalized.dispose();
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda53
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$broadcastScheduledMessagesChange$205(l, iIntValue);
                }
            });
        } catch (Exception e2) {
            e = e2;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            checkSQLException(e);
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
        } catch (Throwable th2) {
            th = th2;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
            throw th;
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:115:0x02ba  */
    /* JADX WARN: Removed duplicated region for block: B:224:0x0496 A[PHI: r5
      0x0496: PHI (r5v13 int) = (r5v12 int), (r5v27 int) binds: [B:213:0x0467, B:220:0x0482] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:226:0x0499 A[Catch: all -> 0x002b, Exception -> 0x0030, TryCatch #6 {Exception -> 0x0030, all -> 0x002b, blocks: (B:7:0x000a, B:12:0x0035, B:13:0x0038, B:64:0x0147, B:66:0x016e, B:68:0x0179, B:70:0x019d, B:73:0x01a7, B:74:0x01ae, B:76:0x01b2, B:84:0x01db, B:77:0x01bd, B:79:0x01c1, B:82:0x01c6, B:83:0x01d1, B:85:0x01eb, B:88:0x01f7, B:90:0x020e, B:92:0x021b, B:93:0x022d, B:95:0x0235, B:112:0x02a9, B:98:0x024d, B:100:0x026a, B:103:0x0274, B:104:0x027b, B:106:0x027f, B:109:0x0284, B:111:0x029a, B:110:0x0290, B:116:0x02bf, B:118:0x02c5, B:120:0x02d6, B:122:0x02e2, B:125:0x02eb, B:127:0x0305, B:132:0x0315, B:135:0x0320, B:136:0x0328, B:138:0x032e, B:140:0x0332, B:142:0x0347, B:144:0x035f, B:141:0x033d, B:143:0x034f, B:145:0x0365, B:146:0x036e, B:149:0x0374, B:152:0x0382, B:161:0x039b, B:163:0x03a0, B:165:0x03a5, B:167:0x03b1, B:170:0x03b9, B:172:0x03be, B:174:0x03cc, B:176:0x03d1, B:178:0x03d6, B:180:0x03db, B:182:0x03e8, B:183:0x03ec, B:185:0x03f1, B:187:0x03ff, B:188:0x0402, B:190:0x0407, B:192:0x040c, B:194:0x0419, B:195:0x041d, B:197:0x0422, B:199:0x0430, B:200:0x0433, B:202:0x0438, B:204:0x043d, B:206:0x044a, B:207:0x044e, B:209:0x0453, B:211:0x0461, B:212:0x0464, B:214:0x0469, B:216:0x046e, B:218:0x047b, B:219:0x047f, B:221:0x0484, B:223:0x0492, B:226:0x0499, B:228:0x04a2, B:235:0x04c1, B:242:0x04dc, B:244:0x04e0, B:252:0x04f1, B:265:0x0516, B:267:0x051c, B:255:0x04f7, B:257:0x04fc, B:261:0x0509, B:263:0x050e, B:245:0x04e3, B:247:0x04e7, B:250:0x04ec, B:251:0x04ef, B:239:0x04d0, B:292:0x0575, B:269:0x0529, B:271:0x0538, B:273:0x053e, B:275:0x0542, B:277:0x0547, B:291:0x0573, B:280:0x054b, B:282:0x0550, B:284:0x0559, B:287:0x0565, B:289:0x056a, B:276:0x0545, B:293:0x0580, B:295:0x058b, B:303:0x05a8, B:310:0x05c3, B:312:0x05c7, B:320:0x05d8, B:334:0x0600, B:322:0x05db, B:324:0x05e0, B:328:0x05ed, B:330:0x05f2, B:332:0x05fa, B:313:0x05ca, B:315:0x05ce, B:318:0x05d3, B:319:0x05d6, B:307:0x05b7, B:357:0x0654, B:336:0x060c, B:338:0x0619, B:340:0x061f, B:342:0x0623, B:344:0x0628, B:346:0x062b, B:348:0x0630, B:350:0x0639, B:352:0x063e, B:354:0x0647, B:356:0x0652, B:343:0x0626, B:358:0x065c, B:360:0x0660, B:363:0x0667, B:365:0x066b, B:366:0x066e, B:368:0x0672, B:370:0x0676, B:153:0x0385, B:155:0x0389, B:157:0x0391, B:158:0x0394, B:160:0x0399, B:159:0x0397), top: B:384:0x000a }] */
    /* JADX WARN: Removed duplicated region for block: B:362:0x0665  */
    /* JADX WARN: Removed duplicated region for block: B:374:0x0681  */
    /* JADX WARN: Removed duplicated region for block: B:377:0x0687  */
    /* JADX WARN: Removed duplicated region for block: B:442:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:444:? A[SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    private void calcUnreadCounters(boolean z) throws Throwable {
        int i;
        Throwable th;
        SQLiteCursor sQLiteCursor;
        Exception exc;
        SQLiteCursor sQLiteCursorQueryFinalized;
        int i2;
        ArrayList<TLRPC.User> arrayList;
        LongSparseArray longSparseArray;
        LongSparseArray longSparseArray2;
        int i3;
        int i4;
        MessagesController.DialogFilter dialogFilter;
        int i5;
        int i6;
        MessagesController.DialogFilter dialogFilter2;
        int i7;
        MessagesController.DialogFilter dialogFilter3;
        int i8;
        int i9;
        MessagesController.DialogFilter dialogFilter4;
        int i10;
        int i11;
        MessagesController.DialogFilter dialogFilter5;
        int i12;
        LongSparseArray longSparseArray3;
        ArrayList<TLRPC.EncryptedChat> arrayList2;
        LongSparseArray longSparseArray4;
        LongSparseArray longSparseArray5;
        int i13;
        LongSparseIntArray longSparseIntArray;
        int iIntValue;
        int iIntValue2;
        Long lValueOf;
        ArrayList<Long> arrayList3;
        int i14 = 0;
        int i15 = 0;
        while (true) {
            i = 2;
            try {
                if (i15 >= 2) {
                    break;
                }
                for (int i16 = 0; i16 < 2; i16++) {
                    try {
                        int[] iArr = this.contacts[i15];
                        int[] iArr2 = this.nonContacts[i15];
                        int[] iArr3 = this.bots[i15];
                        int[] iArr4 = this.channels[i15];
                        this.groups[i15][i16] = 0;
                        iArr4[i16] = 0;
                        iArr3[i16] = 0;
                        iArr2[i16] = 0;
                        iArr[i16] = 0;
                    } catch (Exception e) {
                        exc = e;
                        sQLiteCursorQueryFinalized = null;
                        checkSQLException(exc);
                        if (sQLiteCursorQueryFinalized == null) {
                        }
                    } catch (Throwable th2) {
                        th = th2;
                        sQLiteCursor = null;
                        if (sQLiteCursor != null) {
                            throw th;
                        }
                        sQLiteCursor.dispose();
                        throw th;
                    }
                }
                i15++;
            } catch (Throwable th3) {
                th = th3;
            }
        }
        this.dialogsWithMentions.clear();
        this.dialogsWithUnread.clear();
        ArrayList<TLRPC.User> arrayList4 = new ArrayList<>();
        ArrayList<TLRPC.User> arrayList5 = new ArrayList<>();
        ArrayList<TLRPC.Chat> arrayList6 = new ArrayList<>();
        ArrayList<Long> arrayList7 = new ArrayList<>();
        ArrayList<Long> arrayList8 = new ArrayList<>();
        ArrayList arrayList9 = new ArrayList();
        LongSparseIntArray longSparseIntArray2 = new LongSparseIntArray();
        LongSparseIntArray longSparseIntArray3 = new LongSparseIntArray();
        SQLiteCursor sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT DISTINCT did FROM topics WHERE unread_count > 0 OR unread_mentions > 0", new Object[0]);
        while (true) {
            try {
                i2 = 1;
                arrayList = arrayList5;
                if (!sQLiteCursorQueryFinalized2.next()) {
                    break;
                }
                long jLongValue = sQLiteCursorQueryFinalized2.longValue(0);
                if (isForum(jLongValue) || isMonoForum(jLongValue)) {
                    longSparseIntArray3.put(jLongValue, 1);
                }
                arrayList5 = arrayList;
            } catch (Exception e2) {
                exc = e2;
                sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
            } catch (Throwable th4) {
                th = th4;
                sQLiteCursor = sQLiteCursorQueryFinalized2;
                if (sQLiteCursor != null) {
                }
            }
        }
        sQLiteCursorQueryFinalized2.dispose();
        sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT did, folder_id, unread_count, unread_count_i FROM dialogs WHERE unread_count > 0 OR flags > 0 UNION ALL SELECT did, folder_id, unread_count, unread_count_i FROM dialogs WHERE unread_count_i > 0", new Object[0]);
        while (sQLiteCursorQueryFinalized.next()) {
            try {
                int iIntValue3 = sQLiteCursorQueryFinalized.intValue(i2);
                long jLongValue2 = sQLiteCursorQueryFinalized.longValue(i14);
                if (isForum(jLongValue2) || isMonoForum(jLongValue2)) {
                    iIntValue = longSparseIntArray3.get(jLongValue2, i14);
                    if (iIntValue == 0) {
                        i = 2;
                    } else {
                        iIntValue2 = 0;
                    }
                } else {
                    iIntValue = sQLiteCursorQueryFinalized.intValue(i);
                    iIntValue2 = sQLiteCursorQueryFinalized.intValue(3);
                }
                if (iIntValue > 0) {
                    this.dialogsWithUnread.put(jLongValue2, Integer.valueOf(iIntValue));
                }
                if (iIntValue2 > 0) {
                    this.dialogsWithMentions.put(jLongValue2, Integer.valueOf(iIntValue2));
                }
                longSparseIntArray2.put(jLongValue2, iIntValue3);
                if (DialogObject.isEncryptedDialog(jLongValue2)) {
                    int encryptedChatId = DialogObject.getEncryptedChatId(jLongValue2);
                    if (!arrayList9.contains(Integer.valueOf(encryptedChatId))) {
                        arrayList9.add(Integer.valueOf(encryptedChatId));
                    }
                } else if (!DialogObject.isUserDialog(jLongValue2)) {
                    long j = -jLongValue2;
                    if (!arrayList8.contains(Long.valueOf(j))) {
                        lValueOf = Long.valueOf(j);
                        arrayList3 = arrayList8;
                        arrayList3.add(lValueOf);
                    }
                } else if (!arrayList7.contains(Long.valueOf(jLongValue2))) {
                    lValueOf = Long.valueOf(jLongValue2);
                    arrayList3 = arrayList7;
                    arrayList3.add(lValueOf);
                }
                i14 = 0;
                i = 2;
                i2 = 1;
            } catch (Exception e3) {
                exc = e3;
                checkSQLException(exc);
                if (sQLiteCursorQueryFinalized == null) {
                    sQLiteCursorQueryFinalized.dispose();
                    return;
                }
                return;
            }
        }
        sQLiteCursorQueryFinalized.dispose();
        LongSparseArray longSparseArray6 = new LongSparseArray();
        LongSparseArray longSparseArray7 = new LongSparseArray();
        LongSparseArray longSparseArray8 = new LongSparseArray();
        LongSparseIntArray longSparseIntArray4 = new LongSparseIntArray();
        LongSparseArray longSparseArray9 = new LongSparseArray();
        LongSparseArray longSparseArray10 = new LongSparseArray();
        LongSparseIntArray longSparseIntArray5 = longSparseIntArray4;
        if (!arrayList7.isEmpty()) {
            getUsersInternal(arrayList7, arrayList4, true);
            int size = arrayList4.size();
            int i17 = 0;
            while (i17 < size) {
                TLRPC.User user = arrayList4.get(i17);
                ArrayList<TLRPC.User> arrayList10 = arrayList4;
                LongSparseArray longSparseArray11 = longSparseArray7;
                int i18 = size;
                ArrayList<Long> arrayList11 = arrayList8;
                boolean zIsDialogMuted = getMessagesController().isDialogMuted(user.id, 0L);
                int i19 = longSparseIntArray2.get(user.id);
                if (zIsDialogMuted) {
                    longSparseArray9.put(user.id, Boolean.TRUE);
                }
                if (i19 == 1) {
                    longSparseArray10.put(user.id, Boolean.TRUE);
                }
                if (user.bot) {
                    int[] iArr5 = this.bots[i19];
                    iArr5[zIsDialogMuted ? 1 : 0] = iArr5[zIsDialogMuted ? 1 : 0] + 1;
                } else if (user.self || user.contact) {
                    int[] iArr6 = this.contacts[i19];
                    iArr6[zIsDialogMuted ? 1 : 0] = iArr6[zIsDialogMuted ? 1 : 0] + 1;
                } else {
                    int[] iArr7 = this.nonContacts[i19];
                    iArr7[zIsDialogMuted ? 1 : 0] = iArr7[zIsDialogMuted ? 1 : 0] + 1;
                }
                longSparseArray6.put(user.id, user);
                i17++;
                arrayList4 = arrayList10;
                longSparseArray7 = longSparseArray11;
                arrayList8 = arrayList11;
                size = i18;
            }
        }
        LongSparseArray longSparseArray12 = longSparseArray7;
        ArrayList<Long> arrayList12 = arrayList8;
        if (!arrayList9.isEmpty()) {
            ArrayList<Long> arrayList13 = new ArrayList<>();
            ArrayList<TLRPC.EncryptedChat> arrayList14 = new ArrayList<>();
            getEncryptedChatsInternal(TextUtils.join(",", arrayList9), arrayList14, arrayList13);
            if (arrayList13.isEmpty()) {
                longSparseArray = longSparseArray6;
                longSparseArray2 = longSparseArray8;
            } else {
                getUsersInternal(arrayList13, arrayList, true);
                int i20 = 0;
                LongSparseArray longSparseArray13 = longSparseArray6;
                for (int size2 = arrayList.size(); i20 < size2; size2 = size2) {
                    TLRPC.User user2 = arrayList.get(i20);
                    longSparseArray8.put(user2.id, user2);
                    i20++;
                    longSparseArray13 = longSparseArray13;
                }
                LongSparseArray longSparseArray14 = longSparseArray13;
                int size3 = arrayList14.size();
                int i21 = 0;
                LongSparseArray longSparseArray15 = longSparseArray8;
                while (i21 < size3) {
                    TLRPC.User user3 = (TLRPC.User) longSparseArray15.get(arrayList14.get(i21).user_id);
                    if (user3 == null) {
                        longSparseArray4 = longSparseArray15;
                        arrayList2 = arrayList14;
                        longSparseArray5 = longSparseArray14;
                        longSparseIntArray = longSparseIntArray5;
                    } else {
                        LongSparseArray longSparseArray16 = longSparseArray15;
                        arrayList2 = arrayList14;
                        long jMakeEncryptedDialogId = DialogObject.makeEncryptedDialogId(r7.id);
                        longSparseArray4 = longSparseArray16;
                        longSparseArray5 = longSparseArray14;
                        boolean zIsDialogMuted2 = getMessagesController().isDialogMuted(jMakeEncryptedDialogId, 0L);
                        int i22 = longSparseIntArray2.get(jMakeEncryptedDialogId);
                        if (zIsDialogMuted2) {
                            longSparseArray9.put(user3.id, Boolean.TRUE);
                        }
                        if (i22 == 1) {
                            longSparseArray10.put(user3.id, Boolean.TRUE);
                        }
                        if (user3.self || user3.contact) {
                            int[] iArr8 = this.contacts[i22];
                            i13 = 1;
                            iArr8[zIsDialogMuted2 ? 1 : 0] = iArr8[zIsDialogMuted2 ? 1 : 0] + 1;
                        } else {
                            int[] iArr9 = this.nonContacts[i22];
                            iArr9[zIsDialogMuted2 ? 1 : 0] = iArr9[zIsDialogMuted2 ? 1 : 0] + 1;
                            i13 = 1;
                        }
                        longSparseIntArray = longSparseIntArray5;
                        longSparseIntArray.put(user3.id, longSparseIntArray.get(user3.id, 0) + i13);
                    }
                    i21++;
                    longSparseIntArray5 = longSparseIntArray;
                    arrayList14 = arrayList2;
                    longSparseArray14 = longSparseArray5;
                    longSparseArray15 = longSparseArray4;
                }
                longSparseArray2 = longSparseArray15;
                longSparseArray = longSparseArray14;
            }
        }
        LongSparseIntArray longSparseIntArray6 = longSparseIntArray5;
        if (!arrayList12.isEmpty()) {
            getChatsInternal(TextUtils.join(",", arrayList12), arrayList6);
            int size4 = arrayList6.size();
            int i23 = 0;
            while (i23 < size4) {
                TLRPC.Chat chat = arrayList6.get(i23);
                if ((chat.migrated_to instanceof TLRPC.TL_inputChannel) || ChatObject.isNotInChat(chat)) {
                    longSparseArray3 = longSparseArray12;
                    this.dialogsWithUnread.remove(-chat.id);
                    this.dialogsWithMentions.remove(-chat.id);
                } else {
                    boolean zIsDialogMuted3 = getMessagesController().isDialogMuted(-chat.id, 0L, chat);
                    int i24 = longSparseIntArray2.get(-chat.id);
                    char c = (!zIsDialogMuted3 || this.dialogsWithMentions.indexOfKey(-chat.id) >= 0) ? (char) 0 : (char) 1;
                    if (zIsDialogMuted3) {
                        longSparseArray9.put(-chat.id, Boolean.TRUE);
                    }
                    if (i24 == 1) {
                        longSparseArray10.put(-chat.id, Boolean.TRUE);
                    }
                    if (!ChatObject.isChannel(chat) || chat.megagroup) {
                        int[] iArr10 = this.groups[i24];
                        iArr10[c] = iArr10[c] + 1;
                    } else {
                        int[] iArr11 = this.channels[i24];
                        iArr11[c] = iArr11[c] + 1;
                    }
                    longSparseArray3 = longSparseArray12;
                    longSparseArray3.put(chat.id, chat);
                }
                i23++;
                longSparseArray12 = longSparseArray3;
            }
        }
        LongSparseArray longSparseArray17 = longSparseArray12;
        int size5 = this.dialogFilters.size();
        for (int i25 = 0; i25 < size5 + 2; i25++) {
            if (i25 < size5) {
                dialogFilter = this.dialogFilters.get(i25);
                if (dialogFilter.pendingUnreadCount < 0) {
                    i4 = dialogFilter.flags;
                }
            } else {
                int i26 = MessagesController.DIALOG_FILTER_FLAG_ALL_CHATS;
                if (i25 == size5) {
                    if (!getNotificationsController().showBadgeMuted) {
                        i26 |= MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED;
                    }
                    i3 = MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED;
                } else {
                    i3 = MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED;
                }
                i4 = i3 | i26;
                dialogFilter = null;
            }
            if ((MessagesController.DIALOG_FILTER_FLAG_CONTACTS & i4) != 0) {
                if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                    int[] iArr12 = this.contacts[0];
                    int i27 = iArr12[0];
                    i5 = (MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 ? iArr12[1] + i27 : i27;
                } else {
                    i5 = 0;
                }
                if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                    int[] iArr13 = this.contacts[1];
                    i5 += iArr13[0];
                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                        i5 += iArr13[1];
                    }
                }
            } else {
                i5 = 0;
            }
            if ((MessagesController.DIALOG_FILTER_FLAG_NON_CONTACTS & i4) != 0) {
                if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                    int[] iArr14 = this.nonContacts[0];
                    i5 += iArr14[0];
                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                        i5 += iArr14[1];
                    }
                }
                if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                    int[] iArr15 = this.nonContacts[1];
                    i5 += iArr15[0];
                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                        i5 += iArr15[1];
                    }
                }
            }
            if ((MessagesController.DIALOG_FILTER_FLAG_GROUPS & i4) != 0) {
                if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                    int[] iArr16 = this.groups[0];
                    i5 += iArr16[0];
                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                        i5 += iArr16[1];
                    }
                }
                if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                    int[] iArr17 = this.groups[1];
                    i5 += iArr17[0];
                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                        i5 += iArr17[1];
                    }
                }
            }
            if ((MessagesController.DIALOG_FILTER_FLAG_CHANNELS & i4) != 0) {
                if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                    int[] iArr18 = this.channels[0];
                    i5 += iArr18[0];
                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                        i5 += iArr18[1];
                    }
                }
                if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                    int[] iArr19 = this.channels[1];
                    i5 += iArr19[0];
                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                        i5 += iArr19[1];
                    }
                }
            }
            if ((MessagesController.DIALOG_FILTER_FLAG_BOTS & i4) != 0) {
                if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                    int[] iArr20 = this.bots[0];
                    i5 += iArr20[0];
                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                        i5 += iArr20[1];
                    }
                }
                if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                    int[] iArr21 = this.bots[1];
                    i5 += iArr21[0];
                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                        i5 += iArr21[1];
                    }
                }
                if (dialogFilter == null) {
                }
            } else if (dialogFilter == null) {
                int size6 = dialogFilter.alwaysShow.size();
                int i28 = 0;
                while (i28 < size6) {
                    long jLongValue3 = dialogFilter.alwaysShow.get(i28).longValue();
                    if (DialogObject.isUserDialog(jLongValue3)) {
                        i10 = size6;
                        int i29 = 0;
                        for (int i30 = 2; i29 < i30; i30 = 2) {
                            TLRPC.User user4 = (TLRPC.User) (i29 == 0 ? longSparseArray : longSparseArray2).get(jLongValue3);
                            if (user4 != null) {
                                if (i29 == 0) {
                                    i11 = size5;
                                    i12 = 1;
                                } else {
                                    i11 = size5;
                                    i12 = longSparseIntArray6.get(jLongValue3, 0);
                                    if (i12 == 0) {
                                    }
                                    i29++;
                                    size5 = i11;
                                    dialogFilter = dialogFilter5;
                                }
                                if (((user4.bot ? MessagesController.DIALOG_FILTER_FLAG_BOTS : (user4.self || user4.contact) ? MessagesController.DIALOG_FILTER_FLAG_CONTACTS : MessagesController.DIALOG_FILTER_FLAG_NON_CONTACTS) & i4) == 0) {
                                    dialogFilter5 = dialogFilter;
                                } else {
                                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) != 0) {
                                        dialogFilter5 = dialogFilter;
                                        if (longSparseArray9.indexOfKey(user4.id) >= 0) {
                                        }
                                    } else {
                                        dialogFilter5 = dialogFilter;
                                    }
                                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0 || longSparseArray10.indexOfKey(user4.id) < 0) {
                                    }
                                    i29++;
                                    size5 = i11;
                                    dialogFilter = dialogFilter5;
                                }
                                i5 += i12;
                                i29++;
                                size5 = i11;
                                dialogFilter = dialogFilter5;
                            } else {
                                i11 = size5;
                            }
                            dialogFilter5 = dialogFilter;
                            i29++;
                            size5 = i11;
                            dialogFilter = dialogFilter5;
                        }
                        i9 = size5;
                        dialogFilter4 = dialogFilter;
                    } else {
                        i9 = size5;
                        dialogFilter4 = dialogFilter;
                        i10 = size6;
                        TLRPC.Chat chat2 = (TLRPC.Chat) longSparseArray17.get(-jLongValue3);
                        if (chat2 != null) {
                            if ((((!ChatObject.isChannel(chat2) || chat2.megagroup) ? MessagesController.DIALOG_FILTER_FLAG_GROUPS : MessagesController.DIALOG_FILTER_FLAG_CHANNELS) & i4) == 0 || (((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) != 0 && longSparseArray9.indexOfKey(-chat2.id) >= 0 && this.dialogsWithMentions.indexOfKey(-chat2.id) < 0) || ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) != 0 && longSparseArray10.indexOfKey(-chat2.id) >= 0))) {
                                i5++;
                            }
                        }
                    }
                    i28++;
                    size6 = i10;
                    size5 = i9;
                    dialogFilter = dialogFilter4;
                }
                int i31 = size5;
                int size7 = dialogFilter.neverShow.size();
                int i32 = 0;
                while (i32 < size7) {
                    long jLongValue4 = dialogFilter.neverShow.get(i32).longValue();
                    if (DialogObject.isUserDialog(jLongValue4)) {
                        int i33 = 0;
                        while (i33 < 2) {
                            TLRPC.User user5 = (TLRPC.User) (i33 == 0 ? longSparseArray : longSparseArray2).get(jLongValue4);
                            if (user5 != null) {
                                if (i33 == 0) {
                                    i7 = size7;
                                    i8 = 1;
                                } else {
                                    i7 = size7;
                                    i8 = longSparseIntArray6.get(jLongValue4, 0);
                                    if (i8 == 0) {
                                    }
                                    i33++;
                                    size7 = i7;
                                    dialogFilter = dialogFilter3;
                                }
                                if (((user5.bot ? MessagesController.DIALOG_FILTER_FLAG_BOTS : (user5.self || user5.contact) ? MessagesController.DIALOG_FILTER_FLAG_CONTACTS : MessagesController.DIALOG_FILTER_FLAG_NON_CONTACTS) & i4) != 0) {
                                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) != 0) {
                                        dialogFilter3 = dialogFilter;
                                        if (longSparseArray10.indexOfKey(user5.id) < 0) {
                                        }
                                    } else {
                                        dialogFilter3 = dialogFilter;
                                    }
                                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 || longSparseArray9.indexOfKey(user5.id) < 0) {
                                        i5 -= i8;
                                    }
                                }
                                i33++;
                                size7 = i7;
                                dialogFilter = dialogFilter3;
                            } else {
                                i7 = size7;
                            }
                            dialogFilter3 = dialogFilter;
                            i33++;
                            size7 = i7;
                            dialogFilter = dialogFilter3;
                        }
                        i6 = size7;
                        dialogFilter2 = dialogFilter;
                    } else {
                        i6 = size7;
                        dialogFilter2 = dialogFilter;
                        TLRPC.Chat chat3 = (TLRPC.Chat) longSparseArray17.get(-jLongValue4);
                        if (chat3 != null) {
                            if ((((!ChatObject.isChannel(chat3) || chat3.megagroup) ? MessagesController.DIALOG_FILTER_FLAG_GROUPS : MessagesController.DIALOG_FILTER_FLAG_CHANNELS) & i4) != 0 && (((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0 || longSparseArray10.indexOfKey(-chat3.id) < 0) && ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 || longSparseArray9.indexOfKey(-chat3.id) < 0 || this.dialogsWithMentions.indexOfKey(-chat3.id) >= 0))) {
                                i5--;
                            }
                        }
                    }
                    i32++;
                    size7 = i6;
                    dialogFilter = dialogFilter2;
                }
                dialogFilter.pendingUnreadCount = i5;
                if (z) {
                    dialogFilter.unreadCount = i5;
                }
                size5 = i31;
            } else if (i25 == size5) {
                this.pendingMainUnreadCount = i5;
                if (z) {
                    this.mainUnreadCount = i5;
                }
            } else if (i25 == size5 + 1) {
                this.pendingArchiveUnreadCount = i5;
                if (z) {
                    this.archiveUnreadCount = i5;
                }
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: checkIfFolderEmptyInternal, reason: merged with bridge method [inline-methods] */
    public void lambda$checkIfFolderEmpty$229(final int i) {
        boolean z = false;
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT did FROM dialogs WHERE folder_id = ?", Integer.valueOf(i));
                while (true) {
                    if (!sQLiteCursorQueryFinalized.next()) {
                        z = true;
                        break;
                    }
                    long jLongValue = sQLiteCursorQueryFinalized.longValue(0);
                    if (!DialogObject.isUserDialog(jLongValue) && !DialogObject.isEncryptedDialog(jLongValue)) {
                        TLRPC.Chat chat = getChat(-jLongValue);
                        if (!ChatObject.isNotInChat(chat) && chat.migrated_to == null) {
                            break;
                        }
                    } else {
                        break;
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
                if (z) {
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda150
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$checkIfFolderEmptyInternal$228(i);
                        }
                    });
                    this.database.executeFast("DELETE FROM dialogs WHERE did = " + DialogObject.makeFolderDialogId(i)).stepThis().dispose();
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized == null) {
                    return;
                }
            }
            sQLiteCursorQueryFinalized.dispose();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    private void checkSQLException(Throwable th, boolean z) {
        if (!(th instanceof SQLiteException) || th.getMessage() == null || !th.getMessage().contains("is malformed") || this.tryRecover) {
            FileLog.e(th, z);
            return;
        }
        this.tryRecover = true;
        FileLog.e("disk image malformed detected, try recover");
        if (!recoverDatabase()) {
            FileLog.e(new Exception(th), z);
            return;
        }
        this.tryRecover = false;
        clearLoadingDialogsOffsets();
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda205
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$checkSQLException$8();
            }
        });
        FileLog.e(new Exception("database restored!!"));
    }

    private void cleanupInternal(boolean z) {
        if (z) {
            reset();
        } else {
            clearDatabaseValues();
        }
        SQLiteDatabase sQLiteDatabase = this.database;
        if (sQLiteDatabase != null) {
            sQLiteDatabase.close();
            this.database = null;
        }
        if (z) {
            File file = this.cacheFile;
            if (file != null) {
                file.delete();
                this.cacheFile = null;
            }
            File file2 = this.walCacheFile;
            if (file2 != null) {
                file2.delete();
                this.walCacheFile = null;
            }
            File file3 = this.shmCacheFile;
            if (file3 != null) {
                file3.delete();
                this.shmCacheFile = null;
            }
        }
    }

    private void clearLoadingDialogsOffsets() {
        for (int i = 0; i < 2; i++) {
            getUserConfig().setDialogsLoadOffset(i, 0, 0, 0L, 0L, 0L, 0L);
            getUserConfig().setTotalDialogsCount(i, 0);
        }
        getUserConfig().saveConfig(false);
    }

    /* JADX WARN: Removed duplicated region for block: B:149:0x052d A[Catch: all -> 0x0534, Exception -> 0x0537, TryCatch #22 {Exception -> 0x0537, all -> 0x0534, blocks: (B:147:0x0520, B:149:0x052d, B:156:0x053c, B:158:0x0556, B:161:0x0560), top: B:218:0x0520 }] */
    /* JADX WARN: Removed duplicated region for block: B:155:0x053a  */
    /* JADX WARN: Removed duplicated region for block: B:158:0x0556 A[Catch: all -> 0x0534, Exception -> 0x0537, TryCatch #22 {Exception -> 0x0537, all -> 0x0534, blocks: (B:147:0x0520, B:149:0x052d, B:156:0x053c, B:158:0x0556, B:161:0x0560), top: B:218:0x0520 }] */
    /* JADX WARN: Removed duplicated region for block: B:160:0x055d  */
    /* JADX WARN: Removed duplicated region for block: B:172:0x059b  */
    /* JADX WARN: Removed duplicated region for block: B:174:0x05a0  */
    /* JADX WARN: Removed duplicated region for block: B:177:0x05a6  */
    /* JADX WARN: Removed duplicated region for block: B:179:0x05ab  */
    /* JADX WARN: Removed duplicated region for block: B:232:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:234:? A[SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    private void closeHolesInTable(String str, long j, int i, int i2, long j2) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        Throwable th;
        Exception exc;
        ArrayList arrayList;
        int i3;
        SQLiteDatabase sQLiteDatabase;
        String str2;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        long j3;
        int i4;
        int i5;
        int i6;
        int i7;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast2;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast3;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast4;
        int i8 = i;
        int i9 = i2;
        long j4 = j2;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                try {
                    if (j4 != 0) {
                        sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT start, end FROM " + str + " WHERE uid = %d AND topic_id = %d AND ((end >= %d AND end <= %d) OR (start >= %d AND start <= %d) OR (start >= %d AND end <= %d) OR (start <= %d AND end >= %d))", Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2)), new Object[0]);
                    } else {
                        sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT start, end FROM " + str + " WHERE uid = %d AND ((end >= %d AND end <= %d) OR (start >= %d AND start <= %d) OR (start >= %d AND end <= %d) OR (start <= %d AND end >= %d))", Long.valueOf(j), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2)), new Object[0]);
                    }
                    arrayList = null;
                    while (sQLiteCursorQueryFinalized.next()) {
                        try {
                            try {
                                if (arrayList == null) {
                                    arrayList = new ArrayList();
                                }
                                int iIntValue = sQLiteCursorQueryFinalized.intValue(0);
                                int iIntValue2 = sQLiteCursorQueryFinalized.intValue(1);
                                if (iIntValue != iIntValue2 || iIntValue != 1) {
                                    arrayList.add(new Hole(iIntValue, iIntValue2));
                                }
                            } catch (Exception e) {
                                exc = e;
                            }
                        } catch (Throwable th2) {
                            th = th2;
                        }
                    }
                    sQLiteCursorQueryFinalized.dispose();
                } catch (Throwable th3) {
                    th = th3;
                }
            } catch (Exception e2) {
                e = e2;
            }
        } catch (Exception e3) {
            e = e3;
        } catch (Throwable th4) {
            th = th4;
        }
        if (arrayList != null) {
            int i10 = 0;
            while (i10 < arrayList.size()) {
                try {
                    Hole hole = (Hole) arrayList.get(i10);
                    int i11 = hole.end;
                    int i12 = i11 - 1;
                    ArrayList arrayList2 = arrayList;
                    if (i9 >= i12) {
                        i3 = i10;
                        if (i8 <= hole.start + 1) {
                            if (j4 != 0) {
                                try {
                                    sQLitePreparedStatementExecuteFast4 = this.database.executeFast(String.format(Locale.US, "DELETE FROM " + str + " WHERE uid = %d AND topic_id = %d AND start = %d AND end = %d", Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(hole.start), Integer.valueOf(hole.end)));
                                    sQLitePreparedStatementExecuteFast4.stepThis().dispose();
                                    i5 = i8;
                                    i7 = i9;
                                    j3 = j;
                                    i10 = i3 + 1;
                                    i8 = i5;
                                    arrayList = arrayList2;
                                    i9 = i7;
                                    j4 = j2;
                                } catch (Throwable th5) {
                                    th = th5;
                                }
                            } else {
                                try {
                                    sQLitePreparedStatementExecuteFast4 = this.database.executeFast(String.format(Locale.US, "DELETE FROM " + str + " WHERE uid = %d AND start = %d AND end = %d", Long.valueOf(j), Integer.valueOf(hole.start), Integer.valueOf(hole.end)));
                                    sQLitePreparedStatementExecuteFast4.stepThis().dispose();
                                    i5 = i8;
                                    i7 = i9;
                                    j3 = j;
                                    i10 = i3 + 1;
                                    i8 = i5;
                                    arrayList = arrayList2;
                                    i9 = i7;
                                    j4 = j2;
                                } catch (Throwable th6) {
                                    th = th6;
                                }
                            }
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        if (sQLiteCursorQueryFinalized != null) {
                            throw th;
                        }
                        sQLiteCursorQueryFinalized.dispose();
                        throw th;
                    }
                    i3 = i10;
                    if (i9 >= i12) {
                        if (i11 != i8) {
                            if (j4 != 0) {
                                try {
                                    SQLiteDatabase sQLiteDatabase2 = this.database;
                                    Locale locale = Locale.US;
                                    try {
                                        sQLiteDatabase2.executeFast(String.format(locale, "DELETE FROM " + str + " WHERE uid = %d AND topic_id = %d AND start = %d AND end = %d", Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(hole.start), Integer.valueOf(hole.end))).stepThis().dispose();
                                        try {
                                            sQLitePreparedStatementExecuteFast3 = this.database.executeFast(String.format(locale, "REPLACE INTO " + str + " VALUES(%d, %d, %d, %d)", Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(hole.start), Integer.valueOf(i)));
                                            sQLitePreparedStatementExecuteFast3.stepThis().dispose();
                                        } catch (Throwable th7) {
                                            th = th7;
                                        }
                                    } catch (Throwable th8) {
                                        th = th8;
                                    }
                                } catch (Exception e4) {
                                    e = e4;
                                    checkSQLException(e, false);
                                    j3 = j;
                                    i5 = i;
                                    i7 = i2;
                                    i10 = i3 + 1;
                                    i8 = i5;
                                    arrayList = arrayList2;
                                    i9 = i7;
                                    j4 = j2;
                                }
                            } else {
                                SQLiteDatabase sQLiteDatabase3 = this.database;
                                Locale locale2 = Locale.US;
                                try {
                                    sQLiteDatabase3.executeFast(String.format(locale2, "DELETE FROM " + str + " WHERE uid = %d AND start = %d AND end = %d", Long.valueOf(j), Integer.valueOf(hole.start), Integer.valueOf(hole.end))).stepThis().dispose();
                                    try {
                                        sQLitePreparedStatementExecuteFast3 = this.database.executeFast(String.format(locale2, "REPLACE INTO " + str + " VALUES(%d, %d, %d)", Long.valueOf(j), Integer.valueOf(hole.start), Integer.valueOf(i)));
                                        sQLitePreparedStatementExecuteFast3.stepThis().dispose();
                                    } catch (Throwable th9) {
                                        th = th9;
                                    }
                                } catch (Throwable th10) {
                                    th = th10;
                                }
                            }
                        }
                        j3 = j;
                        i7 = i2;
                        i5 = i8;
                    } else {
                        int i13 = hole.start;
                        if (i8 <= i13 + 1) {
                            if (i13 != i2) {
                                if (j2 != 0) {
                                    try {
                                        SQLiteDatabase sQLiteDatabase4 = this.database;
                                        Locale locale3 = Locale.US;
                                        try {
                                            sQLiteDatabase4.executeFast(String.format(locale3, "DELETE FROM " + str + " WHERE uid = %d AND topic_id = %d AND start = %d AND end = %d", Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(hole.start), Integer.valueOf(hole.end))).stepThis().dispose();
                                            try {
                                                sQLitePreparedStatementExecuteFast2 = this.database.executeFast(String.format(locale3, "REPLACE INTO " + str + " VALUES(%d, %d, %d, %d)", Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(i2), Integer.valueOf(hole.end)));
                                                sQLitePreparedStatementExecuteFast2.stepThis().dispose();
                                            } catch (Throwable th11) {
                                                th = th11;
                                            }
                                        } catch (Throwable th12) {
                                            th = th12;
                                        }
                                    } catch (Exception e5) {
                                        e = e5;
                                        checkSQLException(e, false);
                                        j3 = j;
                                        i5 = i;
                                        i7 = i2;
                                        i10 = i3 + 1;
                                        i8 = i5;
                                        arrayList = arrayList2;
                                        i9 = i7;
                                        j4 = j2;
                                    }
                                } else {
                                    SQLiteDatabase sQLiteDatabase5 = this.database;
                                    Locale locale4 = Locale.US;
                                    try {
                                        sQLiteDatabase5.executeFast(String.format(locale4, "DELETE FROM " + str + " WHERE uid = %d AND start = %d AND end = %d", Long.valueOf(j), Integer.valueOf(hole.start), Integer.valueOf(hole.end))).stepThis().dispose();
                                        try {
                                            sQLitePreparedStatementExecuteFast2 = this.database.executeFast(String.format(locale4, "REPLACE INTO " + str + " VALUES(%d, %d, %d)", Long.valueOf(j), Integer.valueOf(i2), Integer.valueOf(hole.end)));
                                            sQLitePreparedStatementExecuteFast2.stepThis().dispose();
                                        } catch (Throwable th13) {
                                            th = th13;
                                        }
                                    } catch (Throwable th14) {
                                        th = th14;
                                    }
                                }
                            }
                            j3 = j;
                            i5 = i;
                            i7 = i2;
                        } else if (j2 != 0) {
                            try {
                                this.database.executeFast(String.format(Locale.US, "DELETE FROM " + str + " WHERE uid = %d AND topic_id = %d AND start = %d AND end = %d", Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(hole.start), Integer.valueOf(hole.end))).stepThis().dispose();
                                sQLiteDatabase = this.database;
                                str2 = "REPLACE INTO " + str + " VALUES(?, ?, ?, ?)";
                                sQLitePreparedStatementExecuteFast = sQLiteDatabase.executeFast(str2);
                                try {
                                    sQLitePreparedStatementExecuteFast.requery();
                                    j3 = j;
                                    sQLitePreparedStatementExecuteFast.bindLong(1, j3);
                                    if (j2 == 0) {
                                        sQLitePreparedStatementExecuteFast.bindLong(2, j2);
                                        i4 = 3;
                                    } else {
                                        i4 = 2;
                                    }
                                    int i14 = i4 + 1;
                                    sQLitePreparedStatementExecuteFast.bindInteger(i4, hole.start);
                                    i5 = i;
                                    sQLitePreparedStatementExecuteFast.bindInteger(i14, i5);
                                    sQLitePreparedStatementExecuteFast.step();
                                    sQLitePreparedStatementExecuteFast.requery();
                                    sQLitePreparedStatementExecuteFast.bindLong(1, j3);
                                    if (j2 == 0) {
                                        sQLitePreparedStatementExecuteFast.bindLong(2, j2);
                                        i6 = 3;
                                    } else {
                                        i6 = 2;
                                    }
                                    i7 = i2;
                                    sQLitePreparedStatementExecuteFast.bindInteger(i6, i7);
                                    sQLitePreparedStatementExecuteFast.bindInteger(i6 + 1, hole.end);
                                    sQLitePreparedStatementExecuteFast.step();
                                    sQLitePreparedStatementExecuteFast.dispose();
                                    i10 = i3 + 1;
                                    i8 = i5;
                                    arrayList = arrayList2;
                                    i9 = i7;
                                    j4 = j2;
                                } catch (Exception e6) {
                                    exc = e6;
                                    sQLiteCursorQueryFinalized = null;
                                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                    checkSQLException(exc);
                                    if (sQLitePreparedStatement != null) {
                                    }
                                    if (sQLiteCursorQueryFinalized == null) {
                                    }
                                } catch (Throwable th15) {
                                    th = th15;
                                    sQLiteCursorQueryFinalized = null;
                                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                }
                            } catch (Throwable th16) {
                                th = th16;
                            }
                        } else {
                            try {
                                this.database.executeFast(String.format(Locale.US, "DELETE FROM " + str + " WHERE uid = %d AND start = %d AND end = %d", Long.valueOf(j), Integer.valueOf(hole.start), Integer.valueOf(hole.end))).stepThis().dispose();
                                sQLiteDatabase = this.database;
                                str2 = "REPLACE INTO " + str + " VALUES(?, ?, ?)";
                                sQLitePreparedStatementExecuteFast = sQLiteDatabase.executeFast(str2);
                                sQLitePreparedStatementExecuteFast.requery();
                                j3 = j;
                                sQLitePreparedStatementExecuteFast.bindLong(1, j3);
                                if (j2 == 0) {
                                }
                                int i142 = i4 + 1;
                                sQLitePreparedStatementExecuteFast.bindInteger(i4, hole.start);
                                i5 = i;
                                sQLitePreparedStatementExecuteFast.bindInteger(i142, i5);
                                sQLitePreparedStatementExecuteFast.step();
                                sQLitePreparedStatementExecuteFast.requery();
                                sQLitePreparedStatementExecuteFast.bindLong(1, j3);
                                if (j2 == 0) {
                                }
                                i7 = i2;
                                sQLitePreparedStatementExecuteFast.bindInteger(i6, i7);
                                sQLitePreparedStatementExecuteFast.bindInteger(i6 + 1, hole.end);
                                sQLitePreparedStatementExecuteFast.step();
                                sQLitePreparedStatementExecuteFast.dispose();
                                i10 = i3 + 1;
                                i8 = i5;
                                arrayList = arrayList2;
                                i9 = i7;
                                j4 = j2;
                            } catch (Throwable th17) {
                                th = th17;
                            }
                        }
                        th = th;
                        sQLiteCursorQueryFinalized = null;
                        if (sQLitePreparedStatement != null) {
                        }
                        if (sQLiteCursorQueryFinalized != null) {
                        }
                    }
                    i10 = i3 + 1;
                    i8 = i5;
                    arrayList = arrayList2;
                    i9 = i7;
                    j4 = j2;
                } catch (Exception e7) {
                    e = e7;
                    exc = e;
                    sQLiteCursorQueryFinalized = null;
                    checkSQLException(exc);
                    if (sQLitePreparedStatement != null) {
                        sQLitePreparedStatement.dispose();
                    }
                    if (sQLiteCursorQueryFinalized == null) {
                        sQLiteCursorQueryFinalized.dispose();
                        return;
                    }
                    return;
                }
            }
        }
    }

    public static void createFirstHoles(long j, SQLitePreparedStatement sQLitePreparedStatement, SQLitePreparedStatement sQLitePreparedStatement2, int i, long j2) {
        int i2;
        int i3;
        sQLitePreparedStatement.requery();
        sQLitePreparedStatement.bindLong(1, j);
        if (j2 != 0) {
            sQLitePreparedStatement.bindLong(2, j2);
            i2 = 3;
        } else {
            i2 = 2;
        }
        int i4 = i2 + 1;
        sQLitePreparedStatement.bindInteger(i2, i == 1 ? 1 : 0);
        sQLitePreparedStatement.bindInteger(i4, i);
        sQLitePreparedStatement.step();
        for (int i5 = 0; i5 < 8; i5++) {
            sQLitePreparedStatement2.requery();
            sQLitePreparedStatement2.bindLong(1, j);
            if (j2 != 0) {
                sQLitePreparedStatement2.bindLong(2, j2);
                i3 = 3;
            } else {
                i3 = 2;
            }
            int i6 = i3 + 1;
            sQLitePreparedStatement2.bindInteger(i3, i5);
            int i7 = i3 + 2;
            sQLitePreparedStatement2.bindInteger(i6, i == 1 ? 1 : 0);
            sQLitePreparedStatement2.bindInteger(i7, i);
            sQLitePreparedStatement2.step();
        }
    }

    private void createOrEditTopic(final long j, TLRPC.Message message) throws Throwable {
        final TLRPC.TL_forumTopic tL_forumTopic = new TLRPC.TL_forumTopic();
        tL_forumTopic.topicStartMessage = message;
        tL_forumTopic.top_message = message.id;
        tL_forumTopic.topMessage = message;
        tL_forumTopic.from_id = message.from_id;
        tL_forumTopic.notify_settings = new TLRPC.TL_peerNotifySettings();
        tL_forumTopic.unread_count = 0;
        TLRPC.MessageAction messageAction = message.action;
        if (messageAction instanceof TLRPC.TL_messageActionTopicCreate) {
            TLRPC.TL_messageActionTopicCreate tL_messageActionTopicCreate = (TLRPC.TL_messageActionTopicCreate) messageAction;
            tL_forumTopic.id = message.id;
            long j2 = tL_messageActionTopicCreate.icon_emoji_id;
            tL_forumTopic.icon_emoji_id = j2;
            tL_forumTopic.title = tL_messageActionTopicCreate.title;
            tL_forumTopic.icon_color = tL_messageActionTopicCreate.icon_color;
            if (j2 != 0) {
                tL_forumTopic.flags |= 1;
            }
            ArrayList arrayList = new ArrayList();
            arrayList.add(tL_forumTopic);
            saveTopics(j, arrayList, false, false, message.date);
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda47
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$createOrEditTopic$193(j, tL_forumTopic);
                }
            });
            return;
        }
        if (messageAction instanceof TLRPC.TL_messageActionTopicEdit) {
            TLRPC.TL_messageActionTopicEdit tL_messageActionTopicEdit = (TLRPC.TL_messageActionTopicEdit) messageAction;
            tL_forumTopic.id = (int) MessageObject.getTopicId(this.currentAccount, message, true);
            tL_forumTopic.icon_emoji_id = tL_messageActionTopicEdit.icon_emoji_id;
            tL_forumTopic.title = tL_messageActionTopicEdit.title;
            tL_forumTopic.closed = tL_messageActionTopicEdit.closed;
            tL_forumTopic.hidden = tL_messageActionTopicEdit.hidden;
            int i = tL_messageActionTopicEdit.flags;
            int i2 = (i & 1) != 0 ? 1 : 0;
            if ((i & 2) != 0) {
                i2 += 2;
            }
            if ((i & 4) != 0) {
                i2 += 8;
            }
            if ((i & 8) != 0) {
                i2 += 32;
            }
            updateTopicData(j, tL_forumTopic, i2, message.date);
        }
    }

    public static void createTables(SQLiteDatabase sQLiteDatabase) {
        sQLiteDatabase.executeFast("CREATE TABLE messages_holes(uid INTEGER, start INTEGER, end INTEGER, PRIMARY KEY(uid, start));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_end_messages_holes ON messages_holes(uid, end);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE media_holes_v2(uid INTEGER, type INTEGER, start INTEGER, end INTEGER, PRIMARY KEY(uid, type, start));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_end_media_holes_v2 ON media_holes_v2(uid, type, end);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE scheduled_messages_v2(mid INTEGER, uid INTEGER, send_state INTEGER, date INTEGER, data BLOB, ttl INTEGER, replydata BLOB, reply_to_message_id INTEGER, PRIMARY KEY(mid, uid))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS send_state_idx_scheduled_messages_v2 ON scheduled_messages_v2(mid, send_state, date);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_date_idx_scheduled_messages_v2 ON scheduled_messages_v2(uid, date);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS reply_to_idx_scheduled_messages_v2 ON scheduled_messages_v2(mid, reply_to_message_id);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS idx_to_reply_scheduled_messages_v2 ON scheduled_messages_v2(reply_to_message_id, mid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE messages_v2(mid INTEGER, uid INTEGER, read_state INTEGER, send_state INTEGER, date INTEGER, data BLOB, out INTEGER, ttl INTEGER, media INTEGER, replydata BLOB, imp INTEGER, mention INTEGER, forwards INTEGER, replies_data BLOB, thread_reply_id INTEGER, is_channel INTEGER, reply_to_message_id INTEGER, custom_params BLOB, group_id INTEGER, reply_to_story_id INTEGER, PRIMARY KEY(mid, uid))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_mid_read_out_idx_messages_v2 ON messages_v2(uid, mid, read_state, out);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_date_mid_idx_messages_v2 ON messages_v2(uid, date, mid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS mid_out_idx_messages_v2 ON messages_v2(mid, out);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS task_idx_messages_v2 ON messages_v2(uid, out, read_state, ttl, date, send_state);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS send_state_idx_messages_v2 ON messages_v2(mid, send_state, date);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_mention_idx_messages_v2 ON messages_v2(uid, mention, read_state);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS is_channel_idx_messages_v2 ON messages_v2(mid, is_channel);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS reply_to_idx_messages_v2 ON messages_v2(mid, reply_to_message_id);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS idx_to_reply_messages_v2 ON messages_v2(reply_to_message_id, mid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_mid_groupid_messages_v2 ON messages_v2(uid, mid, group_id);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE saved_dialogs(did INTEGER, date INTEGER, last_mid INTEGER, pinned INTEGER, flags INTEGER, folder_id INTEGER, last_mid_group INTEGER, count INTEGER, forumChatId INTEGER, unread_count INTEGER, max_read_id INTEGER, read_outbox INTEGER, PRIMARY KEY (did, forumChatId))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS date_idx_dialogs ON saved_dialogs(date);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS last_mid_idx_dialogs ON saved_dialogs(last_mid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS folder_id_idx_dialogs ON saved_dialogs(folder_id);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS flags_idx_dialogs ON saved_dialogs(flags);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS forum_idx_dialogs ON saved_dialogs(forumChatId);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE download_queue(uid INTEGER, type INTEGER, date INTEGER, data BLOB, parent TEXT, PRIMARY KEY (uid, type));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS type_date_idx_download_queue ON download_queue(type, date);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE user_contacts_v7(key TEXT PRIMARY KEY, uid INTEGER, fname TEXT, sname TEXT, imported INTEGER)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE user_phones_v7(key TEXT, phone TEXT, sphone TEXT, deleted INTEGER, PRIMARY KEY (key, phone))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS sphone_deleted_idx_user_phones ON user_phones_v7(sphone, deleted);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE dialogs(did INTEGER PRIMARY KEY, date INTEGER, unread_count INTEGER, last_mid INTEGER, inbox_max INTEGER, outbox_max INTEGER, last_mid_i INTEGER, unread_count_i INTEGER, pts INTEGER, date_i INTEGER, pinned INTEGER, flags INTEGER, folder_id INTEGER, data BLOB, unread_reactions INTEGER, last_mid_group INTEGER, ttl_period INTEGER)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS date_idx_dialogs ON dialogs(date);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS last_mid_idx_dialogs ON dialogs(last_mid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS unread_count_idx_dialogs ON dialogs(unread_count);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS last_mid_i_idx_dialogs ON dialogs(last_mid_i);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS unread_count_i_idx_dialogs ON dialogs(unread_count_i);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS folder_id_idx_dialogs ON dialogs(folder_id);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS flags_idx_dialogs ON dialogs(flags);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE dialog_filter(id INTEGER PRIMARY KEY, ord INTEGER, unread_count INTEGER, flags INTEGER, title TEXT, color INTEGER DEFAULT -1, entities BLOB, noanimate INTEGER)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE dialog_filter_ep(id INTEGER, peer INTEGER, PRIMARY KEY (id, peer))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE dialog_filter_pin_v2(id INTEGER, peer INTEGER, pin INTEGER, PRIMARY KEY (id, peer))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE randoms_v2(random_id INTEGER, mid INTEGER, uid INTEGER, PRIMARY KEY (random_id, mid, uid))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS mid_idx_randoms_v2 ON randoms_v2(mid, uid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE enc_tasks_v4(mid INTEGER, uid INTEGER, date INTEGER, media INTEGER, PRIMARY KEY(mid, uid, media))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS date_idx_enc_tasks_v4 ON enc_tasks_v4(date);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE messages_seq(mid INTEGER PRIMARY KEY, seq_in INTEGER, seq_out INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS seq_idx_messages_seq ON messages_seq(seq_in, seq_out);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE params(id INTEGER PRIMARY KEY, seq INTEGER, pts INTEGER, date INTEGER, qts INTEGER, lsv INTEGER, sg INTEGER, pbytes BLOB)").stepThis().dispose();
        sQLiteDatabase.executeFast("INSERT INTO params VALUES(1, 0, 0, 0, 0, 0, 0, NULL)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE media_v4(mid INTEGER, uid INTEGER, date INTEGER, type INTEGER, data BLOB, PRIMARY KEY(mid, uid, type))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_mid_type_date_idx_media_v4 ON media_v4(uid, mid, type, date);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE bot_keyboard(uid INTEGER PRIMARY KEY, mid INTEGER, info BLOB)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS bot_keyboard_idx_mid_v2 ON bot_keyboard(mid, uid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE bot_keyboard_topics(uid INTEGER, tid INTEGER, mid INTEGER, info BLOB, PRIMARY KEY(uid, tid))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS bot_keyboard_topics_idx_mid_v2 ON bot_keyboard_topics(mid, uid, tid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE chat_settings_v2(uid INTEGER PRIMARY KEY, info BLOB, pinned INTEGER, online INTEGER, inviter INTEGER, links INTEGER, participants_count INTEGER)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS chat_settings_pinned_idx ON chat_settings_v2(uid, pinned) WHERE pinned != 0;").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE user_settings(uid INTEGER PRIMARY KEY, info BLOB, pinned INTEGER)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS user_settings_pinned_idx ON user_settings(uid, pinned) WHERE pinned != 0;").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE chat_pinned_v2(uid INTEGER, mid INTEGER, data BLOB, PRIMARY KEY (uid, mid));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE chat_pinned_count(uid INTEGER PRIMARY KEY, count INTEGER, end INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE chat_hints(did INTEGER, type INTEGER, rating REAL, date INTEGER, PRIMARY KEY(did, type))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS chat_hints_rating_idx ON chat_hints(rating);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE botcache(id TEXT PRIMARY KEY, date INTEGER, data BLOB)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS botcache_date_idx ON botcache(date);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE users_data(uid INTEGER PRIMARY KEY, about TEXT)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE users(uid INTEGER PRIMARY KEY, name TEXT, status INTEGER, data BLOB)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE chats(uid INTEGER PRIMARY KEY, name TEXT, data BLOB)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE enc_chats(uid INTEGER PRIMARY KEY, user INTEGER, name TEXT, data BLOB, g BLOB, authkey BLOB, ttl INTEGER, layer INTEGER, seq_in INTEGER, seq_out INTEGER, use_count INTEGER, exchange_id INTEGER, key_date INTEGER, fprint INTEGER, fauthkey BLOB, khash BLOB, in_seq_no INTEGER, admin_id INTEGER, mtproto_seq INTEGER)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE channel_users_v2(did INTEGER, uid INTEGER, date INTEGER, data BLOB, PRIMARY KEY(did, uid))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE channel_admins_v3(did INTEGER, uid INTEGER, data BLOB, PRIMARY KEY(did, uid))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE contacts(uid INTEGER PRIMARY KEY, mutual INTEGER)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE dialog_photos(uid INTEGER, id INTEGER, num INTEGER, data BLOB, PRIMARY KEY (uid, id))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE dialog_photos_count(uid INTEGER PRIMARY KEY, count INTEGER)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE dialog_settings(did INTEGER PRIMARY KEY, flags INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE web_recent_v3(id TEXT, type INTEGER, image_url TEXT, thumb_url TEXT, local_url TEXT, width INTEGER, height INTEGER, size INTEGER, date INTEGER, document BLOB, PRIMARY KEY (id, type));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE stickers_v2(id INTEGER PRIMARY KEY, data BLOB, date INTEGER, hash INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE stickers_featured(id INTEGER PRIMARY KEY, data BLOB, unread BLOB, date INTEGER, hash INTEGER, premium INTEGER, emoji INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE stickers_dice(emoji TEXT PRIMARY KEY, data BLOB, date INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE hashtag_recent_v2(id TEXT PRIMARY KEY, date INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE webpage_pending_v2(id INTEGER, mid INTEGER, uid INTEGER, PRIMARY KEY (id, mid, uid));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE sent_files_v2(uid TEXT, type INTEGER, data BLOB, parent TEXT, PRIMARY KEY (uid, type))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE search_recent(did INTEGER PRIMARY KEY, date INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE media_counts_v2(uid INTEGER, type INTEGER, count INTEGER, old INTEGER, PRIMARY KEY(uid, type))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE keyvalue(id TEXT PRIMARY KEY, value TEXT)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE bot_info_v2(uid INTEGER, dialogId INTEGER, info BLOB, PRIMARY KEY(uid, dialogId))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE pending_tasks(id INTEGER PRIMARY KEY, data BLOB);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE requested_holes(uid INTEGER, seq_out_start INTEGER, seq_out_end INTEGER, PRIMARY KEY (uid, seq_out_start, seq_out_end));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE sharing_locations(uid INTEGER PRIMARY KEY, mid INTEGER, date INTEGER, period INTEGER, message BLOB, proximity INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE stickersets2(id INTEGER PRIMATE KEY, data BLOB, hash INTEGER, date INTEGER, short_name TEXT);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS stickersets2_id_index ON stickersets2(id);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS stickersets2_id_short_name ON stickersets2(id, short_name);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS stickers_featured_emoji_index ON stickers_featured(emoji);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE shortcut_widget(id INTEGER, did INTEGER, ord INTEGER, PRIMARY KEY (id, did));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS shortcut_widget_did ON shortcut_widget(did);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE emoji_keywords_v2(lang TEXT, keyword TEXT, emoji TEXT, PRIMARY KEY(lang, keyword, emoji));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS emoji_keywords_v2_keyword ON emoji_keywords_v2(keyword);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE emoji_keywords_info_v2(lang TEXT PRIMARY KEY, alias TEXT, version INTEGER, date INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE wallpapers2(uid INTEGER PRIMARY KEY, data BLOB, num INTEGER)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS wallpapers_num ON wallpapers2(num);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE unread_push_messages(uid INTEGER, mid INTEGER, random INTEGER, date INTEGER, data BLOB, fm TEXT, name TEXT, uname TEXT, flags INTEGER, topicId INTEGER, is_reaction INTEGER, PRIMARY KEY(uid, mid))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS unread_push_messages_idx_date ON unread_push_messages(date);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS unread_push_messages_idx_random ON unread_push_messages(random);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE polls_v2(mid INTEGER, uid INTEGER, id INTEGER, PRIMARY KEY (mid, uid));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS polls_id_v2 ON polls_v2(id);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE reactions(data BLOB, hash INTEGER, date INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE reaction_mentions(message_id INTEGER, state INTEGER, dialog_id INTEGER, PRIMARY KEY(message_id, dialog_id))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS reaction_mentions_did ON reaction_mentions(dialog_id);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE downloading_documents(data BLOB, hash INTEGER, id INTEGER, state INTEGER, date INTEGER, PRIMARY KEY(hash, id));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE animated_emoji(document_id INTEGER PRIMARY KEY, data BLOB);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE attach_menu_bots(data BLOB, hash INTEGER, date INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE premium_promo(data BLOB, date INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE emoji_statuses(data BLOB, type INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE messages_holes_topics(uid INTEGER, topic_id INTEGER, start INTEGER, end INTEGER, PRIMARY KEY(uid, topic_id, start));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_end_messages_holes ON messages_holes_topics(uid, topic_id, end);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE messages_topics(mid INTEGER, uid INTEGER, topic_id INTEGER, read_state INTEGER, send_state INTEGER, date INTEGER, data BLOB, out INTEGER, ttl INTEGER, media INTEGER, replydata BLOB, imp INTEGER, mention INTEGER, forwards INTEGER, replies_data BLOB, thread_reply_id INTEGER, is_channel INTEGER, reply_to_message_id INTEGER, custom_params BLOB, reply_to_story_id INTEGER, PRIMARY KEY(mid, topic_id, uid))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_date_mid_idx_messages_topics ON messages_topics(uid, date, mid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS mid_out_idx_messages_topics ON messages_topics(mid, out);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS task_idx_messages_topics ON messages_topics(uid, out, read_state, ttl, date, send_state);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS send_state_idx_messages_topics ON messages_topics(mid, send_state, date);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS is_channel_idx_messages_topics ON messages_topics(mid, is_channel);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS reply_to_idx_messages_topics ON messages_topics(mid, reply_to_message_id);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS idx_to_reply_messages_topics ON messages_topics(reply_to_message_id, mid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS mid_uid_messages_topics ON messages_topics(mid, uid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_mid_read_out_idx_messages_topics ON messages_topics(uid, topic_id, mid, read_state, out);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_mention_idx_messages_topics ON messages_topics(uid, topic_id, mention, read_state);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_topic_id_messages_topics ON messages_topics(uid, topic_id);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_topic_id_date_mid_messages_topics ON messages_topics(uid, topic_id, date, mid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_topic_id_mid_messages_topics ON messages_topics(uid, topic_id, mid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE media_topics(mid INTEGER, uid INTEGER, topic_id INTEGER, date INTEGER, type INTEGER, data BLOB, PRIMARY KEY(mid, uid, topic_id, type))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_mid_type_date_idx_media_topics ON media_topics(uid, topic_id, mid, type, date);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE media_holes_topics(uid INTEGER, topic_id INTEGER, type INTEGER, start INTEGER, end INTEGER, PRIMARY KEY(uid, topic_id, type, start));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS uid_end_media_holes_topics ON media_holes_topics(uid, topic_id, type, end);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE topics(did INTEGER, topic_id INTEGER, data BLOB, top_message INTEGER, topic_message BLOB, unread_count INTEGER, max_read_id INTEGER, unread_mentions INTEGER, unread_reactions INTEGER, read_outbox INTEGER, pinned INTEGER, total_messages_count INTEGER, hidden INTEGER, edit_date INTEGER, nopaid_messages_exception INTEGER, PRIMARY KEY(did, topic_id));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS did_top_message_topics ON topics(did, top_message);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS did_topics ON topics(did);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE media_counts_topics(uid INTEGER, topic_id INTEGER, type INTEGER, count INTEGER, old INTEGER, PRIMARY KEY(uid, topic_id, type))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE reaction_mentions_topics(message_id INTEGER, state INTEGER, dialog_id INTEGER, topic_id INTEGER, PRIMARY KEY(message_id, dialog_id, topic_id))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS reaction_mentions_topics_did ON reaction_mentions_topics(dialog_id, topic_id);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE emoji_groups(type INTEGER PRIMARY KEY, data BLOB)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE app_config(data BLOB)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE effects(data BLOB)").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE stories (dialog_id INTEGER, story_id INTEGER, data BLOB, custom_params BLOB, PRIMARY KEY (dialog_id, story_id));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE stories_counter (dialog_id INTEGER PRIMARY KEY, count INTEGER, max_read INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE profile_stories (dialog_id INTEGER, story_id INTEGER, data BLOB, type INTEGER, seen INTEGER, pin INTEGER, PRIMARY KEY(dialog_id, story_id));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE story_drafts (id INTEGER PRIMARY KEY, date INTEGER, data BLOB, type INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE story_pushes (uid INTEGER, sid INTEGER, date INTEGER, localName TEXT, flags INTEGER, expire_date INTEGER, PRIMARY KEY(uid, sid));").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE unconfirmed_auth (data BLOB);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE saved_reaction_tags (topic_id INTEGER PRIMARY KEY, data BLOB);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE tag_message_id(mid INTEGER, topic_id INTEGER, tag INTEGER, text TEXT);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS tag_idx_tag_message_id ON tag_message_id(tag);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS tag_text_idx_tag_message_id ON tag_message_id(tag, text COLLATE NOCASE);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS tag_topic_idx_tag_message_id ON tag_message_id(topic_id, tag);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS tag_topic_text_idx_tag_message_id ON tag_message_id(topic_id, tag, text COLLATE NOCASE);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE business_replies(topic_id INTEGER PRIMARY KEY, name TEXT, order_value INTEGER, count INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE quick_replies_messages(mid INTEGER, topic_id INTEGER, send_state INTEGER, date INTEGER, data BLOB, ttl INTEGER, replydata BLOB, reply_to_message_id INTEGER, PRIMARY KEY(mid, topic_id))").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS topic_date_idx_quick_replies_messages ON quick_replies_messages(topic_id, date);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS reply_to_idx_quick_replies_messages ON quick_replies_messages(mid, reply_to_message_id);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE INDEX IF NOT EXISTS idx_to_reply_quick_replies_messages ON quick_replies_messages(reply_to_message_id, mid);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE business_links(data BLOB, order_value INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE fact_checks(hash INTEGER PRIMARY KEY, data BLOB, expires INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE popular_bots(uid INTEGER PRIMARY KEY, time INTEGER, offset TEXT, pos INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("CREATE TABLE star_gifts2(id INTEGER PRIMARY KEY, data BLOB, hash INTEGER, time INTEGER, pos INTEGER);").stepThis().dispose();
        sQLiteDatabase.executeFast("PRAGMA user_version = 165").stepThis().dispose();
    }

    /* JADX WARN: Removed duplicated region for block: B:38:0x00c9  */
    /* JADX WARN: Removed duplicated region for block: B:40:0x00ce  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    private void createTaskForSecretMedia(long j, SparseArray<ArrayList<Integer>> sparseArray) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLiteDatabase sQLiteDatabase;
        try {
            ArrayList arrayList = new ArrayList();
            if (sparseArray.size() != 0) {
                this.database.beginTransaction();
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO enc_tasks_v4 VALUES(?, ?, ?, ?)");
                int iMin = Integer.MAX_VALUE;
                for (int i = 0; i < sparseArray.size(); i++) {
                    try {
                        int iKeyAt = sparseArray.keyAt(i);
                        ArrayList<Integer> arrayList2 = sparseArray.get(iKeyAt);
                        for (int i2 = 0; i2 < arrayList2.size(); i2++) {
                            int iIntValue = arrayList2.get(i2).intValue();
                            sQLitePreparedStatementExecuteFast.requery();
                            sQLitePreparedStatementExecuteFast.bindInteger(1, iIntValue);
                            sQLitePreparedStatementExecuteFast.bindLong(2, j);
                            sQLitePreparedStatementExecuteFast.bindInteger(3, iKeyAt);
                            sQLitePreparedStatementExecuteFast.bindInteger(4, 1);
                            iMin = Math.min(iMin, iIntValue);
                            sQLitePreparedStatementExecuteFast.step();
                            arrayList.add(arrayList2.get(i2));
                        }
                    } catch (Exception e) {
                        e = e;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        try {
                            checkSQLException(e);
                            SQLiteDatabase sQLiteDatabase2 = this.database;
                            if (sQLiteDatabase2 != null) {
                                sQLiteDatabase2.commitTransaction();
                            }
                            if (sQLitePreparedStatement != null) {
                                sQLitePreparedStatement.dispose();
                                return;
                            }
                            return;
                        } catch (Throwable th) {
                            th = th;
                            sQLiteDatabase = this.database;
                            if (sQLiteDatabase != null) {
                                sQLiteDatabase.commitTransaction();
                            }
                            if (sQLitePreparedStatement != null) {
                                sQLitePreparedStatement.dispose();
                            }
                            throw th;
                        }
                    } catch (Throwable th2) {
                        th = th2;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        sQLiteDatabase = this.database;
                        if (sQLiteDatabase != null) {
                        }
                        if (sQLitePreparedStatement != null) {
                        }
                        throw th;
                    }
                }
                sQLitePreparedStatementExecuteFast.dispose();
                this.database.commitTransaction();
                this.database.executeFast(String.format(Locale.US, "UPDATE messages_v2 SET ttl = 0 WHERE uid = %d AND mid IN(%s)", Long.valueOf(j), TextUtils.join(", ", arrayList))).stepThis().dispose();
                getMessagesController().didAddedNewTask(iMin, j, sparseArray);
            }
            SQLiteDatabase sQLiteDatabase3 = this.database;
            if (sQLiteDatabase3 != null) {
                sQLiteDatabase3.commitTransaction();
            }
        } catch (Exception e2) {
            e = e2;
            sQLitePreparedStatement = null;
        } catch (Throwable th3) {
            th = th3;
            sQLitePreparedStatement = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: deleteDialogFilterInternal, reason: merged with bridge method [inline-methods] */
    public void lambda$deleteDialogFilter$69(MessagesController.DialogFilter dialogFilter) {
        try {
            this.dialogFilters.remove(dialogFilter);
            this.dialogFiltersMap.remove(dialogFilter.id);
            this.database.executeFast("DELETE FROM dialog_filter WHERE id = " + dialogFilter.id).stepThis().dispose();
            this.database.executeFast("DELETE FROM dialog_filter_ep WHERE id = " + dialogFilter.id).stepThis().dispose();
            this.database.executeFast("DELETE FROM dialog_filter_pin_v2 WHERE id = " + dialogFilter.id).stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:31:0x0072  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    private void deleteFromDownloadQueue(final ArrayList<Pair<Long, Integer>> arrayList, boolean z) throws Throwable {
        SQLiteDatabase sQLiteDatabase;
        Exception e;
        SQLiteDatabase sQLiteDatabase2;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        if (arrayList == null || arrayList.isEmpty()) {
            return;
        }
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            if (z) {
                try {
                    this.database.beginTransaction();
                } catch (Exception e2) {
                    e = e2;
                    checkSQLException(e);
                    if (sQLitePreparedStatement != null) {
                        sQLitePreparedStatement.dispose();
                    }
                    if (z || (sQLiteDatabase2 = this.database) == null) {
                        return;
                    }
                    sQLiteDatabase2.commitTransaction();
                }
            }
            sQLitePreparedStatementExecuteFast = this.database.executeFast("DELETE FROM download_queue WHERE uid = ? AND type = ?");
        } catch (Throwable th) {
            th = th;
        }
        try {
            int size = arrayList.size();
            for (int i = 0; i < size; i++) {
                Pair<Long, Integer> pair = arrayList.get(i);
                sQLitePreparedStatementExecuteFast.requery();
                sQLitePreparedStatementExecuteFast.bindLong(1, ((Long) pair.first).longValue());
                sQLitePreparedStatementExecuteFast.bindInteger(2, ((Integer) pair.second).intValue());
                sQLitePreparedStatementExecuteFast.step();
            }
            sQLitePreparedStatementExecuteFast.dispose();
            if (z) {
                this.database.commitTransaction();
            }
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda130
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$deleteFromDownloadQueue$177(arrayList);
                }
            });
            if (!z || (sQLiteDatabase2 = this.database) == null) {
                return;
            }
        } catch (Exception e3) {
            e = e3;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            checkSQLException(e);
            if (sQLitePreparedStatement != null) {
            }
            if (z) {
                return;
            } else {
                return;
            }
        } catch (Throwable th2) {
            th = th2;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            if (sQLitePreparedStatement != null) {
                sQLitePreparedStatement.dispose();
            }
            if (z && (sQLiteDatabase = this.database) != null) {
                sQLiteDatabase.commitTransaction();
            }
            throw th;
        }
        sQLiteDatabase2.commitTransaction();
    }

    private void doneHolesInTable(String str, long j, int i, long j2) {
        SQLiteDatabase sQLiteDatabase;
        StringBuilder sb;
        String str2;
        SQLiteDatabase sQLiteDatabase2;
        String str3;
        StringBuilder sb2;
        int i2 = 2;
        if (j2 != 0) {
            sQLiteDatabase = this.database;
            Locale locale = Locale.US;
            if (i == 0) {
                sb2 = new StringBuilder();
                sb2.append("DELETE FROM ");
                sb2.append(str);
                sb2.append(" WHERE uid = %d AND topic_id = %d");
                str2 = String.format(locale, sb2.toString(), Long.valueOf(j), Long.valueOf(j2));
            } else {
                sb2 = new StringBuilder();
                sb2.append("DELETE FROM ");
                sb2.append(str);
                sb2.append(" WHERE uid = %d AND topic_id = %d AND start = 0");
                str2 = String.format(locale, sb2.toString(), Long.valueOf(j), Long.valueOf(j2));
            }
        } else {
            sQLiteDatabase = this.database;
            Locale locale2 = Locale.US;
            if (i == 0) {
                sb = new StringBuilder();
                sb.append("DELETE FROM ");
                sb.append(str);
                sb.append(" WHERE uid = %d");
                str2 = String.format(locale2, sb.toString(), Long.valueOf(j));
            } else {
                sb = new StringBuilder();
                sb.append("DELETE FROM ");
                sb.append(str);
                sb.append(" WHERE uid = %d AND start = 0");
                str2 = String.format(locale2, sb.toString(), Long.valueOf(j));
            }
        }
        sQLiteDatabase.executeFast(str2).stepThis().dispose();
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                if (j2 != 0) {
                    sQLiteDatabase2 = this.database;
                    str3 = "REPLACE INTO " + str + " VALUES(?, ?, ?, ?)";
                } else {
                    sQLiteDatabase2 = this.database;
                    str3 = "REPLACE INTO " + str + " VALUES(?, ?, ?)";
                }
                sQLitePreparedStatementExecuteFast = sQLiteDatabase2.executeFast(str3);
                sQLitePreparedStatementExecuteFast.requery();
                sQLitePreparedStatementExecuteFast.bindLong(1, j);
                if (j2 != 0) {
                    sQLitePreparedStatementExecuteFast.bindLong(2, j2);
                    i2 = 3;
                }
                sQLitePreparedStatementExecuteFast.bindInteger(i2, 1);
                sQLitePreparedStatementExecuteFast.bindInteger(i2 + 1, 1);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
            } catch (Exception e) {
                throw e;
            }
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    private void ensureOpened() {
        try {
            this.openSync.await();
        } catch (Throwable unused) {
        }
    }

    private void fixUnsupportedMedia(TLRPC.Message message) {
        if (message == null) {
            return;
        }
        TLRPC.MessageMedia messageMedia = message.media;
        if (messageMedia instanceof TLRPC.TL_messageMediaUnsupported_old) {
            if (messageMedia.bytes.length == 0) {
                messageMedia.bytes = Utilities.intToBytes(208);
            }
        } else if (messageMedia instanceof TLRPC.TL_messageMediaUnsupported) {
            TLRPC.TL_messageMediaUnsupported_old tL_messageMediaUnsupported_old = new TLRPC.TL_messageMediaUnsupported_old();
            message.media = tL_messageMediaUnsupported_old;
            tL_messageMediaUnsupported_old.bytes = Utilities.intToBytes(208);
            message.flags |= LiteMode.FLAG_CALLS_ANIMATIONS;
        }
    }

    private String formatUserSearchName(TLRPC.User user) {
        StringBuilder sb = new StringBuilder();
        String str = user.first_name;
        if (str != null && str.length() > 0) {
            sb.append(user.first_name);
        }
        String str2 = user.last_name;
        if (str2 != null && str2.length() > 0) {
            if (sb.length() > 0) {
                sb.append(" ");
            }
            sb.append(user.last_name);
        }
        sb.append(";;;");
        String str3 = user.username;
        if (str3 == null || str3.length() <= 0) {
            ArrayList arrayList = user.usernames;
            if (arrayList != null && arrayList.size() > 0) {
                for (int i = 0; i < user.usernames.size(); i++) {
                    TLRPC.TL_username tL_username = (TLRPC.TL_username) user.usernames.get(i);
                    if (tL_username != null && tL_username.active) {
                        sb.append(tL_username.username);
                        sb.append(";;");
                    }
                }
            }
        } else {
            sb.append(user.username);
        }
        return sb.toString().toLowerCase();
    }

    private int getDialogFolderIdInternal(long j) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                if (this.unknownDialogsIds.get(j) == null) {
                    sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT folder_id FROM dialogs WHERE did = ?", Long.valueOf(j));
                    iIntValue = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : -1;
                    sQLiteCursorQueryFinalized.dispose();
                }
                return iIntValue;
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                    sQLiteCursorQueryFinalized.dispose();
                }
                return 0;
            }
        } finally {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
        }
    }

    public static MessagesStorage getInstance(int i) {
        MessagesStorage messagesStorage = Instance[i];
        if (messagesStorage == null) {
            synchronized (lockObjects[i]) {
                try {
                    messagesStorage = Instance[i];
                    if (messagesStorage == null) {
                        MessagesStorage[] messagesStorageArr = Instance;
                        MessagesStorage messagesStorage2 = new MessagesStorage(i);
                        messagesStorageArr[i] = messagesStorage2;
                        messagesStorage = messagesStorage2;
                    }
                } finally {
                }
            }
        }
        return messagesStorage;
    }

    private static boolean isEmpty(SparseArray<?> sparseArray) {
        return sparseArray == null || sparseArray.size() == 0;
    }

    private static boolean isEmpty(SparseIntArray sparseIntArray) {
        return sparseIntArray == null || sparseIntArray.size() == 0;
    }

    private static boolean isEmpty(LongSparseArray longSparseArray) {
        return longSparseArray == null || longSparseArray.size() == 0;
    }

    private static boolean isEmpty(List<?> list) {
        return list == null || list.isEmpty();
    }

    private static boolean isEmpty(LongSparseIntArray longSparseIntArray) {
        return longSparseIntArray == null || longSparseIntArray.size() == 0;
    }

    private boolean isForum(long j) {
        int i = this.dialogIsForum.get(j, -1);
        if (i == -1) {
            TLRPC.Chat chat = getChat(-j);
            i = (chat == null || !chat.forum) ? 0 : 1;
            this.dialogIsForum.put(j, i);
        }
        return i == 1;
    }

    private boolean isForumOrMonoForum(long j) {
        return isForum(j) || isMonoForum(j);
    }

    private boolean isMonoForumOrForumWithTabs(long j) {
        int i = this.dialogIsForumOrMonoForumWithTabs.get(j, -1);
        if (i == -1) {
            TLRPC.Chat chat = getChat(-j);
            i = (chat == null || !(chat.monoforum || (chat.forum && chat.forum_tabs))) ? 0 : 1;
            this.dialogIsForumOrMonoForumWithTabs.put(j, i);
        }
        return i == 1;
    }

    private boolean isValidKeyboardToSave(TLRPC.Message message) {
        TLRPC.ReplyMarkup replyMarkup = message.reply_markup;
        return (replyMarkup == null || (replyMarkup instanceof TLRPC.TL_replyInlineMarkup) || (replyMarkup.selective && !message.mentioned)) ? false : true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$addRecentLocalFile$79(TLRPC.Document document, String str, String str2) {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                if (document != null) {
                    sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE web_recent_v3 SET document = ? WHERE image_url = ?");
                    sQLitePreparedStatementExecuteFast.requery();
                    NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(document.getObjectSize());
                    document.serializeToStream(nativeByteBuffer);
                    sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBuffer);
                    sQLitePreparedStatementExecuteFast.bindString(2, str);
                    sQLitePreparedStatementExecuteFast.step();
                    sQLitePreparedStatementExecuteFast.dispose();
                    nativeByteBuffer.reuse();
                } else {
                    sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE web_recent_v3 SET local_url = ? WHERE image_url = ?");
                    sQLitePreparedStatementExecuteFast.requery();
                    sQLitePreparedStatementExecuteFast.bindString(1, str2);
                    sQLitePreparedStatementExecuteFast.bindString(2, str);
                    sQLitePreparedStatementExecuteFast.step();
                    sQLitePreparedStatementExecuteFast.dispose();
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLitePreparedStatementExecuteFast == null) {
                    return;
                }
            }
            sQLitePreparedStatementExecuteFast.dispose();
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$applyPhoneBookUpdates$143(String str, String str2) {
        try {
            if (str.length() != 0) {
                this.database.executeFast(String.format(Locale.US, "UPDATE user_phones_v7 SET deleted = 0 WHERE sphone IN(%s)", str)).stepThis().dispose();
            }
            if (str2.length() != 0) {
                this.database.executeFast(String.format(Locale.US, "UPDATE user_phones_v7 SET deleted = 1 WHERE sphone IN(%s)", str2)).stepThis().dispose();
            }
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$broadcastQuickRepliesMessagesChange$206() {
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.quickRepliesUpdated, new Object[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$broadcastScheduledMessagesChange$205(Long l, int i) {
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.scheduledMessagesUpdated, l, Integer.valueOf(i), Boolean.TRUE);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$checkIfFolderEmptyInternal$228(int i) {
        getMessagesController().onFolderEmpty(i);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public static /* synthetic */ int lambda$checkLoadedRemoteFilters$65(LongSparseIntArray longSparseIntArray, Long l, Long l2) {
        int i = longSparseIntArray.get(l.longValue());
        int i2 = longSparseIntArray.get(l2.longValue());
        if (i > i2) {
            return 1;
        }
        return i < i2 ? -1 : 0;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:118:0x0291 A[Catch: Exception -> 0x0020, TryCatch #0 {Exception -> 0x0020, blocks: (B:3:0x0002, B:5:0x0010, B:8:0x0023, B:10:0x005c, B:12:0x0075, B:14:0x0079, B:16:0x007d, B:17:0x0080, B:19:0x0084, B:20:0x0087, B:22:0x008b, B:23:0x008e, B:25:0x0092, B:26:0x0095, B:28:0x0099, B:29:0x009c, B:31:0x00a0, B:32:0x00a3, B:34:0x00a7, B:35:0x00aa, B:37:0x00ae, B:39:0x00b5, B:40:0x00b8, B:42:0x00cc, B:44:0x00df, B:49:0x00f9, B:51:0x0101, B:53:0x0107, B:55:0x010d, B:57:0x0115, B:59:0x0119, B:61:0x011f, B:63:0x0123, B:65:0x0129, B:67:0x0146, B:69:0x015a, B:72:0x016a, B:74:0x0178, B:76:0x0190, B:80:0x01b0, B:79:0x01a7, B:84:0x01c1, B:86:0x01ca, B:90:0x01e5, B:89:0x01d7, B:91:0x01e8, B:93:0x01f6, B:95:0x0208, B:101:0x0218, B:104:0x0222, B:106:0x022e, B:109:0x0255, B:111:0x0267, B:113:0x026d, B:115:0x0275, B:96:0x020d, B:99:0x0214, B:118:0x0291, B:119:0x0299, B:121:0x029f, B:126:0x02c5, B:128:0x02ca, B:130:0x02d0, B:133:0x02d7, B:134:0x02de, B:136:0x02e4, B:137:0x02ee, B:139:0x02f4, B:146:0x030a, B:149:0x0316, B:152:0x031e, B:153:0x0321, B:155:0x0326, B:131:0x02d3, B:127:0x02c8, B:156:0x032c, B:158:0x0332, B:161:0x0344, B:163:0x0349, B:223:0x04b8, B:48:0x00ee, B:166:0x0363, B:168:0x038d, B:170:0x0391, B:173:0x039c, B:175:0x03a5, B:177:0x03b4, B:183:0x03c4, B:185:0x03cc, B:186:0x03d1, B:188:0x03ec, B:189:0x03f2, B:178:0x03b9, B:181:0x03c0, B:192:0x0402, B:195:0x0409, B:197:0x040e, B:199:0x0415, B:201:0x0421, B:203:0x042b, B:204:0x042e, B:206:0x0434, B:218:0x0481, B:220:0x0489, B:208:0x0451, B:212:0x045f, B:214:0x046e, B:215:0x0471, B:217:0x0479, B:211:0x045d, B:221:0x0498, B:196:0x040c, B:193:0x0405, B:222:0x04ab, B:224:0x04c9, B:227:0x04dc, B:229:0x04f2, B:231:0x050b, B:233:0x0516, B:235:0x0520, B:236:0x0532, B:238:0x053d, B:240:0x054b, B:241:0x055d, B:243:0x0563, B:245:0x0569, B:247:0x056f, B:248:0x0581, B:230:0x0506), top: B:252:0x0002 }] */
    /* JADX WARN: Removed duplicated region for block: B:124:0x02c1  */
    /* JADX WARN: Removed duplicated region for block: B:158:0x0332 A[Catch: Exception -> 0x0020, TryCatch #0 {Exception -> 0x0020, blocks: (B:3:0x0002, B:5:0x0010, B:8:0x0023, B:10:0x005c, B:12:0x0075, B:14:0x0079, B:16:0x007d, B:17:0x0080, B:19:0x0084, B:20:0x0087, B:22:0x008b, B:23:0x008e, B:25:0x0092, B:26:0x0095, B:28:0x0099, B:29:0x009c, B:31:0x00a0, B:32:0x00a3, B:34:0x00a7, B:35:0x00aa, B:37:0x00ae, B:39:0x00b5, B:40:0x00b8, B:42:0x00cc, B:44:0x00df, B:49:0x00f9, B:51:0x0101, B:53:0x0107, B:55:0x010d, B:57:0x0115, B:59:0x0119, B:61:0x011f, B:63:0x0123, B:65:0x0129, B:67:0x0146, B:69:0x015a, B:72:0x016a, B:74:0x0178, B:76:0x0190, B:80:0x01b0, B:79:0x01a7, B:84:0x01c1, B:86:0x01ca, B:90:0x01e5, B:89:0x01d7, B:91:0x01e8, B:93:0x01f6, B:95:0x0208, B:101:0x0218, B:104:0x0222, B:106:0x022e, B:109:0x0255, B:111:0x0267, B:113:0x026d, B:115:0x0275, B:96:0x020d, B:99:0x0214, B:118:0x0291, B:119:0x0299, B:121:0x029f, B:126:0x02c5, B:128:0x02ca, B:130:0x02d0, B:133:0x02d7, B:134:0x02de, B:136:0x02e4, B:137:0x02ee, B:139:0x02f4, B:146:0x030a, B:149:0x0316, B:152:0x031e, B:153:0x0321, B:155:0x0326, B:131:0x02d3, B:127:0x02c8, B:156:0x032c, B:158:0x0332, B:161:0x0344, B:163:0x0349, B:223:0x04b8, B:48:0x00ee, B:166:0x0363, B:168:0x038d, B:170:0x0391, B:173:0x039c, B:175:0x03a5, B:177:0x03b4, B:183:0x03c4, B:185:0x03cc, B:186:0x03d1, B:188:0x03ec, B:189:0x03f2, B:178:0x03b9, B:181:0x03c0, B:192:0x0402, B:195:0x0409, B:197:0x040e, B:199:0x0415, B:201:0x0421, B:203:0x042b, B:204:0x042e, B:206:0x0434, B:218:0x0481, B:220:0x0489, B:208:0x0451, B:212:0x045f, B:214:0x046e, B:215:0x0471, B:217:0x0479, B:211:0x045d, B:221:0x0498, B:196:0x040c, B:193:0x0405, B:222:0x04ab, B:224:0x04c9, B:227:0x04dc, B:229:0x04f2, B:231:0x050b, B:233:0x0516, B:235:0x0520, B:236:0x0532, B:238:0x053d, B:240:0x054b, B:241:0x055d, B:243:0x0563, B:245:0x0569, B:247:0x056f, B:248:0x0581, B:230:0x0506), top: B:252:0x0002 }] */
    /* JADX WARN: Removed duplicated region for block: B:159:0x033e  */
    /* JADX WARN: Removed duplicated region for block: B:161:0x0344 A[Catch: Exception -> 0x0020, TryCatch #0 {Exception -> 0x0020, blocks: (B:3:0x0002, B:5:0x0010, B:8:0x0023, B:10:0x005c, B:12:0x0075, B:14:0x0079, B:16:0x007d, B:17:0x0080, B:19:0x0084, B:20:0x0087, B:22:0x008b, B:23:0x008e, B:25:0x0092, B:26:0x0095, B:28:0x0099, B:29:0x009c, B:31:0x00a0, B:32:0x00a3, B:34:0x00a7, B:35:0x00aa, B:37:0x00ae, B:39:0x00b5, B:40:0x00b8, B:42:0x00cc, B:44:0x00df, B:49:0x00f9, B:51:0x0101, B:53:0x0107, B:55:0x010d, B:57:0x0115, B:59:0x0119, B:61:0x011f, B:63:0x0123, B:65:0x0129, B:67:0x0146, B:69:0x015a, B:72:0x016a, B:74:0x0178, B:76:0x0190, B:80:0x01b0, B:79:0x01a7, B:84:0x01c1, B:86:0x01ca, B:90:0x01e5, B:89:0x01d7, B:91:0x01e8, B:93:0x01f6, B:95:0x0208, B:101:0x0218, B:104:0x0222, B:106:0x022e, B:109:0x0255, B:111:0x0267, B:113:0x026d, B:115:0x0275, B:96:0x020d, B:99:0x0214, B:118:0x0291, B:119:0x0299, B:121:0x029f, B:126:0x02c5, B:128:0x02ca, B:130:0x02d0, B:133:0x02d7, B:134:0x02de, B:136:0x02e4, B:137:0x02ee, B:139:0x02f4, B:146:0x030a, B:149:0x0316, B:152:0x031e, B:153:0x0321, B:155:0x0326, B:131:0x02d3, B:127:0x02c8, B:156:0x032c, B:158:0x0332, B:161:0x0344, B:163:0x0349, B:223:0x04b8, B:48:0x00ee, B:166:0x0363, B:168:0x038d, B:170:0x0391, B:173:0x039c, B:175:0x03a5, B:177:0x03b4, B:183:0x03c4, B:185:0x03cc, B:186:0x03d1, B:188:0x03ec, B:189:0x03f2, B:178:0x03b9, B:181:0x03c0, B:192:0x0402, B:195:0x0409, B:197:0x040e, B:199:0x0415, B:201:0x0421, B:203:0x042b, B:204:0x042e, B:206:0x0434, B:218:0x0481, B:220:0x0489, B:208:0x0451, B:212:0x045f, B:214:0x046e, B:215:0x0471, B:217:0x0479, B:211:0x045d, B:221:0x0498, B:196:0x040c, B:193:0x0405, B:222:0x04ab, B:224:0x04c9, B:227:0x04dc, B:229:0x04f2, B:231:0x050b, B:233:0x0516, B:235:0x0520, B:236:0x0532, B:238:0x053d, B:240:0x054b, B:241:0x055d, B:243:0x0563, B:245:0x0569, B:247:0x056f, B:248:0x0581, B:230:0x0506), top: B:252:0x0002 }] */
    /* JADX WARN: Removed duplicated region for block: B:163:0x0349 A[Catch: Exception -> 0x0020, TryCatch #0 {Exception -> 0x0020, blocks: (B:3:0x0002, B:5:0x0010, B:8:0x0023, B:10:0x005c, B:12:0x0075, B:14:0x0079, B:16:0x007d, B:17:0x0080, B:19:0x0084, B:20:0x0087, B:22:0x008b, B:23:0x008e, B:25:0x0092, B:26:0x0095, B:28:0x0099, B:29:0x009c, B:31:0x00a0, B:32:0x00a3, B:34:0x00a7, B:35:0x00aa, B:37:0x00ae, B:39:0x00b5, B:40:0x00b8, B:42:0x00cc, B:44:0x00df, B:49:0x00f9, B:51:0x0101, B:53:0x0107, B:55:0x010d, B:57:0x0115, B:59:0x0119, B:61:0x011f, B:63:0x0123, B:65:0x0129, B:67:0x0146, B:69:0x015a, B:72:0x016a, B:74:0x0178, B:76:0x0190, B:80:0x01b0, B:79:0x01a7, B:84:0x01c1, B:86:0x01ca, B:90:0x01e5, B:89:0x01d7, B:91:0x01e8, B:93:0x01f6, B:95:0x0208, B:101:0x0218, B:104:0x0222, B:106:0x022e, B:109:0x0255, B:111:0x0267, B:113:0x026d, B:115:0x0275, B:96:0x020d, B:99:0x0214, B:118:0x0291, B:119:0x0299, B:121:0x029f, B:126:0x02c5, B:128:0x02ca, B:130:0x02d0, B:133:0x02d7, B:134:0x02de, B:136:0x02e4, B:137:0x02ee, B:139:0x02f4, B:146:0x030a, B:149:0x0316, B:152:0x031e, B:153:0x0321, B:155:0x0326, B:131:0x02d3, B:127:0x02c8, B:156:0x032c, B:158:0x0332, B:161:0x0344, B:163:0x0349, B:223:0x04b8, B:48:0x00ee, B:166:0x0363, B:168:0x038d, B:170:0x0391, B:173:0x039c, B:175:0x03a5, B:177:0x03b4, B:183:0x03c4, B:185:0x03cc, B:186:0x03d1, B:188:0x03ec, B:189:0x03f2, B:178:0x03b9, B:181:0x03c0, B:192:0x0402, B:195:0x0409, B:197:0x040e, B:199:0x0415, B:201:0x0421, B:203:0x042b, B:204:0x042e, B:206:0x0434, B:218:0x0481, B:220:0x0489, B:208:0x0451, B:212:0x045f, B:214:0x046e, B:215:0x0471, B:217:0x0479, B:211:0x045d, B:221:0x0498, B:196:0x040c, B:193:0x0405, B:222:0x04ab, B:224:0x04c9, B:227:0x04dc, B:229:0x04f2, B:231:0x050b, B:233:0x0516, B:235:0x0520, B:236:0x0532, B:238:0x053d, B:240:0x054b, B:241:0x055d, B:243:0x0563, B:245:0x0569, B:247:0x056f, B:248:0x0581, B:230:0x0506), top: B:252:0x0002 }] */
    /* JADX WARN: Removed duplicated region for block: B:164:0x0359  */
    /* JADX WARN: Removed duplicated region for block: B:86:0x01ca A[Catch: Exception -> 0x0020, TryCatch #0 {Exception -> 0x0020, blocks: (B:3:0x0002, B:5:0x0010, B:8:0x0023, B:10:0x005c, B:12:0x0075, B:14:0x0079, B:16:0x007d, B:17:0x0080, B:19:0x0084, B:20:0x0087, B:22:0x008b, B:23:0x008e, B:25:0x0092, B:26:0x0095, B:28:0x0099, B:29:0x009c, B:31:0x00a0, B:32:0x00a3, B:34:0x00a7, B:35:0x00aa, B:37:0x00ae, B:39:0x00b5, B:40:0x00b8, B:42:0x00cc, B:44:0x00df, B:49:0x00f9, B:51:0x0101, B:53:0x0107, B:55:0x010d, B:57:0x0115, B:59:0x0119, B:61:0x011f, B:63:0x0123, B:65:0x0129, B:67:0x0146, B:69:0x015a, B:72:0x016a, B:74:0x0178, B:76:0x0190, B:80:0x01b0, B:79:0x01a7, B:84:0x01c1, B:86:0x01ca, B:90:0x01e5, B:89:0x01d7, B:91:0x01e8, B:93:0x01f6, B:95:0x0208, B:101:0x0218, B:104:0x0222, B:106:0x022e, B:109:0x0255, B:111:0x0267, B:113:0x026d, B:115:0x0275, B:96:0x020d, B:99:0x0214, B:118:0x0291, B:119:0x0299, B:121:0x029f, B:126:0x02c5, B:128:0x02ca, B:130:0x02d0, B:133:0x02d7, B:134:0x02de, B:136:0x02e4, B:137:0x02ee, B:139:0x02f4, B:146:0x030a, B:149:0x0316, B:152:0x031e, B:153:0x0321, B:155:0x0326, B:131:0x02d3, B:127:0x02c8, B:156:0x032c, B:158:0x0332, B:161:0x0344, B:163:0x0349, B:223:0x04b8, B:48:0x00ee, B:166:0x0363, B:168:0x038d, B:170:0x0391, B:173:0x039c, B:175:0x03a5, B:177:0x03b4, B:183:0x03c4, B:185:0x03cc, B:186:0x03d1, B:188:0x03ec, B:189:0x03f2, B:178:0x03b9, B:181:0x03c0, B:192:0x0402, B:195:0x0409, B:197:0x040e, B:199:0x0415, B:201:0x0421, B:203:0x042b, B:204:0x042e, B:206:0x0434, B:218:0x0481, B:220:0x0489, B:208:0x0451, B:212:0x045f, B:214:0x046e, B:215:0x0471, B:217:0x0479, B:211:0x045d, B:221:0x0498, B:196:0x040c, B:193:0x0405, B:222:0x04ab, B:224:0x04c9, B:227:0x04dc, B:229:0x04f2, B:231:0x050b, B:233:0x0516, B:235:0x0520, B:236:0x0532, B:238:0x053d, B:240:0x054b, B:241:0x055d, B:243:0x0563, B:245:0x0569, B:247:0x056f, B:248:0x0581, B:230:0x0506), top: B:252:0x0002 }] */
    /* JADX WARN: Removed duplicated region for block: B:93:0x01f6 A[Catch: Exception -> 0x0020, TryCatch #0 {Exception -> 0x0020, blocks: (B:3:0x0002, B:5:0x0010, B:8:0x0023, B:10:0x005c, B:12:0x0075, B:14:0x0079, B:16:0x007d, B:17:0x0080, B:19:0x0084, B:20:0x0087, B:22:0x008b, B:23:0x008e, B:25:0x0092, B:26:0x0095, B:28:0x0099, B:29:0x009c, B:31:0x00a0, B:32:0x00a3, B:34:0x00a7, B:35:0x00aa, B:37:0x00ae, B:39:0x00b5, B:40:0x00b8, B:42:0x00cc, B:44:0x00df, B:49:0x00f9, B:51:0x0101, B:53:0x0107, B:55:0x010d, B:57:0x0115, B:59:0x0119, B:61:0x011f, B:63:0x0123, B:65:0x0129, B:67:0x0146, B:69:0x015a, B:72:0x016a, B:74:0x0178, B:76:0x0190, B:80:0x01b0, B:79:0x01a7, B:84:0x01c1, B:86:0x01ca, B:90:0x01e5, B:89:0x01d7, B:91:0x01e8, B:93:0x01f6, B:95:0x0208, B:101:0x0218, B:104:0x0222, B:106:0x022e, B:109:0x0255, B:111:0x0267, B:113:0x026d, B:115:0x0275, B:96:0x020d, B:99:0x0214, B:118:0x0291, B:119:0x0299, B:121:0x029f, B:126:0x02c5, B:128:0x02ca, B:130:0x02d0, B:133:0x02d7, B:134:0x02de, B:136:0x02e4, B:137:0x02ee, B:139:0x02f4, B:146:0x030a, B:149:0x0316, B:152:0x031e, B:153:0x0321, B:155:0x0326, B:131:0x02d3, B:127:0x02c8, B:156:0x032c, B:158:0x0332, B:161:0x0344, B:163:0x0349, B:223:0x04b8, B:48:0x00ee, B:166:0x0363, B:168:0x038d, B:170:0x0391, B:173:0x039c, B:175:0x03a5, B:177:0x03b4, B:183:0x03c4, B:185:0x03cc, B:186:0x03d1, B:188:0x03ec, B:189:0x03f2, B:178:0x03b9, B:181:0x03c0, B:192:0x0402, B:195:0x0409, B:197:0x040e, B:199:0x0415, B:201:0x0421, B:203:0x042b, B:204:0x042e, B:206:0x0434, B:218:0x0481, B:220:0x0489, B:208:0x0451, B:212:0x045f, B:214:0x046e, B:215:0x0471, B:217:0x0479, B:211:0x045d, B:221:0x0498, B:196:0x040c, B:193:0x0405, B:222:0x04ab, B:224:0x04c9, B:227:0x04dc, B:229:0x04f2, B:231:0x050b, B:233:0x0516, B:235:0x0520, B:236:0x0532, B:238:0x053d, B:240:0x054b, B:241:0x055d, B:243:0x0563, B:245:0x0569, B:247:0x056f, B:248:0x0581, B:230:0x0506), top: B:252:0x0002 }] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$checkLoadedRemoteFilters$66(ArrayList arrayList, Runnable runnable) throws Throwable {
        TLRPC.messages_Dialogs tL_messages_dialogs;
        SparseArray<MessagesController.DialogFilter> sparseArray;
        int i;
        HashMap<Integer, HashSet<Long>> map;
        HashSet<Integer> hashSet;
        ArrayList<Long> arrayList2;
        HashMap<Long, TLRPC.InputPeer> map2;
        ArrayList<Long> arrayList3;
        TLRPC.DialogFilter dialogFilter;
        ArrayList arrayList4;
        ArrayList<Long> arrayList5;
        Long lValueOf;
        HashMap<Long, TLRPC.InputPeer> map3;
        ArrayList<Long> arrayList6;
        ArrayList<Long> arrayList7;
        HashMap<Long, TLRPC.InputPeer> map4;
        boolean z;
        boolean z2;
        boolean z3;
        int i2;
        boolean z4;
        boolean z5;
        ArrayList<Long> arrayList8;
        HashMap<Long, TLRPC.InputPeer> map5;
        LinkedHashMap linkedHashMap;
        int size;
        int i3;
        int size2;
        int i4;
        LinkedHashMap linkedHashMap2;
        boolean z6;
        int i5;
        int i6;
        HashMap<Integer, HashSet<Long>> map6;
        ArrayList<Long> arrayList9;
        TLRPC.DialogFilter dialogFilter2;
        LinkedHashMap linkedHashMap3;
        int i7;
        ArrayList arrayList10;
        try {
            SparseArray<MessagesController.DialogFilter> sparseArray2 = new SparseArray<>();
            int size3 = this.dialogFilters.size();
            for (int i8 = 0; i8 < size3; i8++) {
                MessagesController.DialogFilter dialogFilter3 = this.dialogFilters.get(i8);
                sparseArray2.put(dialogFilter3.id, dialogFilter3);
            }
            ArrayList<Integer> arrayList11 = new ArrayList<>();
            ArrayList<Long> arrayList12 = new ArrayList<>();
            HashMap<Long, TLRPC.InputPeer> map7 = new HashMap<>();
            ArrayList<Long> arrayList13 = new ArrayList<>();
            HashMap<Long, TLRPC.InputPeer> map8 = new HashMap<>();
            ArrayList arrayList14 = new ArrayList();
            HashMap<Long, TLRPC.InputPeer> map9 = new HashMap<>();
            ArrayList<MessagesController.DialogFilter> arrayList15 = new ArrayList<>();
            HashMap<Integer, HashSet<Long>> map10 = new HashMap<>();
            HashSet<Integer> hashSet2 = new HashSet<>();
            int size4 = arrayList.size();
            int i9 = 0;
            while (i9 < size4) {
                TLRPC.DialogFilter dialogFilter4 = (TLRPC.DialogFilter) arrayList.get(i9);
                int i10 = size4;
                arrayList11.add(Integer.valueOf(dialogFilter4.id));
                int i11 = dialogFilter4.contacts ? MessagesController.DIALOG_FILTER_FLAG_CONTACTS : 0;
                if (dialogFilter4.non_contacts) {
                    i11 |= MessagesController.DIALOG_FILTER_FLAG_NON_CONTACTS;
                }
                if (dialogFilter4.groups) {
                    i11 |= MessagesController.DIALOG_FILTER_FLAG_GROUPS;
                }
                if (dialogFilter4.broadcasts) {
                    i11 |= MessagesController.DIALOG_FILTER_FLAG_CHANNELS;
                }
                if (dialogFilter4.bots) {
                    i11 |= MessagesController.DIALOG_FILTER_FLAG_BOTS;
                }
                if (dialogFilter4.exclude_muted) {
                    i11 |= MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED;
                }
                if (dialogFilter4.exclude_read) {
                    i11 |= MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_READ;
                }
                if (dialogFilter4.exclude_archived) {
                    i11 |= MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED;
                }
                if (dialogFilter4 instanceof TLRPC.TL_dialogFilterChatlist) {
                    i11 |= MessagesController.DIALOG_FILTER_FLAG_CHATLIST;
                    if (dialogFilter4.has_my_invites) {
                        i11 |= MessagesController.DIALOG_FILTER_FLAG_CHATLIST_ADMIN;
                    }
                }
                ArrayList<Integer> arrayList16 = arrayList11;
                MessagesController.DialogFilter dialogFilter5 = this.dialogFiltersMap.get(dialogFilter4.id);
                boolean z7 = true;
                if (dialogFilter5 != null) {
                    sparseArray2.remove(dialogFilter4.id);
                    sparseArray = sparseArray2;
                    if (TextUtils.equals(dialogFilter5.name, dialogFilter4.title.text) && MediaDataController.entitiesEqual(dialogFilter5.entities, (ArrayList<TLRPC.MessageEntity>) dialogFilter4.title.entities)) {
                        z = false;
                    } else {
                        TLRPC.TL_textWithEntities tL_textWithEntities = dialogFilter4.title;
                        dialogFilter5.name = tL_textWithEntities.text;
                        dialogFilter5.entities = tL_textWithEntities.entities;
                        z = true;
                    }
                    boolean z8 = dialogFilter5.title_noanimate;
                    boolean z9 = z;
                    boolean z10 = dialogFilter4.title_noanimate;
                    if (z8 != z10) {
                        dialogFilter5.title_noanimate = z10;
                        z2 = true;
                    } else {
                        z2 = z9;
                    }
                    if ((dialogFilter4.flags & 134217728) != 0) {
                        i2 = dialogFilter4.color;
                        z3 = z2;
                    } else {
                        z3 = z2;
                        i2 = -1;
                    }
                    if (dialogFilter5.color != i2) {
                        dialogFilter5.color = i2;
                        z4 = true;
                    } else {
                        z4 = z3;
                    }
                    if (dialogFilter5.flags != i11) {
                        dialogFilter5.flags = i11;
                        z4 = true;
                        z5 = true;
                    } else {
                        z5 = false;
                    }
                    boolean z11 = z4;
                    HashSet hashSet3 = new HashSet(dialogFilter5.alwaysShow);
                    hashSet3.addAll(dialogFilter5.neverShow);
                    HashSet<Long> hashSet4 = new HashSet<>();
                    boolean z12 = z5;
                    if (dialogFilter5.pinnedDialogs.size() != 0) {
                        ArrayList arrayList17 = new ArrayList();
                        i = i9;
                        int size5 = dialogFilter5.pinnedDialogs.size();
                        arrayList8 = arrayList13;
                        int i12 = 0;
                        boolean z13 = false;
                        while (i12 < size5) {
                            int i13 = size5;
                            long jKeyAt = dialogFilter5.pinnedDialogs.keyAt(i12);
                            if (DialogObject.isEncryptedDialog(jKeyAt)) {
                                z13 = true;
                            }
                            arrayList17.add(Long.valueOf(jKeyAt));
                            i12++;
                            size5 = i13;
                        }
                        if (z13) {
                            linkedHashMap = new LinkedHashMap();
                            final LongSparseIntArray longSparseIntArray = dialogFilter5.pinnedDialogs;
                            map5 = map8;
                            Collections.sort(arrayList17, new Comparator() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda117
                                @Override // java.util.Comparator
                                public final int compare(Object obj, Object obj2) {
                                    return MessagesStorage.lambda$checkLoadedRemoteFilters$65(longSparseIntArray, (Long) obj, (Long) obj2);
                                }
                            });
                            int size6 = arrayList17.size();
                            int i14 = 0;
                            while (i14 < size6) {
                                int i15 = size6;
                                Long l = (Long) arrayList17.get(i14);
                                if (DialogObject.isEncryptedDialog(l.longValue())) {
                                    arrayList10 = arrayList17;
                                    linkedHashMap.put(Integer.valueOf(i14), l);
                                } else {
                                    arrayList10 = arrayList17;
                                }
                                i14++;
                                arrayList17 = arrayList10;
                                size6 = i15;
                            }
                            size = dialogFilter5.pinnedDialogs.size();
                            for (i3 = 0; i3 < size; i3++) {
                                long jKeyAt2 = dialogFilter5.pinnedDialogs.keyAt(i3);
                                if (!DialogObject.isEncryptedDialog(jKeyAt2)) {
                                    hashSet4.add(Long.valueOf(jKeyAt2));
                                    hashSet3.remove(Long.valueOf(jKeyAt2));
                                }
                            }
                            dialogFilter5.pinnedDialogs.clear();
                            size2 = dialogFilter4.pinned_peers.size();
                            i4 = 0;
                            while (i4 < size2) {
                                TLRPC.InputPeer inputPeer = (TLRPC.InputPeer) dialogFilter4.pinned_peers.get(i4);
                                HashMap<Integer, HashSet<Long>> map11 = map10;
                                HashSet<Integer> hashSet5 = hashSet2;
                                long j = inputPeer.user_id;
                                if (j == 0) {
                                    long j2 = inputPeer.chat_id;
                                    if (j2 == 0) {
                                        j2 = inputPeer.channel_id;
                                    }
                                    j = -j2;
                                }
                                Long lValueOf2 = Long.valueOf(j);
                                int size7 = dialogFilter5.pinnedDialogs.size();
                                if (linkedHashMap != null) {
                                    i7 = size2;
                                    while (true) {
                                        Long l2 = (Long) linkedHashMap.remove(Integer.valueOf(size7));
                                        if (l2 == null) {
                                            break;
                                        }
                                        dialogFilter5.pinnedDialogs.put(l2.longValue(), size7);
                                        size7++;
                                        arrayList12 = arrayList12;
                                        dialogFilter4 = dialogFilter4;
                                        linkedHashMap = linkedHashMap;
                                    }
                                    arrayList9 = arrayList12;
                                    dialogFilter2 = dialogFilter4;
                                    linkedHashMap3 = linkedHashMap;
                                } else {
                                    arrayList9 = arrayList12;
                                    dialogFilter2 = dialogFilter4;
                                    linkedHashMap3 = linkedHashMap;
                                    i7 = size2;
                                }
                                dialogFilter5.pinnedDialogs.put(lValueOf2.longValue(), size7);
                                hashSet3.remove(lValueOf2);
                                if (!hashSet4.remove(lValueOf2)) {
                                    if (!map9.containsKey(lValueOf2)) {
                                        arrayList14.add(lValueOf2);
                                        map9.put(lValueOf2, inputPeer);
                                    }
                                    z11 = true;
                                }
                                i4++;
                                map10 = map11;
                                hashSet2 = hashSet5;
                                size2 = i7;
                                arrayList12 = arrayList9;
                                dialogFilter4 = dialogFilter2;
                                linkedHashMap = linkedHashMap3;
                            }
                            ArrayList<Long> arrayList18 = arrayList12;
                            TLRPC.DialogFilter dialogFilter6 = dialogFilter4;
                            linkedHashMap2 = linkedHashMap;
                            HashMap<Integer, HashSet<Long>> map12 = map10;
                            hashSet = hashSet2;
                            if (linkedHashMap2 != null) {
                                Iterator it = linkedHashMap2.entrySet().iterator();
                                while (it.hasNext()) {
                                    dialogFilter5.pinnedDialogs.put(((Long) ((Map.Entry) it.next()).getValue()).longValue(), dialogFilter5.pinnedDialogs.size());
                                }
                            }
                            z6 = z12;
                            i6 = 0;
                            for (i5 = 2; i6 < i5; i5 = 2) {
                                TLRPC.DialogFilter dialogFilter7 = dialogFilter6;
                                ArrayList<Long> peerIds = toPeerIds(i6 == 0 ? dialogFilter7.include_peers : dialogFilter7.exclude_peers);
                                ArrayList<Long> arrayList19 = i6 == 0 ? dialogFilter5.alwaysShow : dialogFilter5.neverShow;
                                if (i6 == 0) {
                                    ArrayList<Long> peerIds2 = toPeerIds(dialogFilter7.pinned_peers);
                                    for (int i16 = 0; i16 < peerIds2.size(); i16++) {
                                        peerIds.remove(peerIds2.get(i16));
                                    }
                                    peerIds.addAll(0, peerIds2);
                                }
                                int size8 = peerIds.size();
                                boolean z14 = peerIds.size() != arrayList19.size();
                                if (!z14) {
                                    int i17 = 0;
                                    while (true) {
                                        if (i17 >= size8) {
                                            break;
                                        }
                                        if (!arrayList19.contains(peerIds.get(i17))) {
                                            z14 = true;
                                            break;
                                        }
                                        i17++;
                                    }
                                }
                                if (z14) {
                                    if (i6 == 0) {
                                        dialogFilter5.alwaysShow = peerIds;
                                    } else {
                                        dialogFilter5.neverShow = peerIds;
                                    }
                                    z6 = true;
                                    z11 = true;
                                }
                                i6++;
                                dialogFilter6 = dialogFilter7;
                            }
                            if (hashSet4.isEmpty()) {
                                map6 = map12;
                                map6.put(Integer.valueOf(dialogFilter5.id), hashSet4);
                            } else {
                                map6 = map12;
                                z7 = z11;
                            }
                            if (z7) {
                                arrayList15.add(dialogFilter5);
                            }
                            if (z6) {
                                map = map6;
                            } else {
                                hashSet.add(Integer.valueOf(dialogFilter5.id));
                                map = map6;
                                hashSet = hashSet;
                            }
                            arrayList2 = arrayList8;
                            map2 = map5;
                            arrayList3 = arrayList18;
                        } else {
                            map5 = map8;
                        }
                    } else {
                        arrayList8 = arrayList13;
                        map5 = map8;
                        i = i9;
                    }
                    linkedHashMap = null;
                    size = dialogFilter5.pinnedDialogs.size();
                    while (i3 < size) {
                    }
                    dialogFilter5.pinnedDialogs.clear();
                    size2 = dialogFilter4.pinned_peers.size();
                    i4 = 0;
                    while (i4 < size2) {
                    }
                    ArrayList<Long> arrayList182 = arrayList12;
                    TLRPC.DialogFilter dialogFilter62 = dialogFilter4;
                    linkedHashMap2 = linkedHashMap;
                    HashMap<Integer, HashSet<Long>> map122 = map10;
                    hashSet = hashSet2;
                    if (linkedHashMap2 != null) {
                    }
                    z6 = z12;
                    i6 = 0;
                    while (i6 < i5) {
                    }
                    if (hashSet4.isEmpty()) {
                    }
                    if (z7) {
                    }
                    if (z6) {
                    }
                    arrayList2 = arrayList8;
                    map2 = map5;
                    arrayList3 = arrayList182;
                } else {
                    sparseArray = sparseArray2;
                    ArrayList<Long> arrayList20 = arrayList12;
                    TLRPC.DialogFilter dialogFilter8 = dialogFilter4;
                    ArrayList<Long> arrayList21 = arrayList13;
                    HashMap<Long, TLRPC.InputPeer> map13 = map8;
                    i = i9;
                    MessagesController.DialogFilter dialogFilter9 = new MessagesController.DialogFilter();
                    dialogFilter9.id = dialogFilter8.id;
                    dialogFilter9.flags = i11;
                    TLRPC.TL_textWithEntities tL_textWithEntities2 = dialogFilter8.title;
                    dialogFilter9.name = tL_textWithEntities2.text;
                    dialogFilter9.entities = tL_textWithEntities2.entities;
                    dialogFilter9.title_noanimate = dialogFilter8.title_noanimate;
                    dialogFilter9.color = (dialogFilter8.flags & 134217728) != 0 ? dialogFilter8.color : -1;
                    dialogFilter9.pendingUnreadCount = -1;
                    int i18 = 0;
                    for (int i19 = 2; i18 < i19; i19 = 2) {
                        if (i18 == 0) {
                            int size9 = dialogFilter8.pinned_peers.size();
                            int i20 = 0;
                            while (i20 < size9) {
                                TLRPC.InputPeer inputPeer2 = (TLRPC.InputPeer) dialogFilter8.pinned_peers.get(i20);
                                int i21 = i18;
                                long j3 = inputPeer2.user_id;
                                if (j3 == 0) {
                                    long j4 = inputPeer2.chat_id;
                                    if (j4 == 0) {
                                        j4 = inputPeer2.channel_id;
                                    }
                                    j3 = -j4;
                                }
                                Long lValueOf3 = Long.valueOf(j3);
                                if (!dialogFilter9.alwaysShow.contains(lValueOf3)) {
                                    dialogFilter9.alwaysShow.add(lValueOf3);
                                }
                                HashMap<Integer, HashSet<Long>> map14 = map10;
                                HashSet<Integer> hashSet6 = hashSet2;
                                dialogFilter9.pinnedDialogs.put(lValueOf3.longValue(), dialogFilter9.pinnedDialogs.size() + 1);
                                if (!map9.containsKey(lValueOf3)) {
                                    arrayList14.add(lValueOf3);
                                    map9.put(lValueOf3, inputPeer2);
                                }
                                i20++;
                                i18 = i21;
                                map10 = map14;
                                hashSet2 = hashSet6;
                            }
                        }
                        int i22 = i18;
                        HashMap<Integer, HashSet<Long>> map15 = map10;
                        HashSet<Integer> hashSet7 = hashSet2;
                        ArrayList arrayList22 = i22 == 0 ? dialogFilter8.include_peers : dialogFilter8.exclude_peers;
                        ArrayList<Long> arrayList23 = i22 == 0 ? dialogFilter9.alwaysShow : dialogFilter9.neverShow;
                        int size10 = arrayList22.size();
                        int i23 = 0;
                        while (i23 < size10) {
                            TLRPC.InputPeer inputPeer3 = (TLRPC.InputPeer) arrayList22.get(i23);
                            long j5 = inputPeer3.user_id;
                            if (j5 != 0) {
                                Long lValueOf4 = Long.valueOf(j5);
                                if (!arrayList23.contains(lValueOf4)) {
                                    arrayList23.add(lValueOf4);
                                }
                                if (map7.containsKey(lValueOf4)) {
                                    arrayList5 = arrayList20;
                                    dialogFilter = dialogFilter8;
                                    arrayList4 = arrayList22;
                                    arrayList6 = arrayList23;
                                    arrayList7 = arrayList21;
                                    map3 = map13;
                                } else {
                                    arrayList5 = arrayList20;
                                    arrayList5.add(lValueOf4);
                                    dialogFilter = dialogFilter8;
                                    arrayList6 = arrayList23;
                                    lValueOf = lValueOf4;
                                    map4 = map7;
                                    map3 = map13;
                                    arrayList4 = arrayList22;
                                    arrayList7 = arrayList21;
                                    map4.put(lValueOf, inputPeer3);
                                }
                            } else {
                                dialogFilter = dialogFilter8;
                                arrayList4 = arrayList22;
                                arrayList5 = arrayList20;
                                long j6 = inputPeer3.chat_id;
                                if (j6 == 0) {
                                    j6 = inputPeer3.channel_id;
                                }
                                lValueOf = Long.valueOf(j6);
                                Long lValueOf5 = Long.valueOf(-j6);
                                if (!arrayList23.contains(lValueOf5)) {
                                    arrayList23.add(lValueOf5);
                                }
                                map3 = map13;
                                if (map3.containsKey(lValueOf)) {
                                    arrayList6 = arrayList23;
                                    arrayList7 = arrayList21;
                                } else {
                                    arrayList7 = arrayList21;
                                    arrayList7.add(lValueOf);
                                    arrayList6 = arrayList23;
                                    map4 = map3;
                                    map4.put(lValueOf, inputPeer3);
                                }
                            }
                            i23++;
                            map13 = map3;
                            arrayList21 = arrayList7;
                            arrayList22 = arrayList4;
                            arrayList20 = arrayList5;
                            arrayList23 = arrayList6;
                            dialogFilter8 = dialogFilter;
                        }
                        i18 = i22 + 1;
                        map10 = map15;
                        hashSet2 = hashSet7;
                        dialogFilter8 = dialogFilter8;
                    }
                    map = map10;
                    hashSet = hashSet2;
                    arrayList2 = arrayList21;
                    map2 = map13;
                    arrayList3 = arrayList20;
                    arrayList15.add(dialogFilter9);
                }
                i9 = i + 1;
                map8 = map2;
                arrayList13 = arrayList2;
                arrayList12 = arrayList3;
                size4 = i10;
                arrayList11 = arrayList16;
                sparseArray2 = sparseArray;
                map10 = map;
                hashSet2 = hashSet;
            }
            SparseArray<MessagesController.DialogFilter> sparseArray3 = sparseArray2;
            ArrayList<Long> arrayList24 = arrayList13;
            ArrayList<Integer> arrayList25 = arrayList11;
            HashMap<Integer, HashSet<Long>> map16 = map10;
            HashSet<Integer> hashSet8 = hashSet2;
            ArrayList<Long> arrayList26 = arrayList12;
            HashMap<Long, TLRPC.InputPeer> map17 = map8;
            if (arrayList14.isEmpty()) {
                tL_messages_dialogs = new TLRPC.TL_messages_dialogs();
            } else {
                tL_messages_dialogs = loadDialogsByIds(TextUtils.join(",", arrayList14), arrayList26, arrayList24, new ArrayList<>());
                int size11 = tL_messages_dialogs.dialogs.size();
                for (int i24 = 0; i24 < size11; i24++) {
                    map9.remove(Long.valueOf(((TLRPC.Dialog) tL_messages_dialogs.dialogs.get(i24)).id));
                }
            }
            ArrayList<TLRPC.User> arrayList27 = new ArrayList<>();
            if (!arrayList26.isEmpty()) {
                getUsersInternal(arrayList26, arrayList27);
                int size12 = arrayList27.size();
                for (int i25 = 0; i25 < size12; i25++) {
                    map7.remove(Long.valueOf(arrayList27.get(i25).id));
                }
            }
            ArrayList<TLRPC.Chat> arrayList28 = new ArrayList<>();
            if (!arrayList24.isEmpty()) {
                getChatsInternal(TextUtils.join(",", arrayList24), arrayList28);
                int size13 = arrayList28.size();
                for (int i26 = 0; i26 < size13; i26++) {
                    map17.remove(Long.valueOf(arrayList28.get(i26).id));
                }
            }
            if (map7.isEmpty() && map17.isEmpty() && map9.isEmpty()) {
                lambda$processLoadedFilterPeers$68(tL_messages_dialogs, null, arrayList27, arrayList28, arrayList15, sparseArray3, arrayList25, map16, hashSet8, runnable);
            } else {
                getMessagesController().loadFilterPeers(map9, map7, map17, tL_messages_dialogs, new TLRPC.TL_messages_dialogs(), arrayList27, arrayList28, arrayList15, sparseArray3, arrayList25, map16, hashSet8, runnable);
            }
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$checkMessageByRandomId$148(long j, boolean[] zArr, CountDownLatch countDownLatch) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT random_id FROM randoms_v2 WHERE random_id = %d", Long.valueOf(j)), new Object[0]);
                if (sQLiteCursorQueryFinalized.next()) {
                    zArr[0] = true;
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            countDownLatch.countDown();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$checkMessageId$149(long j, int i, boolean[] zArr, CountDownLatch countDownLatch) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT mid FROM messages_v2 WHERE uid = %d AND mid = %d", Long.valueOf(j), Integer.valueOf(i)), new Object[0]);
                if (sQLiteCursorQueryFinalized.next()) {
                    zArr[0] = true;
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            countDownLatch.countDown();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$checkSQLException$8() {
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.onDatabaseReset, new Object[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$cleanup$5() {
        getMessagesController().getDifference();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$cleanup$6(boolean z) throws Exception {
        cleanupInternal(true);
        openDatabase(1);
        if (z) {
            Utilities.stageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda75
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$cleanup$5();
                }
            });
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$clearDownloadQueue$178(int i) {
        try {
            (i == 0 ? this.database.executeFast("DELETE FROM download_queue WHERE 1") : this.database.executeFast(String.format(Locale.US, "DELETE FROM download_queue WHERE type = %d", Integer.valueOf(i)))).stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$clearLocalDatabase$43() {
        getMessagesController().getSavedMessagesController().cleanup();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:126:0x0492  */
    /* JADX WARN: Removed duplicated region for block: B:128:0x0497  */
    /* JADX WARN: Removed duplicated region for block: B:130:0x049c  */
    /* JADX WARN: Removed duplicated region for block: B:132:0x04a1 A[PHI: r8
      0x04a1: PHI (r8v5 org.telegram.SQLite.SQLiteCursor) = (r8v6 org.telegram.SQLite.SQLiteCursor), (r8v17 org.telegram.SQLite.SQLiteCursor) binds: [B:131:0x049f, B:103:0x045e] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:139:0x04ae  */
    /* JADX WARN: Removed duplicated region for block: B:141:0x04b3  */
    /* JADX WARN: Removed duplicated region for block: B:143:0x04b8  */
    /* JADX WARN: Removed duplicated region for block: B:145:0x04bd  */
    /* JADX WARN: Removed duplicated region for block: B:78:0x03d3 A[Catch: all -> 0x03eb, Exception -> 0x03ef, TRY_LEAVE, TryCatch #23 {Exception -> 0x03ef, all -> 0x03eb, blocks: (B:75:0x02de, B:76:0x02e2, B:78:0x03d3), top: B:165:0x02de }] */
    /* JADX WARN: Removed duplicated region for block: B:89:0x03f3  */
    /* JADX WARN: Type inference failed for: r7v13 */
    /* JADX WARN: Type inference failed for: r7v14 */
    /* JADX WARN: Type inference failed for: r7v18 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$clearLocalDatabase$44() throws Throwable {
        Throwable th;
        SQLitePreparedStatement sQLitePreparedStatement;
        Exception exc;
        SQLiteCursor sQLiteCursorQueryFinalized;
        SQLitePreparedStatement sQLitePreparedStatement2;
        SQLiteDatabase sQLiteDatabase;
        SQLiteDatabase sQLiteDatabase2;
        SQLiteCursor sQLiteCursor;
        ArrayList arrayList;
        int i;
        SQLiteCursor sQLiteCursor2;
        int i2;
        Exception exc2;
        try {
            ArrayList arrayList2 = new ArrayList();
            this.database.executeFast("DELETE FROM reaction_mentions").stepThis().dispose();
            this.database.executeFast("DELETE FROM reaction_mentions_topics").stepThis().dispose();
            this.database.executeFast("DELETE FROM downloading_documents").stepThis().dispose();
            this.database.executeFast("DELETE FROM attach_menu_bots").stepThis().dispose();
            this.database.executeFast("DELETE FROM animated_emoji").stepThis().dispose();
            this.database.executeFast("DELETE FROM stickers_v2").stepThis().dispose();
            this.database.executeFast("DELETE FROM stickersets2").stepThis().dispose();
            this.database.executeFast("DELETE FROM messages_holes_topics").stepThis().dispose();
            this.database.executeFast("DELETE FROM messages_topics").stepThis().dispose();
            this.database.executeFast("DELETE FROM saved_dialogs").stepThis().dispose();
            this.database.executeFast("DELETE FROM topics").stepThis().dispose();
            this.database.executeFast("DELETE FROM media_holes_topics").stepThis().dispose();
            this.database.executeFast("DELETE FROM media_topics").stepThis().dispose();
            this.database.executeFast("DELETE FROM media_counts_topics").stepThis().dispose();
            this.database.executeFast("DELETE FROM chat_pinned_v2").stepThis().dispose();
            this.database.executeFast("DELETE FROM chat_pinned_count").stepThis().dispose();
            this.database.executeFast("DELETE FROM profile_stories").stepThis().dispose();
            this.database.executeFast("DELETE FROM story_pushes").stepThis().dispose();
            this.database.executeFast("DELETE FROM dialog_photos").stepThis().dispose();
            this.database.executeFast("DELETE FROM dialog_photos_count").stepThis().dispose();
            this.database.executeFast("DELETE FROM saved_reaction_tags").stepThis().dispose();
            this.database.executeFast("DELETE FROM business_replies").stepThis().dispose();
            this.database.executeFast("DELETE FROM quick_replies_messages").stepThis().dispose();
            this.database.executeFast("DELETE FROM effects").stepThis().dispose();
            this.database.executeFast("DELETE FROM app_config").stepThis().dispose();
            this.database.executeFast("DELETE FROM star_gifts2").stepThis().dispose();
            int i3 = 0;
            SQLiteCursor sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT did FROM dialogs WHERE 1", new Object[0]);
            while (sQLiteCursorQueryFinalized2.next()) {
                try {
                    long jLongValue = sQLiteCursorQueryFinalized2.longValue(0);
                    if (!DialogObject.isEncryptedDialog(jLongValue)) {
                        arrayList2.add(Long.valueOf(jLongValue));
                    }
                } catch (Exception e) {
                    exc = e;
                    sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                } catch (Throwable th2) {
                    th = th2;
                    sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                }
            }
            sQLiteCursorQueryFinalized2.dispose();
            SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO messages_holes VALUES(?, ?, ?)");
            try {
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("REPLACE INTO media_holes_v2 VALUES(?, ?, ?, ?)");
                try {
                    this.database.beginTransaction();
                    sQLiteCursorQueryFinalized = null;
                    int i4 = 0;
                    while (i4 < arrayList2.size()) {
                        try {
                            Long l = (Long) arrayList2.get(i4);
                            sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT COUNT(mid) FROM messages_v2 WHERE uid = " + l, new Object[i3]);
                            int iIntValue = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(i3) : 0;
                            sQLiteCursorQueryFinalized.dispose();
                            if (iIntValue <= 2) {
                                arrayList = arrayList2;
                                i = i4;
                            } else {
                                SQLiteCursor sQLiteCursorQueryFinalized3 = this.database.queryFinalized("SELECT last_mid_i, last_mid FROM dialogs WHERE did = " + l, new Object[i3]);
                                try {
                                    if (sQLiteCursorQueryFinalized3.next()) {
                                        long jLongValue2 = sQLiteCursorQueryFinalized3.longValue(i3);
                                        arrayList = arrayList2;
                                        long jLongValue3 = sQLiteCursorQueryFinalized3.longValue(1);
                                        SQLiteCursor sQLiteCursorQueryFinalized4 = this.database.queryFinalized("SELECT data FROM messages_v2 WHERE uid = " + l + " AND mid IN (" + jLongValue2 + "," + jLongValue3 + ")", new Object[i3]);
                                        int i5 = -1;
                                        while (sQLiteCursorQueryFinalized4.next()) {
                                            try {
                                                NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized4.byteBufferValue(i3 ? 1 : 0);
                                                if (nativeByteBufferByteBufferValue != null) {
                                                    sQLiteCursor2 = sQLiteCursorQueryFinalized3;
                                                    try {
                                                        try {
                                                            TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(i3), i3);
                                                            if (messageTLdeserialize != null) {
                                                                i5 = messageTLdeserialize.id;
                                                                try {
                                                                    i = i4;
                                                                    try {
                                                                        messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, UserConfig.getInstance(this.currentAccount).clientUserId);
                                                                        i5 = i5;
                                                                    } catch (Exception e2) {
                                                                        exc2 = e2;
                                                                        i5 = i5;
                                                                        try {
                                                                            checkSQLException(exc2);
                                                                            i2 = i5;
                                                                            sQLiteCursorQueryFinalized4.dispose();
                                                                            this.database.executeFast("DELETE FROM messages_v2 WHERE uid = " + l + " AND mid != " + jLongValue2 + " AND mid != " + jLongValue3).stepThis().dispose();
                                                                            SQLiteDatabase sQLiteDatabase3 = this.database;
                                                                            StringBuilder sb = new StringBuilder();
                                                                            sb.append("DELETE FROM messages_holes WHERE uid = ");
                                                                            sb.append(l);
                                                                            sQLiteDatabase3.executeFast(sb.toString()).stepThis().dispose();
                                                                            this.database.executeFast("DELETE FROM bot_keyboard WHERE uid = " + l).stepThis().dispose();
                                                                            this.database.executeFast("DELETE FROM bot_keyboard_topics WHERE uid = " + l).stepThis().dispose();
                                                                            this.database.executeFast("DELETE FROM media_counts_v2 WHERE uid = " + l).stepThis().dispose();
                                                                            this.database.executeFast("DELETE FROM media_v4 WHERE uid = " + l).stepThis().dispose();
                                                                            this.database.executeFast("DELETE FROM media_holes_v2 WHERE uid = " + l).stepThis().dispose();
                                                                            MediaDataController.getInstance(this.currentAccount).clearBotKeyboard(l.longValue());
                                                                            if (i2 == -1) {
                                                                            }
                                                                            sQLiteCursor.dispose();
                                                                            sQLiteCursorQueryFinalized = null;
                                                                            i4 = i + 1;
                                                                            arrayList2 = arrayList;
                                                                            i3 = 0;
                                                                        } catch (Exception e3) {
                                                                            e = e3;
                                                                            sQLiteCursor = sQLiteCursor2;
                                                                            exc = e;
                                                                            sQLiteCursorQueryFinalized = sQLiteCursor;
                                                                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                                                            sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast2;
                                                                            try {
                                                                                checkSQLException(exc);
                                                                                sQLiteDatabase2 = this.database;
                                                                                if (sQLiteDatabase2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement2 != null) {
                                                                                }
                                                                                if (sQLiteCursorQueryFinalized != null) {
                                                                                }
                                                                                reset();
                                                                            } catch (Throwable th3) {
                                                                                th = th3;
                                                                                sQLiteDatabase = this.database;
                                                                                if (sQLiteDatabase != null) {
                                                                                    sQLiteDatabase.commitTransaction();
                                                                                }
                                                                                if (sQLitePreparedStatement != null) {
                                                                                    sQLitePreparedStatement.dispose();
                                                                                }
                                                                                if (sQLitePreparedStatement2 != null) {
                                                                                    sQLitePreparedStatement2.dispose();
                                                                                }
                                                                                if (sQLiteCursorQueryFinalized != null) {
                                                                                    sQLiteCursorQueryFinalized.dispose();
                                                                                }
                                                                                reset();
                                                                                throw th;
                                                                            }
                                                                        } catch (Throwable th4) {
                                                                            th = th4;
                                                                            sQLiteCursor = sQLiteCursor2;
                                                                            th = th;
                                                                            sQLiteCursorQueryFinalized = sQLiteCursor;
                                                                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                                                            sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast2;
                                                                            sQLiteDatabase = this.database;
                                                                            if (sQLiteDatabase != null) {
                                                                            }
                                                                            if (sQLitePreparedStatement != null) {
                                                                            }
                                                                            if (sQLitePreparedStatement2 != null) {
                                                                            }
                                                                            if (sQLiteCursorQueryFinalized != null) {
                                                                            }
                                                                            reset();
                                                                            throw th;
                                                                        }
                                                                    }
                                                                } catch (Exception e4) {
                                                                    e = e4;
                                                                    i = i4;
                                                                    exc2 = e;
                                                                    checkSQLException(exc2);
                                                                    i2 = i5;
                                                                    sQLiteCursorQueryFinalized4.dispose();
                                                                    this.database.executeFast("DELETE FROM messages_v2 WHERE uid = " + l + " AND mid != " + jLongValue2 + " AND mid != " + jLongValue3).stepThis().dispose();
                                                                    SQLiteDatabase sQLiteDatabase32 = this.database;
                                                                    StringBuilder sb2 = new StringBuilder();
                                                                    sb2.append("DELETE FROM messages_holes WHERE uid = ");
                                                                    sb2.append(l);
                                                                    sQLiteDatabase32.executeFast(sb2.toString()).stepThis().dispose();
                                                                    this.database.executeFast("DELETE FROM bot_keyboard WHERE uid = " + l).stepThis().dispose();
                                                                    this.database.executeFast("DELETE FROM bot_keyboard_topics WHERE uid = " + l).stepThis().dispose();
                                                                    this.database.executeFast("DELETE FROM media_counts_v2 WHERE uid = " + l).stepThis().dispose();
                                                                    this.database.executeFast("DELETE FROM media_v4 WHERE uid = " + l).stepThis().dispose();
                                                                    this.database.executeFast("DELETE FROM media_holes_v2 WHERE uid = " + l).stepThis().dispose();
                                                                    MediaDataController.getInstance(this.currentAccount).clearBotKeyboard(l.longValue());
                                                                    if (i2 == -1) {
                                                                    }
                                                                    sQLiteCursor.dispose();
                                                                    sQLiteCursorQueryFinalized = null;
                                                                    i4 = i + 1;
                                                                    arrayList2 = arrayList;
                                                                    i3 = 0;
                                                                }
                                                            } else {
                                                                i = i4;
                                                            }
                                                            try {
                                                                nativeByteBufferByteBufferValue.reuse();
                                                                sQLiteCursorQueryFinalized3 = sQLiteCursor2;
                                                                i4 = i;
                                                                i3 = 0;
                                                            } catch (Exception e5) {
                                                                e = e5;
                                                                exc2 = e;
                                                                checkSQLException(exc2);
                                                                i2 = i5;
                                                                sQLiteCursorQueryFinalized4.dispose();
                                                                this.database.executeFast("DELETE FROM messages_v2 WHERE uid = " + l + " AND mid != " + jLongValue2 + " AND mid != " + jLongValue3).stepThis().dispose();
                                                                SQLiteDatabase sQLiteDatabase322 = this.database;
                                                                StringBuilder sb22 = new StringBuilder();
                                                                sb22.append("DELETE FROM messages_holes WHERE uid = ");
                                                                sb22.append(l);
                                                                sQLiteDatabase322.executeFast(sb22.toString()).stepThis().dispose();
                                                                this.database.executeFast("DELETE FROM bot_keyboard WHERE uid = " + l).stepThis().dispose();
                                                                this.database.executeFast("DELETE FROM bot_keyboard_topics WHERE uid = " + l).stepThis().dispose();
                                                                this.database.executeFast("DELETE FROM media_counts_v2 WHERE uid = " + l).stepThis().dispose();
                                                                this.database.executeFast("DELETE FROM media_v4 WHERE uid = " + l).stepThis().dispose();
                                                                this.database.executeFast("DELETE FROM media_holes_v2 WHERE uid = " + l).stepThis().dispose();
                                                                MediaDataController.getInstance(this.currentAccount).clearBotKeyboard(l.longValue());
                                                                if (i2 == -1) {
                                                                }
                                                                sQLiteCursor.dispose();
                                                                sQLiteCursorQueryFinalized = null;
                                                                i4 = i + 1;
                                                                arrayList2 = arrayList;
                                                                i3 = 0;
                                                            }
                                                        } catch (Throwable th5) {
                                                            th = th5;
                                                            th = th;
                                                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                                            sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast2;
                                                            sQLiteCursorQueryFinalized = sQLiteCursor2;
                                                            sQLiteDatabase = this.database;
                                                            if (sQLiteDatabase != null) {
                                                            }
                                                            if (sQLitePreparedStatement != null) {
                                                            }
                                                            if (sQLitePreparedStatement2 != null) {
                                                            }
                                                            if (sQLiteCursorQueryFinalized != null) {
                                                            }
                                                            reset();
                                                            throw th;
                                                        }
                                                    } catch (Exception e6) {
                                                        e = e6;
                                                    }
                                                }
                                            } catch (Exception e7) {
                                                e = e7;
                                                sQLiteCursor2 = sQLiteCursorQueryFinalized3;
                                            } catch (Throwable th6) {
                                                th = th6;
                                                sQLiteCursor2 = sQLiteCursorQueryFinalized3;
                                            }
                                        }
                                        sQLiteCursor2 = sQLiteCursorQueryFinalized3;
                                        i = i4;
                                        i2 = i5;
                                        sQLiteCursorQueryFinalized4.dispose();
                                        this.database.executeFast("DELETE FROM messages_v2 WHERE uid = " + l + " AND mid != " + jLongValue2 + " AND mid != " + jLongValue3).stepThis().dispose();
                                        SQLiteDatabase sQLiteDatabase3222 = this.database;
                                        StringBuilder sb222 = new StringBuilder();
                                        sb222.append("DELETE FROM messages_holes WHERE uid = ");
                                        sb222.append(l);
                                        sQLiteDatabase3222.executeFast(sb222.toString()).stepThis().dispose();
                                        this.database.executeFast("DELETE FROM bot_keyboard WHERE uid = " + l).stepThis().dispose();
                                        this.database.executeFast("DELETE FROM bot_keyboard_topics WHERE uid = " + l).stepThis().dispose();
                                        this.database.executeFast("DELETE FROM media_counts_v2 WHERE uid = " + l).stepThis().dispose();
                                        this.database.executeFast("DELETE FROM media_v4 WHERE uid = " + l).stepThis().dispose();
                                        this.database.executeFast("DELETE FROM media_holes_v2 WHERE uid = " + l).stepThis().dispose();
                                        MediaDataController.getInstance(this.currentAccount).clearBotKeyboard(l.longValue());
                                        if (i2 == -1) {
                                            sQLiteCursor = sQLiteCursor2;
                                            try {
                                                createFirstHoles(l.longValue(), sQLitePreparedStatementExecuteFast, sQLitePreparedStatementExecuteFast2, i2, 0L);
                                            } catch (Exception e8) {
                                                e = e8;
                                                exc = e;
                                                sQLiteCursorQueryFinalized = sQLiteCursor;
                                                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                                sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast2;
                                                checkSQLException(exc);
                                                sQLiteDatabase2 = this.database;
                                                if (sQLiteDatabase2 != null) {
                                                }
                                                if (sQLitePreparedStatement != null) {
                                                }
                                                if (sQLitePreparedStatement2 != null) {
                                                }
                                                if (sQLiteCursorQueryFinalized != null) {
                                                }
                                                reset();
                                            } catch (Throwable th7) {
                                                th = th7;
                                                th = th;
                                                sQLiteCursorQueryFinalized = sQLiteCursor;
                                                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                                sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast2;
                                                sQLiteDatabase = this.database;
                                                if (sQLiteDatabase != null) {
                                                }
                                                if (sQLitePreparedStatement != null) {
                                                }
                                                if (sQLitePreparedStatement2 != null) {
                                                }
                                                if (sQLiteCursorQueryFinalized != null) {
                                                }
                                                reset();
                                                throw th;
                                            }
                                        } else {
                                            sQLiteCursor = sQLiteCursor2;
                                        }
                                    } else {
                                        arrayList = arrayList2;
                                        sQLiteCursor = sQLiteCursorQueryFinalized3;
                                        i = i4;
                                    }
                                    sQLiteCursor.dispose();
                                    sQLiteCursorQueryFinalized = null;
                                } catch (Exception e9) {
                                    e = e9;
                                    sQLiteCursor = sQLiteCursorQueryFinalized3;
                                } catch (Throwable th8) {
                                    th = th8;
                                    sQLiteCursor = sQLiteCursorQueryFinalized3;
                                }
                            }
                            i4 = i + 1;
                            arrayList2 = arrayList;
                            i3 = 0;
                        } catch (Exception e10) {
                            exc = e10;
                        } catch (Throwable th9) {
                            th = th9;
                        }
                    }
                    sQLitePreparedStatementExecuteFast.dispose();
                    sQLitePreparedStatementExecuteFast2.dispose();
                } catch (Exception e11) {
                    exc = e11;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                    sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast2;
                    sQLiteCursorQueryFinalized = null;
                } catch (Throwable th10) {
                    th = th10;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                    sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast2;
                    sQLiteCursorQueryFinalized = null;
                }
                try {
                    this.database.commitTransaction();
                    this.database.executeFast("PRAGMA journal_size_limit = 0").stepThis().dispose();
                    this.database.executeFast("VACUUM").stepThis().dispose();
                    this.database.executeFast("PRAGMA journal_size_limit = -1").stepThis().dispose();
                    getMessagesController().getTopicsController().databaseCleared();
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda123
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$clearLocalDatabase$43();
                        }
                    });
                    SQLiteDatabase sQLiteDatabase4 = this.database;
                    if (sQLiteDatabase4 != null) {
                        sQLiteDatabase4.commitTransaction();
                    }
                } catch (Exception e12) {
                    exc = e12;
                    sQLitePreparedStatement = null;
                    sQLitePreparedStatement2 = null;
                    checkSQLException(exc);
                    sQLiteDatabase2 = this.database;
                    if (sQLiteDatabase2 != null) {
                        sQLiteDatabase2.commitTransaction();
                    }
                    if (sQLitePreparedStatement != null) {
                        sQLitePreparedStatement.dispose();
                    }
                    if (sQLitePreparedStatement2 != null) {
                        sQLitePreparedStatement2.dispose();
                    }
                    if (sQLiteCursorQueryFinalized != null) {
                    }
                    reset();
                } catch (Throwable th11) {
                    th = th11;
                    sQLitePreparedStatement = null;
                    sQLitePreparedStatement2 = null;
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase != null) {
                    }
                    if (sQLitePreparedStatement != null) {
                    }
                    if (sQLitePreparedStatement2 != null) {
                    }
                    if (sQLiteCursorQueryFinalized != null) {
                    }
                    reset();
                    throw th;
                }
            } catch (Exception e13) {
                exc = e13;
                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                sQLiteCursorQueryFinalized = null;
                sQLitePreparedStatement2 = null;
                checkSQLException(exc);
                sQLiteDatabase2 = this.database;
                if (sQLiteDatabase2 != null) {
                }
                if (sQLitePreparedStatement != null) {
                }
                if (sQLitePreparedStatement2 != null) {
                }
                if (sQLiteCursorQueryFinalized != null) {
                }
                reset();
            } catch (Throwable th12) {
                th = th12;
                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                sQLiteCursorQueryFinalized = null;
                sQLitePreparedStatement2 = null;
                sQLiteDatabase = this.database;
                if (sQLiteDatabase != null) {
                }
                if (sQLitePreparedStatement != null) {
                }
                if (sQLitePreparedStatement2 != null) {
                }
                if (sQLiteCursorQueryFinalized != null) {
                }
                reset();
                throw th;
            }
        } catch (Exception e14) {
            exc = e14;
            sQLitePreparedStatement = null;
        } catch (Throwable th13) {
            th = th13;
            sQLitePreparedStatement = null;
        }
        if (sQLiteCursorQueryFinalized != null) {
            sQLiteCursorQueryFinalized.dispose();
        }
        reset();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$clearSentMedia$158() {
        try {
            this.database.executeFast("DELETE FROM sent_files_v2 WHERE 1").stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$clearUserPhoto$88(long j, long j2) {
        try {
            this.database.executeFast("DELETE FROM dialog_photos WHERE uid = " + j + " AND id = " + j2).stepThis().dispose();
            this.database.executeFast("UPDATE dialog_photos_count SET count = count - 1 WHERE uid = " + j + " AND count > 0").stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$clearUserPhotos$87(long j) {
        try {
            this.database.executeFast("DELETE FROM dialog_photos WHERE uid = " + j).stepThis().dispose();
            this.database.executeFast("DELETE FROM dialog_photos_count WHERE uid = " + j).stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$clearWidgetDialogs$161(int i) {
        try {
            this.database.executeFast("DELETE FROM shortcut_widget WHERE id = " + i).stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$containsLocalDialog$173(long j, Boolean[] boolArr, CountDownLatch countDownLatch) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT date FROM dialogs WHERE did = " + j, new Object[0]);
                boolArr[0] = Boolean.valueOf(sQLiteCursorQueryFinalized.next());
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            countDownLatch.countDown();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createOrEditTopic$193(long j, TLRPC.TL_forumTopic tL_forumTopic) {
        getMessagesController().getTopicsController().onTopicCreated(j, tL_forumTopic, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createPendingTask$10(long j, NativeByteBuffer nativeByteBuffer) {
        try {
            try {
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO pending_tasks VALUES(?, ?)");
                sQLitePreparedStatementExecuteFast.bindLong(1, j);
                sQLitePreparedStatementExecuteFast.bindByteBuffer(2, nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
            } catch (Exception e) {
                checkSQLException(e);
            }
        } finally {
            nativeByteBuffer.reuse();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createTaskForMid$110(boolean z, long j, ArrayList arrayList) {
        if (!z) {
            markMessagesContentAsRead(j, arrayList, 0, 0);
        }
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.messagesReadContent, Long.valueOf(j), arrayList);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createTaskForMid$111(int i, int i2, int i3, int i4, final boolean z, final long j) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                int iMax = Math.max(i, i2) + i3;
                SparseArray<ArrayList<Integer>> sparseArray = new SparseArray<>();
                final ArrayList<Integer> arrayList = new ArrayList<>();
                arrayList.add(Integer.valueOf(i4));
                sparseArray.put(iMax, arrayList);
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda9
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$createTaskForMid$110(z, j, arrayList);
                    }
                });
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO enc_tasks_v4 VALUES(?, ?, ?, ?)");
                for (int i5 = 0; i5 < sparseArray.size(); i5++) {
                    try {
                        int iKeyAt = sparseArray.keyAt(i5);
                        ArrayList<Integer> arrayList2 = sparseArray.get(iKeyAt);
                        for (int i6 = 0; i6 < arrayList2.size(); i6++) {
                            sQLitePreparedStatementExecuteFast.requery();
                            sQLitePreparedStatementExecuteFast.bindInteger(1, arrayList2.get(i6).intValue());
                            sQLitePreparedStatementExecuteFast.bindLong(2, j);
                            sQLitePreparedStatementExecuteFast.bindInteger(3, iKeyAt);
                            sQLitePreparedStatementExecuteFast.bindInteger(4, 1);
                            sQLitePreparedStatementExecuteFast.step();
                        }
                    } catch (Exception e) {
                        e = e;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        checkSQLException(e);
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                            return;
                        }
                        return;
                    } catch (Throwable th) {
                        th = th;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        throw th;
                    }
                }
                sQLitePreparedStatementExecuteFast.dispose();
                this.database.executeFast(String.format(Locale.US, "UPDATE messages_v2 SET ttl = 0 WHERE mid = %d AND uid = %d", Integer.valueOf(i4), Long.valueOf(j))).stepThis().dispose();
                getMessagesController().didAddedNewTask(iMax, j, sparseArray);
            } catch (Exception e2) {
                e = e2;
            }
        } catch (Throwable th2) {
            th = th2;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createTaskForSecretChat$112(long j, ArrayList arrayList) {
        markMessagesContentAsRead(j, arrayList, 0, 0);
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.messagesReadContent, Long.valueOf(j), arrayList);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:59:0x015c  */
    /* JADX WARN: Removed duplicated region for block: B:61:0x0161  */
    /* JADX WARN: Removed duplicated region for block: B:63:0x0166  */
    /* JADX WARN: Removed duplicated region for block: B:68:0x016f  */
    /* JADX WARN: Removed duplicated region for block: B:70:0x0174  */
    /* JADX WARN: Removed duplicated region for block: B:72:0x0179  */
    /* JADX WARN: Removed duplicated region for block: B:94:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$createTaskForSecretChat$113(int i, ArrayList arrayList, int i2, int i3, int i4) throws Throwable {
        SQLiteCursor sQLiteCursor;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLiteDatabase sQLiteDatabase;
        SQLiteDatabase sQLiteDatabase2;
        try {
            final long jMakeEncryptedDialogId = DialogObject.makeEncryptedDialogId(i);
            SparseArray<ArrayList<Integer>> sparseArray = new SparseArray<>();
            final ArrayList arrayList2 = new ArrayList();
            StringBuilder sb = new StringBuilder();
            SQLiteCursor sQLiteCursorQueryFinalized = arrayList == null ? this.database.queryFinalized(String.format(Locale.US, "SELECT mid, ttl FROM messages_v2 WHERE uid = %d AND out = %d AND read_state > 0 AND ttl > 0 AND date <= %d AND send_state = 0 AND media != 1", Long.valueOf(jMakeEncryptedDialogId), Integer.valueOf(i2), Integer.valueOf(i3)), new Object[0]) : this.database.queryFinalized(String.format(Locale.US, "SELECT m.mid, m.ttl FROM messages_v2 as m INNER JOIN randoms_v2 as r ON m.mid = r.mid AND m.uid = r.uid WHERE r.random_id IN (%s)", TextUtils.join(",", arrayList)), new Object[0]);
            int iMin = Integer.MAX_VALUE;
            while (sQLiteCursorQueryFinalized.next()) {
                try {
                    int iIntValue = sQLiteCursorQueryFinalized.intValue(1);
                    int iIntValue2 = sQLiteCursorQueryFinalized.intValue(0);
                    if (arrayList != null) {
                        arrayList2.add(Integer.valueOf(iIntValue2));
                    }
                    if (iIntValue > 0) {
                        int iMax = Math.max(i3, i4) + iIntValue;
                        iMin = Math.min(iMin, iMax);
                        ArrayList<Integer> arrayList3 = sparseArray.get(iMax);
                        if (arrayList3 == null) {
                            arrayList3 = new ArrayList<>();
                            sparseArray.put(iMax, arrayList3);
                        }
                        if (sb.length() != 0) {
                            sb.append(",");
                        }
                        sb.append(iIntValue2);
                        arrayList3.add(Integer.valueOf(iIntValue2));
                    }
                } catch (Exception e) {
                    e = e;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    sQLitePreparedStatementExecuteFast = null;
                    try {
                        checkSQLException(e);
                        sQLiteDatabase2 = this.database;
                        if (sQLiteDatabase2 != null) {
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                        }
                        if (sQLiteCursor == null) {
                        }
                    } catch (Throwable th) {
                        th = th;
                        sQLiteDatabase = this.database;
                        if (sQLiteDatabase != null) {
                            sQLiteDatabase.commitTransaction();
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                            sQLitePreparedStatementExecuteFast.dispose();
                        }
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        throw th;
                    }
                } catch (Throwable th2) {
                    th = th2;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    sQLitePreparedStatementExecuteFast = null;
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase != null) {
                    }
                    if (sQLitePreparedStatementExecuteFast != null) {
                    }
                    if (sQLiteCursor != null) {
                    }
                    throw th;
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            if (arrayList != null) {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda131
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$createTaskForSecretChat$112(jMakeEncryptedDialogId, arrayList2);
                    }
                });
            }
            if (sparseArray.size() != 0) {
                this.database.beginTransaction();
                sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO enc_tasks_v4 VALUES(?, ?, ?, ?)");
                for (int i5 = 0; i5 < sparseArray.size(); i5++) {
                    try {
                        int iKeyAt = sparseArray.keyAt(i5);
                        ArrayList<Integer> arrayList4 = sparseArray.get(iKeyAt);
                        for (int i6 = 0; i6 < arrayList4.size(); i6++) {
                            sQLitePreparedStatementExecuteFast.requery();
                            sQLitePreparedStatementExecuteFast.bindInteger(1, arrayList4.get(i6).intValue());
                            sQLitePreparedStatementExecuteFast.bindLong(2, jMakeEncryptedDialogId);
                            sQLitePreparedStatementExecuteFast.bindInteger(3, iKeyAt);
                            sQLitePreparedStatementExecuteFast.bindInteger(4, 0);
                            sQLitePreparedStatementExecuteFast.step();
                        }
                    } catch (Exception e2) {
                        e = e2;
                        sQLiteCursor = null;
                        checkSQLException(e);
                        sQLiteDatabase2 = this.database;
                        if (sQLiteDatabase2 != null) {
                            sQLiteDatabase2.commitTransaction();
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                            sQLitePreparedStatementExecuteFast.dispose();
                        }
                        if (sQLiteCursor == null) {
                            sQLiteCursor.dispose();
                            return;
                        }
                        return;
                    } catch (Throwable th3) {
                        th = th3;
                        sQLiteCursor = null;
                        sQLiteDatabase = this.database;
                        if (sQLiteDatabase != null) {
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                        }
                        if (sQLiteCursor != null) {
                        }
                        throw th;
                    }
                }
                sQLitePreparedStatementExecuteFast.dispose();
                this.database.commitTransaction();
                this.database.executeFast(String.format(Locale.US, "UPDATE messages_v2 SET ttl = 0 WHERE mid IN(%s) AND uid = %d", sb.toString(), Long.valueOf(jMakeEncryptedDialogId))).stepThis().dispose();
                getMessagesController().didAddedNewTask(iMin, jMakeEncryptedDialogId, sparseArray);
            }
            SQLiteDatabase sQLiteDatabase3 = this.database;
            if (sQLiteDatabase3 != null) {
                sQLiteDatabase3.commitTransaction();
            }
        } catch (Exception e3) {
            e = e3;
            sQLiteCursor = null;
        } catch (Throwable th4) {
            th = th4;
            sQLiteCursor = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteAllStoryPushMessages$40() {
        try {
            this.database.executeFast("DELETE FROM story_pushes").stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteAllStoryReactionPushMessages$41() {
        try {
            this.database.executeFast("DELETE FROM unread_push_messages WHERE is_reaction = 2").stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteContacts$142(ArrayList arrayList) {
        try {
            String strJoin = TextUtils.join(",", arrayList);
            this.database.executeFast("DELETE FROM contacts WHERE uid IN(" + strJoin + ")").stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteDialog$83(ArrayList arrayList) {
        getFileLoader().cancelLoadFiles(arrayList);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteDialog$84() {
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.needReloadRecentDialogsSearch, new Object[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:111:0x0330  */
    /* JADX WARN: Removed duplicated region for block: B:117:0x0345  */
    /* JADX WARN: Removed duplicated region for block: B:164:0x0482 A[Catch: all -> 0x03cd, Exception -> 0x03d2, TryCatch #25 {Exception -> 0x03d2, all -> 0x03cd, blocks: (B:61:0x0130, B:170:0x04c4, B:172:0x050a, B:173:0x0526, B:162:0x03e6, B:164:0x0482, B:166:0x0488, B:167:0x04a0, B:169:0x04c1, B:168:0x04a5), top: B:243:0x0119 }] */
    /* JADX WARN: Removed duplicated region for block: B:168:0x04a5 A[Catch: all -> 0x03cd, Exception -> 0x03d2, TryCatch #25 {Exception -> 0x03d2, all -> 0x03cd, blocks: (B:61:0x0130, B:170:0x04c4, B:172:0x050a, B:173:0x0526, B:162:0x03e6, B:164:0x0482, B:166:0x0488, B:167:0x04a0, B:169:0x04c1, B:168:0x04a5), top: B:243:0x0119 }] */
    /* JADX WARN: Removed duplicated region for block: B:172:0x050a A[Catch: all -> 0x03cd, Exception -> 0x03d2, TryCatch #25 {Exception -> 0x03d2, all -> 0x03cd, blocks: (B:61:0x0130, B:170:0x04c4, B:172:0x050a, B:173:0x0526, B:162:0x03e6, B:164:0x0482, B:166:0x0488, B:167:0x04a0, B:169:0x04c1, B:168:0x04a5), top: B:243:0x0119 }] */
    /* JADX WARN: Removed duplicated region for block: B:183:0x05fc  */
    /* JADX WARN: Removed duplicated region for block: B:185:0x0601  */
    /* JADX WARN: Removed duplicated region for block: B:187:0x0606  */
    /* JADX WARN: Removed duplicated region for block: B:189:0x060b  */
    /* JADX WARN: Removed duplicated region for block: B:195:0x061d  */
    /* JADX WARN: Removed duplicated region for block: B:197:0x0622  */
    /* JADX WARN: Removed duplicated region for block: B:199:0x0627  */
    /* JADX WARN: Removed duplicated region for block: B:201:0x062c  */
    /* JADX WARN: Removed duplicated region for block: B:229:0x0229 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:250:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:252:? A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:30:0x0064 A[Catch: all -> 0x003d, Exception -> 0x0041, TRY_ENTER, TRY_LEAVE, TryCatch #28 {Exception -> 0x0041, all -> 0x003d, blocks: (B:4:0x000c, B:24:0x0051, B:30:0x0064, B:53:0x00f7), top: B:237:0x000c }] */
    /* JADX WARN: Removed duplicated region for block: B:34:0x0090 A[Catch: all -> 0x00d5, Exception -> 0x00d9, TryCatch #6 {Exception -> 0x00d9, blocks: (B:32:0x008a, B:34:0x0090, B:36:0x0096), top: B:209:0x008a }] */
    /* JADX WARN: Removed duplicated region for block: B:56:0x011b  */
    /* JADX WARN: Removed duplicated region for block: B:58:0x011e  */
    /* JADX WARN: Type inference failed for: r11v0 */
    /* JADX WARN: Type inference failed for: r11v1, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r11v6 */
    /* JADX WARN: Type inference failed for: r12v41 */
    /* JADX WARN: Type inference failed for: r12v42, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r12v44 */
    /* JADX WARN: Type inference failed for: r15v42, types: [org.telegram.tgnet.InputSerializedData, org.telegram.tgnet.NativeByteBuffer] */
    /* JADX WARN: Type inference failed for: r27v0, types: [org.telegram.messenger.BaseController, org.telegram.messenger.MessagesStorage] */
    /* JADX WARN: Type inference failed for: r3v12, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r3v13 */
    /* JADX WARN: Type inference failed for: r3v14, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r3v15 */
    /* JADX WARN: Type inference failed for: r3v17 */
    /* JADX WARN: Type inference failed for: r3v43, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r3v67 */
    /* JADX WARN: Type inference failed for: r3v68 */
    /* JADX WARN: Type inference failed for: r4v1, types: [org.telegram.tgnet.InputSerializedData, org.telegram.tgnet.NativeByteBuffer] */
    /* JADX WARN: Type inference failed for: r4v35, types: [org.telegram.tgnet.TLRPC$Message] */
    /* JADX WARN: Type inference failed for: r6v1, types: [org.telegram.tgnet.TLRPC$Message] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$deleteDialog$85(int i, long j) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        Throwable th;
        Exception exc;
        SQLiteCursor sQLiteCursor;
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLitePreparedStatement sQLitePreparedStatement2;
        SQLiteCursor sQLiteCursor2;
        SQLitePreparedStatement sQLitePreparedStatement3;
        SQLitePreparedStatement sQLitePreparedStatement4;
        SQLiteCursor sQLiteCursor3;
        String str;
        ?? QueryFinalized;
        SQLiteCursor sQLiteCursor4;
        final ArrayList arrayList;
        ArrayList<File> arrayList2;
        String str2;
        String str3;
        boolean z;
        SQLiteCursor sQLiteCursor5;
        SQLiteCursor sQLiteCursor6;
        String str4;
        String str5;
        long j2;
        String str6;
        String str7;
        String str8;
        String str9;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLiteCursor sQLiteCursor7;
        SQLiteCursor sQLiteCursor8;
        SQLiteCursor sQLiteCursor9;
        int i2;
        String str10;
        String str11;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast2;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast3;
        int i3;
        long j3;
        String str12 = " AND mid != ";
        ?? r11 = 0;
        if (i == 3) {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT last_mid FROM dialogs WHERE did = " + j, new Object[0]);
                try {
                    int iIntValue = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : -1;
                    sQLiteCursorQueryFinalized.dispose();
                    if (iIntValue != 0) {
                        return;
                    }
                    str = "SELECT data FROM messages_v2 WHERE uid = ";
                    if (!DialogObject.isEncryptedDialog(j) || i == 2) {
                        QueryFinalized = this.database.queryFinalized("SELECT data FROM messages_v2 WHERE uid = " + j, new Object[0]);
                        try {
                            try {
                                ArrayList<File> arrayList3 = new ArrayList<>();
                                ArrayList arrayList4 = new ArrayList();
                                ArrayList arrayList5 = new ArrayList();
                                QueryFinalized = QueryFinalized;
                                while (QueryFinalized.next()) {
                                    try {
                                        ?? ByteBufferValue = QueryFinalized.byteBufferValue(r11);
                                        if (ByteBufferValue != 0) {
                                            ?? TLdeserialize = TLRPC.Message.TLdeserialize(ByteBufferValue, ByteBufferValue.readInt32(r11), r11);
                                            TLdeserialize.readAttachPath(ByteBufferValue, getUserConfig().clientUserId);
                                            ByteBufferValue.reuse();
                                            arrayList = arrayList4;
                                            arrayList2 = arrayList3;
                                            sQLiteCursor4 = QueryFinalized;
                                            str3 = str12;
                                            str2 = str;
                                            z = true;
                                            try {
                                                try {
                                                    addFilesToDelete(TLdeserialize, arrayList2, arrayList5, arrayList, false);
                                                    arrayList4 = arrayList;
                                                    arrayList3 = arrayList2;
                                                    str12 = str3;
                                                    QueryFinalized = sQLiteCursor4;
                                                    str = str2;
                                                } catch (Throwable th2) {
                                                    th = th2;
                                                    th = th;
                                                    sQLiteCursorQueryFinalized = sQLiteCursor4;
                                                    sQLitePreparedStatement = null;
                                                    sQLiteCursor = null;
                                                    sQLitePreparedStatement2 = null;
                                                    if (sQLiteCursorQueryFinalized != null) {
                                                    }
                                                    if (sQLiteCursor != null) {
                                                    }
                                                    if (sQLitePreparedStatement2 != null) {
                                                    }
                                                    if (sQLitePreparedStatement != null) {
                                                    }
                                                }
                                            } catch (Exception e) {
                                                e = e;
                                                try {
                                                    checkSQLException(e);
                                                    sQLiteCursor4.dispose();
                                                    deleteFromDownloadQueue(arrayList5, z);
                                                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda219
                                                        @Override // java.lang.Runnable
                                                        public final void run() {
                                                            this.f$0.lambda$deleteDialog$83(arrayList);
                                                        }
                                                    });
                                                    getFileLoader().deleteFiles(arrayList2, i);
                                                    String str13 = "DELETE FROM bot_keyboard WHERE uid = ";
                                                    String str14 = "DELETE FROM messages_holes WHERE uid = ";
                                                    if (i == 0) {
                                                    }
                                                    this.database.executeFast("UPDATE dialogs SET unread_count = 0, unread_count_i = 0 WHERE did = " + j2).stepThis().dispose();
                                                    this.database.executeFast("DELETE FROM messages_v2 WHERE uid = " + j2).stepThis().dispose();
                                                    if (j2 == getUserConfig().getClientUserId()) {
                                                    }
                                                    this.database.executeFast(str9 + j2).stepThis().dispose();
                                                    this.database.executeFast(str8 + j2).stepThis().dispose();
                                                    this.database.executeFast(str6 + j2).stepThis().dispose();
                                                    this.database.executeFast(str5 + j2).stepThis().dispose();
                                                    this.database.executeFast(str7 + j2).stepThis().dispose();
                                                    this.database.executeFast(str4 + j2).stepThis().dispose();
                                                    getMediaDataController().clearBotKeyboard(j2);
                                                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda220
                                                        @Override // java.lang.Runnable
                                                        public final void run() {
                                                            this.f$0.lambda$deleteDialog$84();
                                                        }
                                                    });
                                                    resetAllUnreadCounters(false);
                                                    updateWidgets(j2);
                                                    return;
                                                } catch (Exception e2) {
                                                    e = e2;
                                                    exc = e;
                                                    sQLiteCursorQueryFinalized = sQLiteCursor4;
                                                    sQLitePreparedStatement3 = null;
                                                    sQLiteCursor2 = null;
                                                    sQLitePreparedStatement2 = null;
                                                    try {
                                                        checkSQLException(exc);
                                                        if (sQLiteCursorQueryFinalized != null) {
                                                            sQLiteCursorQueryFinalized.dispose();
                                                        }
                                                        if (sQLiteCursor2 != null) {
                                                            sQLiteCursor2.dispose();
                                                        }
                                                        if (sQLitePreparedStatement2 != null) {
                                                            sQLitePreparedStatement2.dispose();
                                                        }
                                                        if (sQLitePreparedStatement3 == null) {
                                                            sQLitePreparedStatement3.dispose();
                                                            return;
                                                        }
                                                        return;
                                                    } catch (Throwable th3) {
                                                        th = th3;
                                                        SQLiteCursor sQLiteCursor10 = sQLiteCursor2;
                                                        sQLitePreparedStatement4 = sQLitePreparedStatement3;
                                                        sQLiteCursor3 = sQLiteCursor10;
                                                        SQLitePreparedStatement sQLitePreparedStatement5 = sQLitePreparedStatement4;
                                                        sQLiteCursor = sQLiteCursor3;
                                                        sQLitePreparedStatement = sQLitePreparedStatement5;
                                                        if (sQLiteCursorQueryFinalized != null) {
                                                        }
                                                        if (sQLiteCursor != null) {
                                                        }
                                                        if (sQLitePreparedStatement2 != null) {
                                                        }
                                                        if (sQLitePreparedStatement != null) {
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        r11 = 0;
                                        QueryFinalized = QueryFinalized;
                                    } catch (Exception e3) {
                                        e = e3;
                                        arrayList = arrayList4;
                                        arrayList2 = arrayList3;
                                        sQLiteCursor4 = QueryFinalized;
                                        str2 = str;
                                        str3 = str12;
                                        z = true;
                                    }
                                }
                                arrayList = arrayList4;
                                arrayList2 = arrayList3;
                                sQLiteCursor4 = QueryFinalized;
                                str2 = str;
                                str3 = str12;
                                z = true;
                                sQLiteCursor4.dispose();
                                deleteFromDownloadQueue(arrayList5, z);
                                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda219
                                    @Override // java.lang.Runnable
                                    public final void run() {
                                        this.f$0.lambda$deleteDialog$83(arrayList);
                                    }
                                });
                                getFileLoader().deleteFiles(arrayList2, i);
                            } catch (Exception e4) {
                                e = e4;
                                sQLiteCursor4 = QueryFinalized;
                            }
                        } catch (Throwable th4) {
                            th = th4;
                            sQLiteCursor4 = QueryFinalized;
                        }
                    } else {
                        str2 = "SELECT data FROM messages_v2 WHERE uid = ";
                        str3 = " AND mid != ";
                    }
                    String str132 = "DELETE FROM bot_keyboard WHERE uid = ";
                    String str142 = "DELETE FROM messages_holes WHERE uid = ";
                    try {
                        if (i == 0 || i == 3) {
                            str4 = "DELETE FROM media_holes_v2 WHERE uid = ";
                            str5 = "DELETE FROM media_v4 WHERE uid = ";
                            j2 = j;
                            str6 = "DELETE FROM media_counts_v2 WHERE uid = ";
                            str7 = "DELETE FROM messages_holes WHERE uid = ";
                            str8 = "DELETE FROM bot_keyboard_topics WHERE uid = ";
                            str9 = "DELETE FROM bot_keyboard WHERE uid = ";
                            this.database.executeFast("DELETE FROM dialogs WHERE did = " + j2).stepThis().dispose();
                            this.database.executeFast("DELETE FROM chat_pinned_v2 WHERE uid = " + j2).stepThis().dispose();
                            this.database.executeFast("DELETE FROM chat_pinned_count WHERE uid = " + j2).stepThis().dispose();
                            this.database.executeFast("DELETE FROM channel_users_v2 WHERE did = " + j2).stepThis().dispose();
                            this.database.executeFast("DELETE FROM search_recent WHERE did = " + j2).stepThis().dispose();
                            if (!DialogObject.isEncryptedDialog(j)) {
                                sQLitePreparedStatementExecuteFast = this.database.executeFast("DELETE FROM enc_chats WHERE uid = " + DialogObject.getEncryptedChatId(j));
                            } else if (DialogObject.isChatDialog(j)) {
                                sQLitePreparedStatementExecuteFast = this.database.executeFast("DELETE FROM chat_settings_v2 WHERE uid = " + (-j2));
                            }
                            sQLitePreparedStatementExecuteFast.stepThis().dispose();
                        } else if (i == 2) {
                            SQLiteCursor sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT last_mid_i, last_mid FROM dialogs WHERE did = " + j, new Object[0]);
                            try {
                                if (sQLiteCursorQueryFinalized2.next()) {
                                    long jLongValue = sQLiteCursorQueryFinalized2.longValue(0);
                                    long jLongValue2 = sQLiteCursorQueryFinalized2.longValue(1);
                                    try {
                                        ?? r12 = 0;
                                        ?? QueryFinalized2 = this.database.queryFinalized(str2 + j + " AND mid IN (" + jLongValue + "," + jLongValue2 + ")", new Object[0]);
                                        int i4 = -1;
                                        while (QueryFinalized2.next()) {
                                            try {
                                                try {
                                                    ?? ByteBufferValue2 = QueryFinalized2.byteBufferValue(r12);
                                                    if (ByteBufferValue2 != 0) {
                                                        i2 = i4;
                                                        try {
                                                            ?? TLdeserialize2 = TLRPC.Message.TLdeserialize(ByteBufferValue2, ByteBufferValue2.readInt32(r12), r12);
                                                            if (TLdeserialize2 != 0) {
                                                                str10 = str132;
                                                                str11 = str142;
                                                                try {
                                                                    TLdeserialize2.readAttachPath(ByteBufferValue2, getUserConfig().clientUserId);
                                                                } catch (Exception e5) {
                                                                    e = e5;
                                                                    try {
                                                                        checkSQLException(e);
                                                                        QueryFinalized2.dispose();
                                                                        SQLiteDatabase sQLiteDatabase = this.database;
                                                                        StringBuilder sb = new StringBuilder();
                                                                        sb.append("DELETE FROM messages_v2 WHERE uid = ");
                                                                        sb.append(j);
                                                                        String str15 = str3;
                                                                        sb.append(str15);
                                                                        sb.append(jLongValue);
                                                                        sb.append(str15);
                                                                        sb.append(jLongValue2);
                                                                        sQLiteDatabase.executeFast(sb.toString()).stepThis().dispose();
                                                                        if (j == getUserConfig().getClientUserId()) {
                                                                        }
                                                                        this.database.executeFast(str11 + j).stepThis().dispose();
                                                                        this.database.executeFast(str10 + j).stepThis().dispose();
                                                                        this.database.executeFast("DELETE FROM bot_keyboard_topics WHERE uid = " + j).stepThis().dispose();
                                                                        this.database.executeFast("DELETE FROM media_counts_v2 WHERE uid = " + j).stepThis().dispose();
                                                                        this.database.executeFast("DELETE FROM media_v4 WHERE uid = " + j).stepThis().dispose();
                                                                        this.database.executeFast("DELETE FROM media_holes_v2 WHERE uid = " + j).stepThis().dispose();
                                                                        getMediaDataController().clearBotKeyboard(j);
                                                                        sQLitePreparedStatementExecuteFast2 = this.database.executeFast("REPLACE INTO messages_holes VALUES(?, ?, ?)");
                                                                        sQLitePreparedStatementExecuteFast3 = this.database.executeFast("REPLACE INTO media_holes_v2 VALUES(?, ?, ?, ?)");
                                                                        i3 = i2;
                                                                        if (i3 != -1) {
                                                                        }
                                                                        sQLitePreparedStatementExecuteFast2.dispose();
                                                                    } catch (Exception e6) {
                                                                        exc = e6;
                                                                        sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                                                                        sQLiteCursor6 = QueryFinalized2;
                                                                        sQLiteCursor2 = sQLiteCursor6;
                                                                        sQLitePreparedStatement3 = null;
                                                                        sQLitePreparedStatement2 = null;
                                                                        checkSQLException(exc);
                                                                        if (sQLiteCursorQueryFinalized != null) {
                                                                        }
                                                                        if (sQLiteCursor2 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement2 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement3 == null) {
                                                                        }
                                                                    } catch (Throwable th5) {
                                                                        th = th5;
                                                                        sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                                                                        sQLiteCursor5 = QueryFinalized2;
                                                                        sQLiteCursor = sQLiteCursor5;
                                                                        sQLitePreparedStatement = null;
                                                                        sQLitePreparedStatement2 = null;
                                                                        if (sQLiteCursorQueryFinalized != null) {
                                                                        }
                                                                        if (sQLiteCursor != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement2 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement != null) {
                                                                        }
                                                                    }
                                                                    try {
                                                                        sQLitePreparedStatementExecuteFast3.dispose();
                                                                        try {
                                                                            try {
                                                                                updateWidgets(j3);
                                                                                sQLiteCursor9.dispose();
                                                                                return;
                                                                            } catch (Exception e7) {
                                                                                exc = e7;
                                                                                sQLiteCursorQueryFinalized = sQLiteCursor9;
                                                                                sQLitePreparedStatement3 = null;
                                                                                sQLiteCursor2 = null;
                                                                                sQLitePreparedStatement2 = null;
                                                                                checkSQLException(exc);
                                                                                if (sQLiteCursorQueryFinalized != null) {
                                                                                }
                                                                                if (sQLiteCursor2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement3 == null) {
                                                                                }
                                                                            }
                                                                        } catch (Throwable th6) {
                                                                            th = th6;
                                                                            sQLiteCursorQueryFinalized = sQLiteCursor9;
                                                                            sQLitePreparedStatement = null;
                                                                            sQLiteCursor = null;
                                                                            sQLitePreparedStatement2 = null;
                                                                            if (sQLiteCursorQueryFinalized != null) {
                                                                            }
                                                                            if (sQLiteCursor != null) {
                                                                            }
                                                                            if (sQLitePreparedStatement2 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatement != null) {
                                                                            }
                                                                        }
                                                                    } catch (Exception e8) {
                                                                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast3;
                                                                        sQLiteCursorQueryFinalized = sQLiteCursor9;
                                                                        sQLiteCursor2 = null;
                                                                        sQLitePreparedStatement2 = null;
                                                                        exc = e8;
                                                                        checkSQLException(exc);
                                                                        if (sQLiteCursorQueryFinalized != null) {
                                                                        }
                                                                        if (sQLiteCursor2 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement2 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement3 == null) {
                                                                        }
                                                                    } catch (Throwable th7) {
                                                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast3;
                                                                        sQLiteCursorQueryFinalized = sQLiteCursor9;
                                                                        sQLiteCursor = null;
                                                                        sQLitePreparedStatement2 = null;
                                                                        th = th7;
                                                                    }
                                                                }
                                                            } else {
                                                                str10 = str132;
                                                                str11 = str142;
                                                            }
                                                            ByteBufferValue2.reuse();
                                                            if (TLdeserialize2 != 0) {
                                                                i4 = TLdeserialize2.id;
                                                            }
                                                            str132 = str10;
                                                            str142 = str11;
                                                            r12 = 0;
                                                        } catch (Exception e9) {
                                                            e = e9;
                                                            str10 = str132;
                                                            str11 = str142;
                                                            checkSQLException(e);
                                                            QueryFinalized2.dispose();
                                                            SQLiteDatabase sQLiteDatabase2 = this.database;
                                                            StringBuilder sb2 = new StringBuilder();
                                                            sb2.append("DELETE FROM messages_v2 WHERE uid = ");
                                                            sb2.append(j);
                                                            String str152 = str3;
                                                            sb2.append(str152);
                                                            sb2.append(jLongValue);
                                                            sb2.append(str152);
                                                            sb2.append(jLongValue2);
                                                            sQLiteDatabase2.executeFast(sb2.toString()).stepThis().dispose();
                                                            if (j == getUserConfig().getClientUserId()) {
                                                            }
                                                            this.database.executeFast(str11 + j).stepThis().dispose();
                                                            this.database.executeFast(str10 + j).stepThis().dispose();
                                                            this.database.executeFast("DELETE FROM bot_keyboard_topics WHERE uid = " + j).stepThis().dispose();
                                                            this.database.executeFast("DELETE FROM media_counts_v2 WHERE uid = " + j).stepThis().dispose();
                                                            this.database.executeFast("DELETE FROM media_v4 WHERE uid = " + j).stepThis().dispose();
                                                            this.database.executeFast("DELETE FROM media_holes_v2 WHERE uid = " + j).stepThis().dispose();
                                                            getMediaDataController().clearBotKeyboard(j);
                                                            sQLitePreparedStatementExecuteFast2 = this.database.executeFast("REPLACE INTO messages_holes VALUES(?, ?, ?)");
                                                            sQLitePreparedStatementExecuteFast3 = this.database.executeFast("REPLACE INTO media_holes_v2 VALUES(?, ?, ?, ?)");
                                                            i3 = i2;
                                                            if (i3 != -1) {
                                                            }
                                                            sQLitePreparedStatementExecuteFast2.dispose();
                                                            sQLitePreparedStatementExecuteFast3.dispose();
                                                            updateWidgets(j3);
                                                            sQLiteCursor9.dispose();
                                                            return;
                                                        }
                                                    } else {
                                                        i2 = i4;
                                                        str10 = str132;
                                                        str11 = str142;
                                                    }
                                                    i4 = i2;
                                                    str132 = str10;
                                                    str142 = str11;
                                                    r12 = 0;
                                                } catch (Throwable th8) {
                                                    sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                                                    th = th8;
                                                    sQLiteCursor5 = QueryFinalized2;
                                                    sQLiteCursor = sQLiteCursor5;
                                                    sQLitePreparedStatement = null;
                                                    sQLitePreparedStatement2 = null;
                                                    if (sQLiteCursorQueryFinalized != null) {
                                                    }
                                                    if (sQLiteCursor != null) {
                                                    }
                                                    if (sQLitePreparedStatement2 != null) {
                                                    }
                                                    if (sQLitePreparedStatement != null) {
                                                    }
                                                }
                                            } catch (Exception e10) {
                                                e = e10;
                                                i2 = i4;
                                            }
                                        }
                                        i2 = i4;
                                        str10 = str132;
                                        str11 = str142;
                                        QueryFinalized2.dispose();
                                        SQLiteDatabase sQLiteDatabase22 = this.database;
                                        StringBuilder sb22 = new StringBuilder();
                                        sb22.append("DELETE FROM messages_v2 WHERE uid = ");
                                        sb22.append(j);
                                        String str1522 = str3;
                                        sb22.append(str1522);
                                        sb22.append(jLongValue);
                                        sb22.append(str1522);
                                        sb22.append(jLongValue2);
                                        sQLiteDatabase22.executeFast(sb22.toString()).stepThis().dispose();
                                        if (j == getUserConfig().getClientUserId()) {
                                            try {
                                                this.database.executeFast("DELETE FROM messages_topics WHERE uid = " + j + str1522 + jLongValue + str1522 + jLongValue2).stepThis().dispose();
                                            } catch (Exception e11) {
                                                sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                                                exc = e11;
                                                sQLiteCursor6 = null;
                                                sQLiteCursor2 = sQLiteCursor6;
                                                sQLitePreparedStatement3 = null;
                                                sQLitePreparedStatement2 = null;
                                                checkSQLException(exc);
                                                if (sQLiteCursorQueryFinalized != null) {
                                                }
                                                if (sQLiteCursor2 != null) {
                                                }
                                                if (sQLitePreparedStatement2 != null) {
                                                }
                                                if (sQLitePreparedStatement3 == null) {
                                                }
                                            } catch (Throwable th9) {
                                                sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                                                th = th9;
                                                sQLiteCursor5 = null;
                                                sQLiteCursor = sQLiteCursor5;
                                                sQLitePreparedStatement = null;
                                                sQLitePreparedStatement2 = null;
                                                if (sQLiteCursorQueryFinalized != null) {
                                                }
                                                if (sQLiteCursor != null) {
                                                }
                                                if (sQLitePreparedStatement2 != null) {
                                                }
                                                if (sQLitePreparedStatement != null) {
                                                }
                                            }
                                        }
                                        this.database.executeFast(str11 + j).stepThis().dispose();
                                        this.database.executeFast(str10 + j).stepThis().dispose();
                                        this.database.executeFast("DELETE FROM bot_keyboard_topics WHERE uid = " + j).stepThis().dispose();
                                        this.database.executeFast("DELETE FROM media_counts_v2 WHERE uid = " + j).stepThis().dispose();
                                        this.database.executeFast("DELETE FROM media_v4 WHERE uid = " + j).stepThis().dispose();
                                        this.database.executeFast("DELETE FROM media_holes_v2 WHERE uid = " + j).stepThis().dispose();
                                        getMediaDataController().clearBotKeyboard(j);
                                        sQLitePreparedStatementExecuteFast2 = this.database.executeFast("REPLACE INTO messages_holes VALUES(?, ?, ?)");
                                        try {
                                            sQLitePreparedStatementExecuteFast3 = this.database.executeFast("REPLACE INTO media_holes_v2 VALUES(?, ?, ?, ?)");
                                            i3 = i2;
                                            if (i3 != -1) {
                                                sQLiteCursor9 = sQLiteCursorQueryFinalized2;
                                                j3 = j;
                                                try {
                                                    createFirstHoles(j, sQLitePreparedStatementExecuteFast2, sQLitePreparedStatementExecuteFast3, i3, 0L);
                                                } catch (Exception e12) {
                                                    sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast2;
                                                    sQLiteCursorQueryFinalized = sQLiteCursor9;
                                                    sQLiteCursor2 = null;
                                                    sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast3;
                                                    exc = e12;
                                                    checkSQLException(exc);
                                                    if (sQLiteCursorQueryFinalized != null) {
                                                    }
                                                    if (sQLiteCursor2 != null) {
                                                    }
                                                    if (sQLitePreparedStatement2 != null) {
                                                    }
                                                    if (sQLitePreparedStatement3 == null) {
                                                    }
                                                } catch (Throwable th10) {
                                                    sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast2;
                                                    sQLiteCursorQueryFinalized = sQLiteCursor9;
                                                    sQLiteCursor = null;
                                                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast3;
                                                    th = th10;
                                                }
                                            } else {
                                                sQLiteCursor9 = sQLiteCursorQueryFinalized2;
                                                j3 = j;
                                            }
                                            sQLitePreparedStatementExecuteFast2.dispose();
                                            sQLitePreparedStatementExecuteFast3.dispose();
                                            updateWidgets(j3);
                                        } catch (Exception e13) {
                                            exc = e13;
                                            sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast2;
                                            sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                                            sQLitePreparedStatement3 = null;
                                            sQLiteCursor2 = null;
                                        } catch (Throwable th11) {
                                            th = th11;
                                            sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast2;
                                            sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                                            sQLitePreparedStatement = null;
                                            sQLiteCursor = null;
                                        }
                                    } catch (Exception e14) {
                                        e = e14;
                                        sQLiteCursor8 = sQLiteCursorQueryFinalized2;
                                        exc = e;
                                        sQLiteCursorQueryFinalized = sQLiteCursor8;
                                        sQLiteCursor6 = null;
                                        sQLiteCursor2 = sQLiteCursor6;
                                        sQLitePreparedStatement3 = null;
                                        sQLitePreparedStatement2 = null;
                                        checkSQLException(exc);
                                        if (sQLiteCursorQueryFinalized != null) {
                                        }
                                        if (sQLiteCursor2 != null) {
                                        }
                                        if (sQLitePreparedStatement2 != null) {
                                        }
                                        if (sQLitePreparedStatement3 == null) {
                                        }
                                    } catch (Throwable th12) {
                                        th = th12;
                                        sQLiteCursor7 = sQLiteCursorQueryFinalized2;
                                        th = th;
                                        sQLiteCursorQueryFinalized = sQLiteCursor7;
                                        sQLiteCursor5 = null;
                                        sQLiteCursor = sQLiteCursor5;
                                        sQLitePreparedStatement = null;
                                        sQLitePreparedStatement2 = null;
                                        if (sQLiteCursorQueryFinalized != null) {
                                        }
                                        if (sQLiteCursor != null) {
                                        }
                                        if (sQLitePreparedStatement2 != null) {
                                        }
                                        if (sQLitePreparedStatement != null) {
                                        }
                                    }
                                } else {
                                    sQLiteCursor9 = sQLiteCursorQueryFinalized2;
                                }
                                try {
                                    sQLiteCursor9.dispose();
                                    return;
                                } catch (Throwable th13) {
                                    th = th13;
                                    sQLiteCursorQueryFinalized = sQLiteCursor9;
                                    sQLiteCursor3 = null;
                                    sQLitePreparedStatement4 = null;
                                    sQLitePreparedStatement2 = null;
                                    SQLitePreparedStatement sQLitePreparedStatement52 = sQLitePreparedStatement4;
                                    sQLiteCursor = sQLiteCursor3;
                                    sQLitePreparedStatement = sQLitePreparedStatement52;
                                    if (sQLiteCursorQueryFinalized != null) {
                                    }
                                    if (sQLiteCursor != null) {
                                    }
                                    if (sQLitePreparedStatement2 != null) {
                                    }
                                    if (sQLitePreparedStatement != null) {
                                    }
                                }
                            } catch (Exception e15) {
                                e = e15;
                                sQLiteCursor8 = sQLiteCursorQueryFinalized2;
                            } catch (Throwable th14) {
                                th = th14;
                                sQLiteCursor7 = sQLiteCursorQueryFinalized2;
                            }
                        } else {
                            str4 = "DELETE FROM media_holes_v2 WHERE uid = ";
                            str5 = "DELETE FROM media_v4 WHERE uid = ";
                            j2 = j;
                            str6 = "DELETE FROM media_counts_v2 WHERE uid = ";
                            str7 = "DELETE FROM messages_holes WHERE uid = ";
                            str8 = "DELETE FROM bot_keyboard_topics WHERE uid = ";
                            str9 = "DELETE FROM bot_keyboard WHERE uid = ";
                        }
                        this.database.executeFast("UPDATE dialogs SET unread_count = 0, unread_count_i = 0 WHERE did = " + j2).stepThis().dispose();
                        this.database.executeFast("DELETE FROM messages_v2 WHERE uid = " + j2).stepThis().dispose();
                        if (j2 == getUserConfig().getClientUserId()) {
                            this.database.executeFast("DELETE FROM messages_topics WHERE uid = " + j2).stepThis().dispose();
                        }
                        this.database.executeFast(str9 + j2).stepThis().dispose();
                        this.database.executeFast(str8 + j2).stepThis().dispose();
                        this.database.executeFast(str6 + j2).stepThis().dispose();
                        this.database.executeFast(str5 + j2).stepThis().dispose();
                        this.database.executeFast(str7 + j2).stepThis().dispose();
                        this.database.executeFast(str4 + j2).stepThis().dispose();
                        getMediaDataController().clearBotKeyboard(j2);
                        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda220
                            @Override // java.lang.Runnable
                            public final void run() {
                                this.f$0.lambda$deleteDialog$84();
                            }
                        });
                        resetAllUnreadCounters(false);
                        updateWidgets(j2);
                        return;
                    } catch (Exception e16) {
                        exc = e16;
                        sQLiteCursorQueryFinalized = null;
                    } catch (Throwable th15) {
                        th = th15;
                        sQLiteCursorQueryFinalized = null;
                    }
                } catch (Exception e17) {
                    exc = e17;
                    sQLitePreparedStatement3 = null;
                    sQLiteCursor2 = null;
                    sQLitePreparedStatement2 = null;
                    checkSQLException(exc);
                    if (sQLiteCursorQueryFinalized != null) {
                    }
                    if (sQLiteCursor2 != null) {
                    }
                    if (sQLitePreparedStatement2 != null) {
                    }
                    if (sQLitePreparedStatement3 == null) {
                    }
                } catch (Throwable th16) {
                    th = th16;
                    sQLitePreparedStatement = null;
                    sQLiteCursor = null;
                    sQLitePreparedStatement2 = null;
                    if (sQLiteCursorQueryFinalized != null) {
                    }
                    if (sQLiteCursor != null) {
                    }
                    if (sQLitePreparedStatement2 != null) {
                    }
                    if (sQLitePreparedStatement != null) {
                    }
                }
            } catch (Exception e18) {
                exc = e18;
                sQLiteCursorQueryFinalized = null;
            } catch (Throwable th17) {
                th = th17;
                sQLiteCursorQueryFinalized = null;
            }
        } else {
            str = "SELECT data FROM messages_v2 WHERE uid = ";
            if (DialogObject.isEncryptedDialog(j)) {
                QueryFinalized = this.database.queryFinalized("SELECT data FROM messages_v2 WHERE uid = " + j, new Object[0]);
                ArrayList<File> arrayList32 = new ArrayList<>();
                ArrayList arrayList42 = new ArrayList();
                ArrayList arrayList52 = new ArrayList();
                QueryFinalized = QueryFinalized;
                while (QueryFinalized.next()) {
                }
                arrayList = arrayList42;
                arrayList2 = arrayList32;
                sQLiteCursor4 = QueryFinalized;
                str2 = str;
                str3 = str12;
                z = true;
                sQLiteCursor4.dispose();
                deleteFromDownloadQueue(arrayList52, z);
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda219
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$deleteDialog$83(arrayList);
                    }
                });
                getFileLoader().deleteFiles(arrayList2, i);
                String str1322 = "DELETE FROM bot_keyboard WHERE uid = ";
                String str1422 = "DELETE FROM messages_holes WHERE uid = ";
                if (i == 0) {
                    str4 = "DELETE FROM media_holes_v2 WHERE uid = ";
                    str5 = "DELETE FROM media_v4 WHERE uid = ";
                    j2 = j;
                    str6 = "DELETE FROM media_counts_v2 WHERE uid = ";
                    str7 = "DELETE FROM messages_holes WHERE uid = ";
                    str8 = "DELETE FROM bot_keyboard_topics WHERE uid = ";
                    str9 = "DELETE FROM bot_keyboard WHERE uid = ";
                    this.database.executeFast("DELETE FROM dialogs WHERE did = " + j2).stepThis().dispose();
                    this.database.executeFast("DELETE FROM chat_pinned_v2 WHERE uid = " + j2).stepThis().dispose();
                    this.database.executeFast("DELETE FROM chat_pinned_count WHERE uid = " + j2).stepThis().dispose();
                    this.database.executeFast("DELETE FROM channel_users_v2 WHERE did = " + j2).stepThis().dispose();
                    this.database.executeFast("DELETE FROM search_recent WHERE did = " + j2).stepThis().dispose();
                    if (!DialogObject.isEncryptedDialog(j)) {
                    }
                    sQLitePreparedStatementExecuteFast.stepThis().dispose();
                }
                this.database.executeFast("UPDATE dialogs SET unread_count = 0, unread_count_i = 0 WHERE did = " + j2).stepThis().dispose();
                this.database.executeFast("DELETE FROM messages_v2 WHERE uid = " + j2).stepThis().dispose();
                if (j2 == getUserConfig().getClientUserId()) {
                }
                this.database.executeFast(str9 + j2).stepThis().dispose();
                this.database.executeFast(str8 + j2).stepThis().dispose();
                this.database.executeFast(str6 + j2).stepThis().dispose();
                this.database.executeFast(str5 + j2).stepThis().dispose();
                this.database.executeFast(str7 + j2).stepThis().dispose();
                this.database.executeFast(str4 + j2).stepThis().dispose();
                getMediaDataController().clearBotKeyboard(j2);
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda220
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$deleteDialog$84();
                    }
                });
                resetAllUnreadCounters(false);
                updateWidgets(j2);
                return;
            }
        }
        if (sQLiteCursorQueryFinalized != null) {
            sQLiteCursorQueryFinalized.dispose();
        }
        if (sQLiteCursor != null) {
            sQLiteCursor.dispose();
        }
        if (sQLitePreparedStatement2 != null) {
            sQLitePreparedStatement2.dispose();
        }
        if (sQLitePreparedStatement != null) {
            throw th;
        }
        sQLitePreparedStatement.dispose();
        throw th;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteFromDownloadQueue$177(ArrayList arrayList) {
        getDownloadController().cancelDownloading(arrayList);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteSavedDialog$52(long j, ArrayList arrayList) {
        getMessagesController().markDialogMessageAsDeleted(j, arrayList);
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.messagesDeleted, arrayList, 0L, Boolean.FALSE);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteSavedDialog$53(long j) throws Throwable {
        final long clientUserId;
        SQLiteCursor sQLiteCursorQueryFinalized;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                clientUserId = getUserConfig().getClientUserId();
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT mid FROM messages_topics WHERE uid = ? AND topic_id = ?", Long.valueOf(clientUserId), Long.valueOf(j));
            } catch (Exception e) {
                e = e;
            }
        } catch (Throwable th) {
            th = th;
        }
        try {
            final ArrayList<Integer> arrayList = new ArrayList<>();
            while (sQLiteCursorQueryFinalized.next()) {
                arrayList.add(Integer.valueOf(sQLiteCursorQueryFinalized.intValue(0)));
            }
            sQLiteCursorQueryFinalized.dispose();
            sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT mid, data FROM messages_v2 WHERE uid = ?", Long.valueOf(clientUserId));
            while (sQLiteCursorQueryFinalized.next()) {
                int iIntValue = sQLiteCursorQueryFinalized.intValue(0);
                if (!arrayList.contains(Integer.valueOf(iIntValue))) {
                    NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(1);
                    if (MessageObject.getSavedDialogId(clientUserId, TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false)) == j) {
                        arrayList.add(Integer.valueOf(iIntValue));
                    }
                    nativeByteBufferByteBufferValue.reuse();
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            if (arrayList.isEmpty()) {
                return;
            }
            lambda$markMessagesAsDeleted$212(clientUserId, arrayList, true, 0, 0);
            updateDialogsWithDeletedMessages(clientUserId, -clientUserId, arrayList, null, false);
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda218
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$deleteSavedDialog$52(clientUserId, arrayList);
                }
            });
        } catch (Exception e2) {
            e = e2;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            checkSQLException(e);
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
        } catch (Throwable th2) {
            th = th2;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteStoryPushMessage$39(long j) {
        try {
            this.database.executeFast("DELETE FROM story_pushes WHERE uid = " + j).stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteUserChatHistory$80(ArrayList arrayList, long j, ArrayList arrayList2) {
        getFileLoader().cancelLoadFiles(arrayList);
        getMessagesController().markDialogMessageAsDeleted(j, arrayList2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteUserChatHistory$81(ArrayList arrayList, long j) {
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.messagesDeleted, arrayList, Long.valueOf(DialogObject.isChatDialog(j) ? -j : 0L), Boolean.FALSE);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:30:0x0093  */
    /* JADX WARN: Removed duplicated region for block: B:39:0x00c7  */
    /* JADX WARN: Removed duplicated region for block: B:41:0x00ca  */
    /* JADX WARN: Removed duplicated region for block: B:44:0x00e4 A[Catch: all -> 0x00ed, Exception -> 0x00f0, TRY_LEAVE, TryCatch #7 {Exception -> 0x00f0, all -> 0x00ed, blocks: (B:3:0x0004, B:37:0x00a4, B:42:0x00cd, B:44:0x00e4), top: B:70:0x0004 }] */
    /* JADX WARN: Removed duplicated region for block: B:58:0x0101  */
    /* JADX WARN: Removed duplicated region for block: B:75:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Type inference failed for: r13v0 */
    /* JADX WARN: Type inference failed for: r13v1, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r13v6 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$deleteUserChatHistory$82(final long j, long j2) throws Throwable {
        SQLiteCursor sQLiteCursor;
        ArrayList<Pair<Long, Integer>> arrayList;
        boolean z;
        try {
            final ArrayList<Integer> arrayList2 = new ArrayList<>();
            ?? r13 = 0;
            SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT data FROM messages_v2 WHERE uid = " + j, new Object[0]);
            try {
                try {
                    ArrayList<File> arrayList3 = new ArrayList<>();
                    final ArrayList<String> arrayList4 = new ArrayList<>();
                    ArrayList<Pair<Long, Integer>> arrayList5 = new ArrayList<>();
                    while (sQLiteCursorQueryFinalized.next()) {
                        try {
                            NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(r13);
                            if (nativeByteBufferByteBufferValue != 0) {
                                TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(r13), r13);
                                if (messageTLdeserialize != null) {
                                    messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                                    try {
                                        if (!UserObject.isReplyUser(j) || MessageObject.getPeerId(messageTLdeserialize.fwd_from.from_id) != j2) {
                                            if (MessageObject.getFromChatId(messageTLdeserialize) != j2 || messageTLdeserialize.id == 1) {
                                                arrayList = arrayList5;
                                                z = true;
                                            }
                                            nativeByteBufferByteBufferValue.reuse();
                                            arrayList5 = arrayList;
                                        }
                                        addFilesToDelete(messageTLdeserialize, arrayList3, arrayList5, arrayList4, false);
                                        nativeByteBufferByteBufferValue.reuse();
                                        arrayList5 = arrayList;
                                    } catch (Exception e) {
                                        e = e;
                                        checkSQLException(e);
                                        sQLiteCursorQueryFinalized.dispose();
                                        deleteFromDownloadQueue(arrayList, z);
                                        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda148
                                            @Override // java.lang.Runnable
                                            public final void run() {
                                                this.f$0.lambda$deleteUserChatHistory$80(arrayList4, j, arrayList2);
                                            }
                                        });
                                        lambda$markMessagesAsDeleted$212(j, arrayList2, false, 0, 0);
                                        lambda$updateDialogsWithDeletedMessages$211(j, !DialogObject.isChatDialog(j) ? -j : 0L, arrayList2, null);
                                        getFileLoader().deleteFiles(arrayList3, 0);
                                        if (arrayList2.isEmpty()) {
                                        }
                                    }
                                    arrayList2.add(Integer.valueOf(messageTLdeserialize.id));
                                    z = true;
                                    arrayList = arrayList5;
                                }
                            }
                            r13 = 0;
                        } catch (Exception e2) {
                            e = e2;
                            arrayList = arrayList5;
                            z = true;
                        }
                    }
                    arrayList = arrayList5;
                    z = true;
                    sQLiteCursorQueryFinalized.dispose();
                    deleteFromDownloadQueue(arrayList, z);
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda148
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$deleteUserChatHistory$80(arrayList4, j, arrayList2);
                        }
                    });
                    lambda$markMessagesAsDeleted$212(j, arrayList2, false, 0, 0);
                    lambda$updateDialogsWithDeletedMessages$211(j, !DialogObject.isChatDialog(j) ? -j : 0L, arrayList2, null);
                    getFileLoader().deleteFiles(arrayList3, 0);
                    if (arrayList2.isEmpty()) {
                        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda149
                            @Override // java.lang.Runnable
                            public final void run() {
                                this.f$0.lambda$deleteUserChatHistory$81(arrayList2, j);
                            }
                        });
                    }
                } catch (Throwable th) {
                    th = th;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    if (sQLiteCursor != null) {
                        sQLiteCursor.dispose();
                    }
                    throw th;
                }
            } catch (Exception e3) {
                e = e3;
                sQLiteCursor = sQLiteCursorQueryFinalized;
                try {
                    checkSQLException(e);
                    if (sQLiteCursor != null) {
                        sQLiteCursor.dispose();
                    }
                } catch (Throwable th2) {
                    th = th2;
                    if (sQLiteCursor != null) {
                    }
                    throw th;
                }
            }
        } catch (Exception e4) {
            e = e4;
            sQLiteCursor = null;
        } catch (Throwable th3) {
            th = th3;
            sQLiteCursor = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteWallpaper$76(long j) {
        try {
            this.database.executeFast("DELETE FROM wallpapers2 WHERE uid = " + j).stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$emptyMessagesMedia$91(ArrayList arrayList) {
        for (int i = 0; i < arrayList.size(); i++) {
            getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.updateMessageMedia, arrayList.get(i));
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$emptyMessagesMedia$92(ArrayList arrayList) {
        getFileLoader().cancelLoadFiles(arrayList);
    }

    private /* synthetic */ void lambda$emptyMessagesMedia$93(ArrayList arrayList) {
        if (getMessagesController().getSavedMessagesController().updateSavedDialogs(arrayList)) {
            getMessagesController().getSavedMessagesController().update();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:131:0x026c  */
    /* JADX WARN: Removed duplicated region for block: B:137:0x0278  */
    /* JADX WARN: Removed duplicated region for block: B:139:0x027d  */
    /* JADX WARN: Removed duplicated region for block: B:168:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$emptyMessagesMedia$94(ArrayList arrayList, long j) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        final MessagesStorage messagesStorage;
        SQLiteCursor sQLiteCursor;
        NativeByteBuffer nativeByteBuffer;
        NativeByteBuffer nativeByteBuffer2;
        MessagesStorage messagesStorage2 = this;
        boolean z = false;
        int i = 2;
        int i2 = 1;
        try {
            ArrayList<File> arrayList2 = new ArrayList<>();
            final ArrayList<String> arrayList3 = new ArrayList<>();
            ArrayList<Pair<Long, Integer>> arrayList4 = new ArrayList<>();
            final ArrayList arrayList5 = new ArrayList();
            SQLiteCursor sQLiteCursorQueryFinalized = messagesStorage2.database.queryFinalized(String.format(Locale.US, "SELECT data, mid, date, uid, custom_params FROM messages_v2 WHERE mid IN (%s) AND uid = %d", TextUtils.join(",", arrayList), Long.valueOf(j)), new Object[0]);
            while (sQLiteCursorQueryFinalized.next()) {
                try {
                    NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(z ? 1 : 0);
                    if (nativeByteBufferByteBufferValue != null) {
                        TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(z), z);
                        messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                        nativeByteBufferByteBufferValue.reuse();
                        if (messageTLdeserialize.media != null) {
                            if (addFilesToDelete(messageTLdeserialize, arrayList2, arrayList4, arrayList3, true)) {
                                TLRPC.MessageMedia messageMedia = messageTLdeserialize.media;
                                if (messageMedia.document != null) {
                                    messageMedia.document = new TLRPC.TL_documentEmpty();
                                } else if (messageMedia.photo != null) {
                                    messageMedia.photo = new TLRPC.TL_photoEmpty();
                                }
                                messageTLdeserialize.media.flags &= -2;
                                messageTLdeserialize.id = sQLiteCursorQueryFinalized.intValue(1);
                                messageTLdeserialize.date = sQLiteCursorQueryFinalized.intValue(2);
                                messageTLdeserialize.dialog_id = sQLiteCursorQueryFinalized.longValue(3);
                                NativeByteBuffer nativeByteBufferByteBufferValue2 = sQLiteCursorQueryFinalized.byteBufferValue(4);
                                if (nativeByteBufferByteBufferValue2 != null) {
                                    MessageCustomParamsHelper.readLocalParams(messageTLdeserialize, nativeByteBufferByteBufferValue2);
                                    nativeByteBufferByteBufferValue2.reuse();
                                }
                                arrayList5.add(messageTLdeserialize);
                            }
                            z = false;
                        }
                    }
                } catch (Exception e) {
                    e = e;
                    messagesStorage = messagesStorage2;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    sQLitePreparedStatementExecuteFast = null;
                } catch (Throwable th) {
                    th = th;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    sQLitePreparedStatementExecuteFast = null;
                }
            }
            int i3 = 3;
            sQLiteCursorQueryFinalized.dispose();
            messagesStorage2.deleteFromDownloadQueue(arrayList4, true);
            if (arrayList5.isEmpty()) {
                messagesStorage = messagesStorage2;
                sQLitePreparedStatementExecuteFast = null;
            } else {
                sQLitePreparedStatementExecuteFast = messagesStorage2.database.executeFast("REPLACE INTO messages_v2 VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 0, ?, ?, ?)");
                int i4 = 0;
                while (i4 < arrayList5.size()) {
                    try {
                        try {
                            TLRPC.Message message = (TLRPC.Message) arrayList5.get(i4);
                            MessageObject.normalizeFlags(message);
                            NativeByteBuffer nativeByteBuffer3 = new NativeByteBuffer(message.getObjectSize());
                            message.serializeToStream(nativeByteBuffer3);
                            sQLitePreparedStatementExecuteFast.requery();
                            sQLitePreparedStatementExecuteFast.bindInteger(i2, message.id);
                            sQLitePreparedStatementExecuteFast.bindLong(i, message.dialog_id);
                            sQLitePreparedStatementExecuteFast.bindInteger(i3, MessageObject.getUnreadFlags(message));
                            sQLitePreparedStatementExecuteFast.bindInteger(4, message.send_state);
                            sQLitePreparedStatementExecuteFast.bindInteger(5, message.date);
                            sQLitePreparedStatementExecuteFast.bindByteBuffer(6, nativeByteBuffer3);
                            sQLitePreparedStatementExecuteFast.bindInteger(7, (MessageObject.isOut(message) || message.from_scheduled) ? 1 : 0);
                            sQLitePreparedStatementExecuteFast.bindInteger(8, message.ttl);
                            if ((message.flags & 1024) != 0) {
                                sQLitePreparedStatementExecuteFast.bindInteger(9, message.views);
                            } else {
                                sQLitePreparedStatementExecuteFast.bindInteger(9, messagesStorage2.getMessageMediaType(message));
                            }
                            if (message.replyStory != null) {
                                nativeByteBuffer = new NativeByteBuffer(message.replyStory.getObjectSize());
                                message.replyStory.serializeToStream(nativeByteBuffer);
                                sQLitePreparedStatementExecuteFast.bindByteBuffer(10, nativeByteBuffer);
                            } else {
                                sQLitePreparedStatementExecuteFast.bindNull(10);
                                nativeByteBuffer = null;
                            }
                            int i5 = message.stickerVerified;
                            sQLitePreparedStatementExecuteFast.bindInteger(11, i5 == 0 ? 1 : i5 == i ? 2 : 0);
                            sQLitePreparedStatementExecuteFast.bindInteger(12, message.mentioned ? 1 : 0);
                            sQLitePreparedStatementExecuteFast.bindInteger(13, message.forwards);
                            if (message.replies != null) {
                                nativeByteBuffer2 = new NativeByteBuffer(message.replies.getObjectSize());
                                message.replies.serializeToStream(nativeByteBuffer2);
                                sQLitePreparedStatementExecuteFast.bindByteBuffer(14, nativeByteBuffer2);
                            } else {
                                sQLitePreparedStatementExecuteFast.bindNull(14);
                                nativeByteBuffer2 = null;
                            }
                            TLRPC.MessageReplyHeader messageReplyHeader = message.reply_to;
                            if (messageReplyHeader != null) {
                                int i6 = messageReplyHeader.reply_to_top_id;
                                if (i6 == 0) {
                                    i6 = messageReplyHeader.reply_to_msg_id;
                                }
                                sQLitePreparedStatementExecuteFast.bindInteger(15, i6);
                            } else {
                                sQLitePreparedStatementExecuteFast.bindInteger(15, 0);
                            }
                            sQLitePreparedStatementExecuteFast.bindLong(16, MessageObject.getChannelId(message));
                            NativeByteBuffer nativeByteBufferWriteLocalParams = MessageCustomParamsHelper.writeLocalParams(message);
                            if (nativeByteBufferWriteLocalParams != null) {
                                sQLitePreparedStatementExecuteFast.bindByteBuffer(16, nativeByteBufferWriteLocalParams);
                            } else {
                                sQLitePreparedStatementExecuteFast.bindNull(17);
                            }
                            NativeByteBuffer nativeByteBuffer4 = nativeByteBuffer;
                            if ((message.flags & 131072) != 0) {
                                sQLitePreparedStatementExecuteFast.bindLong(18, message.grouped_id);
                            } else {
                                sQLitePreparedStatementExecuteFast.bindNull(18);
                            }
                            TLRPC.MessageReplyHeader messageReplyHeader2 = message.reply_to;
                            if (messageReplyHeader2 != null) {
                                sQLitePreparedStatementExecuteFast.bindInteger(19, messageReplyHeader2.story_id);
                            } else {
                                sQLitePreparedStatementExecuteFast.bindInteger(19, 0);
                            }
                            sQLitePreparedStatementExecuteFast.step();
                            nativeByteBuffer3.reuse();
                            if (nativeByteBuffer2 != null) {
                                nativeByteBuffer2.reuse();
                            }
                            if (nativeByteBufferWriteLocalParams != null) {
                                nativeByteBufferWriteLocalParams.reuse();
                            }
                            if (nativeByteBuffer4 != null) {
                                nativeByteBuffer4.reuse();
                            }
                            i4++;
                            i3 = 3;
                            i = 2;
                            i2 = 1;
                            messagesStorage2 = this;
                        } catch (Exception e2) {
                            e = e2;
                            sQLiteCursor = null;
                            messagesStorage = this;
                            try {
                                messagesStorage.checkSQLException(e);
                                if (sQLiteCursor != null) {
                                    sQLiteCursor.dispose();
                                }
                                if (sQLitePreparedStatementExecuteFast == null) {
                                    return;
                                }
                                sQLitePreparedStatementExecuteFast.dispose();
                            } catch (Throwable th2) {
                                th = th2;
                                if (sQLiteCursor != null) {
                                    sQLiteCursor.dispose();
                                }
                                if (sQLitePreparedStatementExecuteFast != null) {
                                    sQLitePreparedStatementExecuteFast.dispose();
                                }
                                throw th;
                            }
                        } catch (Throwable th3) {
                            th = th3;
                            sQLiteCursor = null;
                            if (sQLiteCursor != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast != null) {
                            }
                            throw th;
                        }
                    } catch (Exception e3) {
                        e = e3;
                        messagesStorage = messagesStorage2;
                    } catch (Throwable th4) {
                        th = th4;
                    }
                }
                if (sQLitePreparedStatementExecuteFast != null) {
                    sQLitePreparedStatementExecuteFast.dispose();
                    sQLitePreparedStatementExecuteFast = null;
                }
                try {
                    messagesStorage = this;
                    try {
                        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda152
                            @Override // java.lang.Runnable
                            public final void run() {
                                this.f$0.lambda$emptyMessagesMedia$91(arrayList5);
                            }
                        });
                    } catch (Exception e4) {
                        e = e4;
                        sQLiteCursor = null;
                        messagesStorage.checkSQLException(e);
                        if (sQLiteCursor != null) {
                        }
                        if (sQLitePreparedStatementExecuteFast == null) {
                        }
                        sQLitePreparedStatementExecuteFast.dispose();
                    } catch (Throwable th5) {
                        th = th5;
                        sQLiteCursor = null;
                        if (sQLiteCursor != null) {
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                        }
                        throw th;
                    }
                } catch (Exception e5) {
                    e = e5;
                    messagesStorage = this;
                    sQLiteCursor = null;
                    messagesStorage.checkSQLException(e);
                    if (sQLiteCursor != null) {
                    }
                    if (sQLitePreparedStatementExecuteFast == null) {
                    }
                    sQLitePreparedStatementExecuteFast.dispose();
                } catch (Throwable th6) {
                    th = th6;
                    sQLiteCursor = null;
                    if (sQLiteCursor != null) {
                    }
                    if (sQLitePreparedStatementExecuteFast != null) {
                    }
                    throw th;
                }
            }
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda153
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$emptyMessagesMedia$92(arrayList3);
                }
            });
            getFileLoader().deleteFiles(arrayList2, 0);
            if (sQLitePreparedStatementExecuteFast == null) {
                return;
            }
        } catch (Exception e6) {
            e = e6;
            messagesStorage = messagesStorage2;
            sQLitePreparedStatementExecuteFast = null;
        } catch (Throwable th7) {
            th = th7;
            sQLitePreparedStatementExecuteFast = null;
        }
        sQLitePreparedStatementExecuteFast.dispose();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$fixNotificationSettings$9() {
        try {
            LongSparseArray longSparseArray = new LongSparseArray();
            Map<String, ?> all = MessagesController.getNotificationsSettings(this.currentAccount).getAll();
            for (Map.Entry<String, ?> entry : all.entrySet()) {
                String key = entry.getKey();
                if (key.startsWith(NotificationsSettingsFacade.PROPERTY_NOTIFY)) {
                    Integer num = (Integer) entry.getValue();
                    if (num.intValue() == 2 || num.intValue() == 3) {
                        String strReplace = key.replace(NotificationsSettingsFacade.PROPERTY_NOTIFY, "");
                        long jIntValue = 1;
                        if (num.intValue() != 2) {
                            if (((Integer) all.get(NotificationsSettingsFacade.PROPERTY_NOTIFY_UNTIL + strReplace)) != null) {
                                jIntValue = 1 | (r4.intValue() << 32);
                            }
                        }
                        try {
                            longSparseArray.put(Long.parseLong(strReplace), Long.valueOf(jIntValue));
                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    }
                }
            }
            try {
                this.database.beginTransaction();
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO dialog_settings VALUES(?, ?)");
                for (int i = 0; i < longSparseArray.size(); i++) {
                    sQLitePreparedStatementExecuteFast.requery();
                    sQLitePreparedStatementExecuteFast.bindLong(1, longSparseArray.keyAt(i));
                    sQLitePreparedStatementExecuteFast.bindLong(2, ((Long) longSparseArray.valueAt(i)).longValue());
                    sQLitePreparedStatementExecuteFast.step();
                }
                sQLitePreparedStatementExecuteFast.dispose();
                this.database.commitTransaction();
            } catch (Exception e2) {
                checkSQLException(e2);
            }
        } catch (Throwable th) {
            checkSQLException(th);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$fullReset$59() {
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.onDatabaseReset, new Object[0]);
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.didClearDatabase, new Object[0]);
        getMessagesController().getSavedMessagesController().cleanup();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$fullReset$60() throws Exception {
        cleanupInternal(true);
        clearLoadingDialogsOffsets();
        openDatabase(1);
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda98
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$fullReset$59();
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:27:0x005e  */
    /* JADX WARN: Removed duplicated region for block: B:45:0x0081  */
    /* JADX WARN: Removed duplicated region for block: B:49:0x008a  */
    /* JADX WARN: Removed duplicated region for block: B:66:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Type inference failed for: r6v13 */
    /* JADX WARN: Type inference failed for: r6v14 */
    /* JADX WARN: Type inference failed for: r6v5, types: [org.telegram.SQLite.SQLiteCursor] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$getBotCache$122(int i, String str, RequestDelegate requestDelegate) throws Throwable {
        TLObject tLObjectTLdeserialize = null;
        try {
            try {
                this.database.executeFast("DELETE FROM botcache WHERE date < " + i).stepThis().dispose();
            } catch (Throwable th) {
                th = th;
            }
        } catch (Exception e) {
            e = e;
        } catch (Throwable th2) {
            th = th2;
        }
        try {
            i = this.database.queryFinalized("SELECT data FROM botcache WHERE id = ?", str);
            try {
                try {
                    if (i.next()) {
                        try {
                            NativeByteBuffer nativeByteBufferByteBufferValue = i.byteBufferValue(0);
                            if (nativeByteBufferByteBufferValue != null) {
                                int int32 = nativeByteBufferByteBufferValue.readInt32(false);
                                tLObjectTLdeserialize = int32 == 911761060 ? TLRPC.TL_messages_botCallbackAnswer.TLdeserialize(nativeByteBufferByteBufferValue, int32, false) : TLRPC.messages_BotResults.TLdeserialize(nativeByteBufferByteBufferValue, int32, false);
                                try {
                                    nativeByteBufferByteBufferValue.reuse();
                                } catch (Exception e2) {
                                    e = e2;
                                    try {
                                        checkSQLException(e);
                                        i.dispose();
                                        requestDelegate.run(tLObjectTLdeserialize, null);
                                    } catch (Exception e3) {
                                        e = e3;
                                        i = i;
                                        checkSQLException(e);
                                        requestDelegate.run(tLObjectTLdeserialize, null);
                                        if (i == 0) {
                                            i.dispose();
                                            return;
                                        }
                                        return;
                                    }
                                }
                            } else {
                                tLObjectTLdeserialize = null;
                            }
                        } catch (Exception e4) {
                            e = e4;
                            tLObjectTLdeserialize = null;
                        }
                    }
                    i.dispose();
                    requestDelegate.run(tLObjectTLdeserialize, null);
                } catch (Throwable th3) {
                    th = th3;
                    tLObjectTLdeserialize = null;
                    requestDelegate.run(tLObjectTLdeserialize, null);
                    if (i != 0) {
                        i.dispose();
                    }
                    throw th;
                }
            } catch (Exception e5) {
                e = e5;
                tLObjectTLdeserialize = null;
                i = i;
            }
        } catch (Exception e6) {
            e = e6;
            i = 0;
            tLObjectTLdeserialize = null;
            checkSQLException(e);
            requestDelegate.run(tLObjectTLdeserialize, null);
            if (i == 0) {
            }
        } catch (Throwable th4) {
            th = th4;
            i = 0;
            tLObjectTLdeserialize = null;
            requestDelegate.run(tLObjectTLdeserialize, null);
            if (i != 0) {
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:53:0x00fd A[Catch: all -> 0x0131, TRY_LEAVE, TryCatch #1 {all -> 0x0131, blocks: (B:51:0x00ed, B:53:0x00fd), top: B:129:0x00ed }] */
    /* JADX WARN: Removed duplicated region for block: B:68:0x0134  */
    /* JADX WARN: Removed duplicated region for block: B:71:0x013e A[PHI: r6 r8 r13 r14
      0x013e: PHI (r6v11 int) = (r6v3 int), (r6v13 int), (r6v14 int), (r6v14 int) binds: [B:70:0x013c, B:68:0x0134, B:59:0x010e, B:60:0x0110] A[DONT_GENERATE, DONT_INLINE]
      0x013e: PHI (r8v18 int) = (r8v1 int), (r8v20 int), (r8v21 int), (r8v21 int) binds: [B:70:0x013c, B:68:0x0134, B:59:0x010e, B:60:0x0110] A[DONT_GENERATE, DONT_INLINE]
      0x013e: PHI (r13v9 org.telegram.SQLite.SQLiteCursor) = 
      (r13v4 org.telegram.SQLite.SQLiteCursor)
      (r13v10 org.telegram.SQLite.SQLiteCursor)
      (r13v10 org.telegram.SQLite.SQLiteCursor)
      (r13v10 org.telegram.SQLite.SQLiteCursor)
     binds: [B:70:0x013c, B:68:0x0134, B:59:0x010e, B:60:0x0110] A[DONT_GENERATE, DONT_INLINE]
      0x013e: PHI (r14v8 int) = (r14v1 int), (r14v9 int), (r14v11 int), (r14v11 int) binds: [B:70:0x013c, B:68:0x0134, B:59:0x010e, B:60:0x0110] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:74:0x0148 A[Catch: all -> 0x0163, Exception -> 0x0166, TRY_ENTER, TryCatch #5 {Exception -> 0x0166, blocks: (B:74:0x0148, B:81:0x0174, B:83:0x017a, B:85:0x0186, B:87:0x01a8, B:88:0x01aa, B:90:0x01ae, B:91:0x01b0, B:92:0x01b3, B:95:0x01ba, B:98:0x01c6, B:100:0x01cc, B:102:0x01d2, B:103:0x01d6, B:105:0x01f4, B:80:0x0169), top: B:131:0x0146, outer: #2 }] */
    /* JADX WARN: Removed duplicated region for block: B:80:0x0169 A[Catch: all -> 0x0163, Exception -> 0x0166, TryCatch #5 {Exception -> 0x0166, blocks: (B:74:0x0148, B:81:0x0174, B:83:0x017a, B:85:0x0186, B:87:0x01a8, B:88:0x01aa, B:90:0x01ae, B:91:0x01b0, B:92:0x01b3, B:95:0x01ba, B:98:0x01c6, B:100:0x01cc, B:102:0x01d2, B:103:0x01d6, B:105:0x01f4, B:80:0x0169), top: B:131:0x0146, outer: #2 }] */
    /* JADX WARN: Removed duplicated region for block: B:83:0x017a A[Catch: all -> 0x0163, Exception -> 0x0166, TryCatch #5 {Exception -> 0x0166, blocks: (B:74:0x0148, B:81:0x0174, B:83:0x017a, B:85:0x0186, B:87:0x01a8, B:88:0x01aa, B:90:0x01ae, B:91:0x01b0, B:92:0x01b3, B:95:0x01ba, B:98:0x01c6, B:100:0x01cc, B:102:0x01d2, B:103:0x01d6, B:105:0x01f4, B:80:0x0169), top: B:131:0x0146, outer: #2 }] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$getCachedPhoneBook$145(boolean z) {
        SQLiteCursor sQLiteCursorQueryFinalized;
        int iIntValue;
        int iMin;
        int i;
        HashMap<String, ContactsController.Contact> map;
        SQLiteCursor sQLiteCursorQueryFinalized2;
        SQLiteCursor sQLiteCursorQueryFinalized3;
        boolean next;
        int i2 = 6;
        try {
            sQLiteCursorQueryFinalized3 = this.database.queryFinalized("SELECT name FROM sqlite_master WHERE type='table' AND name='user_contacts_v6'", new Object[0]);
            try {
                next = sQLiteCursorQueryFinalized3.next();
                sQLiteCursorQueryFinalized3.dispose();
            } catch (Throwable th) {
                th = th;
                sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized3;
            }
        } catch (Throwable th2) {
            th = th2;
            sQLiteCursorQueryFinalized = null;
        }
        if (next) {
            sQLiteCursorQueryFinalized3 = this.database.queryFinalized("SELECT COUNT(uid) FROM user_contacts_v6 WHERE 1", new Object[0]);
            int iMin2 = sQLiteCursorQueryFinalized3.next() ? Math.min(5000, sQLiteCursorQueryFinalized3.intValue(0)) : 16;
            sQLiteCursorQueryFinalized3.dispose();
            SparseArray<ContactsController.Contact> sparseArray = new SparseArray<>(iMin2);
            SQLiteCursor sQLiteCursorQueryFinalized4 = this.database.queryFinalized("SELECT us.uid, us.fname, us.sname, up.phone, up.sphone, up.deleted, us.imported FROM user_contacts_v6 as us LEFT JOIN user_phones_v6 as up ON us.uid = up.uid WHERE 1", new Object[0]);
            while (sQLiteCursorQueryFinalized4.next()) {
                try {
                    int iIntValue2 = sQLiteCursorQueryFinalized4.intValue(0);
                    ContactsController.Contact contact = sparseArray.get(iIntValue2);
                    if (contact == null) {
                        contact = new ContactsController.Contact();
                        contact.first_name = sQLiteCursorQueryFinalized4.stringValue(1);
                        contact.last_name = sQLiteCursorQueryFinalized4.stringValue(2);
                        contact.imported = sQLiteCursorQueryFinalized4.intValue(i2);
                        if (contact.first_name == null) {
                            contact.first_name = "";
                        }
                        if (contact.last_name == null) {
                            contact.last_name = "";
                        }
                        contact.contact_id = iIntValue2;
                        sparseArray.put(iIntValue2, contact);
                    }
                    String strStringValue = sQLiteCursorQueryFinalized4.stringValue(3);
                    if (strStringValue != null) {
                        contact.phones.add(strStringValue);
                        String strStringValue2 = sQLiteCursorQueryFinalized4.stringValue(4);
                        if (strStringValue2 != null) {
                            if (strStringValue2.length() == 8 && strStringValue.length() != 8) {
                                strStringValue2 = PhoneFormat.stripExceptNumbers(strStringValue);
                            }
                            contact.shortPhones.add(strStringValue2);
                            contact.phoneDeleted.add(Integer.valueOf(sQLiteCursorQueryFinalized4.intValue(5)));
                            contact.phoneTypes.add("");
                            if (sparseArray.size() == 5000) {
                                break;
                            } else {
                                i2 = 6;
                            }
                        }
                    }
                } catch (Throwable th3) {
                    th = th3;
                    sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized4;
                    try {
                        checkSQLException(th);
                        if (sQLiteCursorQueryFinalized != null) {
                            sQLiteCursorQueryFinalized.dispose();
                        }
                        try {
                            sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT COUNT(key) FROM user_contacts_v7 WHERE 1", new Object[0]);
                            if (sQLiteCursorQueryFinalized.next()) {
                            }
                        } catch (Throwable th4) {
                            th = th4;
                            iIntValue = 0;
                        }
                        sQLiteCursorQueryFinalized.dispose();
                        map = new HashMap<>(iMin);
                        try {
                            try {
                                if (i == 0) {
                                }
                                sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                                while (sQLiteCursorQueryFinalized.next()) {
                                }
                                sQLiteCursorQueryFinalized.dispose();
                            } catch (Throwable th5) {
                            }
                        } catch (Exception e) {
                            map.clear();
                            checkSQLException(e);
                            if (sQLiteCursorQueryFinalized != null) {
                                sQLiteCursorQueryFinalized.dispose();
                            }
                        }
                        getContactsController().performSyncPhoneBook(map, true, true, false, false, !z, false);
                    } finally {
                        if (sQLiteCursorQueryFinalized == null) {
                            throw th;
                        }
                        sQLiteCursorQueryFinalized.dispose();
                    }
                }
            }
            sQLiteCursorQueryFinalized4.dispose();
            getContactsController().migratePhoneBookToV7(sparseArray);
            return;
        }
        sQLiteCursorQueryFinalized = null;
        sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT COUNT(key) FROM user_contacts_v7 WHERE 1", new Object[0]);
        if (sQLiteCursorQueryFinalized.next()) {
            iIntValue = 0;
            iMin = 16;
            i = 0;
        } else {
            iIntValue = sQLiteCursorQueryFinalized.intValue(0);
            try {
                iMin = Math.min(5000, iIntValue);
                i = iIntValue > 5000 ? iIntValue - 5000 : 0;
                try {
                    if (BuildVars.LOGS_ENABLED) {
                        FileLog.d(this.currentAccount + " current cached contacts count = " + iIntValue);
                    }
                } catch (Throwable th6) {
                    th = th6;
                    try {
                        checkSQLException(th);
                        if (sQLiteCursorQueryFinalized != null) {
                            sQLiteCursorQueryFinalized.dispose();
                        }
                        map = new HashMap<>(iMin);
                        if (i == 0) {
                        }
                        sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                        while (sQLiteCursorQueryFinalized.next()) {
                        }
                        sQLiteCursorQueryFinalized.dispose();
                        getContactsController().performSyncPhoneBook(map, true, true, false, false, !z, false);
                    } finally {
                        if (sQLiteCursorQueryFinalized == null) {
                            throw th5;
                        }
                        sQLiteCursorQueryFinalized.dispose();
                    }
                }
            } catch (Throwable th7) {
                th = th7;
                iMin = 16;
                i = 0;
                checkSQLException(th);
                if (sQLiteCursorQueryFinalized != null) {
                }
                map = new HashMap<>(iMin);
                if (i == 0) {
                }
                sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                while (sQLiteCursorQueryFinalized.next()) {
                }
                sQLiteCursorQueryFinalized.dispose();
                getContactsController().performSyncPhoneBook(map, true, true, false, false, !z, false);
            }
        }
        sQLiteCursorQueryFinalized.dispose();
        map = new HashMap<>(iMin);
        if (i == 0) {
            sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT us.key, us.uid, us.fname, us.sname, up.phone, up.sphone, up.deleted, us.imported FROM user_contacts_v7 as us LEFT JOIN user_phones_v7 as up ON us.key = up.key WHERE 1 LIMIT 0," + iIntValue, new Object[0]);
        } else {
            sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT us.key, us.uid, us.fname, us.sname, up.phone, up.sphone, up.deleted, us.imported FROM user_contacts_v7 as us LEFT JOIN user_phones_v7 as up ON us.key = up.key WHERE 1", new Object[0]);
        }
        sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
        while (sQLiteCursorQueryFinalized.next()) {
            String strStringValue3 = sQLiteCursorQueryFinalized.stringValue(0);
            ContactsController.Contact contact2 = map.get(strStringValue3);
            if (contact2 == null) {
                contact2 = new ContactsController.Contact();
                contact2.contact_id = sQLiteCursorQueryFinalized.intValue(1);
                contact2.first_name = sQLiteCursorQueryFinalized.stringValue(2);
                contact2.last_name = sQLiteCursorQueryFinalized.stringValue(3);
                contact2.imported = sQLiteCursorQueryFinalized.intValue(7);
                if (contact2.first_name == null) {
                    contact2.first_name = "";
                }
                if (contact2.last_name == null) {
                    contact2.last_name = "";
                }
                map.put(strStringValue3, contact2);
            }
            String strStringValue4 = sQLiteCursorQueryFinalized.stringValue(4);
            if (strStringValue4 != null) {
                contact2.phones.add(strStringValue4);
                String strStringValue5 = sQLiteCursorQueryFinalized.stringValue(5);
                if (strStringValue5 != null) {
                    if (strStringValue5.length() == 8 && strStringValue4.length() != 8) {
                        strStringValue5 = PhoneFormat.stripExceptNumbers(strStringValue4);
                    }
                    contact2.shortPhones.add(strStringValue5);
                    contact2.phoneDeleted.add(Integer.valueOf(sQLiteCursorQueryFinalized.intValue(6)));
                    contact2.phoneTypes.add("");
                    if (map.size() == 5000) {
                        break;
                    }
                }
            }
        }
        sQLiteCursorQueryFinalized.dispose();
        getContactsController().performSyncPhoneBook(map, true, true, false, false, !z, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getChannelPtsSync$240(long j, Integer[] numArr, CountDownLatch countDownLatch) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT pts FROM dialogs WHERE did = " + (-j), new Object[0]);
                if (sQLiteCursorQueryFinalized.next()) {
                    numArr[0] = Integer.valueOf(sQLiteCursorQueryFinalized.intValue(0));
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            try {
                countDownLatch.countDown();
            } catch (Exception e2) {
                checkSQLException(e2);
            }
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getChatSync$242(TLRPC.Chat[] chatArr, long j, CountDownLatch countDownLatch) {
        chatArr[0] = getChat(j);
        countDownLatch.countDown();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Not initialized variable reg: 4, insn: 0x0047: MOVE (r3 I:??[OBJECT, ARRAY]) = (r4 I:??[OBJECT, ARRAY]), block:B:13:0x0047 */
    /* JADX WARN: Removed duplicated region for block: B:31:0x0076  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$getContacts$146() throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        Exception e;
        SQLiteCursor sQLiteCursor;
        ArrayList<TLRPC.TL_contact> arrayList = new ArrayList<>();
        ArrayList<TLRPC.User> arrayList2 = new ArrayList<>();
        SQLiteCursor sQLiteCursor2 = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT * FROM contacts WHERE 1", new Object[0]);
                try {
                    ArrayList<Long> arrayList3 = new ArrayList<>();
                    while (sQLiteCursorQueryFinalized.next()) {
                        long jIntValue = sQLiteCursorQueryFinalized.intValue(0);
                        TLRPC.TL_contact tL_contact = new TLRPC.TL_contact();
                        tL_contact.user_id = jIntValue;
                        tL_contact.mutual = sQLiteCursorQueryFinalized.intValue(1) == 1;
                        arrayList.add(tL_contact);
                        arrayList3.add(Long.valueOf(tL_contact.user_id));
                    }
                    sQLiteCursorQueryFinalized.dispose();
                    if (!arrayList3.isEmpty()) {
                        getUsersInternal(arrayList3, arrayList2);
                    }
                } catch (Exception e2) {
                    e = e2;
                    arrayList.clear();
                    arrayList2.clear();
                    checkSQLException(e);
                    if (sQLiteCursorQueryFinalized != null) {
                        sQLiteCursorQueryFinalized.dispose();
                    }
                    getContactsController().processLoadedContacts(arrayList, arrayList2, 1);
                }
            } catch (Throwable th) {
                th = th;
                sQLiteCursor2 = sQLiteCursor;
                if (sQLiteCursor2 != null) {
                    sQLiteCursor2.dispose();
                }
                throw th;
            }
        } catch (Exception e3) {
            sQLiteCursorQueryFinalized = null;
            e = e3;
        } catch (Throwable th2) {
            th = th2;
            if (sQLiteCursor2 != null) {
            }
            throw th;
        }
        getContactsController().processLoadedContacts(arrayList, arrayList2, 1);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getDialogFolderId$226(long j, final IntCallback intCallback) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                if (this.unknownDialogsIds.get(j) == null) {
                    sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT folder_id FROM dialogs WHERE did = ?", Long.valueOf(j));
                    iIntValue = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : -1;
                    sQLiteCursorQueryFinalized.dispose();
                }
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda97
                    @Override // java.lang.Runnable
                    public final void run() {
                        intCallback.run(iIntValue);
                    }
                });
                if (sQLiteCursorQueryFinalized == null) {
                    return;
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized == null) {
                    return;
                }
            }
            sQLiteCursorQueryFinalized.dispose();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public static /* synthetic */ void lambda$getDialogMaxMessageId$237(IntCallback intCallback, int[] iArr) {
        intCallback.run(iArr[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getDialogMaxMessageId$238(long j, final IntCallback intCallback) {
        final int[] iArr = new int[1];
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT MAX(mid) FROM messages_v2 WHERE uid = " + j, new Object[0]);
                if (sQLiteCursorQueryFinalized.next()) {
                    iArr[0] = sQLiteCursorQueryFinalized.intValue(0);
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda71
                @Override // java.lang.Runnable
                public final void run() {
                    MessagesStorage.lambda$getDialogMaxMessageId$237(intCallback, iArr);
                }
            });
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getDialogReadMax$239(boolean z, long j, Integer[] numArr, CountDownLatch countDownLatch) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                if (z) {
                    sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT outbox_max FROM dialogs WHERE did = " + j, new Object[0]);
                    if (sQLiteCursorQueryFinalized.next()) {
                        numArr[0] = Integer.valueOf(sQLiteCursorQueryFinalized.intValue(0));
                    }
                } else {
                    sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT last_mid, inbox_max FROM dialogs WHERE did = " + j, new Object[0]);
                    if (sQLiteCursorQueryFinalized.next()) {
                        int iIntValue = sQLiteCursorQueryFinalized.intValue(0);
                        int iIntValue2 = sQLiteCursorQueryFinalized.intValue(1);
                        if (iIntValue2 > iIntValue) {
                            numArr[0] = 0;
                        } else {
                            numArr[0] = Integer.valueOf(iIntValue2);
                        }
                    }
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            countDownLatch.countDown();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getDialogs$222(LongSparseArray longSparseArray) {
        MediaDataController mediaDataController = getMediaDataController();
        mediaDataController.clearDraftsFolderIds();
        if (longSparseArray != null) {
            int size = longSparseArray.size();
            for (int i = 0; i < size; i++) {
                mediaDataController.setDraftFolderId(longSparseArray.keyAt(i), ((Integer) longSparseArray.valueAt(i)).intValue());
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:100:0x0251  */
    /* JADX WARN: Removed duplicated region for block: B:105:0x026f  */
    /* JADX WARN: Removed duplicated region for block: B:121:0x02b1  */
    /* JADX WARN: Removed duplicated region for block: B:147:0x030a  */
    /* JADX WARN: Removed duplicated region for block: B:155:0x032f A[Catch: all -> 0x02df, Exception -> 0x02e5, TryCatch #49 {Exception -> 0x02e5, all -> 0x02df, blocks: (B:148:0x031a, B:150:0x0320, B:152:0x0326, B:153:0x0329, B:155:0x032f, B:157:0x033f, B:160:0x035b, B:162:0x0363, B:164:0x036d, B:165:0x0374, B:166:0x037e, B:168:0x0386, B:170:0x0391, B:135:0x02db, B:146:0x02f6, B:198:0x043a, B:200:0x0444), top: B:484:0x0320 }] */
    /* JADX WARN: Removed duplicated region for block: B:160:0x035b A[Catch: all -> 0x02df, Exception -> 0x02e5, TryCatch #49 {Exception -> 0x02e5, all -> 0x02df, blocks: (B:148:0x031a, B:150:0x0320, B:152:0x0326, B:153:0x0329, B:155:0x032f, B:157:0x033f, B:160:0x035b, B:162:0x0363, B:164:0x036d, B:165:0x0374, B:166:0x037e, B:168:0x0386, B:170:0x0391, B:135:0x02db, B:146:0x02f6, B:198:0x043a, B:200:0x0444), top: B:484:0x0320 }] */
    /* JADX WARN: Removed duplicated region for block: B:247:0x04fd  */
    /* JADX WARN: Removed duplicated region for block: B:250:0x0502 A[Catch: all -> 0x00dc, Exception -> 0x04fb, TRY_LEAVE, TryCatch #19 {Exception -> 0x04fb, blocks: (B:244:0x04f7, B:248:0x04fe, B:250:0x0502), top: B:448:0x04f7 }] */
    /* JADX WARN: Removed duplicated region for block: B:333:0x0610 A[Catch: all -> 0x05ed, Exception -> 0x05ef, TryCatch #53 {Exception -> 0x05ef, all -> 0x05ed, blocks: (B:312:0x05c6, B:313:0x05cc, B:315:0x05cf, B:334:0x061a, B:320:0x05dd, B:322:0x05e7, B:330:0x0601, B:331:0x0604, B:333:0x0610, B:327:0x05f1, B:329:0x05fc, B:335:0x061c, B:337:0x0622, B:340:0x063b, B:357:0x0679), top: B:476:0x05c6 }] */
    /* JADX WARN: Removed duplicated region for block: B:395:0x0710  */
    /* JADX WARN: Removed duplicated region for block: B:428:0x0798  */
    /* JADX WARN: Removed duplicated region for block: B:434:0x07a1  */
    /* JADX WARN: Removed duplicated region for block: B:484:0x0320 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:51:0x0160  */
    /* JADX WARN: Removed duplicated region for block: B:52:0x0162  */
    /* JADX WARN: Removed duplicated region for block: B:534:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:535:? A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:55:0x0178  */
    /* JADX WARN: Removed duplicated region for block: B:56:0x017a  */
    /* JADX WARN: Removed duplicated region for block: B:59:0x0181  */
    /* JADX WARN: Removed duplicated region for block: B:60:0x0183  */
    /* JADX WARN: Removed duplicated region for block: B:64:0x019c  */
    /* JADX WARN: Removed duplicated region for block: B:72:0x01c3 A[Catch: all -> 0x00dc, Exception -> 0x00e3, TRY_ENTER, TRY_LEAVE, TryCatch #8 {Exception -> 0x00e3, blocks: (B:22:0x00ba, B:24:0x00c7, B:26:0x00cd, B:31:0x00ed, B:32:0x00fa, B:37:0x0104, B:43:0x0136, B:65:0x01a0, B:67:0x01a4, B:72:0x01c3, B:76:0x01e2, B:84:0x021f, B:217:0x0490), top: B:442:0x00ba }] */
    /* JADX WARN: Removed duplicated region for block: B:76:0x01e2 A[Catch: all -> 0x00dc, Exception -> 0x00e3, TRY_ENTER, TRY_LEAVE, TryCatch #8 {Exception -> 0x00e3, blocks: (B:22:0x00ba, B:24:0x00c7, B:26:0x00cd, B:31:0x00ed, B:32:0x00fa, B:37:0x0104, B:43:0x0136, B:65:0x01a0, B:67:0x01a4, B:72:0x01c3, B:76:0x01e2, B:84:0x021f, B:217:0x0490), top: B:442:0x00ba }] */
    /* JADX WARN: Removed duplicated region for block: B:80:0x01f0 A[Catch: all -> 0x02ee, Exception -> 0x02f2, TryCatch #51 {Exception -> 0x02f2, all -> 0x02ee, blocks: (B:20:0x00b0, B:40:0x0113, B:49:0x0144, B:53:0x0163, B:57:0x017b, B:61:0x0184, B:69:0x01ab, B:74:0x01d5, B:78:0x01ea, B:80:0x01f0, B:82:0x01fb, B:86:0x0222, B:39:0x010e), top: B:480:0x00b0 }] */
    /* JADX WARN: Type inference failed for: r10v53, types: [org.telegram.tgnet.TLRPC$TL_dialog] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$getDialogs$223(int i, int i2, int i3, long[] jArr) throws Throwable {
        SQLiteCursor sQLiteCursor;
        MessagesStorage messagesStorage;
        ArrayList<TLRPC.EncryptedChat> arrayList;
        TLRPC.TL_messages_dialogs tL_messages_dialogs;
        Exception exc;
        SQLiteCursor sQLiteCursor2;
        Throwable th;
        SQLiteCursor sQLiteCursorQueryFinalized;
        ArrayList<Long> arrayList2;
        HashSet hashSet;
        ArrayList<Long> arrayList3;
        ArrayList arrayList4;
        ArrayList arrayList5;
        ArrayList arrayList6;
        LongSparseArray longSparseArray;
        LongSparseArray longSparseArray2;
        ArrayList arrayList7;
        int i4;
        SQLiteCursor sQLiteCursor3;
        ArrayList<TLRPC.EncryptedChat> arrayList8;
        final MessagesStorage messagesStorage2;
        final LongSparseArray longSparseArray3;
        Long lValueOf;
        ArrayList<Long> arrayList9;
        ArrayList<TLRPC.EncryptedChat> arrayList10;
        Integer num;
        int i5;
        int i6;
        ArrayList arrayList11;
        HashSet hashSet2;
        ArrayList arrayList12;
        LongSparseArray longSparseArray4;
        LongSparseArray longSparseArray5;
        int i7;
        SQLiteCursor sQLiteCursorQueryFinalized2;
        MessagesStorage messagesStorage3;
        SQLiteCursor sQLiteCursor4;
        ArrayList arrayList13;
        ArrayList arrayList14;
        HashSet hashSet3;
        MessagesStorage messagesStorage4;
        HashSet hashSet4;
        TLRPC.Dialog dialog;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        ArrayList<Long> arrayList15;
        MessagesStorage messagesStorage5;
        long jLongValue;
        TLRPC.TL_dialogFolder tL_dialog;
        int iIntValue;
        int i8;
        ArrayList arrayList16;
        int i9;
        int i10;
        long jLongValue2;
        NativeByteBuffer nativeByteBufferByteBufferValue2;
        int i11;
        ArrayList arrayList17;
        LongSparseArray longSparseArray6;
        LongSparseArray longSparseArray7;
        ArrayList arrayList18;
        ArrayList<Long> arrayList19;
        ArrayList arrayList20;
        HashSet hashSet5;
        Exception exc2;
        TLRPC.Message messageTLdeserialize;
        MessagesStorage messagesStorage6 = this;
        TLRPC.TL_messages_dialogs tL_messages_dialogs2 = new TLRPC.TL_messages_dialogs();
        ArrayList<TLRPC.EncryptedChat> arrayList21 = new ArrayList<>();
        try {
            arrayList2 = new ArrayList<>();
            hashSet = new HashSet();
            arrayList2.add(Long.valueOf(getUserConfig().getClientUserId()));
            arrayList3 = new ArrayList<>();
            arrayList4 = new ArrayList();
            arrayList5 = new ArrayList();
            arrayList6 = new ArrayList();
            longSparseArray = new LongSparseArray();
            longSparseArray2 = new LongSparseArray();
            arrayList7 = new ArrayList(2);
            arrayList7.add(Integer.valueOf(i));
            i4 = 0;
            sQLiteCursor3 = null;
        } catch (Exception e) {
            e = e;
            messagesStorage = messagesStorage6;
            arrayList = arrayList21;
            tL_messages_dialogs = tL_messages_dialogs2;
            sQLiteCursor = null;
        } catch (Throwable th2) {
            th = th2;
            sQLiteCursor = null;
            th = th;
            sQLiteCursor2 = sQLiteCursor;
            if (sQLiteCursor2 != null) {
            }
        }
        while (i4 < arrayList7.size()) {
            try {
                try {
                    try {
                        num = (Integer) arrayList7.get(i4);
                        num.intValue();
                        if (i4 == 0) {
                            i5 = i2;
                            i6 = i3;
                            arrayList8 = arrayList21;
                        } else {
                            arrayList8 = arrayList21;
                            i5 = 0;
                            i6 = 100;
                        }
                        try {
                            arrayList11 = new ArrayList();
                            hashSet2 = hashSet;
                            arrayList12 = arrayList4;
                        } catch (Exception e2) {
                            e = e2;
                            messagesStorage2 = messagesStorage6;
                        }
                    } catch (Exception e3) {
                        e = e3;
                        messagesStorage2 = messagesStorage6;
                        arrayList8 = arrayList21;
                    }
                } catch (Throwable th3) {
                    th = th3;
                    messagesStorage2 = messagesStorage6;
                }
            } catch (Exception e4) {
                e = e4;
                messagesStorage = messagesStorage6;
                arrayList = arrayList21;
                tL_messages_dialogs = tL_messages_dialogs2;
            } catch (Throwable th4) {
                th = th4;
            }
            try {
                longSparseArray4 = longSparseArray2;
                longSparseArray5 = longSparseArray;
                try {
                    i7 = 0;
                    sQLiteCursorQueryFinalized2 = messagesStorage6.database.queryFinalized(String.format(Locale.US, "SELECT d.did, d.last_mid, d.unread_count, d.date, m.data, m.read_state, m.mid, m.send_state, s.flags, m.date, d.pts, d.inbox_max, d.outbox_max, m.replydata, d.pinned, d.unread_count_i, d.flags, d.folder_id, d.data, d.unread_reactions, d.last_mid_group, d.ttl_period FROM dialogs as d LEFT JOIN messages_v2 as m ON d.last_mid = m.mid AND d.did = m.uid AND d.last_mid_group IS NULL LEFT JOIN dialog_settings as s ON d.did = s.did WHERE d.folder_id = %d ORDER BY d.pinned DESC, d.date DESC LIMIT %d,%d", num, Integer.valueOf(i5), Integer.valueOf(i6)), new Object[0]);
                } catch (Exception e5) {
                    e = e5;
                    messagesStorage2 = this;
                    exc = e;
                    messagesStorage = messagesStorage2;
                    tL_messages_dialogs = tL_messages_dialogs2;
                    sQLiteCursor = sQLiteCursor3;
                    arrayList = arrayList8;
                    try {
                        tL_messages_dialogs.dialogs.clear();
                        tL_messages_dialogs.users.clear();
                        tL_messages_dialogs.chats.clear();
                        arrayList.clear();
                        messagesStorage.checkSQLException(exc);
                        getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
                        if (sQLiteCursor == null) {
                        }
                    } catch (Throwable th5) {
                        th = th5;
                        th = th;
                        sQLiteCursor2 = sQLiteCursor;
                        if (sQLiteCursor2 != null) {
                        }
                    }
                } catch (Throwable th6) {
                    th = th6;
                    messagesStorage2 = this;
                    th = th;
                    sQLiteCursor2 = sQLiteCursor3;
                    if (sQLiteCursor2 != null) {
                    }
                }
            } catch (Exception e6) {
                e = e6;
                messagesStorage2 = this;
                exc = e;
                messagesStorage = messagesStorage2;
                tL_messages_dialogs = tL_messages_dialogs2;
                sQLiteCursor = sQLiteCursor3;
                arrayList = arrayList8;
                tL_messages_dialogs.dialogs.clear();
                tL_messages_dialogs.users.clear();
                tL_messages_dialogs.chats.clear();
                arrayList.clear();
                messagesStorage.checkSQLException(exc);
                getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
                if (sQLiteCursor == null) {
                }
            } catch (Throwable th7) {
                th = th7;
                messagesStorage2 = this;
                th = th;
                sQLiteCursor2 = sQLiteCursor3;
                if (sQLiteCursor2 != null) {
                }
            }
            while (sQLiteCursorQueryFinalized2.next()) {
                try {
                    arrayList15 = arrayList2;
                    try {
                        jLongValue = sQLiteCursorQueryFinalized2.longValue(i7);
                        if (DialogObject.isFolderDialogId(jLongValue)) {
                            try {
                                try {
                                    TLRPC.TL_dialogFolder tL_dialogFolder = new TLRPC.TL_dialogFolder();
                                    if (!sQLiteCursorQueryFinalized2.isNull(18)) {
                                        NativeByteBuffer nativeByteBufferByteBufferValue3 = sQLiteCursorQueryFinalized2.byteBufferValue(18);
                                        if (nativeByteBufferByteBufferValue3 != null) {
                                            tL_dialogFolder.folder = TLRPC.TL_folder.TLdeserialize(nativeByteBufferByteBufferValue3, nativeByteBufferByteBufferValue3.readInt32(false), false);
                                            nativeByteBufferByteBufferValue3.reuse();
                                        } else {
                                            TLRPC.TL_folder tL_folder = new TLRPC.TL_folder();
                                            tL_dialogFolder.folder = tL_folder;
                                            tL_folder.id = DialogObject.getFolderId(jLongValue);
                                        }
                                    }
                                    TLRPC.TL_folder tL_folder2 = tL_dialogFolder.folder;
                                    tL_dialog = tL_dialogFolder;
                                    if (tL_folder2 == null) {
                                        arrayList2 = arrayList15;
                                        i7 = 0;
                                    } else if (i4 == 0) {
                                        arrayList7.add(Integer.valueOf(tL_folder2.id));
                                        tL_dialog = tL_dialogFolder;
                                    }
                                } catch (Exception e7) {
                                    exc = e7;
                                    sQLiteCursor = sQLiteCursorQueryFinalized2;
                                    tL_messages_dialogs = tL_messages_dialogs2;
                                    arrayList = arrayList8;
                                    messagesStorage = this;
                                    tL_messages_dialogs.dialogs.clear();
                                    tL_messages_dialogs.users.clear();
                                    tL_messages_dialogs.chats.clear();
                                    arrayList.clear();
                                    messagesStorage.checkSQLException(exc);
                                    getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
                                    if (sQLiteCursor == null) {
                                        sQLiteCursorQueryFinalized = sQLiteCursor;
                                        sQLiteCursorQueryFinalized.dispose();
                                        return;
                                    }
                                    return;
                                }
                            } catch (Throwable th8) {
                                th = th8;
                                sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                            }
                        } else {
                            tL_dialog = new TLRPC.TL_dialog();
                        }
                        tL_dialog.id = jLongValue;
                        tL_dialog.top_message = sQLiteCursorQueryFinalized2.intValue(1);
                        tL_dialog.unread_count = sQLiteCursorQueryFinalized2.intValue(2);
                        tL_dialog.last_message_date = sQLiteCursorQueryFinalized2.intValue(3);
                        iIntValue = sQLiteCursorQueryFinalized2.intValue(10);
                        tL_dialog.pts = iIntValue;
                    } catch (Exception e8) {
                        e = e8;
                        messagesStorage5 = this;
                    } catch (Throwable th9) {
                        th = th9;
                        messagesStorage5 = this;
                    }
                } catch (Exception e9) {
                    e = e9;
                    messagesStorage3 = this;
                } catch (Throwable th10) {
                    th = th10;
                    messagesStorage3 = this;
                }
                if (iIntValue != 0) {
                    i8 = i4;
                    arrayList16 = arrayList6;
                    if (!DialogObject.isUserDialog(tL_dialog.id)) {
                        i9 = 1;
                    }
                    tL_dialog.flags = i9;
                    tL_dialog.read_inbox_max_id = sQLiteCursorQueryFinalized2.intValue(11);
                    tL_dialog.read_outbox_max_id = sQLiteCursorQueryFinalized2.intValue(12);
                    int iIntValue2 = sQLiteCursorQueryFinalized2.intValue(14);
                    tL_dialog.pinnedNum = iIntValue2;
                    tL_dialog.pinned = iIntValue2 == 0;
                    tL_dialog.unread_mentions_count = sQLiteCursorQueryFinalized2.intValue(15);
                    int iIntValue3 = sQLiteCursorQueryFinalized2.intValue(16);
                    tL_dialog.unread_mark = (iIntValue3 & 1) == 0;
                    tL_dialog.view_forum_as_messages = (iIntValue3 & 64) == 0;
                    long jLongValue3 = sQLiteCursorQueryFinalized2.longValue(8);
                    i10 = (int) jLongValue3;
                    ArrayList arrayList22 = arrayList7;
                    TLRPC.TL_peerNotifySettings tL_peerNotifySettings = new TLRPC.TL_peerNotifySettings();
                    tL_dialog.notify_settings = tL_peerNotifySettings;
                    if ((i10 & 1) != 0) {
                        int i12 = (int) (jLongValue3 >> 32);
                        tL_peerNotifySettings.mute_until = i12;
                        if (i12 == 0) {
                            tL_peerNotifySettings.mute_until = Integer.MAX_VALUE;
                        }
                    }
                    tL_dialog.folder_id = sQLiteCursorQueryFinalized2.intValue(17);
                    tL_dialog.unread_reactions_count = sQLiteCursorQueryFinalized2.intValue(19);
                    jLongValue2 = sQLiteCursorQueryFinalized2.longValue(20);
                    if (jLongValue2 != 0) {
                        arrayList11.add(new Pair(Long.valueOf(jLongValue), Long.valueOf(jLongValue2)));
                    }
                    tL_dialog.ttl_period = sQLiteCursorQueryFinalized2.intValue(21);
                    tL_messages_dialogs2.dialogs.add(tL_dialog);
                    if (jArr != null) {
                        arrayList5.add(Long.valueOf(jLongValue));
                    }
                    nativeByteBufferByteBufferValue2 = sQLiteCursorQueryFinalized2.byteBufferValue(4);
                    if (nativeByteBufferByteBufferValue2 == null) {
                        TLRPC.Message messageTLdeserialize2 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue2, nativeByteBufferByteBufferValue2.readInt32(false), false);
                        if (messageTLdeserialize2 != null) {
                            ArrayList arrayList23 = arrayList5;
                            messageTLdeserialize2.readAttachPath(nativeByteBufferByteBufferValue2, getUserConfig().clientUserId);
                            nativeByteBufferByteBufferValue2.reuse();
                            MessageObject.setUnreadFlags(messageTLdeserialize2, sQLiteCursorQueryFinalized2.intValue(5));
                            messageTLdeserialize2.id = sQLiteCursorQueryFinalized2.intValue(6);
                            int iIntValue4 = sQLiteCursorQueryFinalized2.intValue(9);
                            if (iIntValue4 != 0) {
                                tL_dialog.last_message_date = iIntValue4;
                            }
                            messageTLdeserialize2.send_state = sQLiteCursorQueryFinalized2.intValue(7);
                            messageTLdeserialize2.dialog_id = tL_dialog.id;
                            tL_messages_dialogs2.messages.add(messageTLdeserialize2);
                            arrayList19 = arrayList15;
                            addUsersAndChatsFromMessage(messageTLdeserialize2, arrayList19, arrayList3, arrayList16);
                            try {
                                TLRPC.MessageReplyHeader messageReplyHeader = messageTLdeserialize2.reply_to;
                                if (messageReplyHeader == null || messageReplyHeader.reply_to_msg_id == 0) {
                                    arrayList18 = arrayList23;
                                    i11 = i8;
                                    arrayList17 = arrayList11;
                                    longSparseArray6 = longSparseArray4;
                                    longSparseArray7 = longSparseArray5;
                                    messagesStorage5 = this;
                                } else {
                                    TLRPC.MessageAction messageAction = messageTLdeserialize2.action;
                                    if (!(messageAction instanceof TLRPC.TL_messageActionPinMessage)) {
                                        try {
                                            if ((messageAction instanceof TLRPC.TL_messageActionPaymentSent) || (messageAction instanceof TLRPC.TL_messageActionGameScore) || (messageAction instanceof TLRPC.TL_messageActionSuggestedPostApproval)) {
                                                if (!sQLiteCursorQueryFinalized2.isNull(13)) {
                                                    try {
                                                        NativeByteBuffer nativeByteBufferByteBufferValue4 = sQLiteCursorQueryFinalized2.byteBufferValue(13);
                                                        if (nativeByteBufferByteBufferValue4 != null) {
                                                            arrayList18 = arrayList23;
                                                            try {
                                                                messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue4, nativeByteBufferByteBufferValue4.readInt32(false), false);
                                                                messageTLdeserialize2.replyMessage = messageTLdeserialize;
                                                                i11 = i8;
                                                                arrayList17 = arrayList11;
                                                            } catch (Exception e10) {
                                                                e = e10;
                                                                i11 = i8;
                                                                arrayList17 = arrayList11;
                                                                messagesStorage5 = this;
                                                                exc2 = e;
                                                                longSparseArray6 = longSparseArray4;
                                                                longSparseArray7 = longSparseArray5;
                                                                messagesStorage5.checkSQLException(exc2);
                                                                if (!DialogObject.isEncryptedDialog(jLongValue)) {
                                                                }
                                                                if (DialogObject.isEncryptedDialog(jLongValue)) {
                                                                }
                                                                longSparseArray5 = longSparseArray7;
                                                                arrayList2 = arrayList19;
                                                                arrayList6 = arrayList16;
                                                                longSparseArray4 = longSparseArray6;
                                                                arrayList12 = arrayList20;
                                                                hashSet2 = hashSet5;
                                                                i4 = i11;
                                                                arrayList5 = arrayList18;
                                                                arrayList7 = arrayList22;
                                                                arrayList11 = arrayList17;
                                                                i7 = 0;
                                                            }
                                                            try {
                                                                messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue4, getUserConfig().clientUserId);
                                                                nativeByteBufferByteBufferValue4.reuse();
                                                                TLRPC.Message message = messageTLdeserialize2.replyMessage;
                                                                if (message != null) {
                                                                    addUsersAndChatsFromMessage(message, arrayList19, arrayList3, arrayList16);
                                                                }
                                                            } catch (Exception e11) {
                                                                e = e11;
                                                                messagesStorage5 = this;
                                                                exc2 = e;
                                                                longSparseArray6 = longSparseArray4;
                                                                longSparseArray7 = longSparseArray5;
                                                                messagesStorage5.checkSQLException(exc2);
                                                                if (!DialogObject.isEncryptedDialog(jLongValue)) {
                                                                }
                                                                if (DialogObject.isEncryptedDialog(jLongValue)) {
                                                                }
                                                                longSparseArray5 = longSparseArray7;
                                                                arrayList2 = arrayList19;
                                                                arrayList6 = arrayList16;
                                                                longSparseArray4 = longSparseArray6;
                                                                arrayList12 = arrayList20;
                                                                hashSet2 = hashSet5;
                                                                i4 = i11;
                                                                arrayList5 = arrayList18;
                                                                arrayList7 = arrayList22;
                                                                arrayList11 = arrayList17;
                                                                i7 = 0;
                                                            }
                                                        } else {
                                                            arrayList18 = arrayList23;
                                                            i11 = i8;
                                                            arrayList17 = arrayList11;
                                                        }
                                                    } catch (Exception e12) {
                                                        e = e12;
                                                        arrayList18 = arrayList23;
                                                    }
                                                    try {
                                                        if (messageTLdeserialize2.replyMessage == null) {
                                                            longSparseArray6 = longSparseArray4;
                                                            longSparseArray7 = longSparseArray5;
                                                            try {
                                                                addReplyMessages(messageTLdeserialize2, longSparseArray7, longSparseArray6);
                                                            } catch (Exception e13) {
                                                                e = e13;
                                                                messagesStorage5 = this;
                                                                exc2 = e;
                                                                messagesStorage5.checkSQLException(exc2);
                                                                if (!DialogObject.isEncryptedDialog(jLongValue)) {
                                                                }
                                                                if (DialogObject.isEncryptedDialog(jLongValue)) {
                                                                }
                                                                longSparseArray5 = longSparseArray7;
                                                                arrayList2 = arrayList19;
                                                                arrayList6 = arrayList16;
                                                                longSparseArray4 = longSparseArray6;
                                                                arrayList12 = arrayList20;
                                                                hashSet2 = hashSet5;
                                                                i4 = i11;
                                                                arrayList5 = arrayList18;
                                                                arrayList7 = arrayList22;
                                                                arrayList11 = arrayList17;
                                                                i7 = 0;
                                                            }
                                                        }
                                                        messagesStorage5 = this;
                                                    } catch (Exception e14) {
                                                        e = e14;
                                                        longSparseArray6 = longSparseArray4;
                                                        longSparseArray7 = longSparseArray5;
                                                        messagesStorage5 = this;
                                                        exc2 = e;
                                                        messagesStorage5.checkSQLException(exc2);
                                                        if (!DialogObject.isEncryptedDialog(jLongValue)) {
                                                        }
                                                        if (DialogObject.isEncryptedDialog(jLongValue)) {
                                                        }
                                                        longSparseArray5 = longSparseArray7;
                                                        arrayList2 = arrayList19;
                                                        arrayList6 = arrayList16;
                                                        longSparseArray4 = longSparseArray6;
                                                        arrayList12 = arrayList20;
                                                        hashSet2 = hashSet5;
                                                        i4 = i11;
                                                        arrayList5 = arrayList18;
                                                        arrayList7 = arrayList22;
                                                        arrayList11 = arrayList17;
                                                        i7 = 0;
                                                    }
                                                }
                                            }
                                            longSparseArray6 = longSparseArray4;
                                            longSparseArray7 = longSparseArray5;
                                            messagesStorage5 = this;
                                        } catch (Exception e15) {
                                            exc2 = e15;
                                            arrayList18 = arrayList23;
                                            i11 = i8;
                                            arrayList17 = arrayList11;
                                            longSparseArray6 = longSparseArray4;
                                            longSparseArray7 = longSparseArray5;
                                            messagesStorage5 = this;
                                            messagesStorage5.checkSQLException(exc2);
                                            if (!DialogObject.isEncryptedDialog(jLongValue)) {
                                            }
                                            if (DialogObject.isEncryptedDialog(jLongValue)) {
                                            }
                                            longSparseArray5 = longSparseArray7;
                                            arrayList2 = arrayList19;
                                            arrayList6 = arrayList16;
                                            longSparseArray4 = longSparseArray6;
                                            arrayList12 = arrayList20;
                                            hashSet2 = hashSet5;
                                            i4 = i11;
                                            arrayList5 = arrayList18;
                                            arrayList7 = arrayList22;
                                            arrayList11 = arrayList17;
                                            i7 = 0;
                                        }
                                    }
                                }
                            } catch (Exception e16) {
                                e = e16;
                                arrayList18 = arrayList23;
                                i11 = i8;
                                arrayList17 = arrayList11;
                            }
                            if (sQLiteCursor2 != null) {
                                throw th;
                            }
                            sQLiteCursor2.dispose();
                            throw th;
                        }
                        i11 = i8;
                        arrayList17 = arrayList11;
                        longSparseArray6 = longSparseArray4;
                        longSparseArray7 = longSparseArray5;
                        messagesStorage5 = this;
                        arrayList18 = arrayList5;
                        arrayList19 = arrayList15;
                        nativeByteBufferByteBufferValue2.reuse();
                    } else {
                        i11 = i8;
                        arrayList17 = arrayList11;
                        longSparseArray6 = longSparseArray4;
                        longSparseArray7 = longSparseArray5;
                        messagesStorage5 = this;
                        arrayList18 = arrayList5;
                        arrayList19 = arrayList15;
                    }
                    if (!DialogObject.isEncryptedDialog(jLongValue)) {
                        try {
                            if (tL_dialog.read_inbox_max_id > tL_dialog.top_message) {
                                tL_dialog.read_inbox_max_id = 0;
                            }
                        } catch (Exception e17) {
                            e = e17;
                            exc = e;
                            sQLiteCursor = sQLiteCursorQueryFinalized2;
                            messagesStorage = messagesStorage5;
                            tL_messages_dialogs = tL_messages_dialogs2;
                            arrayList = arrayList8;
                            tL_messages_dialogs.dialogs.clear();
                            tL_messages_dialogs.users.clear();
                            tL_messages_dialogs.chats.clear();
                            arrayList.clear();
                            messagesStorage.checkSQLException(exc);
                            getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
                            if (sQLiteCursor == null) {
                            }
                        } catch (Throwable th11) {
                            th = th11;
                            th = th;
                            sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                            if (sQLiteCursor2 != null) {
                            }
                        }
                    }
                    if (DialogObject.isEncryptedDialog(jLongValue)) {
                        int encryptedChatId = DialogObject.getEncryptedChatId(jLongValue);
                        arrayList20 = arrayList12;
                        if (arrayList20.contains(Integer.valueOf(encryptedChatId))) {
                            longSparseArray5 = longSparseArray7;
                            arrayList2 = arrayList19;
                            arrayList6 = arrayList16;
                            longSparseArray4 = longSparseArray6;
                            arrayList12 = arrayList20;
                            i4 = i11;
                            arrayList5 = arrayList18;
                            arrayList7 = arrayList22;
                            arrayList11 = arrayList17;
                            i7 = 0;
                        } else {
                            arrayList20.add(Integer.valueOf(encryptedChatId));
                            hashSet5 = hashSet2;
                        }
                    } else {
                        arrayList20 = arrayList12;
                        if (DialogObject.isUserDialog(jLongValue)) {
                            if (!arrayList19.contains(Long.valueOf(jLongValue))) {
                                arrayList19.add(Long.valueOf(jLongValue));
                            }
                            hashSet5 = hashSet2;
                            hashSet5.add(Long.valueOf(jLongValue));
                        } else {
                            hashSet5 = hashSet2;
                            if (DialogObject.isChatDialog(jLongValue)) {
                                long j = -jLongValue;
                                if (!arrayList3.contains(Long.valueOf(j))) {
                                    arrayList3.add(Long.valueOf(j));
                                }
                            }
                        }
                    }
                    longSparseArray5 = longSparseArray7;
                    arrayList2 = arrayList19;
                    arrayList6 = arrayList16;
                    longSparseArray4 = longSparseArray6;
                    arrayList12 = arrayList20;
                    hashSet2 = hashSet5;
                    i4 = i11;
                    arrayList5 = arrayList18;
                    arrayList7 = arrayList22;
                    arrayList11 = arrayList17;
                    i7 = 0;
                } else {
                    i8 = i4;
                    arrayList16 = arrayList6;
                }
                i9 = 0;
                tL_dialog.flags = i9;
                tL_dialog.read_inbox_max_id = sQLiteCursorQueryFinalized2.intValue(11);
                tL_dialog.read_outbox_max_id = sQLiteCursorQueryFinalized2.intValue(12);
                int iIntValue22 = sQLiteCursorQueryFinalized2.intValue(14);
                tL_dialog.pinnedNum = iIntValue22;
                tL_dialog.pinned = iIntValue22 == 0;
                tL_dialog.unread_mentions_count = sQLiteCursorQueryFinalized2.intValue(15);
                int iIntValue32 = sQLiteCursorQueryFinalized2.intValue(16);
                tL_dialog.unread_mark = (iIntValue32 & 1) == 0;
                tL_dialog.view_forum_as_messages = (iIntValue32 & 64) == 0;
                long jLongValue32 = sQLiteCursorQueryFinalized2.longValue(8);
                i10 = (int) jLongValue32;
                ArrayList arrayList222 = arrayList7;
                TLRPC.TL_peerNotifySettings tL_peerNotifySettings2 = new TLRPC.TL_peerNotifySettings();
                tL_dialog.notify_settings = tL_peerNotifySettings2;
                if ((i10 & 1) != 0) {
                }
                tL_dialog.folder_id = sQLiteCursorQueryFinalized2.intValue(17);
                tL_dialog.unread_reactions_count = sQLiteCursorQueryFinalized2.intValue(19);
                jLongValue2 = sQLiteCursorQueryFinalized2.longValue(20);
                if (jLongValue2 != 0) {
                }
                tL_dialog.ttl_period = sQLiteCursorQueryFinalized2.intValue(21);
                tL_messages_dialogs2.dialogs.add(tL_dialog);
                if (jArr != null) {
                }
                nativeByteBufferByteBufferValue2 = sQLiteCursorQueryFinalized2.byteBufferValue(4);
                if (nativeByteBufferByteBufferValue2 == null) {
                }
                if (!DialogObject.isEncryptedDialog(jLongValue)) {
                }
                if (DialogObject.isEncryptedDialog(jLongValue)) {
                }
                longSparseArray5 = longSparseArray7;
                arrayList2 = arrayList19;
                arrayList6 = arrayList16;
                longSparseArray4 = longSparseArray6;
                arrayList12 = arrayList20;
                hashSet2 = hashSet5;
                i4 = i11;
                arrayList5 = arrayList18;
                arrayList7 = arrayList222;
                arrayList11 = arrayList17;
                i7 = 0;
            }
            int i13 = i4;
            ArrayList arrayList24 = arrayList6;
            ArrayList arrayList25 = arrayList5;
            ArrayList arrayList26 = arrayList7;
            ArrayList<Long> arrayList27 = arrayList2;
            ArrayList arrayList28 = arrayList11;
            HashSet hashSet6 = hashSet2;
            ArrayList arrayList29 = arrayList12;
            LongSparseArray longSparseArray8 = longSparseArray4;
            LongSparseArray longSparseArray9 = longSparseArray5;
            MessagesStorage messagesStorage7 = this;
            try {
                sQLiteCursorQueryFinalized2.dispose();
                try {
                    if (arrayList28.isEmpty()) {
                        arrayList13 = arrayList24;
                        arrayList14 = arrayList29;
                        hashSet3 = hashSet6;
                        messagesStorage4 = messagesStorage7;
                        sQLiteCursorQueryFinalized2 = null;
                    } else {
                        StringBuilder sb = new StringBuilder();
                        int i14 = 0;
                        while (i14 < arrayList28.size()) {
                            ArrayList arrayList30 = arrayList28;
                            try {
                                Pair pair = (Pair) arrayList30.get(i14);
                                sb.append("uid = ");
                                sb.append(pair.first);
                                sb.append(" AND group_id = ");
                                sb.append(pair.second);
                                i14++;
                                if (i14 < arrayList30.size()) {
                                    sb.append(" OR ");
                                }
                                arrayList28 = arrayList30;
                            } catch (Exception e18) {
                                exc = e18;
                                messagesStorage = messagesStorage7;
                                tL_messages_dialogs = tL_messages_dialogs2;
                                arrayList = arrayList8;
                                sQLiteCursor = null;
                                tL_messages_dialogs.dialogs.clear();
                                tL_messages_dialogs.users.clear();
                                tL_messages_dialogs.chats.clear();
                                arrayList.clear();
                                messagesStorage.checkSQLException(exc);
                                getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
                                if (sQLiteCursor == null) {
                                }
                            } catch (Throwable th12) {
                                th = th12;
                                sQLiteCursor2 = null;
                            }
                        }
                        arrayList13 = arrayList24;
                        try {
                            int i15 = 0;
                            sQLiteCursorQueryFinalized2 = messagesStorage7.database.queryFinalized(String.format(Locale.US, "SELECT uid, data, read_state, mid, send_state, date, replydata, group_id FROM messages_v2 WHERE %s ORDER BY date DESC", sb), new Object[0]);
                            while (sQLiteCursorQueryFinalized2.next()) {
                                ArrayList arrayList31 = arrayList29;
                                long jLongValue4 = sQLiteCursorQueryFinalized2.longValue(i15);
                                NativeByteBuffer nativeByteBufferByteBufferValue5 = sQLiteCursorQueryFinalized2.byteBufferValue(1);
                                int i16 = 0;
                                while (true) {
                                    if (i16 >= tL_messages_dialogs2.dialogs.size()) {
                                        hashSet4 = hashSet6;
                                        dialog = null;
                                        break;
                                    }
                                    dialog = (TLRPC.Dialog) tL_messages_dialogs2.dialogs.get(i16);
                                    if (dialog != null) {
                                        hashSet4 = hashSet6;
                                        if (dialog.id == jLongValue4) {
                                            break;
                                        }
                                    } else {
                                        hashSet4 = hashSet6;
                                    }
                                    i16++;
                                    hashSet6 = hashSet4;
                                }
                                if (dialog == null || nativeByteBufferByteBufferValue5 == null) {
                                    arrayList29 = arrayList31;
                                    hashSet6 = hashSet4;
                                    i15 = 0;
                                } else {
                                    TLRPC.Message messageTLdeserialize3 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue5, nativeByteBufferByteBufferValue5.readInt32(false), false);
                                    if (messageTLdeserialize3 != null) {
                                        messageTLdeserialize3.readAttachPath(nativeByteBufferByteBufferValue5, getUserConfig().clientUserId);
                                        nativeByteBufferByteBufferValue5.reuse();
                                        MessageObject.setUnreadFlags(messageTLdeserialize3, sQLiteCursorQueryFinalized2.intValue(2));
                                        messageTLdeserialize3.id = sQLiteCursorQueryFinalized2.intValue(3);
                                        int iIntValue5 = sQLiteCursorQueryFinalized2.intValue(5);
                                        if (iIntValue5 != 0) {
                                            dialog.last_message_date = iIntValue5;
                                        }
                                        messageTLdeserialize3.send_state = sQLiteCursorQueryFinalized2.intValue(4);
                                        messageTLdeserialize3.dialog_id = jLongValue4;
                                        tL_messages_dialogs2.messages.add(messageTLdeserialize3);
                                        addUsersAndChatsFromMessage(messageTLdeserialize3, arrayList27, arrayList3, null);
                                        try {
                                            TLRPC.MessageReplyHeader messageReplyHeader2 = messageTLdeserialize3.reply_to;
                                            if (messageReplyHeader2 != null && messageReplyHeader2.reply_to_msg_id != 0) {
                                                TLRPC.MessageAction messageAction2 = messageTLdeserialize3.action;
                                                if ((messageAction2 instanceof TLRPC.TL_messageActionPinMessage) || (messageAction2 instanceof TLRPC.TL_messageActionPaymentSent) || (messageAction2 instanceof TLRPC.TL_messageActionGameScore) || (messageAction2 instanceof TLRPC.TL_messageActionSuggestedPostApproval)) {
                                                    if (!sQLiteCursorQueryFinalized2.isNull(7) && (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized2.byteBufferValue(7)) != null) {
                                                        TLRPC.Message messageTLdeserialize4 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                                                        messageTLdeserialize3.replyMessage = messageTLdeserialize4;
                                                        messageTLdeserialize4.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                                                        nativeByteBufferByteBufferValue.reuse();
                                                        TLRPC.Message message2 = messageTLdeserialize3.replyMessage;
                                                        if (message2 != null) {
                                                            try {
                                                                addUsersAndChatsFromMessage(message2, arrayList27, arrayList3, null);
                                                            } catch (Exception e19) {
                                                                e = e19;
                                                                messagesStorage3 = this;
                                                                try {
                                                                    messagesStorage3.checkSQLException(e);
                                                                    messagesStorage7 = messagesStorage3;
                                                                    arrayList29 = arrayList31;
                                                                    hashSet6 = hashSet4;
                                                                    i15 = 0;
                                                                } catch (Exception e20) {
                                                                    e = e20;
                                                                    exc = e;
                                                                    sQLiteCursor = sQLiteCursorQueryFinalized2;
                                                                    messagesStorage = messagesStorage3;
                                                                    tL_messages_dialogs = tL_messages_dialogs2;
                                                                    arrayList = arrayList8;
                                                                    tL_messages_dialogs.dialogs.clear();
                                                                    tL_messages_dialogs.users.clear();
                                                                    tL_messages_dialogs.chats.clear();
                                                                    arrayList.clear();
                                                                    messagesStorage.checkSQLException(exc);
                                                                    getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
                                                                    if (sQLiteCursor == null) {
                                                                    }
                                                                } catch (Throwable th13) {
                                                                    th = th13;
                                                                    th = th;
                                                                    sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                                                                    if (sQLiteCursor2 != null) {
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        if (messageTLdeserialize3.replyMessage == null) {
                                                        }
                                                    } else if (messageTLdeserialize3.replyMessage == null) {
                                                        addReplyMessages(messageTLdeserialize3, longSparseArray9, longSparseArray8);
                                                    }
                                                }
                                            }
                                            i15 = 0;
                                            messagesStorage7 = this;
                                            arrayList29 = arrayList31;
                                            hashSet6 = hashSet4;
                                        } catch (Exception e21) {
                                            e = e21;
                                        }
                                    } else {
                                        messagesStorage3 = messagesStorage7;
                                        nativeByteBufferByteBufferValue5.reuse();
                                    }
                                    messagesStorage7 = messagesStorage3;
                                    arrayList29 = arrayList31;
                                    hashSet6 = hashSet4;
                                    i15 = 0;
                                }
                            }
                            arrayList14 = arrayList29;
                            hashSet3 = hashSet6;
                            messagesStorage4 = messagesStorage7;
                            sQLiteCursorQueryFinalized2.dispose();
                        } catch (Exception e22) {
                            messagesStorage3 = messagesStorage7;
                            sQLiteCursor = null;
                            exc = e22;
                            messagesStorage = messagesStorage3;
                            tL_messages_dialogs = tL_messages_dialogs2;
                            arrayList = arrayList8;
                            tL_messages_dialogs.dialogs.clear();
                            tL_messages_dialogs.users.clear();
                            tL_messages_dialogs.chats.clear();
                            arrayList.clear();
                            messagesStorage.checkSQLException(exc);
                            getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
                            if (sQLiteCursor == null) {
                            }
                        } catch (Throwable th14) {
                            messagesStorage3 = messagesStorage7;
                            sQLiteCursor4 = null;
                            th = th14;
                            sQLiteCursor2 = sQLiteCursor4;
                            if (sQLiteCursor2 != null) {
                            }
                        }
                    }
                    int i17 = i13 + 1;
                    sQLiteCursor3 = sQLiteCursorQueryFinalized2;
                    longSparseArray = longSparseArray9;
                    i4 = i17;
                    longSparseArray2 = longSparseArray8;
                    messagesStorage6 = messagesStorage4;
                    arrayList21 = arrayList8;
                    arrayList6 = arrayList13;
                    arrayList4 = arrayList14;
                    hashSet = hashSet3;
                    arrayList7 = arrayList26;
                    arrayList2 = arrayList27;
                    arrayList5 = arrayList25;
                } catch (Exception e23) {
                    messagesStorage3 = messagesStorage7;
                    sQLiteCursor = null;
                    exc = e23;
                } catch (Throwable th15) {
                    messagesStorage3 = messagesStorage7;
                    sQLiteCursor4 = null;
                    th = th15;
                }
            } catch (Exception e24) {
                e = e24;
                messagesStorage3 = messagesStorage7;
            } catch (Throwable th16) {
                th = th16;
                messagesStorage3 = messagesStorage7;
            }
        }
        ArrayList arrayList32 = arrayList5;
        ArrayList arrayList33 = arrayList4;
        ArrayList<Long> arrayList34 = arrayList2;
        HashSet hashSet7 = hashSet;
        arrayList8 = arrayList21;
        messagesStorage2 = messagesStorage6;
        try {
            loadReplyMessages(longSparseArray, longSparseArray2, arrayList34, arrayList3, 0);
            if (jArr != null) {
                try {
                    ArrayList arrayList35 = new ArrayList();
                    for (int i18 = 0; i18 < jArr.length; i18++) {
                        long j2 = jArr[i18];
                        if (!DialogObject.isEncryptedDialog(j2)) {
                            if (j2 > 0) {
                                if (!arrayList34.contains(Long.valueOf(j2))) {
                                    lValueOf = Long.valueOf(j2);
                                    arrayList9 = arrayList34;
                                    arrayList9.add(lValueOf);
                                }
                                if (!arrayList32.contains(Long.valueOf(jArr[i18]))) {
                                    arrayList35.add(Long.valueOf(jArr[i18]));
                                }
                            } else {
                                long j3 = -j2;
                                if (!arrayList3.contains(Long.valueOf(j3))) {
                                    lValueOf = Long.valueOf(j3);
                                    arrayList9 = arrayList3;
                                    arrayList9.add(lValueOf);
                                }
                                if (!arrayList32.contains(Long.valueOf(jArr[i18]))) {
                                }
                            }
                        }
                    }
                    if (arrayList35.isEmpty()) {
                        longSparseArray3 = null;
                    } else {
                        longSparseArray3 = new LongSparseArray(arrayList35.size());
                        try {
                            sQLiteCursorQueryFinalized = messagesStorage2.database.queryFinalized(String.format(Locale.US, "SELECT did, folder_id FROM dialogs WHERE did IN(%s)", TextUtils.join(",", arrayList35)), new Object[0]);
                            while (sQLiteCursorQueryFinalized.next()) {
                                try {
                                    try {
                                        longSparseArray3.put(sQLiteCursorQueryFinalized.longValue(0), Integer.valueOf(sQLiteCursorQueryFinalized.intValue(1)));
                                    } catch (Exception e25) {
                                        e = e25;
                                        sQLiteCursor = sQLiteCursorQueryFinalized;
                                        messagesStorage = messagesStorage2;
                                        tL_messages_dialogs = tL_messages_dialogs2;
                                        arrayList = arrayList8;
                                        exc = e;
                                        tL_messages_dialogs.dialogs.clear();
                                        tL_messages_dialogs.users.clear();
                                        tL_messages_dialogs.chats.clear();
                                        arrayList.clear();
                                        messagesStorage.checkSQLException(exc);
                                        getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
                                        if (sQLiteCursor == null) {
                                        }
                                    }
                                } catch (Throwable th17) {
                                    th = th17;
                                    sQLiteCursor2 = sQLiteCursorQueryFinalized;
                                    th = th;
                                    if (sQLiteCursor2 != null) {
                                    }
                                }
                            }
                            sQLiteCursorQueryFinalized.dispose();
                            sQLiteCursor3 = null;
                        } catch (Exception e26) {
                            e = e26;
                            exc = e;
                            messagesStorage = messagesStorage2;
                            tL_messages_dialogs = tL_messages_dialogs2;
                            sQLiteCursor = sQLiteCursor3;
                            arrayList = arrayList8;
                            tL_messages_dialogs.dialogs.clear();
                            tL_messages_dialogs.users.clear();
                            tL_messages_dialogs.chats.clear();
                            arrayList.clear();
                            messagesStorage.checkSQLException(exc);
                            getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
                            if (sQLiteCursor == null) {
                            }
                        } catch (Throwable th18) {
                            th = th18;
                            th = th;
                            sQLiteCursor2 = sQLiteCursor3;
                            if (sQLiteCursor2 != null) {
                            }
                        }
                    }
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda189
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$getDialogs$222(longSparseArray3);
                        }
                    });
                } catch (Exception e27) {
                    e = e27;
                    exc = e;
                    messagesStorage = messagesStorage2;
                    tL_messages_dialogs = tL_messages_dialogs2;
                    sQLiteCursor = sQLiteCursor3;
                    arrayList = arrayList8;
                    tL_messages_dialogs.dialogs.clear();
                    tL_messages_dialogs.users.clear();
                    tL_messages_dialogs.chats.clear();
                    arrayList.clear();
                    messagesStorage.checkSQLException(exc);
                    getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
                    if (sQLiteCursor == null) {
                    }
                } catch (Throwable th19) {
                    th = th19;
                    th = th;
                    sQLiteCursor2 = sQLiteCursor3;
                    if (sQLiteCursor2 != null) {
                    }
                }
            }
            sQLiteCursorQueryFinalized = sQLiteCursor3;
            try {
                try {
                    if (arrayList33.isEmpty()) {
                        arrayList10 = arrayList8;
                    } else {
                        try {
                            arrayList10 = arrayList8;
                            try {
                                messagesStorage2.getEncryptedChatsInternal(TextUtils.join(",", arrayList33), arrayList10, arrayList34);
                            } catch (Exception e28) {
                                e = e28;
                                sQLiteCursor = sQLiteCursorQueryFinalized;
                                arrayList = arrayList10;
                                messagesStorage = messagesStorage2;
                                tL_messages_dialogs = tL_messages_dialogs2;
                                exc = e;
                                tL_messages_dialogs.dialogs.clear();
                                tL_messages_dialogs.users.clear();
                                tL_messages_dialogs.chats.clear();
                                arrayList.clear();
                                messagesStorage.checkSQLException(exc);
                                getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
                                if (sQLiteCursor == null) {
                                }
                            }
                        } catch (Exception e29) {
                            e = e29;
                            arrayList10 = arrayList8;
                            sQLiteCursor = sQLiteCursorQueryFinalized;
                            arrayList = arrayList10;
                            messagesStorage = messagesStorage2;
                            tL_messages_dialogs = tL_messages_dialogs2;
                            exc = e;
                            tL_messages_dialogs.dialogs.clear();
                            tL_messages_dialogs.users.clear();
                            tL_messages_dialogs.chats.clear();
                            arrayList.clear();
                            messagesStorage.checkSQLException(exc);
                            getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
                            if (sQLiteCursor == null) {
                            }
                        }
                    }
                    try {
                        if (!arrayList3.isEmpty()) {
                            messagesStorage2.getChatsInternal(TextUtils.join(",", arrayList3), tL_messages_dialogs2.chats);
                        }
                        if (!arrayList34.isEmpty()) {
                            messagesStorage2.getUsersInternal(arrayList34, tL_messages_dialogs2.users);
                        }
                    } catch (Exception e30) {
                        e = e30;
                        arrayList = arrayList10;
                        messagesStorage = messagesStorage2;
                        tL_messages_dialogs = tL_messages_dialogs2;
                    }
                } catch (Throwable th20) {
                    th = th20;
                }
            } catch (Exception e31) {
                e = e31;
                messagesStorage = messagesStorage2;
                tL_messages_dialogs = tL_messages_dialogs2;
                arrayList = arrayList8;
            }
        } catch (Exception e32) {
            e = e32;
            messagesStorage = messagesStorage2;
            tL_messages_dialogs = tL_messages_dialogs2;
            arrayList = arrayList8;
            exc = e;
            sQLiteCursor = sQLiteCursor3;
            tL_messages_dialogs.dialogs.clear();
            tL_messages_dialogs.users.clear();
            tL_messages_dialogs.chats.clear();
            arrayList.clear();
            messagesStorage.checkSQLException(exc);
            getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
            if (sQLiteCursor == null) {
            }
        } catch (Throwable th21) {
            th = th21;
            th = th;
            sQLiteCursor2 = sQLiteCursor3;
            if (sQLiteCursor2 != null) {
            }
        }
        if (!hashSet7.isEmpty()) {
            HashSet<Long> hashSet8 = new HashSet<>();
            Iterator it = hashSet7.iterator();
            while (it.hasNext()) {
                Long l = (Long) it.next();
                for (int i19 = 0; i19 < tL_messages_dialogs2.users.size(); i19++) {
                    if (((TLRPC.User) tL_messages_dialogs2.users.get(i19)).id == l.longValue() && ((TLRPC.User) tL_messages_dialogs2.users.get(i19)).premium) {
                        hashSet8.add(l);
                    }
                }
            }
            ArrayList<TLRPC.UserFull> arrayListLoadUserInfos = !hashSet8.isEmpty() ? messagesStorage2.loadUserInfos(hashSet8) : null;
            ArrayList<TLRPC.EncryptedChat> arrayList36 = arrayList10;
            messagesStorage = this;
            arrayList = arrayList10;
            tL_messages_dialogs = tL_messages_dialogs2;
            try {
                getMessagesController().processLoadedDialogs(tL_messages_dialogs2, arrayList36, arrayListLoadUserInfos, i, i2, i3, 1, false, false, true);
                if (sQLiteCursorQueryFinalized == null) {
                    return;
                }
            } catch (Exception e33) {
                e = e33;
                sQLiteCursor = sQLiteCursorQueryFinalized;
                exc = e;
                tL_messages_dialogs.dialogs.clear();
                tL_messages_dialogs.users.clear();
                tL_messages_dialogs.chats.clear();
                arrayList.clear();
                messagesStorage.checkSQLException(exc);
                getMessagesController().processLoadedDialogs(tL_messages_dialogs, arrayList, null, i, 0, 100, 1, true, false, true);
                if (sQLiteCursor == null) {
                }
            } catch (Throwable th22) {
                th = th22;
                sQLiteCursor2 = sQLiteCursorQueryFinalized;
                th = th;
                if (sQLiteCursor2 != null) {
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            return;
        }
        if (sQLiteCursor2 != null) {
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getDownloadQueue$179(int i, ArrayList arrayList) {
        getDownloadController().processDownloadObjects(i, arrayList);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:25:0x0080  */
    /* JADX WARN: Removed duplicated region for block: B:37:0x009c  */
    /* JADX WARN: Removed duplicated region for block: B:38:0x009e  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$getDownloadQueue$180(final int i) throws Throwable {
        boolean z;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                final ArrayList arrayList = new ArrayList();
                SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT uid, type, data, parent FROM download_queue WHERE type = %d ORDER BY date DESC LIMIT 3", Integer.valueOf(i)), new Object[0]);
                while (sQLiteCursorQueryFinalized.next()) {
                    try {
                        DownloadObject downloadObject = new DownloadObject();
                        downloadObject.type = sQLiteCursorQueryFinalized.intValue(1);
                        downloadObject.id = sQLiteCursorQueryFinalized.longValue(0);
                        downloadObject.parent = sQLiteCursorQueryFinalized.stringValue(3);
                        NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(2);
                        if (nativeByteBufferByteBufferValue != null) {
                            TLRPC.MessageMedia messageMediaTLdeserialize = TLRPC.MessageMedia.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            nativeByteBufferByteBufferValue.reuse();
                            TLRPC.Document document = messageMediaTLdeserialize.document;
                            if (document != null) {
                                downloadObject.object = document;
                                if (MessageObject.isVideoDocument(document) || MessageObject.isVoiceDocument(messageMediaTLdeserialize.document) || MessageObject.isRoundVideoDocument(messageMediaTLdeserialize.document)) {
                                    int i2 = messageMediaTLdeserialize.ttl_seconds;
                                    if ((i2 > 0 && i2 <= 60) || i2 == Integer.MAX_VALUE) {
                                        z = true;
                                    }
                                }
                                z = false;
                            } else {
                                TLRPC.Photo photo = messageMediaTLdeserialize.photo;
                                if (photo != null) {
                                    downloadObject.object = photo;
                                    int i3 = messageMediaTLdeserialize.ttl_seconds;
                                    if ((i3 <= 0 || i3 > 60) && i3 != Integer.MAX_VALUE) {
                                        z = false;
                                    }
                                }
                                downloadObject.forceCache = (messageMediaTLdeserialize.flags & Integer.MIN_VALUE) == 0;
                            }
                            downloadObject.secret = z;
                            downloadObject.forceCache = (messageMediaTLdeserialize.flags & Integer.MIN_VALUE) == 0;
                        }
                        arrayList.add(downloadObject);
                    } catch (Exception e) {
                        e = e;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        checkSQLException(e);
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                    } catch (Throwable th) {
                        th = th;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        throw th;
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda133
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$getDownloadQueue$179(i, arrayList);
                    }
                });
            } catch (Throwable th2) {
                th = th2;
            }
        } catch (Exception e2) {
            e = e2;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getEncryptedChat$171(long j, ArrayList arrayList, CountDownLatch countDownLatch) {
        try {
            try {
                ArrayList<Long> arrayList2 = new ArrayList<>();
                ArrayList<TLRPC.EncryptedChat> arrayList3 = new ArrayList<>();
                getEncryptedChatsInternal("" + j, arrayList3, arrayList2);
                if (!arrayList3.isEmpty() && !arrayList2.isEmpty()) {
                    ArrayList<TLRPC.User> arrayList4 = new ArrayList<>();
                    getUsersInternal(arrayList2, arrayList4);
                    if (!arrayList4.isEmpty()) {
                        arrayList.add(arrayList3.get(0));
                        arrayList.add(arrayList4.get(0));
                    }
                }
            } catch (Exception e) {
                checkSQLException(e);
            }
        } finally {
            countDownLatch.countDown();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getMessage$137(long j, long j2, AtomicReference atomicReference, CountDownLatch countDownLatch) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT data FROM messages_v2 WHERE uid = " + j + " AND mid = " + j2 + " LIMIT 1", new Object[0]);
                while (sQLiteCursorQueryFinalized.next()) {
                    NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                    if (nativeByteBufferByteBufferValue != null) {
                        TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                        nativeByteBufferByteBufferValue.reuse();
                        atomicReference.set(messageTLdeserialize);
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                    sQLiteCursorQueryFinalized.dispose();
                }
            }
            countDownLatch.countDown();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            countDownLatch.countDown();
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public static /* synthetic */ void lambda$getMessages$156(Timer.Task task, Runnable runnable) {
        Timer.done(task);
        runnable.run();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getMessages$157(Timer.Task task, Timer timer, long j, long j2, int i, int i2, int i3, int i4, int i5, int i6, int i7, long j3, int i8, boolean z, boolean z2) {
        Timer.done(task);
        Timer.Task taskStart = Timer.start(timer, "MessagesStorage.getMessages");
        final Runnable messagesInternal = getMessagesInternal(j, j2, i, i2, i3, i4, i5, i6, i7, j3, i8, z, z2, timer);
        Timer.done(taskStart);
        final Timer.Task taskStart2 = Timer.start(timer, "MessagesStorage.getMessages: stageQueue.postRunnable");
        Utilities.stageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda185
            @Override // java.lang.Runnable
            public final void run() {
                MessagesStorage.lambda$getMessages$156(taskStart2, messagesInternal);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getMessagesCount$153(long j, final IntCallback intCallback) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT COUNT(mid) FROM messages_v2 WHERE uid = %d", Long.valueOf(j)), new Object[0]);
                final int iIntValue = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : 0;
                sQLiteCursorQueryFinalized.dispose();
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda161
                    @Override // java.lang.Runnable
                    public final void run() {
                        intCallback.run(iIntValue);
                    }
                });
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized == null) {
                    return;
                }
            }
            sQLiteCursorQueryFinalized.dispose();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public static /* synthetic */ int lambda$getMessagesInternal$154(TLRPC.Message message, TLRPC.Message message2) {
        int i;
        int i2;
        int i3 = message.id;
        if (i3 > 0 && (i2 = message2.id) > 0) {
            if (i3 > i2) {
                return -1;
            }
            return i3 < i2 ? 1 : 0;
        }
        if (i3 < 0 && (i = message2.id) < 0) {
            if (i3 < i) {
                return -1;
            }
            return i3 > i ? 1 : 0;
        }
        int i4 = message.date;
        int i5 = message2.date;
        if (i4 > i5) {
            return -1;
        }
        return i4 < i5 ? 1 : 0;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getMessagesInternal$155(TLRPC.TL_messages_messages tL_messages_messages, int i, long j, long j2, int i2, int i3, int i4, int i5, int i6, int i7, int i8, int i9, int i10, boolean z, int i11, long j3, int i12, boolean z2, int i13, boolean z3, boolean z4, Timer timer) {
        getMessagesController().processLoadedMessages(tL_messages_messages, i, j, j2, i2, i3, i4, true, i5, i6, i7, i8, i9, i10, z, i11, j3, i12, z2, i13, z3, z4, timer);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:25:0x00aa A[Catch: all -> 0x00b0, Exception -> 0x00b4, TryCatch #4 {Exception -> 0x00b4, all -> 0x00b0, blocks: (B:17:0x0089, B:19:0x008f, B:25:0x00aa, B:34:0x00c3, B:36:0x00cb, B:37:0x00d3, B:32:0x00bc, B:38:0x00dd), top: B:53:0x0089 }] */
    /* JADX WARN: Removed duplicated region for block: B:32:0x00bc A[Catch: all -> 0x00b0, Exception -> 0x00b4, TryCatch #4 {Exception -> 0x00b4, all -> 0x00b0, blocks: (B:17:0x0089, B:19:0x008f, B:25:0x00aa, B:34:0x00c3, B:36:0x00cb, B:37:0x00d3, B:32:0x00bc, B:38:0x00dd), top: B:53:0x0089 }] */
    /* JADX WARN: Removed duplicated region for block: B:43:0x00ed  */
    /* JADX WARN: Removed duplicated region for block: B:60:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$getNewTask$106(LongSparseArray longSparseArray, LongSparseArray longSparseArray2) throws Throwable {
        Exception e;
        LongSparseArray longSparseArray3;
        SQLiteCursor sQLiteCursor = null;
        try {
            if (longSparseArray != null) {
                try {
                    int size = longSparseArray.size();
                    for (int i = 0; i < size; i++) {
                        this.database.executeFast(String.format(Locale.US, "DELETE FROM enc_tasks_v4 WHERE mid IN(%s) AND uid = %d AND media = 0", TextUtils.join(",", (Iterable) longSparseArray.valueAt(i)), Long.valueOf(longSparseArray.keyAt(i)))).stepThis().dispose();
                    }
                } catch (Exception e2) {
                    e = e2;
                    checkSQLException(e);
                    if (sQLiteCursor == null) {
                        sQLiteCursor.dispose();
                        return;
                    }
                    return;
                }
            }
            if (longSparseArray2 != null) {
                int size2 = longSparseArray2.size();
                for (int i2 = 0; i2 < size2; i2++) {
                    this.database.executeFast(String.format(Locale.US, "DELETE FROM enc_tasks_v4 WHERE mid IN(%s) AND uid = %d AND media = 1", TextUtils.join(",", (Iterable) longSparseArray2.valueAt(i2)), Long.valueOf(longSparseArray2.keyAt(i2)))).stepThis().dispose();
                }
            }
            SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT mid, date, media, uid FROM enc_tasks_v4 WHERE date = (SELECT min(date) FROM enc_tasks_v4)", new Object[0]);
            LongSparseArray longSparseArray4 = null;
            LongSparseArray longSparseArray5 = null;
            int i3 = 0;
            while (sQLiteCursorQueryFinalized.next()) {
                try {
                    int iIntValue = sQLiteCursorQueryFinalized.intValue(0);
                    int iIntValue2 = sQLiteCursorQueryFinalized.intValue(1);
                    int iIntValue3 = sQLiteCursorQueryFinalized.intValue(2);
                    long jLongValue = sQLiteCursorQueryFinalized.longValue(3);
                    if (iIntValue3 == -1) {
                        if (iIntValue > 0) {
                            if (longSparseArray5 == null) {
                                longSparseArray5 = new LongSparseArray();
                            }
                            longSparseArray3 = longSparseArray5;
                        }
                        if (longSparseArray4 == null) {
                            longSparseArray4 = new LongSparseArray();
                        }
                        longSparseArray3 = longSparseArray5;
                        longSparseArray5 = longSparseArray4;
                    } else if (iIntValue3 != 0) {
                        if (longSparseArray5 == null) {
                        }
                        longSparseArray3 = longSparseArray5;
                    } else {
                        if (longSparseArray4 == null) {
                        }
                        longSparseArray3 = longSparseArray5;
                        longSparseArray5 = longSparseArray4;
                    }
                    ArrayList arrayList = (ArrayList) longSparseArray5.get(jLongValue);
                    if (arrayList == null) {
                        arrayList = new ArrayList();
                        longSparseArray5.put(jLongValue, arrayList);
                    }
                    arrayList.add(Integer.valueOf(iIntValue));
                    i3 = iIntValue2;
                    longSparseArray5 = longSparseArray3;
                } catch (Exception e3) {
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    e = e3;
                    checkSQLException(e);
                    if (sQLiteCursor == null) {
                    }
                } catch (Throwable th) {
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    th = th;
                    if (sQLiteCursor != null) {
                        sQLiteCursor.dispose();
                    }
                    throw th;
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            getMessagesController().processLoadedDeleteTask(i3, longSparseArray4, longSparseArray5);
        } catch (Throwable th2) {
            th = th2;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public static /* synthetic */ void lambda$getSavedDialogMaxMessageId$50(IntCallback intCallback, int[] iArr) {
        intCallback.run(iArr[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getSavedDialogMaxMessageId$51(long j, final IntCallback intCallback) {
        final int[] iArr = new int[1];
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT MAX(mid) FROM messages_topics WHERE uid = ? AND topic_id = ?", Long.valueOf(getUserConfig().getClientUserId()), Long.valueOf(j));
                if (sQLiteCursorQueryFinalized.next()) {
                    iArr[0] = sQLiteCursorQueryFinalized.intValue(0);
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda234
                @Override // java.lang.Runnable
                public final void run() {
                    MessagesStorage.lambda$getSavedDialogMaxMessageId$50(intCallback, iArr);
                }
            });
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getSentFile$159(String str, int i, Object[] objArr, CountDownLatch countDownLatch) {
        NativeByteBuffer nativeByteBufferByteBufferValue;
        try {
            try {
                String strMD5 = Utilities.MD5(str);
                if (strMD5 != null) {
                    SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data, parent FROM sent_files_v2 WHERE uid = '%s' AND type = %d", strMD5, Integer.valueOf(i)), new Object[0]);
                    if (sQLiteCursorQueryFinalized.next() && (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0)) != null) {
                        TLRPC.MessageMedia messageMediaTLdeserialize = TLRPC.MessageMedia.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                        nativeByteBufferByteBufferValue.reuse();
                        if (messageMediaTLdeserialize instanceof TLRPC.TL_messageMediaDocument) {
                            objArr[0] = ((TLRPC.TL_messageMediaDocument) messageMediaTLdeserialize).document;
                        } else if (messageMediaTLdeserialize instanceof TLRPC.TL_messageMediaPhoto) {
                            objArr[0] = ((TLRPC.TL_messageMediaPhoto) messageMediaTLdeserialize).photo;
                        }
                        if (objArr[0] != null) {
                            objArr[1] = sQLiteCursorQueryFinalized.stringValue(1);
                        }
                    }
                    sQLiteCursorQueryFinalized.dispose();
                }
            } catch (Exception e) {
                checkSQLException(e);
            }
            countDownLatch.countDown();
        } catch (Throwable th) {
            countDownLatch.countDown();
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getUnreadMention$151(long j, long j2, final IntCallback intCallback) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = j != 0 ? this.database.queryFinalized(String.format(Locale.US, "SELECT MIN(mid) FROM messages_topics WHERE uid = %d AND topic_id = %d AND mention = 1 AND read_state IN(0, 1)", Long.valueOf(j2), Long.valueOf(j)), new Object[0]) : this.database.queryFinalized(String.format(Locale.US, "SELECT MIN(mid) FROM messages_v2 WHERE uid = %d AND mention = 1 AND read_state IN(0, 1)", Long.valueOf(j2)), new Object[0]);
                final int iIntValue = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : 0;
                sQLiteCursorQueryFinalized.dispose();
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda46
                    @Override // java.lang.Runnable
                    public final void run() {
                        intCallback.run(iIntValue);
                    }
                });
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized == null) {
                    return;
                }
            }
            sQLiteCursorQueryFinalized.dispose();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:193:0x046c  */
    /* JADX WARN: Removed duplicated region for block: B:228:? A[SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$getUnsentMessages$147(int i) throws Throwable {
        Throwable th;
        SQLiteCursor sQLiteCursor;
        Exception exc;
        Throwable th2;
        ArrayList<TLRPC.User> arrayList;
        ArrayList<TLRPC.Chat> arrayList2;
        Long lValueOf;
        ArrayList<Long> arrayList3;
        Long lValueOf2;
        ArrayList<Long> arrayList4;
        Long lValueOf3;
        ArrayList<Long> arrayList5;
        boolean z = false;
        try {
            SparseArray sparseArray = new SparseArray();
            ArrayList<TLRPC.Message> arrayList6 = new ArrayList<>();
            ArrayList<TLRPC.Message> arrayList7 = new ArrayList<>();
            ArrayList<TLRPC.User> arrayList8 = new ArrayList<>();
            ArrayList<TLRPC.Chat> arrayList9 = new ArrayList<>();
            ArrayList<TLRPC.EncryptedChat> arrayList10 = new ArrayList<>();
            ArrayList<Long> arrayList11 = new ArrayList<>();
            ArrayList<Long> arrayList12 = new ArrayList<>();
            ArrayList arrayList13 = new ArrayList();
            ArrayList arrayList14 = new ArrayList();
            SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT m.read_state, m.data, m.send_state, m.mid, m.date, r.random_id, m.uid, s.seq_in, s.seq_out, m.ttl FROM messages_v2 as m LEFT JOIN randoms_v2 as r ON r.mid = m.mid AND r.uid = m.uid LEFT JOIN messages_seq as s ON m.mid = s.mid WHERE (m.mid < 0 AND m.send_state = 1) OR (m.mid > 0 AND m.send_state = 3) ORDER BY m.mid DESC LIMIT " + i, new Object[0]);
            while (sQLiteCursorQueryFinalized.next()) {
                try {
                    NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(1);
                    if (nativeByteBufferByteBufferValue != null) {
                        TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(z), z);
                        messageTLdeserialize.send_state = sQLiteCursorQueryFinalized.intValue(2);
                        ArrayList<TLRPC.User> arrayList15 = arrayList8;
                        ArrayList<TLRPC.Chat> arrayList16 = arrayList9;
                        messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                        nativeByteBufferByteBufferValue.reuse();
                        if (sparseArray.indexOfKey(messageTLdeserialize.id) < 0) {
                            MessageObject.setUnreadFlags(messageTLdeserialize, sQLiteCursorQueryFinalized.intValue(0));
                            messageTLdeserialize.id = sQLiteCursorQueryFinalized.intValue(3);
                            messageTLdeserialize.date = sQLiteCursorQueryFinalized.intValue(4);
                            if (!sQLiteCursorQueryFinalized.isNull(5)) {
                                messageTLdeserialize.random_id = sQLiteCursorQueryFinalized.longValue(5);
                            }
                            messageTLdeserialize.dialog_id = sQLiteCursorQueryFinalized.longValue(6);
                            messageTLdeserialize.seq_in = sQLiteCursorQueryFinalized.intValue(7);
                            messageTLdeserialize.seq_out = sQLiteCursorQueryFinalized.intValue(8);
                            messageTLdeserialize.ttl = sQLiteCursorQueryFinalized.intValue(9);
                            if (messageTLdeserialize.media instanceof TLRPC.TL_messageMediaPaidMedia) {
                                arrayList14.add(messageTLdeserialize);
                            } else {
                                arrayList6.add(messageTLdeserialize);
                            }
                            sparseArray.put(messageTLdeserialize.id, messageTLdeserialize);
                            if (DialogObject.isEncryptedDialog(messageTLdeserialize.dialog_id)) {
                                int encryptedChatId = DialogObject.getEncryptedChatId(messageTLdeserialize.dialog_id);
                                if (!arrayList13.contains(Integer.valueOf(encryptedChatId))) {
                                    arrayList13.add(Integer.valueOf(encryptedChatId));
                                }
                            } else if (DialogObject.isUserDialog(messageTLdeserialize.dialog_id)) {
                                if (!arrayList11.contains(Long.valueOf(messageTLdeserialize.dialog_id))) {
                                    lValueOf3 = Long.valueOf(messageTLdeserialize.dialog_id);
                                    arrayList5 = arrayList11;
                                    arrayList5.add(lValueOf3);
                                }
                            } else if (!arrayList12.contains(Long.valueOf(-messageTLdeserialize.dialog_id))) {
                                lValueOf3 = Long.valueOf(-messageTLdeserialize.dialog_id);
                                arrayList5 = arrayList12;
                                arrayList5.add(lValueOf3);
                            }
                            addUsersAndChatsFromMessage(messageTLdeserialize, arrayList11, arrayList12, null);
                            if (messageTLdeserialize.send_state != 3) {
                                if (messageTLdeserialize.peer_id.channel_id == 0 && !MessageObject.isUnread(messageTLdeserialize) && !DialogObject.isEncryptedDialog(messageTLdeserialize.dialog_id)) {
                                    messageTLdeserialize.send_state = 0;
                                } else if (messageTLdeserialize.id > 0) {
                                    messageTLdeserialize.send_state = 0;
                                }
                            }
                        }
                        arrayList8 = arrayList15;
                        arrayList9 = arrayList16;
                        z = false;
                    }
                } catch (Exception e) {
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    exc = e;
                } catch (Throwable th3) {
                    th2 = th3;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    th = th2;
                    if (sQLiteCursor == null) {
                    }
                }
            }
            ArrayList<TLRPC.User> arrayList17 = arrayList8;
            ArrayList<TLRPC.Chat> arrayList18 = arrayList9;
            sQLiteCursorQueryFinalized.dispose();
            if (!arrayList14.isEmpty()) {
                Iterator it = arrayList14.iterator();
                while (it.hasNext()) {
                    TLRPC.Message message = (TLRPC.Message) it.next();
                    this.database.executeFast("DELETE FROM messages_v2 WHERE uid = " + message.dialog_id + " AND mid = " + message.id).stepThis().dispose();
                }
            }
            boolean z2 = false;
            SQLiteCursor sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT m.data, m.send_state, m.mid, m.date, r.random_id, m.uid, m.ttl FROM scheduled_messages_v2 as m LEFT JOIN randoms_v2 as r ON r.mid = m.mid AND r.uid = m.uid WHERE (m.mid < 0 AND m.send_state = 1) OR (m.mid > 0 AND m.send_state = 3) ORDER BY date ASC", new Object[0]);
            while (sQLiteCursorQueryFinalized2.next()) {
                try {
                    NativeByteBuffer nativeByteBufferByteBufferValue2 = sQLiteCursorQueryFinalized2.byteBufferValue(z2 ? 1 : 0);
                    if (nativeByteBufferByteBufferValue2 != null) {
                        TLRPC.Message messageTLdeserialize2 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue2, nativeByteBufferByteBufferValue2.readInt32(z2), z2);
                        messageTLdeserialize2.send_state = sQLiteCursorQueryFinalized2.intValue(1);
                        messageTLdeserialize2.readAttachPath(nativeByteBufferByteBufferValue2, getUserConfig().clientUserId);
                        nativeByteBufferByteBufferValue2.reuse();
                        if (sparseArray.indexOfKey(messageTLdeserialize2.id) < 0) {
                            messageTLdeserialize2.id = sQLiteCursorQueryFinalized2.intValue(2);
                            messageTLdeserialize2.date = sQLiteCursorQueryFinalized2.intValue(3);
                            if (!sQLiteCursorQueryFinalized2.isNull(4)) {
                                messageTLdeserialize2.random_id = sQLiteCursorQueryFinalized2.longValue(4);
                            }
                            messageTLdeserialize2.dialog_id = sQLiteCursorQueryFinalized2.longValue(5);
                            messageTLdeserialize2.ttl = sQLiteCursorQueryFinalized2.intValue(6);
                            arrayList7.add(messageTLdeserialize2);
                            sparseArray.put(messageTLdeserialize2.id, messageTLdeserialize2);
                            if (DialogObject.isEncryptedDialog(messageTLdeserialize2.dialog_id)) {
                                int encryptedChatId2 = DialogObject.getEncryptedChatId(messageTLdeserialize2.dialog_id);
                                if (!arrayList13.contains(Integer.valueOf(encryptedChatId2))) {
                                    arrayList13.add(Integer.valueOf(encryptedChatId2));
                                }
                            } else if (DialogObject.isUserDialog(messageTLdeserialize2.dialog_id)) {
                                if (!arrayList11.contains(Long.valueOf(messageTLdeserialize2.dialog_id))) {
                                    lValueOf2 = Long.valueOf(messageTLdeserialize2.dialog_id);
                                    arrayList4 = arrayList11;
                                    arrayList4.add(lValueOf2);
                                }
                            } else if (!arrayList12.contains(Long.valueOf(-messageTLdeserialize2.dialog_id))) {
                                lValueOf2 = Long.valueOf(-messageTLdeserialize2.dialog_id);
                                arrayList4 = arrayList12;
                                arrayList4.add(lValueOf2);
                            }
                            addUsersAndChatsFromMessage(messageTLdeserialize2, arrayList11, arrayList12, null);
                            if (messageTLdeserialize2.send_state != 3) {
                                if (messageTLdeserialize2.peer_id.channel_id == 0 && !MessageObject.isUnread(messageTLdeserialize2) && !DialogObject.isEncryptedDialog(messageTLdeserialize2.dialog_id)) {
                                    messageTLdeserialize2.send_state = 0;
                                } else if (messageTLdeserialize2.id > 0) {
                                    messageTLdeserialize2.send_state = 0;
                                }
                            }
                        }
                        z2 = false;
                    }
                } catch (Exception e2) {
                    e = e2;
                } catch (Throwable th4) {
                    th = th4;
                }
            }
            sQLiteCursorQueryFinalized2.dispose();
            getUserConfig().getClientUserId();
            boolean z3 = false;
            sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT m.data, m.send_state, m.mid, m.date, m.topic_id, m.ttl FROM quick_replies_messages as m WHERE (m.mid < 0 AND m.send_state = 1) OR (m.mid > 0 AND m.send_state = 3) ORDER BY mid DESC", new Object[0]);
            while (sQLiteCursorQueryFinalized2.next()) {
                NativeByteBuffer nativeByteBufferByteBufferValue3 = sQLiteCursorQueryFinalized2.byteBufferValue(z3 ? 1 : 0);
                if (nativeByteBufferByteBufferValue3 != null) {
                    TLRPC.Message messageTLdeserialize3 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue3, nativeByteBufferByteBufferValue3.readInt32(z3), z3);
                    messageTLdeserialize3.send_state = sQLiteCursorQueryFinalized2.intValue(1);
                    messageTLdeserialize3.readAttachPath(nativeByteBufferByteBufferValue3, getUserConfig().clientUserId);
                    nativeByteBufferByteBufferValue3.reuse();
                    if (sparseArray.indexOfKey(messageTLdeserialize3.id) < 0) {
                        messageTLdeserialize3.id = sQLiteCursorQueryFinalized2.intValue(2);
                        int iIntValue = sQLiteCursorQueryFinalized2.intValue(4);
                        try {
                            SQLiteCursor sQLiteCursorQueryFinalized3 = this.database.queryFinalized("SELECT name FROM business_replies WHERE topic_id = ?", Integer.valueOf(iIntValue));
                            String strStringValue = sQLiteCursorQueryFinalized3.next() ? sQLiteCursorQueryFinalized3.stringValue(1) : null;
                            sQLiteCursorQueryFinalized3.dispose();
                            if (strStringValue == null) {
                                this.database.executeFast("DELETE FROM quick_replies_messages WHERE mid = " + messageTLdeserialize3.id + " AND topic_id = " + iIntValue).stepThis().dispose();
                            } else {
                                TLRPC.TL_inputQuickReplyShortcut tL_inputQuickReplyShortcut = new TLRPC.TL_inputQuickReplyShortcut();
                                tL_inputQuickReplyShortcut.shortcut = strStringValue;
                                messageTLdeserialize3.quick_reply_shortcut = tL_inputQuickReplyShortcut;
                                messageTLdeserialize3.quick_reply_shortcut_id = iIntValue;
                                if (iIntValue != 0) {
                                    messageTLdeserialize3.flags |= 1073741824;
                                }
                                messageTLdeserialize3.date = sQLiteCursorQueryFinalized2.intValue(3);
                                messageTLdeserialize3.ttl = sQLiteCursorQueryFinalized2.intValue(5);
                                arrayList7.add(messageTLdeserialize3);
                                sparseArray.put(messageTLdeserialize3.id, messageTLdeserialize3);
                                if (DialogObject.isEncryptedDialog(messageTLdeserialize3.dialog_id)) {
                                    int encryptedChatId3 = DialogObject.getEncryptedChatId(messageTLdeserialize3.dialog_id);
                                    if (!arrayList13.contains(Integer.valueOf(encryptedChatId3))) {
                                        arrayList13.add(Integer.valueOf(encryptedChatId3));
                                    }
                                } else if (DialogObject.isUserDialog(messageTLdeserialize3.dialog_id)) {
                                    if (!arrayList11.contains(Long.valueOf(messageTLdeserialize3.dialog_id))) {
                                        lValueOf = Long.valueOf(messageTLdeserialize3.dialog_id);
                                        arrayList3 = arrayList11;
                                        arrayList3.add(lValueOf);
                                    }
                                } else if (!arrayList12.contains(Long.valueOf(-messageTLdeserialize3.dialog_id))) {
                                    lValueOf = Long.valueOf(-messageTLdeserialize3.dialog_id);
                                    arrayList3 = arrayList12;
                                    arrayList3.add(lValueOf);
                                }
                                addUsersAndChatsFromMessage(messageTLdeserialize3, arrayList11, arrayList12, null);
                                if (messageTLdeserialize3.send_state != 3) {
                                    if (messageTLdeserialize3.peer_id.channel_id == 0 && !MessageObject.isUnread(messageTLdeserialize3) && !DialogObject.isEncryptedDialog(messageTLdeserialize3.dialog_id)) {
                                        messageTLdeserialize3.send_state = 0;
                                    } else if (messageTLdeserialize3.id > 0) {
                                        messageTLdeserialize3.send_state = 0;
                                    }
                                }
                            }
                        } catch (Exception e3) {
                            e = e3;
                            exc = e;
                            sQLiteCursor = sQLiteCursorQueryFinalized2;
                            try {
                                checkSQLException(exc);
                                if (sQLiteCursor != null) {
                                    sQLiteCursor.dispose();
                                    return;
                                }
                                return;
                            } catch (Throwable th5) {
                                th2 = th5;
                                th = th2;
                                if (sQLiteCursor == null) {
                                    throw th;
                                }
                                sQLiteCursor.dispose();
                                throw th;
                            }
                        } catch (Throwable th6) {
                            th = th6;
                            th = th;
                            sQLiteCursor = sQLiteCursorQueryFinalized2;
                            if (sQLiteCursor == null) {
                            }
                        }
                    }
                    z3 = false;
                }
            }
            sQLiteCursorQueryFinalized2.dispose();
            if (!arrayList13.isEmpty()) {
                getEncryptedChatsInternal(TextUtils.join(",", arrayList13), arrayList10, arrayList11);
            }
            if (arrayList11.isEmpty()) {
                arrayList = arrayList17;
            } else {
                arrayList = arrayList17;
                getUsersInternal(arrayList11, arrayList);
            }
            if (arrayList12.isEmpty()) {
                arrayList2 = arrayList18;
            } else {
                StringBuilder sb = new StringBuilder();
                for (int i2 = 0; i2 < arrayList12.size(); i2++) {
                    Long l = arrayList12.get(i2);
                    if (sb.length() != 0) {
                        sb.append(",");
                    }
                    sb.append(l);
                }
                arrayList2 = arrayList18;
                getChatsInternal(sb.toString(), arrayList2);
            }
            getSendMessagesHelper().processUnsentMessages(arrayList6, arrayList7, arrayList, arrayList2, arrayList10);
        } catch (Exception e4) {
            exc = e4;
            sQLiteCursor = null;
        } catch (Throwable th7) {
            th = th7;
            sQLiteCursor = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getUserSync$241(TLRPC.User[] userArr, long j, CountDownLatch countDownLatch) {
        userArr[0] = getUser(j);
        countDownLatch.countDown();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public static /* synthetic */ void lambda$getWallpapers$77(ArrayList arrayList) {
        NotificationCenter.getGlobalInstance().lambda$postNotificationNameOnUIThread$1(NotificationCenter.wallpapersDidLoad, arrayList);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getWallpapers$78() {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT data FROM wallpapers2 WHERE 1 ORDER BY num ASC", new Object[0]);
                final ArrayList arrayList = new ArrayList();
                while (sQLiteCursorQueryFinalized.next()) {
                    NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                    if (nativeByteBufferByteBufferValue != null) {
                        TLRPC.WallPaper wallPaperTLdeserialize = TLRPC.WallPaper.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                        nativeByteBufferByteBufferValue.reuse();
                        if (wallPaperTLdeserialize != null) {
                            arrayList.add(wallPaperTLdeserialize);
                        }
                    }
                }
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda151
                    @Override // java.lang.Runnable
                    public final void run() {
                        MessagesStorage.lambda$getWallpapers$77(arrayList);
                    }
                });
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized == null) {
                    return;
                }
            }
            sQLiteCursorQueryFinalized.dispose();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getWidgetDialogIds$162(int i, ArrayList arrayList, ArrayList arrayList2, ArrayList arrayList3, boolean z, int i2, CountDownLatch countDownLatch) throws Throwable {
        Long lValueOf;
        ArrayList<Long> arrayList4;
        Long lValueOf2;
        ArrayList<Long> arrayList5;
        Long lValueOf3;
        ArrayList<Long> arrayList6;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                ArrayList<Long> arrayList7 = new ArrayList<>();
                ArrayList<Long> arrayList8 = new ArrayList<>();
                SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT did FROM shortcut_widget WHERE id = %d ORDER BY ord ASC", Integer.valueOf(i)), new Object[0]);
                while (sQLiteCursorQueryFinalized.next()) {
                    try {
                        long jLongValue = sQLiteCursorQueryFinalized.longValue(0);
                        if (jLongValue != -1) {
                            arrayList.add(Long.valueOf(jLongValue));
                            if (arrayList2 != null && arrayList3 != null) {
                                if (DialogObject.isUserDialog(jLongValue)) {
                                    lValueOf3 = Long.valueOf(jLongValue);
                                    arrayList6 = arrayList7;
                                } else {
                                    lValueOf3 = Long.valueOf(-jLongValue);
                                    arrayList6 = arrayList8;
                                }
                                arrayList6.add(lValueOf3);
                            }
                        }
                    } catch (Exception e) {
                        e = e;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        checkSQLException(e);
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        countDownLatch.countDown();
                    } catch (Throwable th) {
                        th = th;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        countDownLatch.countDown();
                        throw th;
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
                if (!z && arrayList.isEmpty()) {
                    if (i2 == 0) {
                        sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT did FROM dialogs WHERE folder_id = 0 ORDER BY pinned DESC, date DESC LIMIT 0,10", new Object[0]);
                        while (sQLiteCursorQueryFinalized.next()) {
                            long jLongValue2 = sQLiteCursorQueryFinalized.longValue(0);
                            if (!DialogObject.isFolderDialogId(jLongValue2)) {
                                arrayList.add(Long.valueOf(jLongValue2));
                                if (arrayList2 != null && arrayList3 != null) {
                                    if (DialogObject.isUserDialog(jLongValue2)) {
                                        lValueOf2 = Long.valueOf(jLongValue2);
                                        arrayList5 = arrayList7;
                                    } else {
                                        lValueOf2 = Long.valueOf(-jLongValue2);
                                        arrayList5 = arrayList8;
                                    }
                                    arrayList5.add(lValueOf2);
                                }
                            }
                        }
                    } else {
                        sQLiteCursorQueryFinalized = getMessagesStorage().getDatabase().queryFinalized("SELECT did FROM chat_hints WHERE type = 0 ORDER BY rating DESC LIMIT 4", new Object[0]);
                        while (sQLiteCursorQueryFinalized.next()) {
                            long jLongValue3 = sQLiteCursorQueryFinalized.longValue(0);
                            arrayList.add(Long.valueOf(jLongValue3));
                            if (arrayList2 != null && arrayList3 != null) {
                                if (DialogObject.isUserDialog(jLongValue3)) {
                                    lValueOf = Long.valueOf(jLongValue3);
                                    arrayList4 = arrayList7;
                                } else {
                                    lValueOf = Long.valueOf(-jLongValue3);
                                    arrayList4 = arrayList8;
                                }
                                arrayList4.add(lValueOf);
                            }
                        }
                    }
                    sQLiteCursorQueryFinalized.dispose();
                }
                if (arrayList2 != null && arrayList3 != null) {
                    if (!arrayList8.isEmpty()) {
                        getChatsInternal(TextUtils.join(",", arrayList8), arrayList3);
                    }
                    if (!arrayList7.isEmpty()) {
                        getUsersInternal(arrayList7, (ArrayList<TLRPC.User>) arrayList2);
                    }
                }
            } catch (Exception e2) {
                e = e2;
            }
            countDownLatch.countDown();
        } catch (Throwable th2) {
            th = th2;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getWidgetDialogs$163(int i, ArrayList arrayList, int i2, LongSparseArray longSparseArray, LongSparseArray longSparseArray2, ArrayList arrayList2, ArrayList arrayList3, CountDownLatch countDownLatch) throws Throwable {
        boolean z;
        Long lValueOf;
        ArrayList<Long> arrayList4;
        Long lValueOf2;
        ArrayList<Long> arrayList5;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                ArrayList<Long> arrayList6 = new ArrayList<>();
                ArrayList<Long> arrayList7 = new ArrayList<>();
                SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT did FROM shortcut_widget WHERE id = %d ORDER BY ord ASC", Integer.valueOf(i)), new Object[0]);
                while (sQLiteCursorQueryFinalized.next()) {
                    try {
                        long jLongValue = sQLiteCursorQueryFinalized.longValue(0);
                        if (jLongValue != -1) {
                            arrayList.add(Long.valueOf(jLongValue));
                            if (DialogObject.isUserDialog(jLongValue)) {
                                lValueOf2 = Long.valueOf(jLongValue);
                                arrayList5 = arrayList6;
                            } else {
                                lValueOf2 = Long.valueOf(-jLongValue);
                                arrayList5 = arrayList7;
                            }
                            arrayList5.add(lValueOf2);
                        }
                    } catch (Exception e) {
                        e = e;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        checkSQLException(e);
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        countDownLatch.countDown();
                    } catch (Throwable th) {
                        th = th;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        countDownLatch.countDown();
                        throw th;
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
                if (arrayList.isEmpty() && i2 == 1) {
                    SQLiteCursor sQLiteCursorQueryFinalized2 = getMessagesStorage().getDatabase().queryFinalized("SELECT did FROM chat_hints WHERE type = 0 ORDER BY rating DESC LIMIT 4", new Object[0]);
                    while (sQLiteCursorQueryFinalized2.next()) {
                        long jLongValue2 = sQLiteCursorQueryFinalized2.longValue(0);
                        arrayList.add(Long.valueOf(jLongValue2));
                        if (DialogObject.isUserDialog(jLongValue2)) {
                            lValueOf = Long.valueOf(jLongValue2);
                            arrayList4 = arrayList6;
                        } else {
                            lValueOf = Long.valueOf(-jLongValue2);
                            arrayList4 = arrayList7;
                        }
                        arrayList4.add(lValueOf);
                    }
                    sQLiteCursorQueryFinalized2.dispose();
                }
                if (arrayList.isEmpty()) {
                    sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT d.did, d.last_mid, d.unread_count, d.date, m.data, m.read_state, m.mid, m.send_state, m.date FROM dialogs as d LEFT JOIN messages_v2 as m ON d.last_mid = m.mid AND d.did = m.uid WHERE d.folder_id = 0 ORDER BY d.pinned DESC, d.date DESC LIMIT 0,10", new Object[0]);
                    z = true;
                } else {
                    sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT d.did, d.last_mid, d.unread_count, d.date, m.data, m.read_state, m.mid, m.send_state, m.date FROM dialogs as d LEFT JOIN messages_v2 as m ON d.last_mid = m.mid AND d.did = m.uid WHERE d.did IN(%s)", TextUtils.join(",", arrayList)), new Object[0]);
                    z = false;
                }
                while (sQLiteCursorQueryFinalized.next()) {
                    long jLongValue3 = sQLiteCursorQueryFinalized.longValue(0);
                    if (!DialogObject.isFolderDialogId(jLongValue3)) {
                        if (z) {
                            arrayList.add(Long.valueOf(jLongValue3));
                        }
                        TLRPC.TL_dialog tL_dialog = new TLRPC.TL_dialog();
                        tL_dialog.id = jLongValue3;
                        tL_dialog.top_message = sQLiteCursorQueryFinalized.intValue(1);
                        tL_dialog.unread_count = sQLiteCursorQueryFinalized.intValue(2);
                        tL_dialog.last_message_date = sQLiteCursorQueryFinalized.intValue(3);
                        longSparseArray.put(tL_dialog.id, tL_dialog);
                        NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(4);
                        if (nativeByteBufferByteBufferValue != null) {
                            TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                            nativeByteBufferByteBufferValue.reuse();
                            MessageObject.setUnreadFlags(messageTLdeserialize, sQLiteCursorQueryFinalized.intValue(5));
                            messageTLdeserialize.id = sQLiteCursorQueryFinalized.intValue(6);
                            messageTLdeserialize.send_state = sQLiteCursorQueryFinalized.intValue(7);
                            int iIntValue = sQLiteCursorQueryFinalized.intValue(8);
                            if (iIntValue != 0) {
                                tL_dialog.last_message_date = iIntValue;
                            }
                            long j = tL_dialog.id;
                            messageTLdeserialize.dialog_id = j;
                            longSparseArray2.put(j, messageTLdeserialize);
                            addUsersAndChatsFromMessage(messageTLdeserialize, arrayList6, arrayList7, null);
                        }
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
                if (!z && arrayList.size() > longSparseArray.size()) {
                    int size = arrayList.size();
                    for (int i3 = 0; i3 < size; i3++) {
                        Long l = (Long) arrayList.get(i3);
                        long jLongValue4 = l.longValue();
                        if (longSparseArray.get(((Long) arrayList.get(i3)).longValue()) == null) {
                            TLRPC.TL_dialog tL_dialog2 = new TLRPC.TL_dialog();
                            tL_dialog2.id = jLongValue4;
                            longSparseArray.put(jLongValue4, tL_dialog2);
                            if (DialogObject.isChatDialog(jLongValue4)) {
                                long j2 = -jLongValue4;
                                if (arrayList7.contains(Long.valueOf(j2))) {
                                    arrayList7.add(Long.valueOf(j2));
                                }
                            } else if (arrayList6.contains(l)) {
                                arrayList6.add(l);
                            }
                        }
                    }
                }
                if (!arrayList7.isEmpty()) {
                    getChatsInternal(TextUtils.join(",", arrayList7), arrayList2);
                }
                if (!arrayList6.isEmpty()) {
                    getUsersInternal(arrayList6, (ArrayList<TLRPC.User>) arrayList3);
                }
            } catch (Throwable th2) {
                th = th2;
            }
        } catch (Exception e2) {
            e = e2;
        }
        countDownLatch.countDown();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$hasAuthMessage$170(int i, boolean[] zArr, CountDownLatch countDownLatch) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT mid FROM messages_v2 WHERE uid = 777000 AND date = %d AND mid < 0 LIMIT 1", Integer.valueOf(i)), new Object[0]);
                zArr[0] = sQLiteCursorQueryFinalized.next();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            countDownLatch.countDown();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            countDownLatch.countDown();
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$hasInviteMeMessage$138(long j, boolean[] zArr, CountDownLatch countDownLatch) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                long clientUserId = getUserConfig().getClientUserId();
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT data FROM messages_v2 WHERE uid = " + (-j) + " AND out = 0 ORDER BY mid DESC LIMIT 100", new Object[0]);
                while (true) {
                    if (!sQLiteCursorQueryFinalized.next()) {
                        break;
                    }
                    NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                    if (nativeByteBufferByteBufferValue != null) {
                        TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                        nativeByteBufferByteBufferValue.reuse();
                        TLRPC.MessageAction messageAction = messageTLdeserialize.action;
                        if ((messageAction instanceof TLRPC.TL_messageActionChatAddUser) && messageAction.users.contains(Long.valueOf(clientUserId))) {
                            zArr[0] = true;
                            break;
                        }
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                    sQLiteCursorQueryFinalized.dispose();
                }
            }
            countDownLatch.countDown();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            countDownLatch.countDown();
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Code restructure failed: missing block: B:13:0x0030, code lost:
    
        if (r2 == null) goto L16;
     */
    /* JADX WARN: Removed duplicated region for block: B:8:0x0028 A[PHI: r2
      0x0028: PHI (r2v3 org.telegram.SQLite.SQLiteCursor) = 
      (r2v2 org.telegram.SQLite.SQLiteCursor)
      (r2v5 org.telegram.SQLite.SQLiteCursor)
      (r2v5 org.telegram.SQLite.SQLiteCursor)
     binds: [B:13:0x0030, B:4:0x001f, B:6:0x0025] A[DONT_GENERATE, DONT_INLINE]] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$isDialogHasTopMessage$169(long j, Runnable runnable) {
        boolean z = false;
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT last_mid FROM dialogs WHERE did = %d", Long.valueOf(j)), new Object[0]);
            } catch (Exception e) {
                checkSQLException(e);
            }
            if (sQLiteCursorQueryFinalized.next()) {
                boolean z2 = sQLiteCursorQueryFinalized.intValue(0) != 0;
                sQLiteCursorQueryFinalized.dispose();
                z = z2;
            }
            if (z) {
                return;
            }
            AndroidUtilities.runOnUIThread(runnable);
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$isMigratedChat$136(long j, boolean[] zArr, CountDownLatch countDownLatch) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        TLRPC.ChatFull chatFullTLdeserialize;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT info FROM chat_settings_v2 WHERE uid = " + j, new Object[0]);
            } catch (Throwable th) {
                th = th;
            }
        } catch (Exception e) {
            e = e;
        }
        try {
            new ArrayList();
            if (!sQLiteCursorQueryFinalized.next() || (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0)) == null) {
                chatFullTLdeserialize = null;
            } else {
                chatFullTLdeserialize = TLRPC.ChatFull.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                nativeByteBufferByteBufferValue.reuse();
            }
            sQLiteCursorQueryFinalized.dispose();
            zArr[0] = (chatFullTLdeserialize instanceof TLRPC.TL_channelFull) && chatFullTLdeserialize.migrated_from_chat_id != 0;
            countDownLatch.countDown();
        } catch (Exception e2) {
            e = e2;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            checkSQLException(e);
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
            countDownLatch.countDown();
        } catch (Throwable th2) {
            th = th2;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
            countDownLatch.countDown();
            throw th;
        }
        countDownLatch.countDown();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadChannelAdmins$118(long j) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT uid, data FROM channel_admins_v3 WHERE did = " + j, new Object[0]);
            } catch (Throwable th) {
                th = th;
            }
        } catch (Exception e) {
            e = e;
        }
        try {
            LongSparseArray longSparseArray = new LongSparseArray();
            while (sQLiteCursorQueryFinalized.next()) {
                NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(1);
                if (nativeByteBufferByteBufferValue != null) {
                    TLRPC.ChannelParticipant channelParticipantTLdeserialize = TLRPC.ChannelParticipant.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                    nativeByteBufferByteBufferValue.reuse();
                    if (channelParticipantTLdeserialize != null) {
                        longSparseArray.put(sQLiteCursorQueryFinalized.longValue(0), channelParticipantTLdeserialize);
                    }
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            getMessagesController().processLoadedChannelAdmins(longSparseArray, j, true);
        } catch (Exception e2) {
            e = e2;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            checkSQLException(e);
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
        } catch (Throwable th2) {
            th = th2;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadChatInfo$139(TLRPC.ChatFull[] chatFullArr, long j, boolean z, boolean z2, boolean z3, int i, CountDownLatch countDownLatch) {
        chatFullArr[0] = loadChatInfoInternal(j, z, z2, z3, i);
        if (countDownLatch != null) {
            countDownLatch.countDown();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public static /* synthetic */ int lambda$loadDialogFilters$63(MessagesController.DialogFilter dialogFilter, MessagesController.DialogFilter dialogFilter2) {
        int i = dialogFilter.order;
        int i2 = dialogFilter2.order;
        if (i > i2) {
            return 1;
        }
        return i < i2 ? -1 : 0;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:110:0x02b8  */
    /* JADX WARN: Removed duplicated region for block: B:112:0x02bd  */
    /* JADX WARN: Removed duplicated region for block: B:116:0x02c4  */
    /* JADX WARN: Removed duplicated region for block: B:118:0x02c9  */
    /* JADX WARN: Removed duplicated region for block: B:144:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Type inference failed for: r9v0 */
    /* JADX WARN: Type inference failed for: r9v1, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r9v12 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$loadDialogFilters$64() throws Throwable {
        SQLiteCursor sQLiteCursor;
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLitePreparedStatement sQLitePreparedStatement2;
        SQLiteCursor sQLiteCursor2;
        ArrayList<Long> arrayList;
        ArrayList<Long> arrayList2;
        ArrayList<Integer> arrayList3;
        ArrayList<Long> arrayList4;
        boolean z;
        ArrayList<Long> arrayList5;
        Long lValueOf;
        Long lValueOf2;
        ArrayList<Long> arrayList6;
        try {
            try {
                arrayList = new ArrayList<>();
                arrayList2 = new ArrayList<>();
                arrayList3 = new ArrayList<>();
                arrayList4 = new ArrayList<>();
                SparseArray sparseArray = new SparseArray();
                arrayList.add(Long.valueOf(getUserConfig().getClientUserId()));
                ?? r9 = 0;
                SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT id, ord, unread_count, flags, title, color, entities, noanimate FROM dialog_filter WHERE 1", new Object[0]);
                boolean z2 = false;
                z = false;
                while (sQLiteCursorQueryFinalized.next()) {
                    try {
                        MessagesController.DialogFilter dialogFilter = new MessagesController.DialogFilter();
                        dialogFilter.id = sQLiteCursorQueryFinalized.intValue(r9);
                        dialogFilter.order = sQLiteCursorQueryFinalized.intValue(1);
                        dialogFilter.unreadCount = -1;
                        dialogFilter.pendingUnreadCount = -1;
                        dialogFilter.flags = sQLiteCursorQueryFinalized.intValue(3);
                        dialogFilter.name = sQLiteCursorQueryFinalized.stringValue(4);
                        dialogFilter.color = sQLiteCursorQueryFinalized.intValue(5);
                        dialogFilter.entities = new ArrayList<>();
                        NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(6);
                        if (nativeByteBufferByteBufferValue != null) {
                            dialogFilter.entities = Vector.deserialize(nativeByteBufferByteBufferValue, new MessagesStorage$$ExternalSyntheticLambda40(), (boolean) r9);
                            nativeByteBufferByteBufferValue.reuse();
                        }
                        dialogFilter.title_noanimate = sQLiteCursorQueryFinalized.intValue(7) == 1;
                        this.dialogFilters.add(dialogFilter);
                        this.dialogFiltersMap.put(dialogFilter.id, dialogFilter);
                        sparseArray.put(dialogFilter.id, dialogFilter);
                        if (dialogFilter.pendingUnreadCount < 0) {
                            z = true;
                        }
                        int i = 2;
                        int i2 = 0;
                        int i3 = r9;
                        while (i2 < i) {
                            SQLiteCursor sQLiteCursorQueryFinalized2 = i2 == 0 ? this.database.queryFinalized("SELECT peer, pin FROM dialog_filter_pin_v2 WHERE id = " + dialogFilter.id, new Object[i3]) : this.database.queryFinalized("SELECT peer FROM dialog_filter_ep WHERE id = " + dialogFilter.id, new Object[i3]);
                            while (sQLiteCursorQueryFinalized2.next()) {
                                long jLongValue = sQLiteCursorQueryFinalized2.longValue(i3);
                                if (i2 == 0) {
                                    if (!DialogObject.isEncryptedDialog(jLongValue)) {
                                        dialogFilter.alwaysShow.add(Long.valueOf(jLongValue));
                                    }
                                    int iIntValue = sQLiteCursorQueryFinalized2.intValue(1);
                                    if (iIntValue != Integer.MIN_VALUE) {
                                        dialogFilter.pinnedDialogs.put(jLongValue, iIntValue);
                                        if (!arrayList4.contains(Long.valueOf(jLongValue))) {
                                            lValueOf = Long.valueOf(jLongValue);
                                            arrayList5 = arrayList4;
                                            arrayList5.add(lValueOf);
                                        }
                                    }
                                } else if (!DialogObject.isEncryptedDialog(jLongValue)) {
                                    arrayList5 = dialogFilter.neverShow;
                                    lValueOf = Long.valueOf(jLongValue);
                                    arrayList5.add(lValueOf);
                                }
                                if (DialogObject.isChatDialog(jLongValue)) {
                                    long j = -jLongValue;
                                    if (!arrayList2.contains(Long.valueOf(j))) {
                                        lValueOf2 = Long.valueOf(j);
                                        arrayList6 = arrayList2;
                                        arrayList6.add(lValueOf2);
                                    }
                                } else if (!DialogObject.isUserDialog(jLongValue)) {
                                    int encryptedChatId = DialogObject.getEncryptedChatId(jLongValue);
                                    if (!arrayList3.contains(Integer.valueOf(encryptedChatId))) {
                                        arrayList3.add(Integer.valueOf(encryptedChatId));
                                    }
                                } else if (!arrayList.contains(Long.valueOf(jLongValue))) {
                                    lValueOf2 = Long.valueOf(jLongValue);
                                    arrayList6 = arrayList;
                                    arrayList6.add(lValueOf2);
                                }
                                i3 = 0;
                            }
                            sQLiteCursorQueryFinalized2.dispose();
                            i2++;
                            i = 2;
                            i3 = 0;
                        }
                        if (dialogFilter.id == 0) {
                            z2 = true;
                        }
                        r9 = 0;
                    } catch (Exception e) {
                        e = e;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        sQLitePreparedStatement2 = null;
                        try {
                            checkSQLException(e);
                            if (sQLiteCursor != null) {
                                sQLiteCursor.dispose();
                            }
                            if (sQLitePreparedStatement2 == null) {
                                sQLitePreparedStatement2.dispose();
                                return;
                            }
                            return;
                        } catch (Throwable th) {
                            th = th;
                            if (sQLiteCursor != null) {
                                sQLiteCursor.dispose();
                            }
                            if (sQLitePreparedStatement2 != null) {
                                sQLitePreparedStatement2.dispose();
                            }
                            throw th;
                        }
                    } catch (Throwable th2) {
                        th = th2;
                        sQLitePreparedStatement = null;
                        sQLiteCursor2 = sQLiteCursorQueryFinalized;
                        sQLitePreparedStatement2 = sQLitePreparedStatement;
                        sQLiteCursor = sQLiteCursor2;
                        if (sQLiteCursor != null) {
                        }
                        if (sQLitePreparedStatement2 != null) {
                        }
                        throw th;
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
                if (!z2) {
                    MessagesController.DialogFilter dialogFilter2 = new MessagesController.DialogFilter();
                    dialogFilter2.id = 0;
                    dialogFilter2.order = 0;
                    dialogFilter2.color = -1;
                    dialogFilter2.name = "ALL_CHATS";
                    for (int i4 = 0; i4 < this.dialogFilters.size(); i4++) {
                        this.dialogFilters.get(i4).order++;
                    }
                    this.dialogFilters.add(dialogFilter2);
                    this.dialogFiltersMap.put(dialogFilter2.id, dialogFilter2);
                    sparseArray.put(dialogFilter2.id, dialogFilter2);
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO dialog_filter VALUES(?, ?, ?, ?, ?, ?, ?, ?)");
                    try {
                        sQLitePreparedStatementExecuteFast.bindInteger(1, dialogFilter2.id);
                        sQLitePreparedStatementExecuteFast.bindInteger(2, dialogFilter2.order);
                        sQLitePreparedStatementExecuteFast.bindInteger(3, dialogFilter2.unreadCount);
                        sQLitePreparedStatementExecuteFast.bindInteger(4, dialogFilter2.flags);
                        sQLitePreparedStatementExecuteFast.bindString(5, dialogFilter2.name);
                        sQLitePreparedStatementExecuteFast.bindInteger(6, dialogFilter2.color);
                        Vector vector = new Vector(new MessagesStorage$$ExternalSyntheticLambda40());
                        NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(vector.getObjectSize());
                        vector.serializeToStream(nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast.bindByteBuffer(7, nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast.bindInteger(8, dialogFilter2.title_noanimate ? 1 : 0);
                        sQLitePreparedStatementExecuteFast.stepThis().dispose();
                        nativeByteBuffer.reuse();
                    } catch (Exception e2) {
                        e = e2;
                        sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast;
                        sQLiteCursor = null;
                        checkSQLException(e);
                        if (sQLiteCursor != null) {
                        }
                        if (sQLitePreparedStatement2 == null) {
                        }
                    } catch (Throwable th3) {
                        th = th3;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        sQLiteCursor2 = null;
                        sQLitePreparedStatement2 = sQLitePreparedStatement;
                        sQLiteCursor = sQLiteCursor2;
                        if (sQLiteCursor != null) {
                        }
                        if (sQLitePreparedStatement2 != null) {
                        }
                        throw th;
                    }
                }
            } catch (Throwable th4) {
                th = th4;
                sQLitePreparedStatement = null;
            }
            try {
                Collections.sort(this.dialogFilters, new Comparator() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda41
                    @Override // java.util.Comparator
                    public final int compare(Object obj, Object obj2) {
                        return MessagesStorage.lambda$loadDialogFilters$63((MessagesController.DialogFilter) obj, (MessagesController.DialogFilter) obj2);
                    }
                });
                if (z) {
                    calcUnreadCounters(true);
                }
                TLRPC.messages_Dialogs messages_dialogsLoadDialogsByIds = !arrayList4.isEmpty() ? loadDialogsByIds(TextUtils.join(",", arrayList4), arrayList, arrayList2, arrayList3) : new TLRPC.TL_messages_dialogs();
                ArrayList<TLRPC.User> arrayList7 = new ArrayList<>();
                ArrayList<TLRPC.Chat> arrayList8 = new ArrayList<>();
                ArrayList<TLRPC.EncryptedChat> arrayList9 = new ArrayList<>();
                if (!arrayList3.isEmpty()) {
                    getEncryptedChatsInternal(TextUtils.join(",", arrayList3), arrayList9, arrayList);
                }
                if (!arrayList.isEmpty()) {
                    getUsersInternal(arrayList, arrayList7);
                }
                if (!arrayList2.isEmpty()) {
                    getChatsInternal(TextUtils.join(",", arrayList2), arrayList8);
                }
                getMessagesController().processLoadedDialogFilters(new ArrayList<>(this.dialogFilters), messages_dialogsLoadDialogsByIds, null, arrayList7, arrayList8, arrayList9, 0, null);
            } catch (Throwable th5) {
                th = th5;
                sQLiteCursor = null;
                sQLitePreparedStatement2 = null;
                if (sQLiteCursor != null) {
                }
                if (sQLitePreparedStatement2 != null) {
                }
                throw th;
            }
        } catch (Exception e3) {
            e = e3;
            sQLiteCursor = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadMessageAttachPaths$218(ArrayList arrayList, Runnable runnable) {
        NativeByteBuffer nativeByteBufferByteBufferValue;
        long clientUserId = getUserConfig().getClientUserId();
        Iterator it = arrayList.iterator();
        while (it.hasNext()) {
            MessageObject messageObject = (MessageObject) it.next();
            if (!messageObject.scheduled && !messageObject.isQuickReply()) {
                SQLiteCursor sQLiteCursorQueryFinalized = null;
                try {
                    try {
                        sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT data FROM messages_v2 WHERE uid = ? AND mid = ?", Long.valueOf(messageObject.getDialogId()), Integer.valueOf(messageObject.getId()));
                        if (sQLiteCursorQueryFinalized.next() && (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0)) != null) {
                            TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, clientUserId);
                            nativeByteBufferByteBufferValue.reuse();
                            messageObject.messageOwner.attachPath = messageTLdeserialize.attachPath;
                            messageObject.checkMediaExistance();
                        }
                    } catch (Exception e) {
                        FileLog.e(e);
                        if (sQLiteCursorQueryFinalized != null) {
                        }
                    }
                    sQLiteCursorQueryFinalized.dispose();
                } catch (Throwable th) {
                    if (sQLiteCursorQueryFinalized != null) {
                        sQLiteCursorQueryFinalized.dispose();
                    }
                    throw th;
                }
            }
        }
        AndroidUtilities.runOnUIThread(runnable);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$12(TLRPC.Chat chat, long j) {
        getMessagesController().loadUnknownChannel(chat, j);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$13(long j, int i, long j2) {
        getMessagesController().getChannelDifference(j, i, j2, null);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$14(TLRPC.Dialog dialog, TLRPC.InputPeer inputPeer, long j) {
        getMessagesController().checkLastDialogMessage(dialog, inputPeer, j);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$15(long j, boolean z, TLRPC.InputPeer inputPeer, long j2) {
        getMessagesController().pinDialog(j, z, inputPeer, j2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$16(long j, int i, long j2, TLRPC.InputChannel inputChannel) {
        getMessagesController().getChannelDifference(j, i, j2, inputChannel);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$17(long j, int i, long j2, TLRPC.InputChannel inputChannel) {
        getMessagesController().getChannelDifference(j, i, j2, inputChannel);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$18(long j, long j2, TLObject tLObject) {
        getMessagesController().deleteMessages(null, null, null, -j, true, 0, false, j2, tLObject, 0);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$19(long j, long j2, TLObject tLObject) {
        getMessagesController().deleteMessages(null, null, null, j, true, 0, false, j2, tLObject, 0);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$20(long j, long j2, TLObject tLObject, int i) {
        getMessagesController().deleteMessages(null, null, null, j, true, 0, false, j2, tLObject, i);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$21(long j, TLRPC.InputPeer inputPeer, long j2) {
        getMessagesController().markDialogAsUnread(j, inputPeer, j2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$22(long j, int i, TLRPC.InputChannel inputChannel, int i2, long j2) {
        getMessagesController().markMessageAsRead2(-j, i, inputChannel, i2, j2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$23(long j, int i, TLRPC.InputChannel inputChannel, int i2, long j2, int i3) {
        getMessagesController().markMessageAsRead2(j, i, inputChannel, i2, j2, i3 == 23);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$24(Theme.OverrideWallpaperInfo overrideWallpaperInfo, boolean z, long j) {
        getMessagesController().saveWallpaperToServer(null, overrideWallpaperInfo, z, j);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$25(long j, boolean z, int i, int i2, boolean z2, TLRPC.InputPeer inputPeer, long j2) {
        getMessagesController().deleteDialog(j, z ? 1 : 0, i, i2, z2, inputPeer, j2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$26(TLRPC.InputPeer inputPeer, long j) {
        getMessagesController().loadUnknownDialog(inputPeer, j);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$27(int i, ArrayList arrayList, long j) {
        getMessagesController().reorderPinnedDialogs(i, arrayList, j);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$28(int i, ArrayList arrayList, long j) {
        getMessagesController().addDialogToFolder(null, i, -1, arrayList, j);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$29(long j, long j2, TLObject tLObject) {
        getMessagesController().deleteMessages(null, null, null, j, true, 1, false, j2, tLObject, 0);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$30(TLRPC.InputPeer inputPeer, long j) {
        getMessagesController().reloadMentionsCountForChannel(inputPeer, j);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$31(int i, boolean z, long j) {
        getSecretChatHelper().declineSecretChat(i, z, j);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadPendingTasks$32(long j, long j2, int i) {
        getMessagesController().lambda$checkDeletingTask$78(j, j2, i);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Can't fix incorrect switch cases order, some code will duplicate */
    /* JADX WARN: Removed duplicated region for block: B:31:0x00bd A[Catch: Exception -> 0x0043, TryCatch #0 {Exception -> 0x0043, blocks: (B:3:0x0002, B:4:0x000d, B:6:0x0013, B:8:0x001e, B:9:0x0023, B:10:0x0026, B:90:0x0351, B:12:0x002b, B:14:0x003d, B:20:0x004b, B:84:0x0324, B:21:0x0056, B:22:0x0069, B:23:0x007c, B:89:0x034e, B:24:0x0099, B:26:0x00a7, B:30:0x00b2, B:31:0x00bd, B:33:0x00cf, B:35:0x00d5, B:37:0x00db, B:38:0x00e3, B:39:0x00f3, B:40:0x0102, B:41:0x014a, B:44:0x015d, B:45:0x0168, B:47:0x0178, B:48:0x0186, B:49:0x0191, B:51:0x01a1, B:52:0x01af, B:53:0x01ba, B:54:0x01cb, B:56:0x01f2, B:58:0x0205, B:59:0x020d, B:60:0x0218, B:61:0x022f, B:63:0x023e, B:67:0x024c, B:66:0x0247, B:68:0x0257, B:69:0x0275, B:70:0x0290, B:71:0x02b1, B:73:0x02e9, B:76:0x02f9, B:79:0x0303, B:82:0x030d, B:83:0x0313, B:85:0x0328, B:86:0x033d, B:88:0x0347, B:91:0x0356), top: B:95:0x0002 }] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$loadPendingTasks$33() {
        DispatchQueue dispatchQueue;
        Runnable runnable;
        Runnable runnable2;
        Runnable runnable3;
        try {
            SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT id, data FROM pending_tasks WHERE 1", new Object[0]);
            while (sQLiteCursorQueryFinalized.next()) {
                final long jLongValue = sQLiteCursorQueryFinalized.longValue(0);
                NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(1);
                if (nativeByteBufferByteBufferValue != null) {
                    final int int32 = nativeByteBufferByteBufferValue.readInt32(false);
                    switch (int32) {
                        case 0:
                            final TLRPC.Chat chatTLdeserialize = TLRPC.Chat.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            if (chatTLdeserialize != null) {
                                dispatchQueue = Utilities.stageQueue;
                                runnable = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda24
                                    @Override // java.lang.Runnable
                                    public final void run() {
                                        this.f$0.lambda$loadPendingTasks$12(chatTLdeserialize, jLongValue);
                                    }
                                };
                                dispatchQueue.postRunnable(runnable);
                                break;
                            }
                            break;
                        case 1:
                            final long int322 = nativeByteBufferByteBufferValue.readInt32(false);
                            final int int323 = nativeByteBufferByteBufferValue.readInt32(false);
                            dispatchQueue = Utilities.stageQueue;
                            runnable = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda22
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$13(int322, int323, jLongValue);
                                }
                            };
                            dispatchQueue.postRunnable(runnable);
                            break;
                        case 2:
                        case 5:
                        case 8:
                        case 10:
                        case 14:
                            final TLRPC.TL_dialog tL_dialog = new TLRPC.TL_dialog();
                            tL_dialog.id = nativeByteBufferByteBufferValue.readInt64(false);
                            tL_dialog.top_message = nativeByteBufferByteBufferValue.readInt32(false);
                            tL_dialog.read_inbox_max_id = nativeByteBufferByteBufferValue.readInt32(false);
                            tL_dialog.read_outbox_max_id = nativeByteBufferByteBufferValue.readInt32(false);
                            tL_dialog.unread_count = nativeByteBufferByteBufferValue.readInt32(false);
                            tL_dialog.last_message_date = nativeByteBufferByteBufferValue.readInt32(false);
                            tL_dialog.pts = nativeByteBufferByteBufferValue.readInt32(false);
                            tL_dialog.flags = nativeByteBufferByteBufferValue.readInt32(false);
                            if (int32 >= 5) {
                                tL_dialog.pinned = nativeByteBufferByteBufferValue.readBool(false);
                                tL_dialog.pinnedNum = nativeByteBufferByteBufferValue.readInt32(false);
                            }
                            if (int32 >= 8) {
                                tL_dialog.unread_mentions_count = nativeByteBufferByteBufferValue.readInt32(false);
                            }
                            if (int32 >= 10) {
                                tL_dialog.unread_mark = nativeByteBufferByteBufferValue.readBool(false);
                            }
                            if (int32 >= 14) {
                                tL_dialog.folder_id = nativeByteBufferByteBufferValue.readInt32(false);
                            }
                            final TLRPC.InputPeer inputPeerTLdeserialize = TLRPC.InputPeer.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda21
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$14(tL_dialog, inputPeerTLdeserialize, jLongValue);
                                }
                            };
                            AndroidUtilities.runOnUIThread(runnable2);
                            break;
                        case 3:
                            getSendMessagesHelper().sendGame(TLRPC.InputPeer.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false), (TLRPC.TL_inputMediaGame) TLRPC.InputMedia.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false), nativeByteBufferByteBufferValue.readInt64(false), jLongValue);
                            break;
                        case 4:
                            final long int64 = nativeByteBufferByteBufferValue.readInt64(false);
                            final boolean bool = nativeByteBufferByteBufferValue.readBool(false);
                            final TLRPC.InputPeer inputPeerTLdeserialize2 = TLRPC.InputPeer.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda20
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$15(int64, bool, inputPeerTLdeserialize2, jLongValue);
                                }
                            };
                            AndroidUtilities.runOnUIThread(runnable2);
                            break;
                        case 6:
                            final long int324 = nativeByteBufferByteBufferValue.readInt32(false);
                            final int int325 = nativeByteBufferByteBufferValue.readInt32(false);
                            final TLRPC.InputChannel inputChannelTLdeserialize = TLRPC.InputChannel.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            dispatchQueue = Utilities.stageQueue;
                            runnable = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda19
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$16(int324, int325, jLongValue, inputChannelTLdeserialize);
                                }
                            };
                            dispatchQueue.postRunnable(runnable);
                            break;
                        case 7:
                            final long int326 = nativeByteBufferByteBufferValue.readInt32(false);
                            int int327 = nativeByteBufferByteBufferValue.readInt32(false);
                            TLObject tLObjectTLdeserialize = TLRPC.TL_messages_deleteMessages.TLdeserialize(nativeByteBufferByteBufferValue, int327, false);
                            final TLObject tLObjectTLdeserialize2 = tLObjectTLdeserialize == null ? TLRPC.TL_channels_deleteMessages.TLdeserialize(nativeByteBufferByteBufferValue, int327, false) : tLObjectTLdeserialize;
                            if (tLObjectTLdeserialize2 != null) {
                                runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda18
                                    @Override // java.lang.Runnable
                                    public final void run() {
                                        this.f$0.lambda$loadPendingTasks$18(int326, jLongValue, tLObjectTLdeserialize2);
                                    }
                                };
                                AndroidUtilities.runOnUIThread(runnable2);
                                break;
                            }
                            removePendingTask(jLongValue);
                            break;
                        case 9:
                            final long int642 = nativeByteBufferByteBufferValue.readInt64(false);
                            final TLRPC.InputPeer inputPeerTLdeserialize3 = TLRPC.InputPeer.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda17
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$21(int642, inputPeerTLdeserialize3, jLongValue);
                                }
                            };
                            AndroidUtilities.runOnUIThread(runnable2);
                            break;
                        case 11:
                            final int int328 = nativeByteBufferByteBufferValue.readInt32(false);
                            final long int329 = nativeByteBufferByteBufferValue.readInt32(false);
                            final int int3210 = nativeByteBufferByteBufferValue.readInt32(false);
                            final TLRPC.InputChannel inputChannelTLdeserialize2 = int329 != 0 ? TLRPC.InputChannel.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false) : null;
                            runnable3 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda16
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$22(int329, int328, inputChannelTLdeserialize2, int3210, jLongValue);
                                }
                            };
                            runnable2 = runnable3;
                            AndroidUtilities.runOnUIThread(runnable2);
                            break;
                        case 12:
                        case 19:
                        case 20:
                            removePendingTask(jLongValue);
                            break;
                        case 13:
                            final long int643 = nativeByteBufferByteBufferValue.readInt64(false);
                            final boolean bool2 = nativeByteBufferByteBufferValue.readBool(false);
                            final int int3211 = nativeByteBufferByteBufferValue.readInt32(false);
                            final int int3212 = nativeByteBufferByteBufferValue.readInt32(false);
                            final boolean bool3 = nativeByteBufferByteBufferValue.readBool(false);
                            final TLRPC.InputPeer inputPeerTLdeserialize4 = TLRPC.InputPeer.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            runnable3 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda15
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$25(int643, bool2, int3211, int3212, bool3, inputPeerTLdeserialize4, jLongValue);
                                }
                            };
                            runnable2 = runnable3;
                            AndroidUtilities.runOnUIThread(runnable2);
                            break;
                        case 15:
                            final TLRPC.InputPeer inputPeerTLdeserialize5 = TLRPC.InputPeer.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            dispatchQueue = Utilities.stageQueue;
                            runnable = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda14
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$26(inputPeerTLdeserialize5, jLongValue);
                                }
                            };
                            dispatchQueue.postRunnable(runnable);
                            break;
                        case 16:
                            final int int3213 = nativeByteBufferByteBufferValue.readInt32(false);
                            int int3214 = nativeByteBufferByteBufferValue.readInt32(false);
                            final ArrayList arrayList = new ArrayList();
                            for (int i = 0; i < int3214; i++) {
                                arrayList.add(TLRPC.InputDialogPeer.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false));
                            }
                            runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda13
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$27(int3213, arrayList, jLongValue);
                                }
                            };
                            AndroidUtilities.runOnUIThread(runnable2);
                            break;
                        case 17:
                            final int int3215 = nativeByteBufferByteBufferValue.readInt32(false);
                            int int3216 = nativeByteBufferByteBufferValue.readInt32(false);
                            final ArrayList arrayList2 = new ArrayList();
                            for (int i2 = 0; i2 < int3216; i2++) {
                                arrayList2.add(TLRPC.TL_inputFolderPeer.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false));
                            }
                            runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda32
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$28(int3215, arrayList2, jLongValue);
                                }
                            };
                            AndroidUtilities.runOnUIThread(runnable2);
                            break;
                        case 18:
                            final long int644 = nativeByteBufferByteBufferValue.readInt64(false);
                            nativeByteBufferByteBufferValue.readInt32(false);
                            final TLRPC.TL_messages_deleteScheduledMessages tL_messages_deleteScheduledMessagesTLdeserialize = TLRPC.TL_messages_deleteScheduledMessages.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            if (tL_messages_deleteScheduledMessagesTLdeserialize == null) {
                                removePendingTask(jLongValue);
                                break;
                            } else {
                                runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda31
                                    @Override // java.lang.Runnable
                                    public final void run() {
                                        this.f$0.lambda$loadPendingTasks$29(int644, jLongValue, tL_messages_deleteScheduledMessagesTLdeserialize);
                                    }
                                };
                                AndroidUtilities.runOnUIThread(runnable2);
                                break;
                            }
                        case 21:
                            final Theme.OverrideWallpaperInfo overrideWallpaperInfo = new Theme.OverrideWallpaperInfo();
                            nativeByteBufferByteBufferValue.readInt64(false);
                            overrideWallpaperInfo.isBlurred = nativeByteBufferByteBufferValue.readBool(false);
                            overrideWallpaperInfo.isMotion = nativeByteBufferByteBufferValue.readBool(false);
                            overrideWallpaperInfo.color = nativeByteBufferByteBufferValue.readInt32(false);
                            overrideWallpaperInfo.gradientColor1 = nativeByteBufferByteBufferValue.readInt32(false);
                            overrideWallpaperInfo.rotation = nativeByteBufferByteBufferValue.readInt32(false);
                            overrideWallpaperInfo.intensity = (float) nativeByteBufferByteBufferValue.readDouble(false);
                            final boolean bool4 = nativeByteBufferByteBufferValue.readBool(false);
                            overrideWallpaperInfo.slug = nativeByteBufferByteBufferValue.readString(false);
                            overrideWallpaperInfo.originalFileName = nativeByteBufferByteBufferValue.readString(false);
                            runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda30
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$24(overrideWallpaperInfo, bool4, jLongValue);
                                }
                            };
                            AndroidUtilities.runOnUIThread(runnable2);
                            break;
                        case 22:
                            final TLRPC.InputPeer inputPeerTLdeserialize6 = TLRPC.InputPeer.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda29
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$30(inputPeerTLdeserialize6, jLongValue);
                                }
                            };
                            AndroidUtilities.runOnUIThread(runnable2);
                            break;
                        case 23:
                            final long int645 = nativeByteBufferByteBufferValue.readInt64(false);
                            final int int3217 = nativeByteBufferByteBufferValue.readInt32(false);
                            final int int3218 = nativeByteBufferByteBufferValue.readInt32(false);
                            if (!DialogObject.isEncryptedDialog(int645) && DialogObject.isChatDialog(int645) && nativeByteBufferByteBufferValue.hasRemaining()) {
                                inputChannelTLdeserialize = TLRPC.InputChannel.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            }
                            final TLRPC.InputChannel inputChannel = inputChannelTLdeserialize;
                            runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda28
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$23(int645, int3217, inputChannel, int3218, jLongValue, int32);
                                }
                            };
                            AndroidUtilities.runOnUIThread(runnable2);
                            break;
                        case 24:
                            final long int646 = nativeByteBufferByteBufferValue.readInt64(false);
                            int int3219 = nativeByteBufferByteBufferValue.readInt32(false);
                            TLObject tLObjectTLdeserialize3 = TLRPC.TL_messages_deleteMessages.TLdeserialize(nativeByteBufferByteBufferValue, int3219, false);
                            final TLObject tLObjectTLdeserialize4 = tLObjectTLdeserialize3 == null ? TLRPC.TL_channels_deleteMessages.TLdeserialize(nativeByteBufferByteBufferValue, int3219, false) : tLObjectTLdeserialize3;
                            if (tLObjectTLdeserialize4 == null) {
                                removePendingTask(jLongValue);
                                break;
                            } else {
                                runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda27
                                    @Override // java.lang.Runnable
                                    public final void run() {
                                        this.f$0.lambda$loadPendingTasks$19(int646, jLongValue, tLObjectTLdeserialize4);
                                    }
                                };
                                AndroidUtilities.runOnUIThread(runnable2);
                                break;
                            }
                        case 25:
                            final long int647 = nativeByteBufferByteBufferValue.readInt64(false);
                            final int int3220 = nativeByteBufferByteBufferValue.readInt32(false);
                            final TLRPC.InputChannel inputChannelTLdeserialize3 = TLRPC.InputChannel.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            dispatchQueue = Utilities.stageQueue;
                            runnable = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda26
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadPendingTasks$17(int647, int3220, jLongValue, inputChannelTLdeserialize3);
                                }
                            };
                            dispatchQueue.postRunnable(runnable);
                            break;
                        default:
                            switch (int32) {
                                case 100:
                                    final int int3221 = nativeByteBufferByteBufferValue.readInt32(false);
                                    final boolean bool5 = nativeByteBufferByteBufferValue.readBool(false);
                                    runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda25
                                        @Override // java.lang.Runnable
                                        public final void run() {
                                            this.f$0.lambda$loadPendingTasks$31(int3221, bool5, jLongValue);
                                        }
                                    };
                                    AndroidUtilities.runOnUIThread(runnable2);
                                    break;
                                case 102:
                                    final long int648 = nativeByteBufferByteBufferValue.readInt64(false);
                                    final int int3222 = nativeByteBufferByteBufferValue.readInt32(false);
                                    runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda23
                                        @Override // java.lang.Runnable
                                        public final void run() {
                                            this.f$0.lambda$loadPendingTasks$32(jLongValue, int648, int3222);
                                        }
                                    };
                                    AndroidUtilities.runOnUIThread(runnable2);
                                    break;
                                case 103:
                                    final long int649 = nativeByteBufferByteBufferValue.readInt64(false);
                                    final int int3223 = nativeByteBufferByteBufferValue.readInt32(false);
                                    int int3224 = nativeByteBufferByteBufferValue.readInt32(false);
                                    TLObject tLObjectTLdeserialize5 = TLRPC.TL_messages_deleteMessages.TLdeserialize(nativeByteBufferByteBufferValue, int3224, false);
                                    final TLObject tLObjectTLdeserialize6 = tLObjectTLdeserialize5 == null ? TLRPC.TL_channels_deleteMessages.TLdeserialize(nativeByteBufferByteBufferValue, int3224, false) : tLObjectTLdeserialize5;
                                    if (tLObjectTLdeserialize6 == null) {
                                        removePendingTask(jLongValue);
                                        break;
                                    } else {
                                        runnable2 = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda12
                                            @Override // java.lang.Runnable
                                            public final void run() {
                                                this.f$0.lambda$loadPendingTasks$20(int649, jLongValue, tLObjectTLdeserialize6, int3223);
                                            }
                                        };
                                        AndroidUtilities.runOnUIThread(runnable2);
                                        break;
                                    }
                            }
                    }
                    nativeByteBufferByteBufferValue.reuse();
                }
            }
            sQLiteCursorQueryFinalized.dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadTopics$48(ArrayList arrayList, ArrayList arrayList2) {
        if (!arrayList.isEmpty()) {
            getMessagesController().putUsers(arrayList, true);
        }
        if (arrayList2.isEmpty()) {
            return;
        }
        getMessagesController().putChats(arrayList2, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:163:0x0317  */
    /* JADX WARN: Removed duplicated region for block: B:169:0x0324  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$loadTopics$49(long j, Consumer consumer) throws Throwable {
        SQLiteCursor sQLiteCursor;
        ArrayList<TLRPC.TL_forumTopic> arrayList;
        SQLiteCursor sQLiteCursor2;
        ArrayList<TLRPC.TL_forumTopic> arrayList2;
        SQLiteCursor sQLiteCursor3;
        long j2;
        Long lValueOf;
        ArrayList<Long> arrayList3;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        ArrayList arrayList4;
        int i = 1;
        String str = ")";
        try {
            SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT top_message, data, topic_message, unread_count, max_read_id, unread_mentions, unread_reactions, read_outbox, pinned, total_messages_count, nopaid_messages_exception FROM topics WHERE did = %d ORDER BY pinned ASC", Long.valueOf(j)), new Object[0]);
            SparseArray sparseArray = null;
            arrayList2 = null;
            HashSet hashSet = null;
            while (sQLiteCursorQueryFinalized.next()) {
                try {
                    try {
                        if (arrayList2 == null) {
                            try {
                                ArrayList<TLRPC.TL_forumTopic> arrayList5 = new ArrayList<>();
                                try {
                                    SparseArray sparseArray2 = new SparseArray();
                                    hashSet = new HashSet();
                                    arrayList2 = arrayList5;
                                    sparseArray = sparseArray2;
                                } catch (Exception e) {
                                    e = e;
                                    arrayList2 = arrayList5;
                                    sQLiteCursor = sQLiteCursorQueryFinalized;
                                    try {
                                        checkSQLException(e);
                                        if (sQLiteCursor != null) {
                                        }
                                        consumer.r(arrayList2);
                                    } catch (Throwable th) {
                                        th = th;
                                        if (sQLiteCursor != null) {
                                            sQLiteCursor.dispose();
                                        }
                                        throw th;
                                    }
                                }
                            } catch (Throwable th2) {
                                th = th2;
                                sQLiteCursor = sQLiteCursorQueryFinalized;
                                if (sQLiteCursor != null) {
                                }
                                throw th;
                            }
                        }
                        int iIntValue = sQLiteCursorQueryFinalized.intValue(0);
                        NativeByteBuffer nativeByteBufferByteBufferValue2 = sQLiteCursorQueryFinalized.byteBufferValue(i);
                        if (nativeByteBufferByteBufferValue2 != null) {
                            TLRPC.TL_forumTopic tL_forumTopicTLdeserialize = TLRPC.TL_forumTopic.TLdeserialize((InputSerializedData) nativeByteBufferByteBufferValue2, nativeByteBufferByteBufferValue2.readInt32(false), false);
                            if (tL_forumTopicTLdeserialize != null) {
                                tL_forumTopicTLdeserialize.top_message = iIntValue;
                                ArrayList arrayList6 = (ArrayList) sparseArray.get(iIntValue);
                                if (arrayList6 == null) {
                                    arrayList4 = new ArrayList();
                                    sparseArray.put(iIntValue, arrayList4);
                                } else {
                                    arrayList4 = arrayList6;
                                }
                                arrayList4.add(tL_forumTopicTLdeserialize);
                                hashSet.add(Integer.valueOf(iIntValue));
                                arrayList2.add(tL_forumTopicTLdeserialize);
                                NativeByteBuffer nativeByteBufferByteBufferValue3 = sQLiteCursorQueryFinalized.byteBufferValue(2);
                                tL_forumTopicTLdeserialize.topicStartMessage = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue3, nativeByteBufferByteBufferValue3.readInt32(false), false);
                                nativeByteBufferByteBufferValue3.reuse();
                                tL_forumTopicTLdeserialize.unread_count = sQLiteCursorQueryFinalized.intValue(3);
                                tL_forumTopicTLdeserialize.read_inbox_max_id = sQLiteCursorQueryFinalized.intValue(4);
                                tL_forumTopicTLdeserialize.unread_mentions_count = sQLiteCursorQueryFinalized.intValue(5);
                                tL_forumTopicTLdeserialize.unread_reactions_count = sQLiteCursorQueryFinalized.intValue(6);
                                tL_forumTopicTLdeserialize.read_outbox_max_id = sQLiteCursorQueryFinalized.intValue(7);
                                int iIntValue2 = sQLiteCursorQueryFinalized.intValue(8) - 1;
                                tL_forumTopicTLdeserialize.pinnedOrder = iIntValue2;
                                tL_forumTopicTLdeserialize.pinned = iIntValue2 >= 0;
                                tL_forumTopicTLdeserialize.totalMessagesCount = sQLiteCursorQueryFinalized.intValue(9);
                                tL_forumTopicTLdeserialize.nopaid_messages_exception = sQLiteCursorQueryFinalized.intValue(10) != 0;
                            }
                            nativeByteBufferByteBufferValue2.reuse();
                        }
                        i = 1;
                    } catch (Exception e2) {
                        e = e2;
                        sQLiteCursor2 = sQLiteCursorQueryFinalized;
                    }
                } catch (Throwable th3) {
                    th = th3;
                    sQLiteCursor2 = sQLiteCursorQueryFinalized;
                }
            }
            ArrayList<Long> arrayList7 = new ArrayList<>();
            ArrayList<Long> arrayList8 = new ArrayList<>();
            LongSparseArray longSparseArray = new LongSparseArray();
            LongSparseArray longSparseArray2 = new LongSparseArray();
            if (arrayList2 == null || arrayList2.isEmpty()) {
                sQLiteCursor2 = sQLiteCursorQueryFinalized;
            } else {
                SQLiteDatabase sQLiteDatabase = this.database;
                StringBuilder sb = new StringBuilder();
                sQLiteCursor2 = sQLiteCursorQueryFinalized;
                try {
                    try {
                        sb.append("SELECT mid, data, replydata FROM messages_v2 WHERE uid = ");
                        sb.append(j);
                        sb.append(" AND mid IN (");
                        sb.append(TextUtils.join(",", hashSet));
                        sb.append(")");
                        ArrayList<TLRPC.TL_forumTopic> arrayList9 = arrayList2;
                        int i2 = 0;
                        try {
                            SQLiteCursor sQLiteCursorQueryFinalized2 = sQLiteDatabase.queryFinalized(sb.toString(), new Object[0]);
                            while (sQLiteCursorQueryFinalized2.next()) {
                                try {
                                    int iIntValue3 = sQLiteCursorQueryFinalized2.intValue(i2);
                                    NativeByteBuffer nativeByteBufferByteBufferValue4 = sQLiteCursorQueryFinalized2.byteBufferValue(1);
                                    if (nativeByteBufferByteBufferValue4 != null) {
                                        String str2 = str;
                                        TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue4, nativeByteBufferByteBufferValue4.readInt32(false), false);
                                        if (messageTLdeserialize != null) {
                                            messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue4, UserConfig.getInstance(this.currentAccount).clientUserId);
                                        }
                                        nativeByteBufferByteBufferValue4.reuse();
                                        hashSet.remove(Integer.valueOf(iIntValue3));
                                        ArrayList arrayList10 = (ArrayList) sparseArray.get(iIntValue3);
                                        if (arrayList10 != null) {
                                            for (int i3 = 0; i3 < arrayList10.size(); i3++) {
                                                ((TLRPC.TL_forumTopic) arrayList10.get(i3)).topMessage = messageTLdeserialize;
                                            }
                                        }
                                        addUsersAndChatsFromMessage(messageTLdeserialize, arrayList7, arrayList8, null);
                                        if (messageTLdeserialize != null) {
                                            try {
                                                TLRPC.MessageReplyHeader messageReplyHeader = messageTLdeserialize.reply_to;
                                                if (messageReplyHeader != null && messageReplyHeader.reply_to_msg_id != 0) {
                                                    TLRPC.MessageAction messageAction = messageTLdeserialize.action;
                                                    if ((messageAction instanceof TLRPC.TL_messageActionPinMessage) || (messageAction instanceof TLRPC.TL_messageActionPaymentSent) || (messageAction instanceof TLRPC.TL_messageActionGameScore) || (messageAction instanceof TLRPC.TL_messageActionSuggestedPostApproval)) {
                                                        if (!sQLiteCursorQueryFinalized2.isNull(2) && (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized2.byteBufferValue(2)) != null) {
                                                            TLRPC.Message messageTLdeserialize2 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                                                            messageTLdeserialize.replyMessage = messageTLdeserialize2;
                                                            messageTLdeserialize2.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                                                            nativeByteBufferByteBufferValue.reuse();
                                                            TLRPC.Message message = messageTLdeserialize.replyMessage;
                                                            if (message != null) {
                                                                addUsersAndChatsFromMessage(message, arrayList7, arrayList8, null);
                                                            }
                                                        }
                                                        if (messageTLdeserialize.replyMessage == null) {
                                                            addReplyMessages(messageTLdeserialize, longSparseArray, longSparseArray2);
                                                        }
                                                    }
                                                }
                                            } catch (Exception e3) {
                                                checkSQLException(e3);
                                            }
                                        }
                                        str = str2;
                                    }
                                    i2 = 0;
                                } catch (Exception e4) {
                                    e = e4;
                                    arrayList = arrayList9;
                                    arrayList2 = arrayList;
                                    sQLiteCursor = sQLiteCursor2;
                                    checkSQLException(e);
                                    if (sQLiteCursor != null) {
                                    }
                                    consumer.r(arrayList2);
                                }
                            }
                            String str3 = str;
                            sQLiteCursorQueryFinalized2.dispose();
                            if (hashSet.isEmpty()) {
                                j2 = j;
                            } else {
                                SQLiteDatabase sQLiteDatabase2 = this.database;
                                StringBuilder sb2 = new StringBuilder();
                                sb2.append("SELECT mid, data FROM messages_topics WHERE uid = ");
                                j2 = j;
                                sb2.append(j2);
                                sb2.append(" AND mid IN (");
                                sb2.append(TextUtils.join(",", hashSet));
                                sb2.append(str3);
                                boolean z = false;
                                SQLiteCursor sQLiteCursorQueryFinalized3 = sQLiteDatabase2.queryFinalized(sb2.toString(), new Object[0]);
                                while (sQLiteCursorQueryFinalized3.next()) {
                                    try {
                                        int iIntValue4 = sQLiteCursorQueryFinalized3.intValue(z ? 1 : 0);
                                        NativeByteBuffer nativeByteBufferByteBufferValue5 = sQLiteCursorQueryFinalized3.byteBufferValue(1);
                                        if (nativeByteBufferByteBufferValue5 != null) {
                                            TLRPC.Message messageTLdeserialize3 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue5, nativeByteBufferByteBufferValue5.readInt32(z), z);
                                            if (messageTLdeserialize3 != null) {
                                                messageTLdeserialize3.readAttachPath(nativeByteBufferByteBufferValue5, UserConfig.getInstance(this.currentAccount).clientUserId);
                                            }
                                            nativeByteBufferByteBufferValue5.reuse();
                                            hashSet.remove(Integer.valueOf(iIntValue4));
                                            addUsersAndChatsFromMessage(messageTLdeserialize3, arrayList7, arrayList8, null);
                                            ArrayList arrayList11 = (ArrayList) sparseArray.get(iIntValue4);
                                            if (arrayList11 != null) {
                                                for (int i4 = 0; i4 < arrayList11.size(); i4++) {
                                                    ((TLRPC.TL_forumTopic) arrayList11.get(i4)).topMessage = messageTLdeserialize3;
                                                }
                                            }
                                            z = false;
                                        }
                                    } catch (Exception e5) {
                                        checkSQLException(e5);
                                    }
                                }
                            }
                            Iterator<TLRPC.TL_forumTopic> it = arrayList9.iterator();
                            while (it.hasNext()) {
                                long peerDialogId = DialogObject.getPeerDialogId(it.next().from_id);
                                if (peerDialogId != 0) {
                                    if (peerDialogId > 0) {
                                        if (!arrayList7.contains(Long.valueOf(peerDialogId))) {
                                            lValueOf = Long.valueOf(peerDialogId);
                                            arrayList3 = arrayList7;
                                            arrayList3.add(lValueOf);
                                        }
                                    } else if (!arrayList8.contains(Long.valueOf(peerDialogId))) {
                                        lValueOf = Long.valueOf(peerDialogId);
                                        arrayList3 = arrayList8;
                                        arrayList3.add(lValueOf);
                                    }
                                }
                            }
                            loadReplyMessages(longSparseArray, longSparseArray2, arrayList7, arrayList8, 0);
                            final ArrayList<TLRPC.Chat> arrayList12 = new ArrayList<>();
                            final ArrayList<TLRPC.User> arrayList13 = new ArrayList<>();
                            if (!arrayList8.isEmpty()) {
                                getChatsInternal(TextUtils.join(",", arrayList8), arrayList12);
                            }
                            if (!arrayList7.isEmpty()) {
                                getUsersInternal(arrayList7, arrayList13);
                            }
                            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda163
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$loadTopics$48(arrayList13, arrayList12);
                                }
                            });
                            arrayList2 = arrayList9;
                            loadGroupedMessagesForTopics(j2, arrayList2);
                        } catch (Exception e6) {
                            e = e6;
                            arrayList2 = arrayList9;
                            arrayList = arrayList2;
                            arrayList2 = arrayList;
                            sQLiteCursor = sQLiteCursor2;
                            checkSQLException(e);
                            if (sQLiteCursor != null) {
                                sQLiteCursor3 = sQLiteCursor;
                                sQLiteCursor3.dispose();
                            }
                            consumer.r(arrayList2);
                        }
                    } catch (Exception e7) {
                        e = e7;
                    }
                } catch (Throwable th4) {
                    th = th4;
                    sQLiteCursor = sQLiteCursor2;
                    if (sQLiteCursor != null) {
                    }
                    throw th;
                }
            }
            sQLiteCursor3 = sQLiteCursor2;
        } catch (Exception e8) {
            e = e8;
            arrayList = null;
            sQLiteCursor2 = null;
        } catch (Throwable th5) {
            th = th5;
            sQLiteCursor = null;
        }
        sQLiteCursor3.dispose();
        consumer.r(arrayList2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadUnreadMessages$73(LongSparseArray longSparseArray, ArrayList arrayList, ArrayList arrayList2, ArrayList arrayList3, ArrayList arrayList4, ArrayList arrayList5, HashMap map) {
        getNotificationsController().processLoadedUnreadMessages(longSparseArray, arrayList, arrayList2, arrayList3, arrayList4, arrayList5, map.values());
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:145:0x0328 A[Catch: all -> 0x02de, Exception -> 0x02e3, TryCatch #10 {Exception -> 0x02e3, all -> 0x02de, blocks: (B:125:0x02ca, B:127:0x02d2, B:133:0x02ea, B:135:0x02f2, B:137:0x02fe, B:143:0x0323, B:145:0x0328, B:146:0x0334, B:138:0x0306, B:140:0x030e, B:142:0x031b), top: B:285:0x02ca }] */
    /* JADX WARN: Removed duplicated region for block: B:150:0x0340  */
    /* JADX WARN: Removed duplicated region for block: B:151:0x0343  */
    /* JADX WARN: Removed duplicated region for block: B:154:0x0348  */
    /* JADX WARN: Removed duplicated region for block: B:155:0x034b  */
    /* JADX WARN: Removed duplicated region for block: B:158:0x0354  */
    /* JADX WARN: Removed duplicated region for block: B:159:0x0357  */
    /* JADX WARN: Removed duplicated region for block: B:162:0x036d  */
    /* JADX WARN: Removed duplicated region for block: B:163:0x036f  */
    /* JADX WARN: Removed duplicated region for block: B:166:0x0375  */
    /* JADX WARN: Removed duplicated region for block: B:167:0x0377  */
    /* JADX WARN: Removed duplicated region for block: B:262:0x059b  */
    /* JADX WARN: Removed duplicated region for block: B:267:0x05a4  */
    /* JADX WARN: Removed duplicated region for block: B:315:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:317:? A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:81:0x01cb  */
    /* JADX WARN: Type inference failed for: r2v15, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r2v16 */
    /* JADX WARN: Type inference failed for: r2v17 */
    /* JADX WARN: Type inference failed for: r2v18 */
    /* JADX WARN: Type inference failed for: r2v19 */
    /* JADX WARN: Type inference failed for: r2v24, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r6v25, types: [org.telegram.tgnet.InputSerializedData, org.telegram.tgnet.NativeByteBuffer] */
    /* JADX WARN: Type inference failed for: r7v11 */
    /* JADX WARN: Type inference failed for: r7v8 */
    /* JADX WARN: Type inference failed for: r7v9, types: [boolean, int] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$loadUnreadMessages$74() throws Throwable {
        Throwable th;
        SQLiteCursor sQLiteCursor;
        Exception exc;
        Throwable th2;
        ArrayList<Long> arrayList;
        ArrayList<Long> arrayList2;
        ArrayList arrayList3;
        LongSparseArray longSparseArray;
        SQLiteCursor sQLiteCursorQueryFinalized;
        ArrayList<TLRPC.User> arrayList4;
        ArrayList arrayList5;
        ArrayList arrayList6;
        LongSparseArray longSparseArray2;
        CharSequence charSequence;
        ArrayList<TLRPC.Chat> arrayList7;
        Long lValueOf;
        ArrayList<Long> arrayList8;
        LongSparseArray longSparseArray3;
        ArrayList arrayList9;
        ArrayList arrayList10;
        ArrayList<TLRPC.EncryptedChat> arrayList11;
        ArrayList arrayList12;
        LongSparseArray longSparseArray4;
        String strStringValue;
        int i;
        ArrayList arrayList13;
        Long lValueOf2;
        ArrayList<Long> arrayList14;
        int i2;
        ArrayList arrayList15;
        TLRPC.MessageReplyHeader messageReplyHeader;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        Long lValueOf3;
        ArrayList<Long> arrayList16;
        MessagesStorage messagesStorage = this;
        int i3 = 2;
        boolean z = false;
        try {
            arrayList = new ArrayList<>();
            arrayList2 = new ArrayList<>();
            arrayList3 = new ArrayList();
            longSparseArray = new LongSparseArray();
            sQLiteCursorQueryFinalized = messagesStorage.database.queryFinalized("SELECT d.did, d.unread_count, s.flags FROM dialogs as d LEFT JOIN dialog_settings as s ON d.did = s.did WHERE d.unread_count > 0", new Object[0]);
        } catch (Exception e) {
            e = e;
        } catch (Throwable th3) {
            th = th3;
        }
        try {
            StringBuilder sb = new StringBuilder();
            int currentTime = getConnectionsManager().getCurrentTime();
            while (sQLiteCursorQueryFinalized.next()) {
                long jLongValue = sQLiteCursorQueryFinalized.longValue(i3);
                boolean z2 = (jLongValue & 1) != 0;
                int i4 = (int) (jLongValue >> 32);
                if (sQLiteCursorQueryFinalized.isNull(i3) || !z2 || (i4 != 0 && i4 < currentTime)) {
                    long jLongValue2 = sQLiteCursorQueryFinalized.longValue(0);
                    if (!DialogObject.isFolderDialogId(jLongValue2)) {
                        longSparseArray.put(jLongValue2, Integer.valueOf(sQLiteCursorQueryFinalized.intValue(1)));
                        if (sb.length() != 0) {
                            sb.append(",");
                        }
                        sb.append(jLongValue2);
                        if (DialogObject.isEncryptedDialog(jLongValue2)) {
                            int encryptedChatId = DialogObject.getEncryptedChatId(jLongValue2);
                            if (!arrayList3.contains(Integer.valueOf(encryptedChatId))) {
                                arrayList3.add(Integer.valueOf(encryptedChatId));
                            }
                        } else if (!DialogObject.isUserDialog(jLongValue2)) {
                            long j = -jLongValue2;
                            if (!arrayList2.contains(Long.valueOf(j))) {
                                lValueOf3 = Long.valueOf(j);
                                arrayList16 = arrayList2;
                                arrayList16.add(lValueOf3);
                            }
                        } else if (!arrayList.contains(Long.valueOf(jLongValue2))) {
                            lValueOf3 = Long.valueOf(jLongValue2);
                            arrayList16 = arrayList;
                            arrayList16.add(lValueOf3);
                        }
                        i3 = 2;
                    }
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            LongSparseArray longSparseArray5 = new LongSparseArray();
            LongSparseArray longSparseArray6 = new LongSparseArray();
            ArrayList arrayList17 = new ArrayList();
            ArrayList arrayList18 = new ArrayList();
            ArrayList<TLRPC.User> arrayList19 = new ArrayList<>();
            ArrayList<TLRPC.Chat> arrayList20 = new ArrayList<>();
            ArrayList<TLRPC.EncryptedChat> arrayList21 = new ArrayList<>();
            if (sb.length() > 0) {
                ?? QueryFinalized = messagesStorage.database.queryFinalized("SELECT read_state, data, send_state, mid, date, uid, replydata FROM messages_v2 WHERE uid IN (" + sb.toString() + ") AND out = 0 AND read_state IN(0,2) ORDER BY date DESC LIMIT 50", new Object[0]);
                int i5 = 0;
                while (QueryFinalized.next()) {
                    try {
                        try {
                            NativeByteBuffer nativeByteBufferByteBufferValue2 = QueryFinalized.byteBufferValue(1);
                            if (nativeByteBufferByteBufferValue2 != null) {
                                TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue2, nativeByteBufferByteBufferValue2.readInt32(z), z);
                                ArrayList arrayList22 = arrayList3;
                                LongSparseArray longSparseArray7 = longSparseArray;
                                messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue2, getUserConfig().clientUserId);
                                nativeByteBufferByteBufferValue2.reuse();
                                MessageObject.setUnreadFlags(messageTLdeserialize, QueryFinalized.intValue(0));
                                messageTLdeserialize.id = QueryFinalized.intValue(3);
                                messageTLdeserialize.date = QueryFinalized.intValue(4);
                                messageTLdeserialize.dialog_id = QueryFinalized.longValue(5);
                                arrayList17.add(messageTLdeserialize);
                                int iMax = Math.max(i5, messageTLdeserialize.date);
                                addUsersAndChatsFromMessage(messageTLdeserialize, arrayList, arrayList2, null);
                                messageTLdeserialize.send_state = QueryFinalized.intValue(2);
                                if (messageTLdeserialize.peer_id.channel_id != 0 || MessageObject.isUnread(messageTLdeserialize) || DialogObject.isEncryptedDialog(messageTLdeserialize.dialog_id)) {
                                    if (messageTLdeserialize.id > 0) {
                                        messageTLdeserialize.send_state = 0;
                                    }
                                    if (DialogObject.isEncryptedDialog(messageTLdeserialize.dialog_id) && !QueryFinalized.isNull(5)) {
                                        messageTLdeserialize.random_id = QueryFinalized.longValue(5);
                                    }
                                    try {
                                        messageReplyHeader = messageTLdeserialize.reply_to;
                                    } catch (Exception e2) {
                                        e = e2;
                                        i2 = iMax;
                                        arrayList15 = arrayList17;
                                    }
                                    if (messageReplyHeader != null || messageReplyHeader.reply_to_msg_id == 0) {
                                        i2 = iMax;
                                        arrayList15 = arrayList17;
                                        arrayList17 = arrayList15;
                                        i5 = i2;
                                        arrayList3 = arrayList22;
                                        longSparseArray = longSparseArray7;
                                        z = false;
                                    } else {
                                        TLRPC.MessageAction messageAction = messageTLdeserialize.action;
                                        if ((messageAction instanceof TLRPC.TL_messageActionPinMessage) || (messageAction instanceof TLRPC.TL_messageActionPaymentSent) || (messageAction instanceof TLRPC.TL_messageActionGameScore) || (messageAction instanceof TLRPC.TL_messageActionSuggestedPostApproval)) {
                                            if (QueryFinalized.isNull(6) || (nativeByteBufferByteBufferValue = QueryFinalized.byteBufferValue(6)) == null) {
                                                i2 = iMax;
                                                arrayList15 = arrayList17;
                                            } else {
                                                TLRPC.Message messageTLdeserialize2 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                                                messageTLdeserialize.replyMessage = messageTLdeserialize2;
                                                i2 = iMax;
                                                arrayList15 = arrayList17;
                                                try {
                                                    messageTLdeserialize2.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                                                    nativeByteBufferByteBufferValue.reuse();
                                                    TLRPC.Message message = messageTLdeserialize.replyMessage;
                                                    if (message != null) {
                                                        addUsersAndChatsFromMessage(message, arrayList, arrayList2, null);
                                                    }
                                                } catch (Exception e3) {
                                                    e = e3;
                                                    messagesStorage.checkSQLException(e);
                                                    arrayList17 = arrayList15;
                                                    i5 = i2;
                                                    arrayList3 = arrayList22;
                                                    longSparseArray = longSparseArray7;
                                                    z = false;
                                                }
                                            }
                                            if (messageTLdeserialize.replyMessage == null) {
                                                addReplyMessages(messageTLdeserialize, longSparseArray5, longSparseArray6);
                                            }
                                        }
                                        arrayList17 = arrayList15;
                                        i5 = i2;
                                        arrayList3 = arrayList22;
                                        longSparseArray = longSparseArray7;
                                        z = false;
                                    }
                                } else {
                                    messageTLdeserialize.send_state = 0;
                                    if (DialogObject.isEncryptedDialog(messageTLdeserialize.dialog_id)) {
                                        messageTLdeserialize.random_id = QueryFinalized.longValue(5);
                                    }
                                    messageReplyHeader = messageTLdeserialize.reply_to;
                                    if (messageReplyHeader != null) {
                                        i2 = iMax;
                                        arrayList15 = arrayList17;
                                        arrayList17 = arrayList15;
                                        i5 = i2;
                                        arrayList3 = arrayList22;
                                        longSparseArray = longSparseArray7;
                                        z = false;
                                    }
                                }
                            }
                        } catch (Exception e4) {
                            e = e4;
                        }
                    } catch (Throwable th4) {
                        th = th4;
                    }
                }
                ArrayList arrayList23 = arrayList3;
                LongSparseArray longSparseArray8 = longSparseArray;
                ArrayList arrayList24 = arrayList17;
                QueryFinalized.dispose();
                messagesStorage.database.executeFast("DELETE FROM unread_push_messages WHERE date <= " + i5).stepThis().dispose();
                ?? r7 = 0;
                QueryFinalized = messagesStorage.database.queryFinalized("SELECT data, mid, date, uid, random, fm, name, uname, flags, topicId, is_reaction FROM unread_push_messages WHERE 1 ORDER BY date DESC LIMIT 50", new Object[0]);
                while (QueryFinalized.next()) {
                    ?? ByteBufferValue = QueryFinalized.byteBufferValue(r7);
                    if (ByteBufferValue != 0) {
                        TLRPC.Message messageTLdeserialize3 = TLRPC.Message.TLdeserialize(ByteBufferValue, ByteBufferValue.readInt32(r7), r7);
                        ByteBufferValue.reuse();
                        messageTLdeserialize3.id = QueryFinalized.intValue(1);
                        messageTLdeserialize3.date = QueryFinalized.intValue(2);
                        ArrayList arrayList25 = arrayList24;
                        messageTLdeserialize3.dialog_id = QueryFinalized.longValue(3);
                        messageTLdeserialize3.random_id = QueryFinalized.longValue(4);
                        if (QueryFinalized.isNull(5)) {
                            i = 6;
                            strStringValue = null;
                        } else {
                            strStringValue = QueryFinalized.stringValue(5);
                            i = 6;
                        }
                        String strStringValue2 = QueryFinalized.isNull(i) ? null : QueryFinalized.stringValue(i);
                        String strStringValue3 = QueryFinalized.isNull(7) ? null : QueryFinalized.stringValue(7);
                        int iIntValue = QueryFinalized.intValue(8);
                        int iIntValue2 = QueryFinalized.intValue(9);
                        if (MessageObject.getFromChatId(messageTLdeserialize3) == 0) {
                            arrayList13 = arrayList25;
                            try {
                                if (DialogObject.isUserDialog(messageTLdeserialize3.dialog_id)) {
                                    TLRPC.TL_peerUser tL_peerUser = new TLRPC.TL_peerUser();
                                    messageTLdeserialize3.from_id = tL_peerUser;
                                    tL_peerUser.user_id = messageTLdeserialize3.dialog_id;
                                }
                            } catch (Exception e5) {
                                e = e5;
                                messagesStorage = this;
                                exc = e;
                                sQLiteCursor = QueryFinalized;
                                try {
                                    messagesStorage.checkSQLException(exc);
                                    if (sQLiteCursor == null) {
                                    }
                                } catch (Throwable th5) {
                                    th2 = th5;
                                    th = th2;
                                    if (sQLiteCursor != null) {
                                        throw th;
                                    }
                                    sQLiteCursor.dispose();
                                    throw th;
                                }
                            } catch (Throwable th6) {
                                th = th6;
                                th = th;
                                sQLiteCursor = QueryFinalized;
                                if (sQLiteCursor != null) {
                                }
                            }
                        } else {
                            arrayList13 = arrayList25;
                        }
                        if (DialogObject.isUserDialog(messageTLdeserialize3.dialog_id)) {
                            if (!arrayList.contains(Long.valueOf(messageTLdeserialize3.dialog_id))) {
                                lValueOf2 = Long.valueOf(messageTLdeserialize3.dialog_id);
                                arrayList14 = arrayList;
                                arrayList14.add(lValueOf2);
                            }
                            if (iIntValue2 != 0) {
                                TLRPC.TL_messageReplyHeader tL_messageReplyHeader = new TLRPC.TL_messageReplyHeader();
                                messageTLdeserialize3.reply_to = tL_messageReplyHeader;
                                tL_messageReplyHeader.forum_topic = true;
                                tL_messageReplyHeader.reply_to_top_id = iIntValue2;
                            }
                            messagesStorage = this;
                            MessageObject messageObject = new MessageObject(messagesStorage.currentAccount, messageTLdeserialize3, strStringValue, strStringValue2, strStringValue3, (iIntValue & 1) == 0, (iIntValue & 2) == 0, (messageTLdeserialize3.flags & Integer.MIN_VALUE) == 0, false);
                            int iIntValue3 = QueryFinalized.intValue(10);
                            messageObject.isReactionPush = iIntValue3 != 1;
                            messageObject.isStoryReactionPush = iIntValue3 != 2;
                            arrayList18.add(messageObject);
                            addUsersAndChatsFromMessage(messageTLdeserialize3, arrayList, arrayList2, null);
                            arrayList24 = arrayList13;
                        } else {
                            if (DialogObject.isChatDialog(messageTLdeserialize3.dialog_id) && !arrayList2.contains(Long.valueOf(-messageTLdeserialize3.dialog_id))) {
                                lValueOf2 = Long.valueOf(-messageTLdeserialize3.dialog_id);
                                arrayList14 = arrayList2;
                                arrayList14.add(lValueOf2);
                            }
                            if (iIntValue2 != 0) {
                            }
                            messagesStorage = this;
                            MessageObject messageObject2 = new MessageObject(messagesStorage.currentAccount, messageTLdeserialize3, strStringValue, strStringValue2, strStringValue3, (iIntValue & 1) == 0, (iIntValue & 2) == 0, (messageTLdeserialize3.flags & Integer.MIN_VALUE) == 0, false);
                            int iIntValue32 = QueryFinalized.intValue(10);
                            messageObject2.isReactionPush = iIntValue32 != 1;
                            messageObject2.isStoryReactionPush = iIntValue32 != 2;
                            arrayList18.add(messageObject2);
                            addUsersAndChatsFromMessage(messageTLdeserialize3, arrayList, arrayList2, null);
                            arrayList24 = arrayList13;
                        }
                    }
                    r7 = 0;
                }
                ArrayList arrayList26 = arrayList24;
                QueryFinalized.dispose();
                arrayList4 = arrayList19;
                arrayList5 = arrayList18;
                charSequence = ",";
                arrayList7 = arrayList20;
                ArrayList<TLRPC.EncryptedChat> arrayList27 = arrayList21;
                loadReplyMessages(longSparseArray5, longSparseArray6, arrayList, arrayList2, 0);
                if (!arrayList23.isEmpty()) {
                    messagesStorage.getEncryptedChatsInternal(TextUtils.join(charSequence, arrayList23), arrayList27, arrayList);
                }
                if (!arrayList.isEmpty()) {
                    messagesStorage.getUsersInternal(arrayList, arrayList4);
                }
                if (!arrayList2.isEmpty()) {
                    messagesStorage.getChatsInternal(TextUtils.join(charSequence, arrayList2), arrayList7);
                    int i6 = 0;
                    while (i6 < arrayList7.size()) {
                        TLRPC.Chat chat = arrayList7.get(i6);
                        if (chat == null || !(ChatObject.isNotInChat(chat) || chat.min || chat.migrated_to != null)) {
                            arrayList11 = arrayList27;
                            arrayList12 = arrayList26;
                            longSparseArray4 = longSparseArray8;
                        } else {
                            long j2 = -chat.id;
                            messagesStorage.database.executeFast("UPDATE dialogs SET unread_count = 0 WHERE did = " + j2).stepThis().dispose();
                            arrayList11 = arrayList27;
                            try {
                                messagesStorage.database.executeFast(String.format(Locale.US, "UPDATE messages_v2 SET read_state = 3 WHERE uid = %d AND mid > 0 AND read_state IN(0,2) AND out = 0", Long.valueOf(j2))).stepThis().dispose();
                                arrayList7.remove(i6);
                                i6--;
                                longSparseArray4 = longSparseArray8;
                                longSparseArray4.remove(j2);
                                int i7 = 0;
                                while (i7 < arrayList26.size()) {
                                    ArrayList arrayList28 = arrayList26;
                                    if (((TLRPC.Message) arrayList28.get(i7)).dialog_id == j2) {
                                        arrayList28.remove(i7);
                                        i7--;
                                    }
                                    i7++;
                                    arrayList26 = arrayList28;
                                }
                                arrayList12 = arrayList26;
                            } catch (Exception e6) {
                                e = e6;
                                exc = e;
                                sQLiteCursor = null;
                                messagesStorage.checkSQLException(exc);
                                if (sQLiteCursor == null) {
                                    sQLiteCursor.dispose();
                                    return;
                                }
                                return;
                            } catch (Throwable th7) {
                                th = th7;
                                th = th;
                                sQLiteCursor = null;
                                if (sQLiteCursor != null) {
                                }
                            }
                        }
                        i6++;
                        longSparseArray8 = longSparseArray4;
                        arrayList26 = arrayList12;
                        arrayList27 = arrayList11;
                    }
                }
                arrayList21 = arrayList27;
                arrayList6 = arrayList26;
                longSparseArray2 = longSparseArray8;
            } else {
                arrayList4 = arrayList19;
                arrayList5 = arrayList18;
                arrayList6 = arrayList17;
                longSparseArray2 = longSparseArray;
                charSequence = ",";
                arrayList7 = arrayList20;
            }
            Collections.reverse(arrayList6);
            arrayList.clear();
            arrayList2.clear();
            sQLiteCursorQueryFinalized = messagesStorage.database.queryFinalized("SELECT uid, sid, date, expire_date, localName, flags FROM story_pushes", new Object[0]);
            final HashMap map = new HashMap();
            while (sQLiteCursorQueryFinalized.next()) {
                long jLongValue3 = sQLiteCursorQueryFinalized.longValue(0);
                if (jLongValue3 >= 0) {
                    if (!arrayList.contains(Long.valueOf(jLongValue3))) {
                        lValueOf = Long.valueOf(jLongValue3);
                        arrayList8 = arrayList;
                        arrayList8.add(lValueOf);
                    }
                } else if (!arrayList2.contains(Long.valueOf(jLongValue3))) {
                    lValueOf = Long.valueOf(jLongValue3);
                    arrayList8 = arrayList2;
                    arrayList8.add(lValueOf);
                }
                int iIntValue4 = sQLiteCursorQueryFinalized.intValue(1);
                long jLongValue4 = sQLiteCursorQueryFinalized.longValue(2);
                long jLongValue5 = sQLiteCursorQueryFinalized.longValue(3);
                String strStringValue4 = sQLiteCursorQueryFinalized.stringValue(4);
                int iIntValue5 = sQLiteCursorQueryFinalized.intValue(5);
                NotificationsController.StoryNotification storyNotification = (NotificationsController.StoryNotification) map.get(Long.valueOf(jLongValue3));
                if (storyNotification != null) {
                    arrayList10 = arrayList5;
                    arrayList9 = arrayList6;
                    longSparseArray3 = longSparseArray2;
                    storyNotification.dateByIds.put(Integer.valueOf(iIntValue4), new Pair<>(Long.valueOf(jLongValue4), Long.valueOf(jLongValue5)));
                    storyNotification.date = storyNotification.getLeastDate();
                    storyNotification.hidden |= (iIntValue5 & 1) != 0;
                    if (!TextUtils.isEmpty(strStringValue4)) {
                        storyNotification.localName = strStringValue4;
                    }
                } else {
                    longSparseArray3 = longSparseArray2;
                    arrayList9 = arrayList6;
                    arrayList10 = arrayList5;
                    NotificationsController.StoryNotification storyNotification2 = new NotificationsController.StoryNotification(jLongValue3, strStringValue4, iIntValue4, jLongValue4, jLongValue5);
                    storyNotification2.hidden = (iIntValue5 & 1) != 0;
                    map.put(Long.valueOf(jLongValue3), storyNotification2);
                }
                arrayList5 = arrayList10;
                arrayList6 = arrayList9;
                longSparseArray2 = longSparseArray3;
            }
            final LongSparseArray longSparseArray9 = longSparseArray2;
            final ArrayList arrayList29 = arrayList6;
            final ArrayList arrayList30 = arrayList5;
            sQLiteCursorQueryFinalized.dispose();
            if (!arrayList.isEmpty()) {
                messagesStorage.getUsersInternal(arrayList, arrayList4);
            }
            if (!arrayList2.isEmpty()) {
                messagesStorage.getChatsInternal(TextUtils.join(charSequence, arrayList2), arrayList7);
            }
            final ArrayList<TLRPC.User> arrayList31 = arrayList4;
            final ArrayList<TLRPC.Chat> arrayList32 = arrayList7;
            final ArrayList<TLRPC.EncryptedChat> arrayList33 = arrayList21;
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda230
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$loadUnreadMessages$73(longSparseArray9, arrayList29, arrayList30, arrayList31, arrayList32, arrayList33, map);
                }
            });
        } catch (Exception e7) {
            sQLiteCursor = sQLiteCursorQueryFinalized;
            exc = e7;
        } catch (Throwable th8) {
            th2 = th8;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            th = th2;
            if (sQLiteCursor != null) {
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadUserInfo$123(ArrayList arrayList) {
        getMessagesController().putChats(arrayList, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:117:0x00e5 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:122:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:67:0x0142 A[Catch: all -> 0x00fe, Exception -> 0x0107, LOOP:1: B:66:0x0140->B:67:0x0142, LOOP_END, TryCatch #9 {Exception -> 0x0107, all -> 0x00fe, blocks: (B:47:0x00e5, B:49:0x00e9, B:51:0x00ef, B:60:0x0110, B:61:0x0125, B:63:0x012b, B:65:0x013c, B:67:0x0142, B:68:0x0155, B:70:0x015c, B:72:0x0162, B:74:0x016a, B:75:0x0171, B:77:0x0177), top: B:117:0x00e5 }] */
    /* JADX WARN: Removed duplicated region for block: B:74:0x016a A[Catch: all -> 0x00fe, Exception -> 0x0107, TryCatch #9 {Exception -> 0x0107, all -> 0x00fe, blocks: (B:47:0x00e5, B:49:0x00e9, B:51:0x00ef, B:60:0x0110, B:61:0x0125, B:63:0x012b, B:65:0x013c, B:67:0x0142, B:68:0x0155, B:70:0x015c, B:72:0x0162, B:74:0x016a, B:75:0x0171, B:77:0x0177), top: B:117:0x00e5 }] */
    /* JADX WARN: Removed duplicated region for block: B:77:0x0177 A[Catch: all -> 0x00fe, Exception -> 0x0107, TRY_LEAVE, TryCatch #9 {Exception -> 0x0107, all -> 0x00fe, blocks: (B:47:0x00e5, B:49:0x00e9, B:51:0x00ef, B:60:0x0110, B:61:0x0125, B:63:0x012b, B:65:0x013c, B:67:0x0142, B:68:0x0155, B:70:0x015c, B:72:0x0162, B:74:0x016a, B:75:0x0171, B:77:0x0177), top: B:117:0x00e5 }] */
    /* JADX WARN: Removed duplicated region for block: B:94:0x01cc  */
    /* JADX WARN: Removed duplicated region for block: B:99:0x01e1  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$loadUserInfo$124(TLRPC.User user, boolean z, int i) throws Throwable {
        SQLiteCursor sQLiteCursor;
        int i2;
        boolean z2;
        TLRPC.UserFull userFullTLdeserialize;
        int i3;
        ArrayList arrayList;
        long j;
        ArrayList<MessageObject> arrayListLoadPinnedMessages;
        int size;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        HashMap<Integer, MessageObject> map = new HashMap<>();
        ArrayList<Integer> arrayList2 = new ArrayList<>();
        TLRPC.UserFull userFull = null;
        try {
            SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT info, pinned FROM user_settings WHERE uid = " + user.id, new Object[0]);
            try {
                if (!sQLiteCursorQueryFinalized.next() || (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0)) == null) {
                    userFullTLdeserialize = null;
                } else {
                    userFullTLdeserialize = TLRPC.UserFull.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                    try {
                        userFullTLdeserialize.pinned_msg_id = sQLiteCursorQueryFinalized.intValue(1);
                        nativeByteBufferByteBufferValue.reuse();
                    } catch (Exception e) {
                        e = e;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        userFull = userFullTLdeserialize;
                        i2 = 0;
                        z2 = false;
                        try {
                            checkSQLException(e);
                            getMessagesController().processUserInfo(user, userFull, true, z, i, arrayList2, map, i2, z2);
                            if (sQLiteCursor == null) {
                            }
                        } catch (Throwable th) {
                            th = th;
                            getMessagesController().processUserInfo(user, userFull, true, z, i, arrayList2, map, i2, z2);
                            if (sQLiteCursor != null) {
                                sQLiteCursor.dispose();
                            }
                            throw th;
                        }
                    } catch (Throwable th2) {
                        th = th2;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        userFull = userFullTLdeserialize;
                        i2 = 0;
                        z2 = false;
                        getMessagesController().processUserInfo(user, userFull, true, z, i, arrayList2, map, i2, z2);
                        if (sQLiteCursor != null) {
                        }
                        throw th;
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
                try {
                    SQLiteCursor sQLiteCursorQueryFinalized2 = getMessagesStorage().getDatabase().queryFinalized(String.format(Locale.US, "SELECT mid FROM chat_pinned_v2 WHERE uid = %d ORDER BY mid DESC", Long.valueOf(user.id)), new Object[0]);
                    while (sQLiteCursorQueryFinalized2.next()) {
                        int iIntValue = sQLiteCursorQueryFinalized2.intValue(0);
                        arrayList2.add(Integer.valueOf(iIntValue));
                        map.put(Integer.valueOf(iIntValue), null);
                    }
                    sQLiteCursorQueryFinalized2.dispose();
                    sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT count, end FROM chat_pinned_count WHERE uid = " + user.id, new Object[0]);
                    try {
                        if (sQLiteCursorQueryFinalized.next()) {
                            int iIntValue2 = sQLiteCursorQueryFinalized.intValue(0);
                            try {
                                i3 = iIntValue2;
                                boolean z3 = sQLiteCursorQueryFinalized.intValue(1) != 0;
                                sQLiteCursorQueryFinalized.dispose();
                                if (userFullTLdeserialize != null) {
                                    try {
                                        if (userFullTLdeserialize.pinned_msg_id != 0 && (arrayList2.isEmpty() || userFullTLdeserialize.pinned_msg_id > arrayList2.get(0).intValue())) {
                                            arrayList2.clear();
                                            arrayList2.add(Integer.valueOf(userFullTLdeserialize.pinned_msg_id));
                                            map.put(Integer.valueOf(userFullTLdeserialize.pinned_msg_id), null);
                                        }
                                    } catch (Exception e2) {
                                        e = e2;
                                        sQLiteCursor = null;
                                        userFull = userFullTLdeserialize;
                                        i2 = i3;
                                        z2 = z3;
                                        checkSQLException(e);
                                        getMessagesController().processUserInfo(user, userFull, true, z, i, arrayList2, map, i2, z2);
                                        if (sQLiteCursor == null) {
                                        }
                                    } catch (Throwable th3) {
                                        th = th3;
                                        sQLiteCursor = null;
                                        userFull = userFullTLdeserialize;
                                        i2 = i3;
                                        z2 = z3;
                                        getMessagesController().processUserInfo(user, userFull, true, z, i, arrayList2, map, i2, z2);
                                        if (sQLiteCursor != null) {
                                        }
                                        throw th;
                                    }
                                }
                                if (!arrayList2.isEmpty() && (arrayListLoadPinnedMessages = getMediaDataController().loadPinnedMessages(user.id, 0L, arrayList2, false)) != null) {
                                    size = arrayListLoadPinnedMessages.size();
                                    for (int i4 = 0; i4 < size; i4++) {
                                        MessageObject messageObject = arrayListLoadPinnedMessages.get(i4);
                                        map.put(Integer.valueOf(messageObject.getId()), messageObject);
                                    }
                                }
                                arrayList = new ArrayList();
                                if (userFullTLdeserialize != null && (userFullTLdeserialize.flags2 & 64) != 0) {
                                    j = userFullTLdeserialize.personal_channel_id;
                                    if (j != 0) {
                                        arrayList.add(Long.valueOf(j));
                                    }
                                }
                                if (!arrayList.isEmpty()) {
                                    final ArrayList<TLRPC.Chat> arrayList3 = new ArrayList<>();
                                    getChatsInternal(TextUtils.join(",", arrayList), arrayList3);
                                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda115
                                        @Override // java.lang.Runnable
                                        public final void run() {
                                            this.f$0.lambda$loadUserInfo$123(arrayList3);
                                        }
                                    });
                                }
                                getMessagesController().processUserInfo(user, userFullTLdeserialize, true, z, i, arrayList2, map, i3, z3);
                            } catch (Exception e3) {
                                e = e3;
                                sQLiteCursor = sQLiteCursorQueryFinalized;
                                i2 = iIntValue2;
                                userFull = userFullTLdeserialize;
                                z2 = false;
                                checkSQLException(e);
                                getMessagesController().processUserInfo(user, userFull, true, z, i, arrayList2, map, i2, z2);
                                if (sQLiteCursor == null) {
                                }
                            } catch (Throwable th4) {
                                th = th4;
                                sQLiteCursor = sQLiteCursorQueryFinalized;
                                i2 = iIntValue2;
                                userFull = userFullTLdeserialize;
                                z2 = false;
                                getMessagesController().processUserInfo(user, userFull, true, z, i, arrayList2, map, i2, z2);
                                if (sQLiteCursor != null) {
                                }
                                throw th;
                            }
                        } else {
                            i3 = 0;
                        }
                        sQLiteCursorQueryFinalized.dispose();
                        if (userFullTLdeserialize != null) {
                        }
                        if (!arrayList2.isEmpty()) {
                            size = arrayListLoadPinnedMessages.size();
                            while (i4 < size) {
                            }
                        }
                        arrayList = new ArrayList();
                        if (userFullTLdeserialize != null) {
                            j = userFullTLdeserialize.personal_channel_id;
                            if (j != 0) {
                            }
                        }
                        if (!arrayList.isEmpty()) {
                        }
                        getMessagesController().processUserInfo(user, userFullTLdeserialize, true, z, i, arrayList2, map, i3, z3);
                    } catch (Exception e4) {
                        e = e4;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                    } catch (Throwable th5) {
                        th = th5;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                    }
                } catch (Exception e5) {
                    e = e5;
                    sQLiteCursor = null;
                    userFull = userFullTLdeserialize;
                    i2 = 0;
                    z2 = false;
                    checkSQLException(e);
                    getMessagesController().processUserInfo(user, userFull, true, z, i, arrayList2, map, i2, z2);
                    if (sQLiteCursor == null) {
                        sQLiteCursor.dispose();
                    }
                } catch (Throwable th6) {
                    th = th6;
                    sQLiteCursor = null;
                    userFull = userFullTLdeserialize;
                    i2 = 0;
                    z2 = false;
                    getMessagesController().processUserInfo(user, userFull, true, z, i, arrayList2, map, i2, z2);
                    if (sQLiteCursor != null) {
                    }
                    throw th;
                }
            } catch (Exception e6) {
                e = e6;
                sQLiteCursor = sQLiteCursorQueryFinalized;
            } catch (Throwable th7) {
                th = th7;
                sQLiteCursor = sQLiteCursorQueryFinalized;
            }
        } catch (Exception e7) {
            e = e7;
            sQLiteCursor = null;
        } catch (Throwable th8) {
            th = th8;
            sQLiteCursor = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public static /* synthetic */ int lambda$localSearch$243(DialogsSearchAdapter.DialogSearchResult dialogSearchResult, DialogsSearchAdapter.DialogSearchResult dialogSearchResult2) {
        int i = dialogSearchResult.date;
        int i2 = dialogSearchResult2.date;
        if (i < i2) {
            return 1;
        }
        return i > i2 ? -1 : 0;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:49:0x0186  */
    /* JADX WARN: Removed duplicated region for block: B:70:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$markMentionMessageAsRead$107(int i, long j, long j2) throws Throwable {
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                SQLiteDatabase sQLiteDatabase = this.database;
                Locale locale = Locale.US;
                sQLiteDatabase.executeFast(String.format(locale, "UPDATE messages_v2 SET read_state = read_state | 2 WHERE mid = %d AND uid = %d", Integer.valueOf(i), Long.valueOf(j))).stepThis().dispose();
                SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT unread_count_i FROM dialogs WHERE did = " + j2, new Object[0]);
                try {
                    int iMax = sQLiteCursorQueryFinalized.next() ? Math.max(0, sQLiteCursorQueryFinalized.intValue(0) - 1) : 0;
                    sQLiteCursorQueryFinalized.dispose();
                    this.database.executeFast(String.format(locale, "UPDATE dialogs SET unread_count_i = %d WHERE did = %d", Integer.valueOf(iMax), Long.valueOf(j2))).stepThis().dispose();
                    LongSparseIntArray longSparseIntArray = new LongSparseIntArray(1);
                    longSparseIntArray.put(j2, iMax);
                    if (iMax == 0) {
                        try {
                            updateFiltersReadCounter(null, longSparseIntArray, true);
                        } catch (Exception e) {
                            e = e;
                            checkSQLException(e);
                            if (sQLiteCursor == null) {
                                sQLiteCursor.dispose();
                                return;
                            }
                            return;
                        }
                    }
                    getMessagesController().processDialogsUpdateRead(null, longSparseIntArray);
                    this.database.executeFast(String.format(locale, "UPDATE messages_topics SET read_state = read_state | 2 WHERE mid = %d AND uid = %d", Integer.valueOf(i), Long.valueOf(j))).stepThis().dispose();
                    sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(locale, "SELECT data FROM messages_topics WHERE mid = %d AND uid = %d", Integer.valueOf(i), Long.valueOf(j)), new Object[0]);
                    long topicId = 0;
                    while (sQLiteCursorQueryFinalized.next()) {
                        NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                        if (nativeByteBufferByteBufferValue != null) {
                            TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            nativeByteBufferByteBufferValue.reuse();
                            topicId = MessageObject.getTopicId(this.currentAccount, messageTLdeserialize, isForum(j), isMonoForum(j));
                        }
                    }
                    sQLiteCursorQueryFinalized.dispose();
                    if (topicId == 0) {
                        return;
                    }
                    SQLiteDatabase sQLiteDatabase2 = this.database;
                    Locale locale2 = Locale.US;
                    SQLiteCursor sQLiteCursorQueryFinalized2 = sQLiteDatabase2.queryFinalized(String.format(locale2, "SELECT unread_mentions FROM topics WHERE did = %d AND topic_id = %d", Long.valueOf(j2), Long.valueOf(topicId)), new Object[0]);
                    try {
                        int iMax2 = sQLiteCursorQueryFinalized2.next() ? Math.max(0, sQLiteCursorQueryFinalized2.intValue(0) - 1) : 0;
                        sQLiteCursorQueryFinalized2.dispose();
                        this.database.executeFast(String.format(locale2, "UPDATE topics SET unread_mentions = %d WHERE did = %d AND topic_id = %d", Integer.valueOf(iMax2), Long.valueOf(j), Long.valueOf(topicId))).stepThis().dispose();
                        getMessagesController().getTopicsController().updateMentionsUnread(j, topicId, iMax2);
                    } catch (Exception e2) {
                        e = e2;
                        sQLiteCursor = sQLiteCursorQueryFinalized2;
                        checkSQLException(e);
                        if (sQLiteCursor == null) {
                        }
                    } catch (Throwable th) {
                        th = th;
                        sQLiteCursor = sQLiteCursorQueryFinalized2;
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        throw th;
                    }
                } catch (Exception e3) {
                    e = e3;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                } catch (Throwable th2) {
                    th = th2;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                }
            } catch (Throwable th3) {
                th = th3;
            }
        } catch (Exception e4) {
            e = e4;
            sQLiteCursor = null;
        } catch (Throwable th4) {
            th = th4;
            sQLiteCursor = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$markMessageAsMention$108(int i, long j) {
        try {
            this.database.executeFast(String.format(Locale.US, "UPDATE messages_v2 SET mention = 1, read_state = read_state & ~2 WHERE mid = %d AND uid = %d", Integer.valueOf(i), Long.valueOf(j))).stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$markMessageAsSendError$195(int i, TLRPC.Message message) {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        try {
            long j = message.id;
            if (MessageObject.isQuickReply(message)) {
                i = 5;
            }
            if (i == 5) {
                sQLitePreparedStatementExecuteFast = this.database.executeFast(String.format(Locale.US, "UPDATE quick_replies_messages SET send_state = 2 WHERE mid = %d AND topic_id = %d", Long.valueOf(j), Integer.valueOf(MessageObject.getQuickReplyId(this.currentAccount, message))));
            } else if (i == 1) {
                sQLitePreparedStatementExecuteFast = this.database.executeFast(String.format(Locale.US, "UPDATE scheduled_messages_v2 SET send_state = 2 WHERE mid = %d AND uid = %d", Long.valueOf(j), Long.valueOf(MessageObject.getDialogId(message))));
            } else {
                SQLiteDatabase sQLiteDatabase = this.database;
                Locale locale = Locale.US;
                sQLiteDatabase.executeFast(String.format(locale, "UPDATE messages_v2 SET send_state = 2 WHERE mid = %d AND uid = %d", Long.valueOf(j), Long.valueOf(MessageObject.getDialogId(message)))).stepThis().dispose();
                sQLitePreparedStatementExecuteFast = this.database.executeFast(String.format(locale, "UPDATE messages_topics SET send_state = 2 WHERE mid = %d AND uid = %d", Long.valueOf(j), Long.valueOf(MessageObject.getDialogId(message))));
            }
            sQLitePreparedStatementExecuteFast.stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Type inference failed for: r3v0 */
    /* JADX WARN: Type inference failed for: r3v6 */
    public /* synthetic */ void lambda$markMessageAsSendErrorWithParams$196(TLRPC.Message message, long j) {
        NativeByteBuffer nativeByteBufferByteBufferValue;
        int i = 2;
        int i2 = 0;
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                long j2 = message.id;
                long dialogId = MessageObject.getDialogId(message);
                int i3 = 0;
                while (i3 < i) {
                    String str = i3 == 0 ? "messages_v2" : "messages_topics";
                    SQLiteDatabase sQLiteDatabase = this.database;
                    Locale locale = Locale.US;
                    Long lValueOf = Long.valueOf(j2);
                    Long lValueOf2 = Long.valueOf(dialogId);
                    Object[] objArr = new Object[i];
                    objArr[i2] = lValueOf;
                    objArr[1] = lValueOf2;
                    sQLiteCursorQueryFinalized = sQLiteDatabase.queryFinalized(String.format(locale, "SELECT data FROM messages_v2 WHERE mid = %d AND uid = %d LIMIT 1", objArr), new Object[i2]);
                    if (sQLiteCursorQueryFinalized.next() && (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(i2)) != null) {
                        TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(i2), i2).readAttachPath(nativeByteBufferByteBufferValue, j);
                        nativeByteBufferByteBufferValue.reuse();
                    }
                    this.database.executeFast(String.format(locale, "UPDATE " + str + " SET send_state = 2 WHERE mid = %d AND uid = %d", Long.valueOf(j2), Long.valueOf(dialogId))).stepThis().dispose();
                    this.database.executeFast(String.format(locale, "UPDATE " + str + " SET send_state = 2 WHERE mid = %d AND uid = %d", Long.valueOf(j2), Long.valueOf(dialogId))).stepThis().dispose();
                    i3++;
                    i = 2;
                    i2 = 0;
                }
                if (sQLiteCursorQueryFinalized == null) {
                    return;
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized == null) {
                    return;
                }
            }
            sQLiteCursorQueryFinalized.dispose();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$markMessagesAsDeletedByRandoms$203(ArrayList arrayList) {
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.messagesDeleted, arrayList, 0L, Boolean.FALSE);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$markMessagesAsDeletedByRandoms$204(ArrayList arrayList) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                try {
                    sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT mid, uid FROM randoms_v2 WHERE random_id IN(%s)", TextUtils.join(",", arrayList)), new Object[0]);
                } catch (Exception e) {
                    e = e;
                } catch (Throwable th) {
                    th = th;
                }
            } catch (Throwable th2) {
                th = th2;
            }
        } catch (Exception e2) {
            e = e2;
        }
        try {
            LongSparseArray longSparseArray = new LongSparseArray();
            while (sQLiteCursorQueryFinalized.next()) {
                long jLongValue = sQLiteCursorQueryFinalized.longValue(1);
                ArrayList arrayList2 = (ArrayList) longSparseArray.get(jLongValue);
                if (arrayList2 == null) {
                    arrayList2 = new ArrayList();
                    longSparseArray.put(jLongValue, arrayList2);
                }
                arrayList2.add(Integer.valueOf(sQLiteCursorQueryFinalized.intValue(0)));
            }
            sQLiteCursorQueryFinalized.dispose();
            if (longSparseArray.isEmpty()) {
                return;
            }
            int size = longSparseArray.size();
            for (int i = 0; i < size; i++) {
                long jKeyAt = longSparseArray.keyAt(i);
                final ArrayList<Integer> arrayList3 = (ArrayList) longSparseArray.valueAt(i);
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda207
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$markMessagesAsDeletedByRandoms$203(arrayList3);
                    }
                });
                updateDialogsWithReadMessagesInternal(arrayList3, null, null, null, null);
                lambda$markMessagesAsDeleted$212(jKeyAt, arrayList3, true, 0, 0);
                lambda$updateDialogsWithDeletedMessages$211(jKeyAt, 0L, arrayList3, null);
            }
        } catch (Exception e3) {
            e = e3;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            checkSQLException(e);
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
        } catch (Throwable th3) {
            th = th3;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$markMessagesAsDeletedInternal$207(ArrayList arrayList) {
        getFileLoader().cancelLoadFiles(arrayList);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$markMessagesAsDeletedInternal$208(LongSparseArray longSparseArray) {
        getMessagesController().getSavedMessagesController().updateDeleted(longSparseArray);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$markMessagesAsDeletedInternal$209(ArrayList arrayList, long j) {
        HashSet<Long> hashSet = new HashSet<>();
        Iterator it = arrayList.iterator();
        boolean z = false;
        while (it.hasNext()) {
            TLRPC.Message message = (TLRPC.Message) it.next();
            if (getMessagesController().processDeletedReactionTags(message)) {
                hashSet.add(Long.valueOf(MessageObject.getSavedDialogId(j, message)));
                z = true;
            }
        }
        if (z) {
            getMessagesController().updateSavedReactionTags(hashSet);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$markMessagesAsDeletedInternal$210(ArrayList arrayList) {
        HashSet<Long> hashSet = new HashSet<>();
        long[] jArr = new long[1];
        boolean z = false;
        for (int i = 0; i < arrayList.size(); i++) {
            if (getMediaDataController().processDeletedMessage(((Integer) arrayList.get(i)).intValue(), jArr)) {
                hashSet.add(Long.valueOf(jArr[0]));
                z = true;
            }
        }
        if (z) {
            getMessagesController().updateSavedReactionTags(hashSet);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$markMessagesAsDeletedInternal$213(ArrayList arrayList) {
        getFileLoader().cancelLoadFiles(arrayList);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:48:0x00d0  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$markMessagesContentAsRead$201(long j, ArrayList arrayList, int i, int i2) throws Throwable {
        SQLiteCursor sQLiteCursor;
        Throwable th;
        SQLiteCursor sQLiteCursorQueryFinalized;
        Exception e;
        ArrayList arrayList2;
        int i3;
        if (j != 0) {
            markMessagesContentAsReadInternal(j, arrayList, i2);
            return;
        }
        try {
            try {
                LongSparseArray longSparseArray = new LongSparseArray();
                LongSparseArray longSparseArray2 = new LongSparseArray();
                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT uid, mid, ttl FROM messages_v2 WHERE mid IN (%s) AND is_channel = 0", TextUtils.join(",", arrayList)), new Object[0]);
                while (sQLiteCursorQueryFinalized.next()) {
                    try {
                        long jLongValue = sQLiteCursorQueryFinalized.longValue(0);
                        int iIntValue = sQLiteCursorQueryFinalized.intValue(1);
                        int iIntValue2 = sQLiteCursorQueryFinalized.intValue(2);
                        if (iIntValue2 <= 0 || iIntValue2 == Integer.MAX_VALUE || i == 0 || (i3 = iIntValue2 + i) < i2) {
                            ArrayList arrayList3 = (ArrayList) longSparseArray.get(jLongValue);
                            if (arrayList3 == null) {
                                arrayList3 = new ArrayList();
                                longSparseArray.put(jLongValue, arrayList3);
                            }
                            arrayList2 = arrayList3;
                        } else {
                            SparseArray sparseArray = (SparseArray) longSparseArray2.get(jLongValue);
                            if (sparseArray == null) {
                                sparseArray = new SparseArray();
                                longSparseArray2.put(jLongValue, sparseArray);
                            }
                            arrayList2 = (ArrayList) sparseArray.get(i3);
                            if (arrayList2 == null) {
                                arrayList2 = new ArrayList();
                                sparseArray.put(i3, arrayList2);
                            }
                        }
                        arrayList2.add(Integer.valueOf(iIntValue));
                    } catch (Exception e2) {
                        e = e2;
                        checkSQLException(e);
                        if (sQLiteCursorQueryFinalized != null) {
                            sQLiteCursorQueryFinalized.dispose();
                            return;
                        }
                        return;
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
                int size = longSparseArray.size();
                for (int i4 = 0; i4 < size; i4++) {
                    markMessagesContentAsReadInternal(longSparseArray.keyAt(i4), (ArrayList) longSparseArray.valueAt(i4), i2);
                }
                int size2 = longSparseArray2.size();
                for (int i5 = 0; i5 < size2; i5++) {
                    createTaskForSecretMedia(longSparseArray2.keyAt(i5), (SparseArray) longSparseArray2.valueAt(i5));
                }
            } catch (Throwable th2) {
                th = th2;
                sQLiteCursor = arrayList;
                if (sQLiteCursor != 0) {
                    sQLiteCursor.dispose();
                }
                throw th;
            }
        } catch (Exception e3) {
            sQLiteCursorQueryFinalized = null;
            e = e3;
        } catch (Throwable th3) {
            sQLiteCursor = 0;
            th = th3;
            if (sQLiteCursor != 0) {
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$new$0() throws Exception {
        openDatabase(1);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onDeleteQueryComplete$86(long j) {
        try {
            this.database.executeFast("DELETE FROM media_counts_v2 WHERE uid = " + j).stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onReactionsUpdate$100(ArrayList arrayList) {
        HashSet<Long> hashSet = new HashSet<>();
        LongSparseArray longSparseArray = new LongSparseArray();
        LongSparseArray longSparseArray2 = new LongSparseArray();
        boolean z = false;
        for (int i = 0; i < arrayList.size(); i++) {
            SavedReactionsUpdate savedReactionsUpdate = (SavedReactionsUpdate) arrayList.get(i);
            TLRPC.TL_messageReactions tL_messageReactions = savedReactionsUpdate.old;
            TLRPC.TL_messageReactions tL_messageReactions2 = savedReactionsUpdate.last;
            longSparseArray.clear();
            longSparseArray2.clear();
            if (tL_messageReactions != null && tL_messageReactions.results != null && tL_messageReactions.reactions_as_tags) {
                for (int i2 = 0; i2 < tL_messageReactions.results.size(); i2++) {
                    ReactionsLayoutInBubble.VisibleReaction visibleReactionFromTL = ReactionsLayoutInBubble.VisibleReaction.fromTL(((TLRPC.ReactionCount) tL_messageReactions.results.get(i2)).reaction);
                    if (visibleReactionFromTL != null) {
                        longSparseArray.put(visibleReactionFromTL.hash, visibleReactionFromTL);
                    }
                }
            }
            if (tL_messageReactions2 != null && tL_messageReactions2.results != null && tL_messageReactions2.reactions_as_tags) {
                for (int i3 = 0; i3 < tL_messageReactions2.results.size(); i3++) {
                    ReactionsLayoutInBubble.VisibleReaction visibleReactionFromTL2 = ReactionsLayoutInBubble.VisibleReaction.fromTL(((TLRPC.ReactionCount) tL_messageReactions2.results.get(i3)).reaction);
                    if (visibleReactionFromTL2 != null) {
                        longSparseArray2.put(visibleReactionFromTL2.hash, visibleReactionFromTL2);
                    }
                }
            }
            for (int i4 = 0; i4 < longSparseArray.size(); i4++) {
                long jKeyAt = longSparseArray.keyAt(i4);
                ReactionsLayoutInBubble.VisibleReaction visibleReaction = (ReactionsLayoutInBubble.VisibleReaction) longSparseArray.valueAt(i4);
                if (!longSparseArray2.containsKey(jKeyAt) && getMessagesController().updateSavedReactionTags(savedReactionsUpdate.topic_id, visibleReaction, false, false)) {
                    hashSet.add(Long.valueOf(savedReactionsUpdate.topic_id));
                    z = true;
                }
            }
            for (int i5 = 0; i5 < longSparseArray2.size(); i5++) {
                long jKeyAt2 = longSparseArray2.keyAt(i5);
                ReactionsLayoutInBubble.VisibleReaction visibleReaction2 = (ReactionsLayoutInBubble.VisibleReaction) longSparseArray2.valueAt(i5);
                if (!longSparseArray.containsKey(jKeyAt2) && getMessagesController().updateSavedReactionTags(savedReactionsUpdate.topic_id, visibleReaction2, true, false)) {
                    hashSet.add(Long.valueOf(savedReactionsUpdate.topic_id));
                    z = true;
                }
            }
        }
        if (!z || hashSet.isEmpty()) {
            return;
        }
        getMessagesController().updateSavedReactionTags(hashSet);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onReactionsUpdate$101(TLRPC.TL_messageReactions tL_messageReactions, TLRPC.TL_messageReactions tL_messageReactions2, long j) {
        LongSparseArray longSparseArray = new LongSparseArray();
        LongSparseArray longSparseArray2 = new LongSparseArray();
        if (tL_messageReactions != null && tL_messageReactions.results != null && tL_messageReactions.reactions_as_tags) {
            for (int i = 0; i < tL_messageReactions.results.size(); i++) {
                ReactionsLayoutInBubble.VisibleReaction visibleReactionFromTL = ReactionsLayoutInBubble.VisibleReaction.fromTL(((TLRPC.ReactionCount) tL_messageReactions.results.get(i)).reaction);
                longSparseArray.put(visibleReactionFromTL.hash, visibleReactionFromTL);
            }
        }
        if (tL_messageReactions2 != null && tL_messageReactions2.results != null && tL_messageReactions2.reactions_as_tags) {
            for (int i2 = 0; i2 < tL_messageReactions2.results.size(); i2++) {
                ReactionsLayoutInBubble.VisibleReaction visibleReactionFromTL2 = ReactionsLayoutInBubble.VisibleReaction.fromTL(((TLRPC.ReactionCount) tL_messageReactions2.results.get(i2)).reaction);
                longSparseArray2.put(visibleReactionFromTL2.hash, visibleReactionFromTL2);
            }
        }
        boolean z = false;
        for (int i3 = 0; i3 < longSparseArray.size(); i3++) {
            long jKeyAt = longSparseArray.keyAt(i3);
            ReactionsLayoutInBubble.VisibleReaction visibleReaction = (ReactionsLayoutInBubble.VisibleReaction) longSparseArray.valueAt(i3);
            if (!longSparseArray2.containsKey(jKeyAt)) {
                z = getMessagesController().updateSavedReactionTags(j, visibleReaction, false, false) || z;
            }
        }
        for (int i4 = 0; i4 < longSparseArray2.size(); i4++) {
            long jKeyAt2 = longSparseArray2.keyAt(i4);
            ReactionsLayoutInBubble.VisibleReaction visibleReaction2 = (ReactionsLayoutInBubble.VisibleReaction) longSparseArray2.valueAt(i4);
            if (!longSparseArray.containsKey(jKeyAt2)) {
                z = getMessagesController().updateSavedReactionTags(j, visibleReaction2, true, false) || z;
            }
        }
        if (z) {
            if (j != 0) {
                getMessagesController().updateSavedReactionTags(0L);
            }
            getMessagesController().updateSavedReactionTags(j);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openDatabase$1() {
        if (this.databaseMigrationInProgress) {
            this.databaseMigrationInProgress = false;
            NotificationCenter.getInstance(this.currentAccount).lambda$postNotificationNameOnUIThread$1(NotificationCenter.onDatabaseMigration, Boolean.FALSE);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openDatabase$2() {
        this.showClearDatabaseAlert = false;
        NotificationCenter.getInstance(this.currentAccount).lambda$postNotificationNameOnUIThread$1(NotificationCenter.onDatabaseOpened, new Object[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$overwriteChannel$183(long j, TLRPC.TL_updates_channelDifferenceTooLong tL_updates_channelDifferenceTooLong) {
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.removeAllMessagesFromDialog, Long.valueOf(j), Boolean.TRUE, tL_updates_channelDifferenceTooLong);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:14:0x0229  */
    /* JADX WARN: Removed duplicated region for block: B:15:0x022b  */
    /* JADX WARN: Removed duplicated region for block: B:18:0x0258  */
    /* JADX WARN: Removed duplicated region for block: B:26:0x0272 A[Catch: all -> 0x0262, Exception -> 0x0265, TRY_LEAVE, TryCatch #5 {Exception -> 0x0265, all -> 0x0262, blocks: (B:3:0x000a, B:12:0x003c, B:16:0x022c, B:19:0x025a, B:24:0x0268, B:26:0x0272), top: B:46:0x000a }] */
    /* JADX WARN: Removed duplicated region for block: B:36:0x028d  */
    /* JADX WARN: Removed duplicated region for block: B:40:0x0294  */
    /* JADX WARN: Removed duplicated region for block: B:50:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$overwriteChannel$184(long j, int i, final TLRPC.TL_updates_channelDifferenceTooLong tL_updates_channelDifferenceTooLong, Runnable runnable) throws Throwable {
        SQLiteCursor sQLiteCursor;
        SQLiteCursor sQLiteCursorQueryFinalized;
        int iIntValue;
        boolean z;
        final long j2 = -j;
        try {
            sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT pinned FROM dialogs WHERE did = " + j2, new Object[0]);
        } catch (Exception e) {
            e = e;
            sQLiteCursor = null;
        } catch (Throwable th) {
            th = th;
            sQLiteCursor = null;
        }
        try {
        } catch (Exception e2) {
            e = e2;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            try {
                checkSQLException(e);
                if (sQLiteCursor != null) {
                    sQLiteCursor.dispose();
                }
                if (runnable != null) {
                }
            } catch (Throwable th2) {
                th = th2;
                if (sQLiteCursor != null) {
                    sQLiteCursor.dispose();
                }
                throw th;
            }
        } catch (Throwable th3) {
            th = th3;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            if (sQLiteCursor != null) {
            }
            throw th;
        }
        if (!sQLiteCursorQueryFinalized.next()) {
            iIntValue = 0;
            z = i != 0;
            sQLiteCursorQueryFinalized.dispose();
            this.database.executeFast("DELETE FROM chat_pinned_count WHERE uid = " + j2).stepThis().dispose();
            this.database.executeFast("DELETE FROM chat_pinned_v2 WHERE uid = " + j2).stepThis().dispose();
            this.database.executeFast("DELETE FROM messages_v2 WHERE uid = " + j2).stepThis().dispose();
            this.database.executeFast("DELETE FROM bot_keyboard WHERE uid = " + j2).stepThis().dispose();
            this.database.executeFast("DELETE FROM bot_keyboard_topics WHERE uid = " + j2).stepThis().dispose();
            this.database.executeFast("UPDATE media_counts_v2 SET old = 1 WHERE uid = " + j2).stepThis().dispose();
            this.database.executeFast("DELETE FROM media_v4 WHERE uid = " + j2).stepThis().dispose();
            this.database.executeFast("DELETE FROM messages_holes WHERE uid = " + j2).stepThis().dispose();
            this.database.executeFast("DELETE FROM media_holes_v2 WHERE uid = " + j2).stepThis().dispose();
            this.database.executeFast("DELETE FROM topics WHERE did = " + j2).stepThis().dispose();
            this.database.executeFast("DELETE FROM media_topics WHERE uid = " + j2).stepThis().dispose();
            this.database.executeFast("DELETE FROM media_holes_topics WHERE uid = " + j2).stepThis().dispose();
            this.database.executeFast("UPDATE media_counts_topics SET old = 1 WHERE uid = " + j2).stepThis().dispose();
            this.database.executeFast("DELETE FROM messages_topics WHERE uid = " + j2).stepThis().dispose();
            this.database.executeFast("DELETE FROM messages_holes_topics WHERE uid = " + j2).stepThis().dispose();
            getMediaDataController().clearBotKeyboard(j2);
            TLRPC.TL_messages_dialogs tL_messages_dialogs = new TLRPC.TL_messages_dialogs();
            tL_messages_dialogs.chats.addAll(tL_updates_channelDifferenceTooLong.chats);
            tL_messages_dialogs.users.addAll(tL_updates_channelDifferenceTooLong.users);
            tL_messages_dialogs.messages.addAll(tL_updates_channelDifferenceTooLong.messages);
            TLRPC.Dialog dialog = tL_updates_channelDifferenceTooLong.dialog;
            dialog.id = j2;
            dialog.flags = 1;
            dialog.notify_settings = null;
            dialog.pinned = iIntValue == 0;
            dialog.pinnedNum = iIntValue;
            tL_messages_dialogs.dialogs.add(dialog);
            putDialogsInternal(tL_messages_dialogs, 0);
            updateDialogsWithDeletedMessages(j2, j, new ArrayList<>(), null, false);
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda116
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$overwriteChannel$183(j2, tL_updates_channelDifferenceTooLong);
                }
            });
            if (z) {
                if (i == 1) {
                    getMessagesController().checkChatInviter(j, true);
                } else {
                    getMessagesController().generateJoinMessage(j, false);
                }
            }
            if (i != 1) {
                getMessagesController().getTopicsController().reloadTopics(j);
            }
            if (runnable != null) {
                runnable.run();
                return;
            }
            return;
        }
        iIntValue = sQLiteCursorQueryFinalized.intValue(0);
        sQLiteCursorQueryFinalized.dispose();
        this.database.executeFast("DELETE FROM chat_pinned_count WHERE uid = " + j2).stepThis().dispose();
        this.database.executeFast("DELETE FROM chat_pinned_v2 WHERE uid = " + j2).stepThis().dispose();
        this.database.executeFast("DELETE FROM messages_v2 WHERE uid = " + j2).stepThis().dispose();
        this.database.executeFast("DELETE FROM bot_keyboard WHERE uid = " + j2).stepThis().dispose();
        this.database.executeFast("DELETE FROM bot_keyboard_topics WHERE uid = " + j2).stepThis().dispose();
        this.database.executeFast("UPDATE media_counts_v2 SET old = 1 WHERE uid = " + j2).stepThis().dispose();
        this.database.executeFast("DELETE FROM media_v4 WHERE uid = " + j2).stepThis().dispose();
        this.database.executeFast("DELETE FROM messages_holes WHERE uid = " + j2).stepThis().dispose();
        this.database.executeFast("DELETE FROM media_holes_v2 WHERE uid = " + j2).stepThis().dispose();
        this.database.executeFast("DELETE FROM topics WHERE did = " + j2).stepThis().dispose();
        this.database.executeFast("DELETE FROM media_topics WHERE uid = " + j2).stepThis().dispose();
        this.database.executeFast("DELETE FROM media_holes_topics WHERE uid = " + j2).stepThis().dispose();
        this.database.executeFast("UPDATE media_counts_topics SET old = 1 WHERE uid = " + j2).stepThis().dispose();
        this.database.executeFast("DELETE FROM messages_topics WHERE uid = " + j2).stepThis().dispose();
        this.database.executeFast("DELETE FROM messages_holes_topics WHERE uid = " + j2).stepThis().dispose();
        getMediaDataController().clearBotKeyboard(j2);
        TLRPC.TL_messages_dialogs tL_messages_dialogs2 = new TLRPC.TL_messages_dialogs();
        tL_messages_dialogs2.chats.addAll(tL_updates_channelDifferenceTooLong.chats);
        tL_messages_dialogs2.users.addAll(tL_updates_channelDifferenceTooLong.users);
        tL_messages_dialogs2.messages.addAll(tL_updates_channelDifferenceTooLong.messages);
        TLRPC.Dialog dialog2 = tL_updates_channelDifferenceTooLong.dialog;
        dialog2.id = j2;
        dialog2.flags = 1;
        dialog2.notify_settings = null;
        dialog2.pinned = iIntValue == 0;
        dialog2.pinnedNum = iIntValue;
        tL_messages_dialogs2.dialogs.add(dialog2);
        putDialogsInternal(tL_messages_dialogs2, 0);
        updateDialogsWithDeletedMessages(j2, j, new ArrayList<>(), null, false);
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda116
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$overwriteChannel$183(j2, tL_updates_channelDifferenceTooLong);
            }
        });
        if (z) {
        }
        if (i != 1) {
        }
        if (runnable != null) {
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public static /* synthetic */ int lambda$processLoadedFilterPeersInternal$67(MessagesController.DialogFilter dialogFilter, MessagesController.DialogFilter dialogFilter2) {
        int i = dialogFilter.order;
        int i2 = dialogFilter2.order;
        if (i > i2) {
            return 1;
        }
        return i < i2 ? -1 : 0;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Can't wrap try/catch for region: R(14:(5:16|17|18|(1:20)(5:21|117|22|(1:24)(1:29)|30)|31)(5:41|42|43|44|(14:46|109|58|112|59|60|(1:62)|(1:71)|72|(1:74)|75|(1:127)|96|97)(6:114|47|122|48|(1:50)(1:55)|56))|109|58|112|59|60|(0)|(2:69|71)|72|(0)|75|(0)|96|97) */
    /* JADX WARN: Can't wrap try/catch for region: R(20:0|2|(2:120|3)|(7:124|4|(1:6)(1:11)|12|13|14|116)|(5:16|17|18|(1:20)(5:21|117|22|(1:24)(1:29)|30)|31)(5:41|42|43|44|(14:46|109|58|112|59|60|(1:62)|(1:71)|72|(1:74)|75|(1:127)|96|97)(6:114|47|122|48|(1:50)(1:55)|56))|32|109|58|112|59|60|(0)|(2:69|71)|72|(0)|75|(0)|96|97|(1:(0))) */
    /* JADX WARN: Code restructure failed: missing block: B:100:0x01ae, code lost:
    
        r11.dispose();
     */
    /* JADX WARN: Code restructure failed: missing block: B:102:0x01b3, code lost:
    
        r4.dispose();
     */
    /* JADX WARN: Code restructure failed: missing block: B:105:0x01ba, code lost:
    
        r1.commitTransaction();
     */
    /* JADX WARN: Code restructure failed: missing block: B:128:?, code lost:
    
        return;
     */
    /* JADX WARN: Code restructure failed: missing block: B:65:0x015f, code lost:
    
        r0 = e;
     */
    /* JADX WARN: Code restructure failed: missing block: B:78:0x0183, code lost:
    
        r0 = th;
     */
    /* JADX WARN: Code restructure failed: missing block: B:79:0x0184, code lost:
    
        r11 = r1;
        r17 = r17;
     */
    /* JADX WARN: Code restructure failed: missing block: B:80:0x0186, code lost:
    
        r0 = e;
     */
    /* JADX WARN: Code restructure failed: missing block: B:81:0x0187, code lost:
    
        r11 = r1;
     */
    /* JADX WARN: Code restructure failed: missing block: B:91:0x019a, code lost:
    
        r11.dispose();
     */
    /* JADX WARN: Code restructure failed: missing block: B:93:0x019f, code lost:
    
        r17.dispose();
     */
    /* JADX WARN: Code restructure failed: missing block: B:98:0x01aa, code lost:
    
        r4 = r17;
     */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:100:0x01ae  */
    /* JADX WARN: Removed duplicated region for block: B:102:0x01b3  */
    /* JADX WARN: Removed duplicated region for block: B:105:0x01ba  */
    /* JADX WARN: Removed duplicated region for block: B:127:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:128:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:62:0x0151 A[Catch: all -> 0x015d, Exception -> 0x015f, TryCatch #6 {Exception -> 0x015f, blocks: (B:58:0x012a, B:60:0x0146, B:62:0x0151, B:69:0x0165, B:71:0x016b, B:72:0x0176), top: B:109:0x012a }] */
    /* JADX WARN: Removed duplicated region for block: B:74:0x017b  */
    /* JADX WARN: Removed duplicated region for block: B:91:0x019a  */
    /* JADX WARN: Removed duplicated region for block: B:93:0x019f  */
    /* JADX WARN: Type inference failed for: r17v0 */
    /* JADX WARN: Type inference failed for: r17v1 */
    /* JADX WARN: Type inference failed for: r17v3, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r17v4 */
    /* JADX WARN: Type inference failed for: r17v5 */
    /* JADX WARN: Type inference failed for: r17v6 */
    /* JADX WARN: Type inference failed for: r17v7, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r17v8 */
    /* JADX WARN: Type inference failed for: r1v26, types: [org.telegram.SQLite.SQLitePreparedStatement] */
    /* JADX WARN: Type inference failed for: r1v27 */
    /* JADX WARN: Type inference failed for: r1v28 */
    /* JADX WARN: Type inference failed for: r1v30, types: [org.telegram.SQLite.SQLitePreparedStatement] */
    /* JADX WARN: Type inference failed for: r1v5, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r1v7, types: [boolean] */
    /* JADX WARN: Type inference failed for: r1v8 */
    /* JADX WARN: Type inference failed for: r1v9 */
    /* JADX WARN: Type inference failed for: r4v0 */
    /* JADX WARN: Type inference failed for: r4v1, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r4v10 */
    /* JADX WARN: Type inference failed for: r4v14 */
    /* JADX WARN: Type inference failed for: r4v15 */
    /* JADX WARN: Type inference failed for: r4v17, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r4v19 */
    /* JADX WARN: Type inference failed for: r4v2 */
    /* JADX WARN: Type inference failed for: r4v22, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r4v23 */
    /* JADX WARN: Type inference failed for: r4v24 */
    /* JADX WARN: Type inference failed for: r4v25 */
    /* JADX WARN: Type inference failed for: r4v26 */
    /* JADX WARN: Type inference failed for: r4v3 */
    /* JADX WARN: Type inference failed for: r4v6 */
    /* JADX WARN: Type inference failed for: r4v7 */
    /* JADX WARN: Type inference failed for: r4v8 */
    /* JADX WARN: Type inference failed for: r4v9 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$processPendingRead$140(long j, int i, int i2, int i3, int i4) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement;
        ?? r17;
        ?? QueryFinalized;
        SQLiteDatabase sQLiteDatabase;
        SQLiteDatabase sQLiteDatabase2;
        int iMax;
        ?? QueryFinalized2;
        long jLongValue;
        int iIntValue;
        int iIntValue2;
        int i5;
        ?? IsEncryptedDialog;
        int i6;
        int i7;
        int iMax2 = i4;
        SQLitePreparedStatement sQLitePreparedStatement2 = null;
        try {
            iMax = 0;
            QueryFinalized2 = this.database.queryFinalized("SELECT unread_count, inbox_max, last_mid FROM dialogs WHERE did = " + j, new Object[0]);
        } catch (Exception e) {
            e = e;
            r17 = sQLitePreparedStatement2;
        } catch (Throwable th) {
            th = th;
            sQLitePreparedStatement = sQLitePreparedStatement2;
        }
        try {
            if (QueryFinalized2.next()) {
                iIntValue = QueryFinalized2.intValue(0);
                iIntValue2 = QueryFinalized2.intValue(1);
                jLongValue = QueryFinalized2.longValue(2);
                i5 = iIntValue;
            } else {
                jLongValue = 0;
                iIntValue = 0;
                iIntValue2 = 0;
                i5 = 0;
            }
            QueryFinalized2.dispose();
            this.database.beginTransaction();
            IsEncryptedDialog = DialogObject.isEncryptedDialog(j);
            try {
            } catch (Exception e2) {
                e = e2;
                QueryFinalized = null;
            } catch (Throwable th2) {
                th = th2;
                QueryFinalized = null;
            }
        } catch (Exception e3) {
            e = e3;
            r17 = QueryFinalized2;
        } catch (Throwable th3) {
            th = th3;
            sQLitePreparedStatement = QueryFinalized2;
            QueryFinalized = sQLitePreparedStatement;
            if (sQLitePreparedStatement2 != null) {
            }
            if (QueryFinalized != null) {
            }
            sQLiteDatabase = this.database;
            if (sQLiteDatabase != null) {
            }
            throw th;
        }
        try {
            if (IsEncryptedDialog == 0) {
                iMax2 = Math.max(iIntValue2, i);
                IsEncryptedDialog = this.database.executeFast("UPDATE messages_v2 SET read_state = read_state | 1 WHERE uid = ? AND mid <= ? AND read_state IN(0,2) AND out = 0");
                IsEncryptedDialog.requery();
                IsEncryptedDialog.bindLong(1, j);
                IsEncryptedDialog.bindInteger(2, iMax2);
                IsEncryptedDialog.step();
                IsEncryptedDialog.dispose();
                i6 = iIntValue2;
                if (iMax2 >= jLongValue) {
                    QueryFinalized = null;
                } else {
                    QueryFinalized = this.database.queryFinalized("SELECT changes()", new Object[0]);
                    try {
                        int iIntValue3 = QueryFinalized.next() ? QueryFinalized.intValue(0) + i2 : 0;
                        QueryFinalized.dispose();
                        iMax = Math.max(0, iIntValue - iIntValue3);
                    } catch (Exception e4) {
                        e = e4;
                        sQLitePreparedStatement2 = IsEncryptedDialog;
                        r17 = QueryFinalized;
                        checkSQLException(e);
                        if (sQLitePreparedStatement2 != null) {
                        }
                        if (r17 != 0) {
                        }
                        sQLiteDatabase2 = this.database;
                        if (sQLiteDatabase2 == null) {
                        }
                        sQLiteDatabase2.commitTransaction();
                        return;
                    } catch (Throwable th4) {
                        th = th4;
                        sQLitePreparedStatement2 = IsEncryptedDialog;
                        if (sQLitePreparedStatement2 != null) {
                        }
                        if (QueryFinalized != null) {
                        }
                        sQLiteDatabase = this.database;
                        if (sQLiteDatabase != null) {
                        }
                        throw th;
                    }
                }
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("DELETE FROM unread_push_messages WHERE uid = ? AND mid <= ?");
                sQLitePreparedStatementExecuteFast.requery();
                sQLitePreparedStatementExecuteFast.bindLong(1, j);
                sQLitePreparedStatementExecuteFast.bindInteger(2, iMax2);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
                IsEncryptedDialog = this.database.executeFast("DELETE FROM unread_push_messages WHERE uid = ? AND date <= ?");
                IsEncryptedDialog.requery();
                IsEncryptedDialog.bindLong(1, j);
                IsEncryptedDialog.bindInteger(2, i3);
                IsEncryptedDialog.step();
                IsEncryptedDialog.dispose();
            } else {
                i6 = iIntValue2;
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE messages_v2 SET read_state = read_state | 1 WHERE uid = ? AND mid >= ? AND read_state IN(0,2) AND out = 0");
                sQLitePreparedStatementExecuteFast2.requery();
                sQLitePreparedStatementExecuteFast2.bindLong(1, j);
                sQLitePreparedStatementExecuteFast2.bindInteger(2, iMax2);
                sQLitePreparedStatementExecuteFast2.step();
                sQLitePreparedStatementExecuteFast2.dispose();
                if (iMax2 <= jLongValue) {
                    r17 = 0;
                    i7 = 0;
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast3 = this.database.executeFast("UPDATE dialogs SET unread_count = ?, inbox_max = ? WHERE did = ?");
                    sQLitePreparedStatementExecuteFast3.requery();
                    sQLitePreparedStatementExecuteFast3.bindInteger(1, i7);
                    sQLitePreparedStatementExecuteFast3.bindInteger(2, iMax2);
                    sQLitePreparedStatementExecuteFast3.bindLong(3, j);
                    sQLitePreparedStatementExecuteFast3.step();
                    sQLitePreparedStatementExecuteFast3.dispose();
                    this.database.commitTransaction();
                    if (isMonoForumOrForumWithTabs(j)) {
                        updateTopicsWithReadFromAllInternal(j, i6, iMax2);
                    }
                    if (i5 != 0 && i7 == 0 && !isForum(j)) {
                        LongSparseIntArray longSparseIntArray = new LongSparseIntArray();
                        longSparseIntArray.put(j, i7);
                        updateFiltersReadCounter(longSparseIntArray, null, true);
                    }
                    updateWidgets(j);
                    if (r17 != 0) {
                        r17.dispose();
                    }
                    sQLiteDatabase2 = this.database;
                    if (sQLiteDatabase2 == null) {
                        return;
                    }
                    sQLiteDatabase2.commitTransaction();
                    return;
                }
                try {
                    QueryFinalized = this.database.queryFinalized("SELECT changes()", new Object[0]);
                } catch (Exception e5) {
                    e = e5;
                    QueryFinalized = null;
                } catch (Throwable th5) {
                    th = th5;
                    QueryFinalized = null;
                }
                try {
                    int iIntValue4 = QueryFinalized.next() ? QueryFinalized.intValue(0) + i2 : 0;
                    QueryFinalized.dispose();
                    iMax = Math.max(0, iIntValue - iIntValue4);
                } catch (Exception e6) {
                    e = e6;
                    r17 = QueryFinalized;
                    checkSQLException(e);
                    if (sQLitePreparedStatement2 != null) {
                    }
                    if (r17 != 0) {
                    }
                    sQLiteDatabase2 = this.database;
                    if (sQLiteDatabase2 == null) {
                    }
                    sQLiteDatabase2.commitTransaction();
                    return;
                } catch (Throwable th6) {
                    th = th6;
                    if (sQLitePreparedStatement2 != null) {
                    }
                    if (QueryFinalized != null) {
                    }
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase != null) {
                    }
                    throw th;
                }
            }
            SQLitePreparedStatement sQLitePreparedStatementExecuteFast32 = this.database.executeFast("UPDATE dialogs SET unread_count = ?, inbox_max = ? WHERE did = ?");
            sQLitePreparedStatementExecuteFast32.requery();
            sQLitePreparedStatementExecuteFast32.bindInteger(1, i7);
            sQLitePreparedStatementExecuteFast32.bindInteger(2, iMax2);
            sQLitePreparedStatementExecuteFast32.bindLong(3, j);
            sQLitePreparedStatementExecuteFast32.step();
            sQLitePreparedStatementExecuteFast32.dispose();
            this.database.commitTransaction();
            if (isMonoForumOrForumWithTabs(j)) {
            }
            if (i5 != 0) {
                LongSparseIntArray longSparseIntArray2 = new LongSparseIntArray();
                longSparseIntArray2.put(j, i7);
                updateFiltersReadCounter(longSparseIntArray2, null, true);
            }
            updateWidgets(j);
            if (r17 != 0) {
            }
            sQLiteDatabase2 = this.database;
            if (sQLiteDatabase2 == null) {
            }
            sQLiteDatabase2.commitTransaction();
            return;
        } catch (Throwable th7) {
            th = th7;
            Object obj = r17;
        }
        i7 = iMax;
        r17 = QueryFinalized;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:46:0x0131  */
    /* JADX WARN: Removed duplicated region for block: B:48:0x0136  */
    /* JADX WARN: Removed duplicated region for block: B:51:0x013d A[PHI: r0 r2 r12
      0x013d: PHI (r0v5 org.telegram.SQLite.SQLitePreparedStatement) = (r0v3 org.telegram.SQLite.SQLitePreparedStatement), (r0v0 org.telegram.SQLite.SQLitePreparedStatement) binds: [B:50:0x013b, B:34:0x011f] A[DONT_GENERATE, DONT_INLINE]
      0x013d: PHI (r2v6 org.telegram.SQLite.SQLitePreparedStatement) = (r2v4 org.telegram.SQLite.SQLitePreparedStatement), (r2v15 org.telegram.SQLite.SQLitePreparedStatement) binds: [B:50:0x013b, B:34:0x011f] A[DONT_GENERATE, DONT_INLINE]
      0x013d: PHI (r12v7 org.telegram.SQLite.SQLiteDatabase) = (r12v6 org.telegram.SQLite.SQLiteDatabase), (r12v18 org.telegram.SQLite.SQLiteDatabase) binds: [B:50:0x013b, B:34:0x011f] A[DONT_GENERATE, DONT_INLINE]] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$putCachedPhoneBook$144(HashMap map, boolean z) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLiteDatabase sQLiteDatabase;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                if (BuildVars.LOGS_ENABLED) {
                    FileLog.d(this.currentAccount + " save contacts to db " + map.size());
                }
                this.database.executeFast("DELETE FROM user_contacts_v7 WHERE 1").stepThis().dispose();
                this.database.executeFast("DELETE FROM user_phones_v7 WHERE 1").stepThis().dispose();
                this.database.beginTransaction();
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("REPLACE INTO user_contacts_v7 VALUES(?, ?, ?, ?, ?)");
                try {
                    sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO user_phones_v7 VALUES(?, ?, ?, ?)");
                    try {
                        Iterator it = map.entrySet().iterator();
                        while (true) {
                            if (!it.hasNext()) {
                                break;
                            }
                            ContactsController.Contact contact = (ContactsController.Contact) ((Map.Entry) it.next()).getValue();
                            if (!contact.phones.isEmpty() && !contact.shortPhones.isEmpty()) {
                                sQLitePreparedStatementExecuteFast2.requery();
                                sQLitePreparedStatementExecuteFast2.bindString(1, contact.key);
                                sQLitePreparedStatementExecuteFast2.bindInteger(2, contact.contact_id);
                                sQLitePreparedStatementExecuteFast2.bindString(3, contact.first_name);
                                sQLitePreparedStatementExecuteFast2.bindString(4, contact.last_name);
                                sQLitePreparedStatementExecuteFast2.bindInteger(5, contact.imported);
                                sQLitePreparedStatementExecuteFast2.step();
                                for (int i = 0; i < contact.phones.size(); i++) {
                                    sQLitePreparedStatementExecuteFast.requery();
                                    sQLitePreparedStatementExecuteFast.bindString(1, contact.key);
                                    sQLitePreparedStatementExecuteFast.bindString(2, contact.phones.get(i));
                                    sQLitePreparedStatementExecuteFast.bindString(3, contact.shortPhones.get(i));
                                    sQLitePreparedStatementExecuteFast.bindInteger(4, contact.phoneDeleted.get(i).intValue());
                                    sQLitePreparedStatementExecuteFast.step();
                                }
                            }
                        }
                        sQLitePreparedStatementExecuteFast2.dispose();
                        try {
                            sQLitePreparedStatementExecuteFast.dispose();
                            this.database.commitTransaction();
                            if (z) {
                                this.database.executeFast("DROP TABLE IF EXISTS user_contacts_v6;").stepThis().dispose();
                                this.database.executeFast("DROP TABLE IF EXISTS user_phones_v6;").stepThis().dispose();
                                getCachedPhoneBook(false);
                            }
                            sQLiteDatabase = this.database;
                        } catch (Exception e) {
                            e = e;
                            checkSQLException(e);
                            if (sQLitePreparedStatement != null) {
                                sQLitePreparedStatement.dispose();
                            }
                            if (sQLitePreparedStatementExecuteFast != null) {
                                sQLitePreparedStatementExecuteFast.dispose();
                            }
                            sQLiteDatabase = this.database;
                            if (sQLiteDatabase != null) {
                            }
                        }
                    } catch (Exception e2) {
                        e = e2;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                        checkSQLException(e);
                        if (sQLitePreparedStatement != null) {
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                        }
                        sQLiteDatabase = this.database;
                        if (sQLiteDatabase != null) {
                        }
                    } catch (Throwable th) {
                        th = th;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                            sQLitePreparedStatementExecuteFast.dispose();
                        }
                        SQLiteDatabase sQLiteDatabase2 = this.database;
                        if (sQLiteDatabase2 != null) {
                            sQLiteDatabase2.commitTransaction();
                        }
                        throw th;
                    }
                } catch (Exception e3) {
                    e = e3;
                    sQLitePreparedStatementExecuteFast = null;
                } catch (Throwable th2) {
                    th = th2;
                    sQLitePreparedStatementExecuteFast = null;
                }
            } catch (Throwable th3) {
                th = th3;
            }
        } catch (Exception e4) {
            e = e4;
            sQLitePreparedStatementExecuteFast = null;
        } catch (Throwable th4) {
            th = th4;
            sQLitePreparedStatementExecuteFast = null;
        }
        if (sQLiteDatabase != null) {
            sQLiteDatabase.commitTransaction();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$putChannelAdmins$119(long j, LongSparseArray longSparseArray) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                this.database.executeFast("DELETE FROM channel_admins_v3 WHERE did = " + j).stepThis().dispose();
                this.database.beginTransaction();
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO channel_admins_v3 VALUES(?, ?, ?)");
                for (int i = 0; i < longSparseArray.size(); i++) {
                    try {
                        sQLitePreparedStatementExecuteFast.requery();
                        sQLitePreparedStatementExecuteFast.bindLong(1, j);
                        sQLitePreparedStatementExecuteFast.bindLong(2, longSparseArray.keyAt(i));
                        TLRPC.ChannelParticipant channelParticipant = (TLRPC.ChannelParticipant) longSparseArray.valueAt(i);
                        NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(channelParticipant.getObjectSize());
                        channelParticipant.serializeToStream(nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast.bindByteBuffer(3, nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast.step();
                        nativeByteBuffer.reuse();
                    } catch (Exception e) {
                        e = e;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        checkSQLException(e);
                        SQLiteDatabase sQLiteDatabase = this.database;
                        if (sQLiteDatabase != null) {
                            sQLiteDatabase.commitTransaction();
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                            return;
                        }
                        return;
                    } catch (Throwable th) {
                        th = th;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        SQLiteDatabase sQLiteDatabase2 = this.database;
                        if (sQLiteDatabase2 != null) {
                            sQLiteDatabase2.commitTransaction();
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        throw th;
                    }
                }
                sQLitePreparedStatementExecuteFast.dispose();
                this.database.commitTransaction();
                SQLiteDatabase sQLiteDatabase3 = this.database;
                if (sQLiteDatabase3 != null) {
                    sQLiteDatabase3.commitTransaction();
                }
            } catch (Exception e2) {
                e = e2;
            }
        } catch (Throwable th2) {
            th = th2;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:126:0x022f  */
    /* JADX WARN: Removed duplicated region for block: B:146:0x0259  */
    /* JADX WARN: Removed duplicated region for block: B:150:0x0262  */
    /* JADX WARN: Removed duplicated region for block: B:154:0x0269  */
    /* JADX WARN: Removed duplicated region for block: B:158:0x0272  */
    /* JADX WARN: Removed duplicated region for block: B:199:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:46:0x00cf A[Catch: all -> 0x0229, Exception -> 0x022c, TRY_LEAVE, TryCatch #22 {Exception -> 0x022c, all -> 0x0229, blocks: (B:27:0x0071, B:29:0x0077, B:44:0x00c9, B:46:0x00cf), top: B:166:0x0071 }] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$putChannelViews$185(LongSparseArray longSparseArray, LongSparseArray longSparseArray2, LongSparseArray longSparseArray3, boolean z) throws Throwable {
        boolean z2;
        boolean z3;
        SQLitePreparedStatement sQLitePreparedStatement;
        boolean z4;
        SQLiteDatabase sQLiteDatabase;
        SQLiteDatabase sQLiteDatabase2;
        int iKeyAt;
        SQLiteDatabase sQLiteDatabase3;
        Locale locale;
        Integer numValueOf;
        Long lValueOf;
        TLRPC.MessageReplies tL_messageReplies;
        int i;
        int i2;
        int i3;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        LongSparseArray longSparseArray4 = longSparseArray3;
        int i4 = 2;
        char c = 1;
        try {
            this.database.beginTransaction();
            try {
                if (!isEmpty(longSparseArray)) {
                    try {
                        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE messages_v2 SET media = max((SELECT media FROM messages_v2 WHERE mid = ? AND uid = ?), ?) WHERE mid = ? AND uid = ?");
                        for (int i5 = 0; i5 < longSparseArray.size(); i5++) {
                            try {
                                long jKeyAt = longSparseArray.keyAt(i5);
                                SparseIntArray sparseIntArray = (SparseIntArray) longSparseArray.valueAt(i5);
                                int size = sparseIntArray.size();
                                for (int i6 = 0; i6 < size; i6++) {
                                    int iValueAt = sparseIntArray.valueAt(i6);
                                    int iKeyAt2 = sparseIntArray.keyAt(i6);
                                    sQLitePreparedStatementExecuteFast.requery();
                                    sQLitePreparedStatementExecuteFast.bindInteger(1, iKeyAt2);
                                    sQLitePreparedStatementExecuteFast.bindLong(2, jKeyAt);
                                    sQLitePreparedStatementExecuteFast.bindInteger(3, iValueAt);
                                    sQLitePreparedStatementExecuteFast.bindInteger(4, iKeyAt2);
                                    sQLitePreparedStatementExecuteFast.bindLong(5, jKeyAt);
                                    sQLitePreparedStatementExecuteFast.step();
                                }
                            } catch (Exception e) {
                                e = e;
                                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                z3 = true;
                                z4 = z3;
                                try {
                                    checkSQLException(e);
                                    if (z4) {
                                    }
                                    if (sQLitePreparedStatement != null) {
                                    }
                                } catch (Throwable th) {
                                    th = th;
                                }
                            } catch (Throwable th2) {
                                th = th2;
                                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                z2 = true;
                                z4 = z2;
                                if (z4) {
                                }
                                if (sQLitePreparedStatement != null) {
                                }
                                throw th;
                            }
                        }
                        sQLitePreparedStatementExecuteFast.dispose();
                    } catch (Exception e2) {
                        e = e2;
                        z3 = true;
                        sQLitePreparedStatement = null;
                        z4 = z3;
                        checkSQLException(e);
                        if (z4) {
                            sQLiteDatabase2.commitTransaction();
                        }
                        if (sQLitePreparedStatement != null) {
                        }
                    } catch (Throwable th3) {
                        th = th3;
                        z2 = true;
                        sQLitePreparedStatement = null;
                        z4 = z2;
                        if (z4) {
                        }
                        if (sQLitePreparedStatement != null) {
                        }
                        throw th;
                    }
                }
                try {
                    if (isEmpty(longSparseArray2)) {
                        if (isEmpty(longSparseArray3)) {
                        }
                        this.database.commitTransaction();
                        return;
                    }
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE messages_v2 SET forwards = max((SELECT forwards FROM messages_v2 WHERE mid = ? AND uid = ?), ?) WHERE mid = ? AND uid = ?");
                    for (int i7 = 0; i7 < longSparseArray2.size(); i7++) {
                        try {
                            long jKeyAt2 = longSparseArray2.keyAt(i7);
                            SparseIntArray sparseIntArray2 = (SparseIntArray) longSparseArray2.valueAt(i7);
                            int size2 = sparseIntArray2.size();
                            for (int i8 = 0; i8 < size2; i8++) {
                                int iValueAt2 = sparseIntArray2.valueAt(i8);
                                int iKeyAt3 = sparseIntArray2.keyAt(i8);
                                sQLitePreparedStatementExecuteFast2.requery();
                                sQLitePreparedStatementExecuteFast2.bindInteger(1, iKeyAt3);
                                sQLitePreparedStatementExecuteFast2.bindLong(2, jKeyAt2);
                                sQLitePreparedStatementExecuteFast2.bindInteger(3, iValueAt2);
                                sQLitePreparedStatementExecuteFast2.bindInteger(4, iKeyAt3);
                                sQLitePreparedStatementExecuteFast2.bindLong(5, jKeyAt2);
                                sQLitePreparedStatementExecuteFast2.step();
                            }
                        } catch (Exception e3) {
                            e = e3;
                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                            z4 = true;
                            checkSQLException(e);
                            if (z4) {
                            }
                            if (sQLitePreparedStatement != null) {
                            }
                        } catch (Throwable th4) {
                            th = th4;
                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                            z4 = true;
                            if (z4) {
                            }
                            if (sQLitePreparedStatement != null) {
                            }
                            throw th;
                        }
                    }
                    sQLitePreparedStatementExecuteFast2.dispose();
                    if (isEmpty(longSparseArray3)) {
                        SQLitePreparedStatement sQLitePreparedStatementExecuteFast3 = this.database.executeFast("UPDATE messages_v2 SET replies_data = ? WHERE mid = ? AND uid = ?");
                        int i9 = 0;
                        while (i9 < longSparseArray3.size()) {
                            try {
                                long jKeyAt3 = longSparseArray4.keyAt(i9);
                                SparseArray sparseArray = (SparseArray) longSparseArray4.valueAt(i9);
                                int size3 = sparseArray.size();
                                int i10 = 0;
                                while (i10 < size3) {
                                    try {
                                        iKeyAt = sparseArray.keyAt(i10);
                                        sQLiteDatabase3 = this.database;
                                        locale = Locale.US;
                                        numValueOf = Integer.valueOf(iKeyAt);
                                        lValueOf = Long.valueOf(jKeyAt3);
                                    } catch (Exception e4) {
                                        e = e4;
                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast3;
                                        z4 = true;
                                        checkSQLException(e);
                                        if (z4 && (sQLiteDatabase2 = this.database) != null) {
                                            sQLiteDatabase2.commitTransaction();
                                        }
                                        if (sQLitePreparedStatement != null) {
                                            sQLitePreparedStatement.dispose();
                                            return;
                                        }
                                        return;
                                    } catch (Throwable th5) {
                                        th = th5;
                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast3;
                                        z4 = true;
                                        if (z4) {
                                            sQLiteDatabase.commitTransaction();
                                        }
                                        if (sQLitePreparedStatement != null) {
                                        }
                                        throw th;
                                    }
                                    try {
                                        Object[] objArr = new Object[i4];
                                        objArr[0] = numValueOf;
                                        objArr[c] = lValueOf;
                                        SQLiteCursor sQLiteCursorQueryFinalized = sQLiteDatabase3.queryFinalized(String.format(locale, "SELECT replies_data FROM messages_v2 WHERE mid = %d AND uid = %d", objArr), new Object[0]);
                                        boolean next = sQLiteCursorQueryFinalized.next();
                                        if (!next || (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0)) == null) {
                                            tL_messageReplies = null;
                                        } else {
                                            tL_messageReplies = TLRPC.MessageReplies.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                                            nativeByteBufferByteBufferValue.reuse();
                                        }
                                        sQLiteCursorQueryFinalized.dispose();
                                        if (next) {
                                            TLRPC.MessageReplies messageReplies = (TLRPC.MessageReplies) sparseArray.get(sparseArray.keyAt(i10));
                                            if (z || tL_messageReplies == null || (i3 = tL_messageReplies.replies_pts) == 0 || messageReplies.replies_pts > i3 || messageReplies.read_max_id > tL_messageReplies.read_max_id || messageReplies.max_id > tL_messageReplies.max_id) {
                                                if (z) {
                                                    if (tL_messageReplies == null) {
                                                        tL_messageReplies = new TLRPC.TL_messageReplies();
                                                        tL_messageReplies.flags |= 2;
                                                    }
                                                    tL_messageReplies.replies += messageReplies.replies;
                                                    int size4 = messageReplies.recent_repliers.size();
                                                    for (int i11 = 0; i11 < size4; i11++) {
                                                        long peerId = MessageObject.getPeerId((TLRPC.Peer) messageReplies.recent_repliers.get(i11));
                                                        int size5 = tL_messageReplies.recent_repliers.size();
                                                        int i12 = 0;
                                                        while (i12 < size5) {
                                                            if (peerId == MessageObject.getPeerId((TLRPC.Peer) tL_messageReplies.recent_repliers.get(i12))) {
                                                                tL_messageReplies.recent_repliers.remove(i12);
                                                                i12--;
                                                                size5--;
                                                            }
                                                            i12++;
                                                        }
                                                    }
                                                    tL_messageReplies.recent_repliers.addAll(0, messageReplies.recent_repliers);
                                                    while (tL_messageReplies.recent_repliers.size() > 3) {
                                                        tL_messageReplies.recent_repliers.remove(0);
                                                    }
                                                    messageReplies = tL_messageReplies;
                                                }
                                                if (tL_messageReplies != null && (i2 = tL_messageReplies.read_max_id) > messageReplies.read_max_id) {
                                                    messageReplies.read_max_id = i2;
                                                }
                                                sQLitePreparedStatementExecuteFast3.requery();
                                                NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(messageReplies.getObjectSize());
                                                messageReplies.serializeToStream(nativeByteBuffer);
                                                i = 1;
                                                sQLitePreparedStatementExecuteFast3.bindByteBuffer(1, nativeByteBuffer);
                                                sQLitePreparedStatementExecuteFast3.bindInteger(2, iKeyAt);
                                                sQLitePreparedStatementExecuteFast3.bindLong(3, jKeyAt3);
                                                sQLitePreparedStatementExecuteFast3.step();
                                                nativeByteBuffer.reuse();
                                            } else {
                                                i = 1;
                                            }
                                        } else {
                                            i = 1;
                                        }
                                        i10 += i;
                                        i4 = 2;
                                        c = 1;
                                    } catch (Exception e5) {
                                        e = e5;
                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast3;
                                        z4 = true;
                                        checkSQLException(e);
                                        if (z4) {
                                        }
                                        if (sQLitePreparedStatement != null) {
                                        }
                                    } catch (Throwable th6) {
                                        th = th6;
                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast3;
                                        z4 = true;
                                        if (z4) {
                                        }
                                        if (sQLitePreparedStatement != null) {
                                        }
                                        throw th;
                                    }
                                }
                                i9++;
                                longSparseArray4 = longSparseArray3;
                                i4 = 2;
                                c = 1;
                            } catch (Exception e6) {
                                e = e6;
                            } catch (Throwable th7) {
                                th = th7;
                            }
                        }
                        try {
                            sQLitePreparedStatementExecuteFast3.dispose();
                        } catch (Exception e7) {
                            e = e7;
                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast3;
                            z4 = true;
                            checkSQLException(e);
                            if (z4) {
                            }
                            if (sQLitePreparedStatement != null) {
                            }
                        } catch (Throwable th8) {
                            th = th8;
                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast3;
                            z4 = true;
                            if (z4) {
                            }
                            if (sQLitePreparedStatement != null) {
                            }
                            throw th;
                        }
                    }
                    try {
                        this.database.commitTransaction();
                        return;
                    } catch (Exception e8) {
                        e = e8;
                        z4 = true;
                        sQLitePreparedStatement = null;
                        checkSQLException(e);
                        if (z4) {
                        }
                        if (sQLitePreparedStatement != null) {
                        }
                    } catch (Throwable th9) {
                        th = th9;
                        z4 = true;
                        sQLitePreparedStatement = null;
                        if (z4) {
                        }
                        if (sQLitePreparedStatement != null) {
                        }
                        throw th;
                    }
                } catch (Exception e9) {
                    e = e9;
                } catch (Throwable th10) {
                    th = th10;
                }
            } catch (Exception e10) {
                e = e10;
            } catch (Throwable th11) {
                th = th11;
            }
        } catch (Exception e11) {
            e = e11;
            z3 = false;
        } catch (Throwable th12) {
            th = th12;
            z2 = false;
        }
        if (z4 && (sQLiteDatabase = this.database) != null) {
            sQLiteDatabase.commitTransaction();
        }
        if (sQLitePreparedStatement != null) {
            sQLitePreparedStatement.dispose();
        }
        throw th;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:25:0x0060  */
    /* JADX WARN: Removed duplicated region for block: B:45:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$putContacts$141(boolean z, ArrayList arrayList) throws Throwable {
        Exception e;
        SQLiteDatabase sQLiteDatabase;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            if (z) {
                try {
                    this.database.executeFast("DELETE FROM contacts WHERE 1").stepThis().dispose();
                } catch (Exception e2) {
                    e = e2;
                    checkSQLException(e);
                    if (sQLitePreparedStatement != null) {
                        sQLitePreparedStatement.dispose();
                    }
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase == null) {
                        return;
                    }
                    sQLiteDatabase.commitTransaction();
                }
            }
            this.database.beginTransaction();
            SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO contacts VALUES(?, ?)");
            for (int i = 0; i < arrayList.size(); i++) {
                try {
                    TLRPC.TL_contact tL_contact = (TLRPC.TL_contact) arrayList.get(i);
                    sQLitePreparedStatementExecuteFast.requery();
                    sQLitePreparedStatementExecuteFast.bindLong(1, tL_contact.user_id);
                    sQLitePreparedStatementExecuteFast.bindInteger(2, tL_contact.mutual ? 1 : 0);
                    sQLitePreparedStatementExecuteFast.step();
                } catch (Exception e3) {
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                    e = e3;
                    checkSQLException(e);
                    if (sQLitePreparedStatement != null) {
                    }
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase == null) {
                    }
                    sQLiteDatabase.commitTransaction();
                } catch (Throwable th) {
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                    th = th;
                    if (sQLitePreparedStatement != null) {
                        sQLitePreparedStatement.dispose();
                    }
                    SQLiteDatabase sQLiteDatabase2 = this.database;
                    if (sQLiteDatabase2 != null) {
                        sQLiteDatabase2.commitTransaction();
                    }
                    throw th;
                }
            }
            sQLitePreparedStatementExecuteFast.dispose();
            this.database.commitTransaction();
            sQLiteDatabase = this.database;
            if (sQLiteDatabase == null) {
                return;
            }
            sQLiteDatabase.commitTransaction();
        } catch (Throwable th2) {
            th = th2;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$putDialogs$236(TLRPC.messages_Dialogs messages_dialogs, int i) {
        putDialogsInternal(messages_dialogs, i);
        try {
            loadUnreadMessages();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:60:0x0199  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$putEncryptedChat$172(TLRPC.EncryptedChat encryptedChat, TLRPC.User user, TLRPC.Dialog dialog) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        try {
            byte[] bArr = encryptedChat.key_hash;
            if (bArr == null || bArr.length < 16) {
                byte[] bArr2 = encryptedChat.auth_key;
                if (bArr2 != null) {
                    encryptedChat.key_hash = AndroidUtilities.calcAuthKeyHash(bArr2);
                }
            }
            sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO enc_chats VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
        } catch (Exception e) {
            e = e;
            sQLitePreparedStatement = null;
        } catch (Throwable th) {
            th = th;
            sQLitePreparedStatement = null;
        }
        try {
            NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(encryptedChat.getObjectSize());
            byte[] bArr3 = encryptedChat.a_or_b;
            NativeByteBuffer nativeByteBuffer2 = new NativeByteBuffer(bArr3 != null ? bArr3.length : 1);
            byte[] bArr4 = encryptedChat.auth_key;
            NativeByteBuffer nativeByteBuffer3 = new NativeByteBuffer(bArr4 != null ? bArr4.length : 1);
            byte[] bArr5 = encryptedChat.future_auth_key;
            NativeByteBuffer nativeByteBuffer4 = new NativeByteBuffer(bArr5 != null ? bArr5.length : 1);
            byte[] bArr6 = encryptedChat.key_hash;
            NativeByteBuffer nativeByteBuffer5 = new NativeByteBuffer(bArr6 != null ? bArr6.length : 1);
            encryptedChat.serializeToStream(nativeByteBuffer);
            sQLitePreparedStatementExecuteFast.bindInteger(1, encryptedChat.id);
            sQLitePreparedStatementExecuteFast.bindLong(2, user.id);
            sQLitePreparedStatementExecuteFast.bindString(3, formatUserSearchName(user));
            sQLitePreparedStatementExecuteFast.bindByteBuffer(4, nativeByteBuffer);
            byte[] bArr7 = encryptedChat.a_or_b;
            if (bArr7 != null) {
                nativeByteBuffer2.writeBytes(bArr7);
            }
            byte[] bArr8 = encryptedChat.auth_key;
            if (bArr8 != null) {
                nativeByteBuffer3.writeBytes(bArr8);
            }
            byte[] bArr9 = encryptedChat.future_auth_key;
            if (bArr9 != null) {
                nativeByteBuffer4.writeBytes(bArr9);
            }
            byte[] bArr10 = encryptedChat.key_hash;
            if (bArr10 != null) {
                nativeByteBuffer5.writeBytes(bArr10);
            }
            sQLitePreparedStatementExecuteFast.bindByteBuffer(5, nativeByteBuffer2);
            sQLitePreparedStatementExecuteFast.bindByteBuffer(6, nativeByteBuffer3);
            sQLitePreparedStatementExecuteFast.bindInteger(7, encryptedChat.ttl);
            sQLitePreparedStatementExecuteFast.bindInteger(8, encryptedChat.layer);
            sQLitePreparedStatementExecuteFast.bindInteger(9, encryptedChat.seq_in);
            sQLitePreparedStatementExecuteFast.bindInteger(10, encryptedChat.seq_out);
            sQLitePreparedStatementExecuteFast.bindInteger(11, (encryptedChat.key_use_count_in << 16) | encryptedChat.key_use_count_out);
            sQLitePreparedStatementExecuteFast.bindLong(12, encryptedChat.exchange_id);
            sQLitePreparedStatementExecuteFast.bindInteger(13, encryptedChat.key_create_date);
            sQLitePreparedStatementExecuteFast.bindLong(14, encryptedChat.future_key_fingerprint);
            sQLitePreparedStatementExecuteFast.bindByteBuffer(15, nativeByteBuffer4);
            sQLitePreparedStatementExecuteFast.bindByteBuffer(16, nativeByteBuffer5);
            sQLitePreparedStatementExecuteFast.bindInteger(17, encryptedChat.in_seq_no);
            sQLitePreparedStatementExecuteFast.bindLong(18, encryptedChat.admin_id);
            sQLitePreparedStatementExecuteFast.bindInteger(19, encryptedChat.mtproto_seq);
            sQLitePreparedStatementExecuteFast.step();
            sQLitePreparedStatementExecuteFast.dispose();
            nativeByteBuffer.reuse();
            nativeByteBuffer2.reuse();
            nativeByteBuffer3.reuse();
            nativeByteBuffer4.reuse();
            nativeByteBuffer5.reuse();
            if (dialog != null) {
                sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO dialogs VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
                sQLitePreparedStatementExecuteFast.bindLong(1, dialog.id);
                sQLitePreparedStatementExecuteFast.bindInteger(2, dialog.last_message_date);
                sQLitePreparedStatementExecuteFast.bindInteger(3, dialog.unread_count);
                sQLitePreparedStatementExecuteFast.bindInteger(4, dialog.top_message);
                sQLitePreparedStatementExecuteFast.bindInteger(5, dialog.read_inbox_max_id);
                sQLitePreparedStatementExecuteFast.bindInteger(6, dialog.read_outbox_max_id);
                sQLitePreparedStatementExecuteFast.bindInteger(7, 0);
                sQLitePreparedStatementExecuteFast.bindInteger(8, dialog.unread_mentions_count);
                sQLitePreparedStatementExecuteFast.bindInteger(9, dialog.pts);
                sQLitePreparedStatementExecuteFast.bindInteger(10, 0);
                sQLitePreparedStatementExecuteFast.bindInteger(11, dialog.pinnedNum);
                sQLitePreparedStatementExecuteFast.bindInteger(12, dialog.flags);
                sQLitePreparedStatementExecuteFast.bindInteger(13, dialog.folder_id);
                sQLitePreparedStatementExecuteFast.bindNull(14);
                sQLitePreparedStatementExecuteFast.bindInteger(15, dialog.unread_reactions_count);
                sQLitePreparedStatementExecuteFast.bindInteger(16, 0);
                sQLitePreparedStatementExecuteFast.bindInteger(17, dialog.ttl_period);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
            }
        } catch (Exception e2) {
            e = e2;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            try {
                checkSQLException(e);
                if (sQLitePreparedStatement != null) {
                    sQLitePreparedStatement.dispose();
                }
            } catch (Throwable th2) {
                th = th2;
                if (sQLitePreparedStatement != null) {
                    sQLitePreparedStatement.dispose();
                }
                throw th;
            }
        } catch (Throwable th3) {
            th = th3;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            if (sQLitePreparedStatement != null) {
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$putMessages$219(ArrayList arrayList) {
        getFileLoader().cancelLoadFiles(arrayList);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$putMessages$220(ArrayList arrayList) {
        if (getMessagesController().getSavedMessagesController().updateSavedDialogs(arrayList)) {
            getMessagesController().getSavedMessagesController().update();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Can't wrap try/catch for region: R(17:137|820|138|139|140|(0)|159|(2:161|162)|163|(7:(17:871|165|166|786|167|168|790|169|170|855|171|(7:173|(7:175|(4:177|178|847|179)(1:189)|180|190|(4:192|(1:194)(1:196)|195|197)(1:198)|199|(8:201|(2:210|(2:212|(2:221|(2:228|(1:235)(1:234))(3:225|(2:227|234)|235))(3:218|(2:220|234)|235))(0))(3:207|(2:209|234)|235)|236|(1:240)|(1:242)(1:244)|243|245|(1:247))(0))(1:249)|248|250|(1:252)(1:253)|254|(0)(3:256|(3:258|(1:260)|261)|(6:263|(1:265)|271|(1:273)|274|580)(6:266|(1:268)|271|(0)(0)|274|580)))(1:270)|269|271|(0)|274|580)(1:296)|(4:476|(0)(1:479)|511|(4:520|(3:522|(1:524)|525)(1:518)|526|(5:788|528|(5:(1:531)|532|808|533|534)(1:539)|540|(10:(1:543)|544|812|545|546|558|(1:578)(5:566|(1:568)(1:569)|(3:(1:574)(1:575)|576|577)|274|580)|579|274|580)(5:551|(6:(1:554)|555|804|556|557|558)|(3:564|578|579)(0)|274|580))(0))(0))(1:480)|867|481|(3:483|484|485)(2:496|(6:784|500|501|792|502|503))|511|(7:513|515|517|520|(0)(0)|526|(0)(0))(0))|(1:352)(8:818|299|796|300|(1:302)(1:307)|308|309|(8:857|311|845|312|(1:314)(1:319)|320|321|338)(8:326|327|328|806|329|(1:331)(1:336)|337|338))|863|353|354|(35:357|(1:359)(1:360)|(4:362|(1:364)(1:365)|366|(3:368|369|469)(3:370|(3:(1:375)|376|377)|378))(1:379)|814|380|(3:382|383|384)(1:385)|386|387|(1:393)(1:392)|394|395|(2:397|398)(2:400|401)|402|(2:404|405)(2:406|407)|408|(1:410)(2:412|(1:414)(1:415))|411|416|(1:418)(2:420|421)|422|(5:424|425|(1:427)(1:428)|429|430)(2:431|432)|433|434|(1:436)(1:438)|(3:440|(1:442)(1:444)|443)|446|(1:448)(2:450|451)|452|(1:461)(3:455|853|456)|(1:463)|(1:465)|(1:467)|369|469|355)|880|474) */
    /* JADX WARN: Can't wrap try/catch for region: R(6:(11:(8:(1:83)(31:84|(1:86)(4:88|(2:90|(0))(1:94)|(1:98)(1:97)|99)|87|101|102|(2:104|105)(1:106)|107|825|108|841|109|800|110|111|835|112|113|(6:833|115|(1:117)|882|122|123)(1:126)|127|(13:129|798|130|131|(8:(23:137|820|138|139|140|(0)|159|(2:161|162)|163|(17:871|165|166|786|167|168|790|169|170|855|171|(7:173|(7:175|(4:177|178|847|179)(1:189)|180|190|(4:192|(1:194)(1:196)|195|197)(1:198)|199|(8:201|(2:210|(2:212|(2:221|(2:228|(1:235)(1:234))(3:225|(2:227|234)|235))(3:218|(2:220|234)|235))(0))(3:207|(2:209|234)|235)|236|(1:240)|(1:242)(1:244)|243|245|(1:247))(0))(1:249)|248|250|(1:252)(1:253)|254|(0)(3:256|(3:258|(1:260)|261)|(6:263|(1:265)|271|(1:273)|274|580)(6:266|(1:268)|271|(0)(0)|274|580)))(1:270)|269|271|(0)|274|580)(1:296)|(1:352)(8:818|299|796|300|(1:302)(1:307)|308|309|(8:857|311|845|312|(1:314)(1:319)|320|321|338)(8:326|327|328|806|329|(1:331)(1:336)|337|338))|863|353|354|(35:357|(1:359)(1:360)|(4:362|(1:364)(1:365)|366|(3:368|369|469)(3:370|(3:(1:375)|376|377)|378))(1:379)|814|380|(3:382|383|384)(1:385)|386|387|(1:393)(1:392)|394|395|(2:397|398)(2:400|401)|402|(2:404|405)(2:406|407)|408|(1:410)(2:412|(1:414)(1:415))|411|416|(1:418)(2:420|421)|422|(5:424|425|(1:427)(1:428)|429|430)(2:431|432)|433|434|(1:436)(1:438)|(3:440|(1:442)(1:444)|443)|446|(1:448)(2:450|451)|452|(1:461)(3:455|853|456)|(1:463)|(1:465)|(1:467)|369|469|355)|880|474|(4:476|(0)(1:479)|511|(4:520|(3:522|(1:524)|525)(1:518)|526|(5:788|528|(5:(1:531)|532|808|533|534)(1:539)|540|(10:(1:543)|544|812|545|546|558|(1:578)(5:566|(1:568)(1:569)|(3:(1:574)(1:575)|576|577)|274|580)|579|274|580)(5:551|(6:(1:554)|555|804|556|557|558)|(3:564|578|579)(0)|274|580))(0))(0))(1:480)|867|481|(3:483|484|485)(2:496|(6:784|500|501|792|502|503))|511|(7:513|515|517|520|(0)(0)|526|(0)(0))(0))(1:157)|152|158|159|(0)|163|(0)(0)|(13:352|863|353|354|(1:355)|880|474|(0)(0)|867|481|(0)(0)|511|(0)(0))(0))(1:135)|827|142|(1:144)(1:151)|159|(0)|163|(0)(0)|(0)(0))|879|589|802|590|865|591|(3:823|593|594)(1:601)|829|602|(3:849|604|605)|(5:839|611|612|(3:810|620|621)|(21:816|627|(2:630|628)|881|636|837|637|(8:639|640|843|641|642|643|831|644)(1:659)|(7:661|(1:663)(1:664)|665|666|869|667|668)(1:675)|676|(1:681)|680|(1:683)|684|685|686|(0)|(0)|(0)|(0)|(0)(0))(13:636|837|637|(0)(0)|(0)(0)|676|(6:679|681|680|(0)|684|685)(0)|686|(0)|(0)|(0)|(0)|(0)(0)))(2:(0)|(0)(0)))|865|591|(0)(0)|829|602|(0)|(0)(0))|835|112|113|(0)(0)|127|(0)|879|589|802|590)|841|109|800|110|111) */
    /* JADX WARN: Code restructure failed: missing block: B:581:0x0c18, code lost:
    
        r0 = th;
     */
    /* JADX WARN: Code restructure failed: missing block: B:582:0x0c19, code lost:
    
        r4 = r38;
     */
    /* JADX WARN: Code restructure failed: missing block: B:583:0x0c1d, code lost:
    
        r0 = e;
     */
    /* JADX WARN: Code restructure failed: missing block: B:584:0x0c1e, code lost:
    
        r4 = r38;
     */
    /* JADX WARN: Code restructure failed: missing block: B:717:0x0e64, code lost:
    
        r0 = move-exception;
     */
    /* JADX WARN: Code restructure failed: missing block: B:718:0x0e65, code lost:
    
        r44 = r15;
        r13 = null;
        r2 = r0;
     */
    /* JADX WARN: Code restructure failed: missing block: B:719:0x0e6d, code lost:
    
        r0 = move-exception;
     */
    /* JADX WARN: Code restructure failed: missing block: B:720:0x0e6e, code lost:
    
        r44 = r15;
        r13 = null;
        r2 = r0;
     */
    /* JADX WARN: Code restructure failed: missing block: B:92:0x025b, code lost:
    
        if (r13 != 4) goto L87;
     */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:104:0x02ba A[Catch: all -> 0x00df, Exception -> 0x00e3, TRY_ENTER, TRY_LEAVE, TryCatch #75 {Exception -> 0x00e3, all -> 0x00df, blocks: (B:9:0x0021, B:35:0x00ce, B:41:0x00e9, B:44:0x00f8, B:53:0x0168, B:76:0x01d8, B:83:0x01f6, B:104:0x02ba, B:86:0x022c), top: B:822:0x001f }] */
    /* JADX WARN: Removed duplicated region for block: B:106:0x02c1  */
    /* JADX WARN: Removed duplicated region for block: B:126:0x0365  */
    /* JADX WARN: Removed duplicated region for block: B:129:0x0383  */
    /* JADX WARN: Removed duplicated region for block: B:161:0x03fb A[Catch: all -> 0x03c2, Exception -> 0x03cd, TRY_LEAVE, TryCatch #72 {Exception -> 0x03cd, all -> 0x03c2, blocks: (B:142:0x03a7, B:144:0x03b3, B:161:0x03fb, B:140:0x03a3), top: B:827:0x03a7 }] */
    /* JADX WARN: Removed duplicated region for block: B:210:0x04ee A[Catch: all -> 0x0478, Exception -> 0x047c, TryCatch #62 {Exception -> 0x047c, all -> 0x0478, blocks: (B:179:0x0470, B:190:0x04a0, B:192:0x04a7, B:194:0x04b5, B:197:0x04c4, B:199:0x04cf, B:201:0x04d5, B:203:0x04db, B:205:0x04df, B:207:0x04e3, B:236:0x0547, B:238:0x054b, B:240:0x054f, B:242:0x0553, B:245:0x0564, B:247:0x056d, B:250:0x0587, B:254:0x0591, B:258:0x05a0, B:260:0x05c0, B:261:0x05c5, B:265:0x05cd, B:271:0x05ef, B:266:0x05d1, B:268:0x05d6, B:210:0x04ee, B:212:0x04f4, B:214:0x04fa, B:216:0x04fe, B:218:0x0502, B:221:0x050b, B:223:0x0511, B:225:0x0517, B:228:0x0528, B:230:0x052e, B:232:0x0534), top: B:847:0x0470 }] */
    /* JADX WARN: Removed duplicated region for block: B:221:0x050b A[Catch: all -> 0x0478, Exception -> 0x047c, TryCatch #62 {Exception -> 0x047c, all -> 0x0478, blocks: (B:179:0x0470, B:190:0x04a0, B:192:0x04a7, B:194:0x04b5, B:197:0x04c4, B:199:0x04cf, B:201:0x04d5, B:203:0x04db, B:205:0x04df, B:207:0x04e3, B:236:0x0547, B:238:0x054b, B:240:0x054f, B:242:0x0553, B:245:0x0564, B:247:0x056d, B:250:0x0587, B:254:0x0591, B:258:0x05a0, B:260:0x05c0, B:261:0x05c5, B:265:0x05cd, B:271:0x05ef, B:266:0x05d1, B:268:0x05d6, B:210:0x04ee, B:212:0x04f4, B:214:0x04fa, B:216:0x04fe, B:218:0x0502, B:221:0x050b, B:223:0x0511, B:225:0x0517, B:228:0x0528, B:230:0x052e, B:232:0x0534), top: B:847:0x0470 }] */
    /* JADX WARN: Removed duplicated region for block: B:273:0x05f4  */
    /* JADX WARN: Removed duplicated region for block: B:296:0x0655  */
    /* JADX WARN: Removed duplicated region for block: B:298:0x066e A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:352:0x07c8  */
    /* JADX WARN: Removed duplicated region for block: B:357:0x07df  */
    /* JADX WARN: Removed duplicated region for block: B:476:0x09c8  */
    /* JADX WARN: Removed duplicated region for block: B:480:0x09d3  */
    /* JADX WARN: Removed duplicated region for block: B:483:0x09db A[Catch: all -> 0x0a15, Exception -> 0x0a19, TRY_LEAVE, TryCatch #51 {Exception -> 0x0a19, all -> 0x0a15, blocks: (B:481:0x09d5, B:483:0x09db), top: B:867:0x09d5 }] */
    /* JADX WARN: Removed duplicated region for block: B:496:0x0a1d A[Catch: all -> 0x0a03, Exception -> 0x0a0c, TryCatch #20 {Exception -> 0x0a0c, blocks: (B:511:0x0a84, B:526:0x0ae6, B:528:0x0aed, B:531:0x0af3, B:540:0x0b3b, B:543:0x0b43, B:558:0x0ba2, B:564:0x0bb4, B:566:0x0bba, B:571:0x0bdc, B:574:0x0be4, B:576:0x0beb, B:569:0x0bd2, B:551:0x0b77, B:554:0x0b7d, B:520:0x0ab0, B:522:0x0ab6, B:525:0x0acd, B:485:0x09e3, B:496:0x0a1d, B:498:0x0a25, B:510:0x0a81), top: B:788:0x0aed }] */
    /* JADX WARN: Removed duplicated region for block: B:513:0x0a9c  */
    /* JADX WARN: Removed duplicated region for block: B:518:0x0aa4  */
    /* JADX WARN: Removed duplicated region for block: B:520:0x0ab0 A[Catch: all -> 0x0a03, Exception -> 0x0a0c, TryCatch #20 {Exception -> 0x0a0c, blocks: (B:511:0x0a84, B:526:0x0ae6, B:528:0x0aed, B:531:0x0af3, B:540:0x0b3b, B:543:0x0b43, B:558:0x0ba2, B:564:0x0bb4, B:566:0x0bba, B:571:0x0bdc, B:574:0x0be4, B:576:0x0beb, B:569:0x0bd2, B:551:0x0b77, B:554:0x0b7d, B:520:0x0ab0, B:522:0x0ab6, B:525:0x0acd, B:485:0x09e3, B:496:0x0a1d, B:498:0x0a25, B:510:0x0a81), top: B:788:0x0aed }] */
    /* JADX WARN: Removed duplicated region for block: B:522:0x0ab6 A[Catch: all -> 0x0a03, Exception -> 0x0a0c, TryCatch #20 {Exception -> 0x0a0c, blocks: (B:511:0x0a84, B:526:0x0ae6, B:528:0x0aed, B:531:0x0af3, B:540:0x0b3b, B:543:0x0b43, B:558:0x0ba2, B:564:0x0bb4, B:566:0x0bba, B:571:0x0bdc, B:574:0x0be4, B:576:0x0beb, B:569:0x0bd2, B:551:0x0b77, B:554:0x0b7d, B:520:0x0ab0, B:522:0x0ab6, B:525:0x0acd, B:485:0x09e3, B:496:0x0a1d, B:498:0x0a25, B:510:0x0a81), top: B:788:0x0aed }] */
    /* JADX WARN: Removed duplicated region for block: B:539:0x0b38  */
    /* JADX WARN: Removed duplicated region for block: B:578:0x0bf1  */
    /* JADX WARN: Removed duplicated region for block: B:601:0x0c69  */
    /* JADX WARN: Removed duplicated region for block: B:619:0x0ca7 A[PHI: r27
      0x0ca7: PHI (r27v11 org.telegram.SQLite.SQLitePreparedStatement) = (r27v7 org.telegram.SQLite.SQLitePreparedStatement), (r27v8 org.telegram.SQLite.SQLitePreparedStatement) binds: [B:610:0x0c7f, B:612:0x0c8c] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:636:0x0ce3  */
    /* JADX WARN: Removed duplicated region for block: B:639:0x0d0d A[Catch: all -> 0x0d4c, Exception -> 0x0d4f, TRY_LEAVE, TryCatch #67 {Exception -> 0x0d4f, all -> 0x0d4c, blocks: (B:637:0x0ce6, B:639:0x0d0d, B:642:0x0d24), top: B:837:0x0ce6 }] */
    /* JADX WARN: Removed duplicated region for block: B:659:0x0d5c  */
    /* JADX WARN: Removed duplicated region for block: B:661:0x0d5f A[Catch: all -> 0x0d45, Exception -> 0x0d48, TryCatch #70 {Exception -> 0x0d48, all -> 0x0d45, blocks: (B:644:0x0d41, B:661:0x0d5f, B:665:0x0d7b, B:668:0x0d8b, B:676:0x0db7, B:683:0x0dd7, B:684:0x0ddf, B:681:0x0dc4, B:664:0x0d6a), top: B:831:0x0d41 }] */
    /* JADX WARN: Removed duplicated region for block: B:675:0x0db5  */
    /* JADX WARN: Removed duplicated region for block: B:681:0x0dc4 A[Catch: all -> 0x0d45, Exception -> 0x0d48, TryCatch #70 {Exception -> 0x0d48, all -> 0x0d45, blocks: (B:644:0x0d41, B:661:0x0d5f, B:665:0x0d7b, B:668:0x0d8b, B:676:0x0db7, B:683:0x0dd7, B:684:0x0ddf, B:681:0x0dc4, B:664:0x0d6a), top: B:831:0x0d41 }] */
    /* JADX WARN: Removed duplicated region for block: B:683:0x0dd7 A[Catch: all -> 0x0d45, Exception -> 0x0d48, TryCatch #70 {Exception -> 0x0d48, all -> 0x0d45, blocks: (B:644:0x0d41, B:661:0x0d5f, B:665:0x0d7b, B:668:0x0d8b, B:676:0x0db7, B:683:0x0dd7, B:684:0x0ddf, B:681:0x0dc4, B:664:0x0d6a), top: B:831:0x0d41 }] */
    /* JADX WARN: Removed duplicated region for block: B:688:0x0deb  */
    /* JADX WARN: Removed duplicated region for block: B:690:0x0df0  */
    /* JADX WARN: Removed duplicated region for block: B:692:0x0df5  */
    /* JADX WARN: Removed duplicated region for block: B:694:0x0dfa  */
    /* JADX WARN: Removed duplicated region for block: B:696:0x0dff  */
    /* JADX WARN: Removed duplicated region for block: B:738:0x0eca  */
    /* JADX WARN: Removed duplicated region for block: B:740:0x0ecf  */
    /* JADX WARN: Removed duplicated region for block: B:742:0x0ed4  */
    /* JADX WARN: Removed duplicated region for block: B:744:0x0ed9  */
    /* JADX WARN: Removed duplicated region for block: B:746:0x0ede  */
    /* JADX WARN: Removed duplicated region for block: B:748:0x0ee3  */
    /* JADX WARN: Removed duplicated region for block: B:750:0x0ee8  */
    /* JADX WARN: Removed duplicated region for block: B:752:0x0eed  */
    /* JADX WARN: Removed duplicated region for block: B:754:0x0ef2  */
    /* JADX WARN: Removed duplicated region for block: B:756:0x0ef7  */
    /* JADX WARN: Removed duplicated region for block: B:762:0x0f01  */
    /* JADX WARN: Removed duplicated region for block: B:764:0x0f06  */
    /* JADX WARN: Removed duplicated region for block: B:766:0x0f0b  */
    /* JADX WARN: Removed duplicated region for block: B:768:0x0f10  */
    /* JADX WARN: Removed duplicated region for block: B:770:0x0f15  */
    /* JADX WARN: Removed duplicated region for block: B:772:0x0f1a  */
    /* JADX WARN: Removed duplicated region for block: B:774:0x0f1f  */
    /* JADX WARN: Removed duplicated region for block: B:776:0x0f24  */
    /* JADX WARN: Removed duplicated region for block: B:778:0x0f29  */
    /* JADX WARN: Removed duplicated region for block: B:780:0x0f2e  */
    /* JADX WARN: Removed duplicated region for block: B:788:0x0aed A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:810:0x0ca9 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:816:0x0cb7 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:823:0x0c54 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:833:0x02ea A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:839:0x0c81 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:849:0x0c6f A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:871:0x0404 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:884:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:886:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:887:? A[SYNTHETIC] */
    /* JADX WARN: Type inference failed for: r13v100 */
    /* JADX WARN: Type inference failed for: r13v101 */
    /* JADX WARN: Type inference failed for: r13v102 */
    /* JADX WARN: Type inference failed for: r13v103 */
    /* JADX WARN: Type inference failed for: r13v104 */
    /* JADX WARN: Type inference failed for: r13v105 */
    /* JADX WARN: Type inference failed for: r13v106 */
    /* JADX WARN: Type inference failed for: r13v107 */
    /* JADX WARN: Type inference failed for: r13v108 */
    /* JADX WARN: Type inference failed for: r13v109 */
    /* JADX WARN: Type inference failed for: r13v110 */
    /* JADX WARN: Type inference failed for: r13v19 */
    /* JADX WARN: Type inference failed for: r13v20 */
    /* JADX WARN: Type inference failed for: r13v5, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r13v6, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r13v84 */
    /* JADX WARN: Type inference failed for: r13v85 */
    /* JADX WARN: Type inference failed for: r13v88 */
    /* JADX WARN: Type inference failed for: r13v89 */
    /* JADX WARN: Type inference failed for: r1v1 */
    /* JADX WARN: Type inference failed for: r1v184 */
    /* JADX WARN: Type inference failed for: r1v185 */
    /* JADX WARN: Type inference failed for: r1v2 */
    /* JADX WARN: Type inference failed for: r1v3 */
    /* JADX WARN: Type inference failed for: r1v33 */
    /* JADX WARN: Type inference failed for: r1v34 */
    /* JADX WARN: Type inference failed for: r1v36 */
    /* JADX WARN: Type inference failed for: r1v37 */
    /* JADX WARN: Type inference failed for: r1v4 */
    /* JADX WARN: Type inference failed for: r49v0, types: [org.telegram.messenger.BaseController, org.telegram.messenger.MessagesStorage] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$putMessages$221(int i, TLRPC.messages_Messages messages_messages, long j, long j2, int i2, int i3, boolean z) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement;
        Throwable th;
        ?? r1;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast2;
        SQLitePreparedStatement sQLitePreparedStatement2;
        Exception exc;
        ?? r12;
        SQLitePreparedStatement sQLitePreparedStatement3;
        SQLitePreparedStatement sQLitePreparedStatement4;
        SQLitePreparedStatement sQLitePreparedStatement5;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast3;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast4;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast5;
        SQLitePreparedStatement sQLitePreparedStatement6;
        ?? r13;
        SQLiteDatabase sQLiteDatabase;
        ?? r132;
        SQLiteDatabase sQLiteDatabase2;
        int i4;
        int i5;
        long j3;
        int i6;
        int i7;
        int i8;
        int size;
        long j4;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast6;
        SQLitePreparedStatement sQLitePreparedStatement7;
        SQLitePreparedStatement sQLitePreparedStatement8;
        SQLitePreparedStatement sQLitePreparedStatement9;
        SQLitePreparedStatement sQLitePreparedStatement10;
        SQLitePreparedStatement sQLitePreparedStatement11;
        long j5;
        SQLitePreparedStatement sQLitePreparedStatement12;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast7;
        int i9;
        SQLitePreparedStatement sQLitePreparedStatement13;
        SQLitePreparedStatement sQLitePreparedStatement14;
        SQLitePreparedStatement sQLitePreparedStatement15;
        SQLitePreparedStatement sQLitePreparedStatement16;
        SQLitePreparedStatement sQLitePreparedStatement17;
        SQLitePreparedStatement sQLitePreparedStatement18;
        SQLitePreparedStatement sQLitePreparedStatement19;
        SQLitePreparedStatement sQLitePreparedStatement20;
        boolean z2;
        boolean z3;
        SQLitePreparedStatement sQLitePreparedStatement21;
        SQLitePreparedStatement sQLitePreparedStatement22;
        SQLitePreparedStatement sQLitePreparedStatement23;
        SQLitePreparedStatement sQLitePreparedStatement24;
        Throwable th2;
        SQLitePreparedStatement sQLitePreparedStatement25;
        Exception e;
        boolean z4;
        final ArrayList arrayList;
        SQLitePreparedStatement sQLitePreparedStatement26;
        SQLitePreparedStatement sQLitePreparedStatement27;
        TLRPC.Message message;
        int i10;
        ArrayList arrayList2;
        Integer num;
        long j6;
        Long lValueOf;
        int i11;
        SQLitePreparedStatement sQLitePreparedStatement28;
        SQLiteCursor sQLiteCursor;
        SQLiteCursor sQLiteCursor2;
        SQLiteCursor sQLiteCursor3;
        int iIntValue;
        ArrayList arrayList3;
        ArrayList arrayList4;
        HashMap map;
        int i12;
        TLRPC.Message message2;
        long j7;
        int i13;
        int i14;
        int i15;
        ArrayList<File> arrayList5;
        long j8;
        ArrayList arrayList6;
        SQLitePreparedStatement sQLitePreparedStatement29;
        int iMin;
        int i16;
        TLRPC.Message message3;
        int i17;
        TLRPC.Message message4;
        TLRPC.Message message5;
        TLRPC.Document document;
        TLRPC.Document document2;
        boolean z5;
        TLRPC.Photo photo;
        TLRPC.Photo photo2;
        SQLiteCursor sQLiteCursor4;
        NativeByteBuffer nativeByteBuffer;
        int i18;
        SQLitePreparedStatement sQLitePreparedStatement30;
        SQLitePreparedStatement sQLitePreparedStatement31;
        HashMap map2;
        TLRPC.Message message6;
        int i19;
        long j9;
        long topicId;
        SQLitePreparedStatement sQLitePreparedStatement32;
        SQLitePreparedStatement sQLitePreparedStatement33;
        int i20;
        int i21;
        int messageMediaType;
        int i22;
        NativeByteBuffer nativeByteBuffer2;
        ArrayList arrayList7;
        int i23;
        NativeByteBuffer nativeByteBuffer3;
        int i24;
        ArrayList<File> arrayList8;
        int i25;
        int i26;
        int iIntValue2;
        int iIntValue3;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast8;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast9;
        int i27;
        SQLiteDatabase sQLiteDatabase3;
        int i28 = i;
        TLRPC.messages_Messages messages_messages2 = messages_messages;
        long j10 = j;
        int i29 = i2;
        int i30 = 0;
        int i31 = 1;
        try {
            long clientUserId = getUserConfig().getClientUserId();
            boolean z6 = i28 == 1;
            long j11 = 0;
            try {
                try {
                    if (i28 == 5) {
                        sQLitePreparedStatementExecuteFast9 = this.database.executeFast("REPLACE INTO quick_replies_messages VALUES(?, ?, ?, ?, ?, ?, NULL, 0)");
                        int size2 = messages_messages2.messages.size();
                        int i32 = 0;
                        while (i32 < size2) {
                            TLRPC.Message message7 = (TLRPC.Message) messages_messages2.messages.get(i32);
                            if (!(message7 instanceof TLRPC.TL_messageEmpty)) {
                                long quickReplyId = MessageObject.getQuickReplyId(this.currentAccount, message7);
                                if (quickReplyId != j11) {
                                    try {
                                        this.database.executeFast(String.format(Locale.ENGLISH, "DELETE FROM quick_replies_messages WHERE mid = %d AND topic_id = %d", Integer.valueOf(message7.id), Long.valueOf(quickReplyId))).stepThis().dispose();
                                    } catch (Exception e2) {
                                        exc = e2;
                                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast9;
                                        z3 = false;
                                        sQLitePreparedStatementExecuteFast2 = null;
                                        sQLitePreparedStatement5 = null;
                                        sQLitePreparedStatementExecuteFast3 = null;
                                        sQLitePreparedStatementExecuteFast4 = null;
                                        sQLitePreparedStatementExecuteFast5 = null;
                                        sQLitePreparedStatement6 = null;
                                        sQLitePreparedStatement4 = null;
                                        r132 = z3;
                                        try {
                                            checkSQLException(exc);
                                            sQLiteDatabase2 = this.database;
                                            if (sQLiteDatabase2 != null) {
                                            }
                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                            }
                                            if (sQLitePreparedStatement6 != null) {
                                            }
                                            if (sQLitePreparedStatement3 != null) {
                                            }
                                            if (sQLitePreparedStatement4 != null) {
                                            }
                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                            }
                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                            }
                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                            }
                                            if (sQLitePreparedStatement5 != null) {
                                            }
                                            if (r132 == 0) {
                                            }
                                        } catch (Throwable th3) {
                                            th = th3;
                                            r13 = r132;
                                        }
                                    } catch (Throwable th4) {
                                        th = th4;
                                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast9;
                                        z2 = false;
                                        sQLitePreparedStatementExecuteFast2 = null;
                                        sQLitePreparedStatement5 = null;
                                        sQLitePreparedStatementExecuteFast3 = null;
                                        sQLitePreparedStatementExecuteFast4 = null;
                                        sQLitePreparedStatementExecuteFast5 = null;
                                        sQLitePreparedStatement6 = null;
                                        sQLitePreparedStatement4 = null;
                                        r13 = z2;
                                        sQLiteDatabase = this.database;
                                        if (sQLiteDatabase != null) {
                                        }
                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                        }
                                        if (sQLitePreparedStatement6 != null) {
                                        }
                                        if (sQLitePreparedStatement3 != null) {
                                        }
                                        if (sQLitePreparedStatement4 != null) {
                                        }
                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                        }
                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                        }
                                        if (sQLitePreparedStatementExecuteFast4 != null) {
                                        }
                                        if (sQLitePreparedStatement5 != null) {
                                        }
                                        if (r13 == 0) {
                                        }
                                    }
                                }
                                fixUnsupportedMedia(message7);
                                MessageObject.normalizeFlags(message7);
                                sQLitePreparedStatementExecuteFast9.requery();
                                NativeByteBuffer nativeByteBuffer4 = new NativeByteBuffer(message7.getObjectSize());
                                message7.serializeToStream(nativeByteBuffer4);
                                sQLitePreparedStatementExecuteFast9.bindInteger(1, message7.id);
                                sQLitePreparedStatementExecuteFast9.bindLong(2, quickReplyId);
                                sQLitePreparedStatementExecuteFast9.bindInteger(3, message7.send_state);
                                sQLitePreparedStatementExecuteFast9.bindInteger(4, message7.date);
                                sQLitePreparedStatementExecuteFast9.bindByteBuffer(5, nativeByteBuffer4);
                                sQLitePreparedStatementExecuteFast9.bindInteger(6, message7.ttl);
                                sQLitePreparedStatementExecuteFast9.step();
                                nativeByteBuffer4.reuse();
                                i31 = 1;
                            }
                            i32 += i31;
                            j11 = 0;
                        }
                        sQLitePreparedStatementExecuteFast9.dispose();
                        putUsersInternal(messages_messages2.users);
                        putChatsInternal(messages_messages2.chats);
                        this.database.commitTransaction();
                        sQLitePreparedStatement26 = null;
                        sQLitePreparedStatement27 = null;
                        sQLitePreparedStatementExecuteFast3 = null;
                        sQLitePreparedStatementExecuteFast4 = null;
                        sQLiteDatabase3 = this.database;
                        if (sQLiteDatabase3 != null) {
                            sQLiteDatabase3.commitTransaction();
                        }
                        if (sQLitePreparedStatement26 != null) {
                            sQLitePreparedStatement26.dispose();
                        }
                        if (sQLitePreparedStatement27 != null) {
                            sQLitePreparedStatement27.dispose();
                        }
                        if (sQLitePreparedStatementExecuteFast3 != null) {
                            sQLitePreparedStatementExecuteFast3.dispose();
                        }
                        if (sQLitePreparedStatementExecuteFast4 == null) {
                            sQLitePreparedStatementExecuteFast4.dispose();
                            return;
                        }
                        return;
                    }
                    if (z6) {
                        try {
                            this.database.executeFast(String.format(Locale.US, "DELETE FROM scheduled_messages_v2 WHERE uid = %d AND mid > 0", Long.valueOf(j))).stepThis().dispose();
                            SQLitePreparedStatement sQLitePreparedStatementExecuteFast10 = this.database.executeFast("REPLACE INTO scheduled_messages_v2 VALUES(?, ?, ?, ?, ?, ?, NULL, 0)");
                            int size3 = messages_messages2.messages.size();
                            while (i30 < size3) {
                                TLRPC.Message message8 = (TLRPC.Message) messages_messages2.messages.get(i30);
                                if (message8 instanceof TLRPC.TL_messageEmpty) {
                                    i27 = 1;
                                } else {
                                    fixUnsupportedMedia(message8);
                                    MessageObject.normalizeFlags(message8);
                                    sQLitePreparedStatementExecuteFast10.requery();
                                    NativeByteBuffer nativeByteBuffer5 = new NativeByteBuffer(message8.getObjectSize());
                                    message8.serializeToStream(nativeByteBuffer5);
                                    sQLitePreparedStatementExecuteFast10.bindInteger(1, message8.id);
                                    sQLitePreparedStatementExecuteFast10.bindLong(2, j10);
                                    sQLitePreparedStatementExecuteFast10.bindInteger(3, message8.send_state);
                                    sQLitePreparedStatementExecuteFast10.bindInteger(4, message8.date);
                                    sQLitePreparedStatementExecuteFast10.bindByteBuffer(5, nativeByteBuffer5);
                                    sQLitePreparedStatementExecuteFast10.bindInteger(6, message8.ttl);
                                    sQLitePreparedStatementExecuteFast10.step();
                                    nativeByteBuffer5.reuse();
                                    i27 = 1;
                                }
                                i30 += i27;
                            }
                            sQLitePreparedStatementExecuteFast10.dispose();
                            putUsersInternal(messages_messages2.users);
                            putChatsInternal(messages_messages2.chats);
                            this.database.commitTransaction();
                            broadcastScheduledMessagesChange(Long.valueOf(j));
                            sQLitePreparedStatement26 = null;
                            sQLitePreparedStatement27 = null;
                            sQLitePreparedStatementExecuteFast3 = null;
                            sQLitePreparedStatementExecuteFast4 = null;
                            sQLiteDatabase3 = this.database;
                            if (sQLiteDatabase3 != null) {
                            }
                            if (sQLitePreparedStatement26 != null) {
                            }
                            if (sQLitePreparedStatement27 != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast3 != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast4 == null) {
                            }
                        } catch (Exception e3) {
                            exc = e3;
                            sQLitePreparedStatementExecuteFast9 = null;
                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast9;
                            z3 = false;
                            sQLitePreparedStatementExecuteFast2 = null;
                            sQLitePreparedStatement5 = null;
                            sQLitePreparedStatementExecuteFast3 = null;
                            sQLitePreparedStatementExecuteFast4 = null;
                            sQLitePreparedStatementExecuteFast5 = null;
                            sQLitePreparedStatement6 = null;
                            sQLitePreparedStatement4 = null;
                            r132 = z3;
                            checkSQLException(exc);
                            sQLiteDatabase2 = this.database;
                            if (sQLiteDatabase2 != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast2 != null) {
                            }
                            if (sQLitePreparedStatement6 != null) {
                            }
                            if (sQLitePreparedStatement3 != null) {
                            }
                            if (sQLitePreparedStatement4 != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast5 != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast3 != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast4 != null) {
                            }
                            if (sQLitePreparedStatement5 != null) {
                            }
                            if (r132 == 0) {
                            }
                        } catch (Throwable th5) {
                            th = th5;
                            sQLitePreparedStatementExecuteFast9 = null;
                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast9;
                            z2 = false;
                            sQLitePreparedStatementExecuteFast2 = null;
                            sQLitePreparedStatement5 = null;
                            sQLitePreparedStatementExecuteFast3 = null;
                            sQLitePreparedStatementExecuteFast4 = null;
                            sQLitePreparedStatementExecuteFast5 = null;
                            sQLitePreparedStatement6 = null;
                            sQLitePreparedStatement4 = null;
                            r13 = z2;
                            sQLiteDatabase = this.database;
                            if (sQLiteDatabase != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast2 != null) {
                            }
                            if (sQLitePreparedStatement6 != null) {
                            }
                            if (sQLitePreparedStatement3 != null) {
                            }
                            if (sQLitePreparedStatement4 != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast5 != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast3 != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast4 != null) {
                            }
                            if (sQLitePreparedStatement5 != null) {
                            }
                            if (r13 == 0) {
                            }
                        }
                    } else {
                        String str = j2 != 0 ? "messages_holes_topics" : "messages_holes";
                        if (messages_messages2.messages.isEmpty()) {
                            if (i29 == 0) {
                                doneHolesInTable(str, j, i3, j2);
                                doneHolesInMedia(j, i3, -1, j2);
                            }
                            SQLiteDatabase sQLiteDatabase4 = this.database;
                            if (sQLiteDatabase4 != null) {
                                sQLiteDatabase4.commitTransaction();
                                return;
                            }
                            return;
                        }
                        this.database.beginTransaction();
                        try {
                            try {
                                try {
                                    try {
                                        try {
                                            try {
                                                if (i29 == 0) {
                                                    int i33 = ((TLRPC.Message) messages_messages2.messages.get(r1.size() - 1)).id;
                                                    j3 = clientUserId;
                                                    closeHolesInTable(str, j, i33, i3, j2);
                                                    i7 = i3;
                                                    i8 = i33;
                                                } else {
                                                    j3 = clientUserId;
                                                    if (i29 == 1) {
                                                        int i34 = ((TLRPC.Message) messages_messages2.messages.get(0)).id;
                                                        closeHolesInTable(str, j, i3, i34, j2);
                                                        closeHolesInMedia(j, i3, i34, -1, j2);
                                                    } else {
                                                        if (i29 != 3) {
                                                            i6 = 4;
                                                            if (i29 != 2) {
                                                            }
                                                        } else {
                                                            i6 = 4;
                                                        }
                                                        int i35 = (i3 != 0 || i29 == i6) ? ((TLRPC.Message) messages_messages2.messages.get(0)).id : Integer.MAX_VALUE;
                                                        ArrayList arrayList9 = messages_messages2.messages;
                                                        int i36 = ((TLRPC.Message) arrayList9.get(arrayList9.size() - 1)).id;
                                                        closeHolesInTable(str, j, i36, i35, j2);
                                                        i7 = i35;
                                                        i8 = i36;
                                                    }
                                                    size = messages_messages2.messages.size();
                                                    ArrayList<File> arrayList10 = new ArrayList<>();
                                                    ArrayList arrayList11 = new ArrayList();
                                                    ArrayList arrayList12 = new ArrayList();
                                                    j4 = j3;
                                                    ArrayList arrayList13 = j10 != j4 ? new ArrayList() : null;
                                                    sQLitePreparedStatementExecuteFast2 = this.database.executeFast("REPLACE INTO messages_topics VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 0, ?, ?)");
                                                    sQLitePreparedStatementExecuteFast6 = this.database.executeFast("REPLACE INTO messages_v2 VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 0, ?, ?, ?)");
                                                    sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO media_v4 VALUES(?, ?, ?, ?, ?)");
                                                    sQLitePreparedStatement11 = sQLitePreparedStatementExecuteFast;
                                                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast11 = this.database.executeFast("REPLACE INTO media_topics VALUES(?, ?, ?, ?, ?, ?)");
                                                    if (j4 != j10) {
                                                        try {
                                                            ArrayList arrayList14 = new ArrayList();
                                                            j5 = j4;
                                                            for (int i37 = 0; i37 < size; i37++) {
                                                                arrayList14.add(Integer.valueOf(((TLRPC.Message) messages_messages2.messages.get(i37)).id));
                                                            }
                                                            SQLiteDatabase sQLiteDatabase5 = this.database;
                                                            StringBuilder sb = new StringBuilder();
                                                            sQLitePreparedStatement12 = sQLitePreparedStatementExecuteFast11;
                                                            sb.append("DELETE FROM tag_message_id WHERE mid IN (");
                                                            sb.append(TextUtils.join(",", arrayList14));
                                                            sb.append(")");
                                                            sQLiteDatabase5.executeFast(sb.toString()).stepThis().dispose();
                                                            sQLitePreparedStatementExecuteFast7 = this.database.executeFast("REPLACE INTO tag_message_id VALUES(?, ?, ?, ?)");
                                                        } catch (Exception e4) {
                                                            exc = e4;
                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                            sQLitePreparedStatement4 = sQLitePreparedStatement11;
                                                            r132 = 0;
                                                            sQLitePreparedStatement5 = null;
                                                            sQLitePreparedStatementExecuteFast3 = null;
                                                            sQLitePreparedStatementExecuteFast4 = null;
                                                            sQLitePreparedStatementExecuteFast5 = null;
                                                            sQLitePreparedStatement6 = null;
                                                            checkSQLException(exc);
                                                            sQLiteDatabase2 = this.database;
                                                            if (sQLiteDatabase2 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            }
                                                            if (sQLitePreparedStatement6 != null) {
                                                            }
                                                            if (sQLitePreparedStatement3 != null) {
                                                            }
                                                            if (sQLitePreparedStatement4 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                            }
                                                            if (sQLitePreparedStatement5 != null) {
                                                            }
                                                            if (r132 == 0) {
                                                            }
                                                        } catch (Throwable th6) {
                                                            th = th6;
                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                            sQLitePreparedStatement4 = sQLitePreparedStatement11;
                                                            r13 = 0;
                                                            sQLitePreparedStatement5 = null;
                                                            sQLitePreparedStatementExecuteFast3 = null;
                                                            sQLitePreparedStatementExecuteFast4 = null;
                                                            sQLitePreparedStatementExecuteFast5 = null;
                                                            sQLitePreparedStatement6 = null;
                                                        }
                                                    } else {
                                                        j5 = j4;
                                                        sQLitePreparedStatement12 = sQLitePreparedStatementExecuteFast11;
                                                        sQLitePreparedStatementExecuteFast7 = null;
                                                    }
                                                    i9 = 0;
                                                    Long l = null;
                                                    int i38 = Integer.MAX_VALUE;
                                                    HashMap map3 = null;
                                                    long j12 = 0;
                                                    Integer num2 = null;
                                                    sQLitePreparedStatementExecuteFast3 = null;
                                                    sQLitePreparedStatementExecuteFast4 = null;
                                                    sQLitePreparedStatementExecuteFast5 = null;
                                                    ArrayList arrayList15 = null;
                                                    int i39 = Integer.MAX_VALUE;
                                                    while (i9 < size) {
                                                        int i40 = i38;
                                                        try {
                                                            message = (TLRPC.Message) messages_messages2.messages.get(i9);
                                                        } catch (Exception e5) {
                                                            sQLitePreparedStatement15 = sQLitePreparedStatementExecuteFast7;
                                                            exc = e5;
                                                            sQLitePreparedStatement19 = sQLitePreparedStatement11;
                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                        } catch (Throwable th7) {
                                                            sQLitePreparedStatement15 = sQLitePreparedStatementExecuteFast7;
                                                            th = th7;
                                                            sQLitePreparedStatement17 = sQLitePreparedStatement11;
                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                        }
                                                        try {
                                                            if (num2 != null || message == null) {
                                                                if (num2 != null) {
                                                                    i10 = i9;
                                                                    try {
                                                                        sQLitePreparedStatement6 = sQLitePreparedStatementExecuteFast7;
                                                                        if (num2.intValue() < message.id) {
                                                                        }
                                                                        if (j12 == j6) {
                                                                            j12 = message.peer_id.channel_id;
                                                                        }
                                                                    } catch (Exception e6) {
                                                                        e = e6;
                                                                        sQLitePreparedStatement6 = sQLitePreparedStatementExecuteFast7;
                                                                        exc = e;
                                                                        sQLitePreparedStatement19 = sQLitePreparedStatement11;
                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                        sQLitePreparedStatement15 = sQLitePreparedStatement6;
                                                                        sQLitePreparedStatement18 = null;
                                                                        sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                        sQLitePreparedStatement4 = sQLitePreparedStatement19;
                                                                        sQLitePreparedStatement5 = sQLitePreparedStatement18;
                                                                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                        r132 = sQLitePreparedStatement18;
                                                                        checkSQLException(exc);
                                                                        sQLiteDatabase2 = this.database;
                                                                        if (sQLiteDatabase2 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement6 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement3 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement4 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement5 != null) {
                                                                        }
                                                                        if (r132 == 0) {
                                                                        }
                                                                    } catch (Throwable th8) {
                                                                        th = th8;
                                                                        sQLitePreparedStatement6 = sQLitePreparedStatementExecuteFast7;
                                                                        th = th;
                                                                        sQLitePreparedStatement17 = sQLitePreparedStatement11;
                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                        sQLitePreparedStatement15 = sQLitePreparedStatement6;
                                                                        sQLitePreparedStatement16 = null;
                                                                        sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                        sQLitePreparedStatement4 = sQLitePreparedStatement17;
                                                                        sQLitePreparedStatement5 = sQLitePreparedStatement16;
                                                                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                        r13 = sQLitePreparedStatement16;
                                                                        sQLiteDatabase = this.database;
                                                                        if (sQLiteDatabase != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement6 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement3 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement4 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement5 != null) {
                                                                        }
                                                                        if (r13 == 0) {
                                                                        }
                                                                    }
                                                                    try {
                                                                        if (i29 == -2) {
                                                                            try {
                                                                                SQLiteDatabase sQLiteDatabase6 = this.database;
                                                                                Locale locale = Locale.US;
                                                                                Integer numValueOf = Integer.valueOf(message.id);
                                                                                Long lValueOf2 = Long.valueOf(MessageObject.getDialogId(message));
                                                                                i11 = size;
                                                                                try {
                                                                                    try {
                                                                                        Object[] objArr = new Object[2];
                                                                                        try {
                                                                                            objArr[0] = numValueOf;
                                                                                            objArr[1] = lValueOf2;
                                                                                            SQLiteCursor sQLiteCursorQueryFinalized = sQLiteDatabase6.queryFinalized(String.format(locale, "SELECT mid, data, ttl, mention, read_state, send_state, custom_params FROM messages_v2 WHERE mid = %d AND uid = %d", objArr), new Object[0]);
                                                                                            try {
                                                                                                boolean next = sQLiteCursorQueryFinalized.next();
                                                                                                if (next) {
                                                                                                    NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(1);
                                                                                                    if (nativeByteBufferByteBufferValue != null) {
                                                                                                        TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                                                                                                        messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                                                                                                        nativeByteBufferByteBufferValue.reuse();
                                                                                                        if (arrayList13 != null) {
                                                                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                                            arrayList4 = arrayList13;
                                                                                                            long j13 = j5;
                                                                                                            map = map3;
                                                                                                            i12 = i39;
                                                                                                            i17 = i40;
                                                                                                            j7 = j13;
                                                                                                            sQLitePreparedStatement4 = sQLitePreparedStatement11;
                                                                                                            message3 = messageTLdeserialize;
                                                                                                            arrayList3 = arrayList2;
                                                                                                            try {
                                                                                                                arrayList4.add(new SavedReactionsUpdate(j7, messageTLdeserialize, message));
                                                                                                            } catch (Exception e7) {
                                                                                                                e = e7;
                                                                                                                exc = e;
                                                                                                                sQLiteCursor3 = sQLiteCursorQueryFinalized;
                                                                                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                                                sQLiteCursor = sQLiteCursor3;
                                                                                                                sQLitePreparedStatement5 = null;
                                                                                                                r132 = sQLiteCursor;
                                                                                                                checkSQLException(exc);
                                                                                                                sQLiteDatabase2 = this.database;
                                                                                                                if (sQLiteDatabase2 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatement6 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatement3 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatement4 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatement5 != null) {
                                                                                                                }
                                                                                                                if (r132 == 0) {
                                                                                                                }
                                                                                                            } catch (Throwable th9) {
                                                                                                                th = th9;
                                                                                                                th = th;
                                                                                                                sQLiteCursor2 = sQLiteCursorQueryFinalized;
                                                                                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                                                sQLiteCursor4 = sQLiteCursor2;
                                                                                                                sQLitePreparedStatement5 = null;
                                                                                                                r13 = sQLiteCursor4;
                                                                                                                sQLiteDatabase = this.database;
                                                                                                                if (sQLiteDatabase != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatement6 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatement3 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatement4 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatement5 != null) {
                                                                                                                }
                                                                                                                if (r13 == 0) {
                                                                                                                }
                                                                                                            }
                                                                                                        } else {
                                                                                                            message3 = messageTLdeserialize;
                                                                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                                            sQLitePreparedStatement4 = sQLitePreparedStatement11;
                                                                                                            arrayList3 = arrayList2;
                                                                                                            arrayList4 = arrayList13;
                                                                                                            long j14 = j5;
                                                                                                            map = map3;
                                                                                                            i12 = i39;
                                                                                                            i17 = i40;
                                                                                                            j7 = j14;
                                                                                                        }
                                                                                                        if (sQLiteCursorQueryFinalized.intValue(5) != 3) {
                                                                                                            if (MessageObject.getFileName(message3).equals(MessageObject.getFileName(message))) {
                                                                                                                message4 = message3;
                                                                                                                message5 = message;
                                                                                                                message5.attachPath = message4.attachPath;
                                                                                                            } else {
                                                                                                                message4 = message3;
                                                                                                                message5 = message;
                                                                                                            }
                                                                                                            message5.ttl = sQLiteCursorQueryFinalized.intValue(2);
                                                                                                        } else {
                                                                                                            message4 = message3;
                                                                                                            message5 = message;
                                                                                                        }
                                                                                                        TLRPC.MessageMedia messageMedia = message4.media;
                                                                                                        if (messageMedia instanceof TLRPC.TL_messageMediaPhoto) {
                                                                                                            TLRPC.MessageMedia messageMedia2 = message5.media;
                                                                                                            if (!(messageMedia2 instanceof TLRPC.TL_messageMediaPhoto) || (photo = messageMedia.photo) == null || (photo2 = messageMedia2.photo) == null) {
                                                                                                                i16 = i17;
                                                                                                                if (messageMedia instanceof TLRPC.TL_messageMediaDocument) {
                                                                                                                    TLRPC.MessageMedia messageMedia3 = message5.media;
                                                                                                                    if (!(messageMedia3 instanceof TLRPC.TL_messageMediaDocument) || (document = messageMedia.document) == null || (document2 = messageMedia3.document) == null) {
                                                                                                                        if (MessageObject.getPhoto(message4) == null || MessageObject.getPhoto(message5) == null) {
                                                                                                                            z5 = (MessageObject.getDocument(message4) == null || MessageObject.getDocument(message5) == null || MessageObject.getDocument(message4).id != MessageObject.getDocument(message5).id) ? false : true;
                                                                                                                        } else if (MessageObject.getPhoto(message4).id == MessageObject.getPhoto(message5).id) {
                                                                                                                        }
                                                                                                                    } else if (document.id == document2.id) {
                                                                                                                    }
                                                                                                                }
                                                                                                            } else {
                                                                                                                i16 = i17;
                                                                                                                if (photo.id == photo2.id) {
                                                                                                                }
                                                                                                            }
                                                                                                            boolean z7 = message4.out;
                                                                                                            if (z7 && !message5.out) {
                                                                                                                message5.out = z7;
                                                                                                            }
                                                                                                            if (z5) {
                                                                                                                message2 = message5;
                                                                                                            } else {
                                                                                                                message2 = message5;
                                                                                                                addFilesToDelete(message4, arrayList10, arrayList12, arrayList3, false);
                                                                                                            }
                                                                                                            NativeByteBuffer nativeByteBufferByteBufferValue2 = sQLiteCursorQueryFinalized.byteBufferValue(6);
                                                                                                            MessageCustomParamsHelper.readLocalParams(message2, nativeByteBufferByteBufferValue2);
                                                                                                            if (nativeByteBufferByteBufferValue2 != null) {
                                                                                                                nativeByteBufferByteBufferValue2.reuse();
                                                                                                            }
                                                                                                        }
                                                                                                    } else {
                                                                                                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                                        sQLitePreparedStatement4 = sQLitePreparedStatement11;
                                                                                                        i16 = i40;
                                                                                                        arrayList3 = arrayList2;
                                                                                                        arrayList4 = arrayList13;
                                                                                                        long j15 = j5;
                                                                                                        map = map3;
                                                                                                        i12 = i39;
                                                                                                        message2 = message;
                                                                                                        j7 = j15;
                                                                                                    }
                                                                                                    boolean z8 = sQLiteCursorQueryFinalized.intValue(3) != 0;
                                                                                                    int iIntValue4 = sQLiteCursorQueryFinalized.intValue(4);
                                                                                                    iIntValue = i16;
                                                                                                    if (z8 != message2.mentioned) {
                                                                                                        if (iIntValue == Integer.MAX_VALUE) {
                                                                                                            SQLiteCursor sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT unread_count_i FROM dialogs WHERE did = " + j10, new Object[0]);
                                                                                                            if (sQLiteCursorQueryFinalized2.next()) {
                                                                                                                iIntValue = sQLiteCursorQueryFinalized2.intValue(0);
                                                                                                            }
                                                                                                            sQLiteCursorQueryFinalized2.dispose();
                                                                                                        }
                                                                                                        if (z8) {
                                                                                                            if (iIntValue4 <= 1) {
                                                                                                                i13 = iIntValue - 1;
                                                                                                            }
                                                                                                            sQLiteCursorQueryFinalized.dispose();
                                                                                                            if (!next) {
                                                                                                                i14 = i2;
                                                                                                                i15 = i13;
                                                                                                                arrayList5 = arrayList10;
                                                                                                                j8 = j10;
                                                                                                                arrayList6 = arrayList4;
                                                                                                                sQLitePreparedStatement29 = sQLitePreparedStatement12;
                                                                                                                map3 = map;
                                                                                                                iMin = i12;
                                                                                                                sQLitePreparedStatement15 = sQLitePreparedStatement6;
                                                                                                                sQLitePreparedStatement28 = sQLitePreparedStatement4;
                                                                                                            }
                                                                                                            i29 = i14;
                                                                                                            i9 = i10 + 1;
                                                                                                            sQLitePreparedStatementExecuteFast7 = sQLitePreparedStatement15;
                                                                                                            sQLitePreparedStatement12 = sQLitePreparedStatement29;
                                                                                                            j10 = j8;
                                                                                                            i38 = i15;
                                                                                                            arrayList11 = arrayList3;
                                                                                                            l = lValueOf;
                                                                                                            num2 = num;
                                                                                                            j5 = j7;
                                                                                                            arrayList13 = arrayList6;
                                                                                                            arrayList10 = arrayList5;
                                                                                                            messages_messages2 = messages_messages;
                                                                                                            sQLitePreparedStatement11 = sQLitePreparedStatement28;
                                                                                                            i39 = iMin;
                                                                                                            size = i11;
                                                                                                            sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                                        } else {
                                                                                                            if (message2.media_unread) {
                                                                                                                i13 = iIntValue + 1;
                                                                                                            }
                                                                                                            sQLiteCursorQueryFinalized.dispose();
                                                                                                            if (!next) {
                                                                                                            }
                                                                                                            i29 = i14;
                                                                                                            i9 = i10 + 1;
                                                                                                            sQLitePreparedStatementExecuteFast7 = sQLitePreparedStatement15;
                                                                                                            sQLitePreparedStatement12 = sQLitePreparedStatement29;
                                                                                                            j10 = j8;
                                                                                                            i38 = i15;
                                                                                                            arrayList11 = arrayList3;
                                                                                                            l = lValueOf;
                                                                                                            num2 = num;
                                                                                                            j5 = j7;
                                                                                                            arrayList13 = arrayList6;
                                                                                                            arrayList10 = arrayList5;
                                                                                                            messages_messages2 = messages_messages;
                                                                                                            sQLitePreparedStatement11 = sQLitePreparedStatement28;
                                                                                                            i39 = iMin;
                                                                                                            size = i11;
                                                                                                            sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                                        }
                                                                                                    }
                                                                                                } else {
                                                                                                    sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                                    sQLitePreparedStatement4 = sQLitePreparedStatement11;
                                                                                                    iIntValue = i40;
                                                                                                    arrayList3 = arrayList2;
                                                                                                    arrayList4 = arrayList13;
                                                                                                    long j16 = j5;
                                                                                                    map = map3;
                                                                                                    i12 = i39;
                                                                                                    message2 = message;
                                                                                                    j7 = j16;
                                                                                                }
                                                                                                i13 = iIntValue;
                                                                                                sQLiteCursorQueryFinalized.dispose();
                                                                                                if (!next) {
                                                                                                }
                                                                                                i29 = i14;
                                                                                                i9 = i10 + 1;
                                                                                                sQLitePreparedStatementExecuteFast7 = sQLitePreparedStatement15;
                                                                                                sQLitePreparedStatement12 = sQLitePreparedStatement29;
                                                                                                j10 = j8;
                                                                                                i38 = i15;
                                                                                                arrayList11 = arrayList3;
                                                                                                l = lValueOf;
                                                                                                num2 = num;
                                                                                                j5 = j7;
                                                                                                arrayList13 = arrayList6;
                                                                                                arrayList10 = arrayList5;
                                                                                                messages_messages2 = messages_messages;
                                                                                                sQLitePreparedStatement11 = sQLitePreparedStatement28;
                                                                                                i39 = iMin;
                                                                                                size = i11;
                                                                                                sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                            } catch (Exception e8) {
                                                                                                e = e8;
                                                                                                sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                                sQLitePreparedStatement4 = sQLitePreparedStatement11;
                                                                                            } catch (Throwable th10) {
                                                                                                th = th10;
                                                                                                sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                                sQLitePreparedStatement4 = sQLitePreparedStatement11;
                                                                                            }
                                                                                        } catch (Exception e9) {
                                                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                            sQLitePreparedStatement4 = sQLitePreparedStatement11;
                                                                                            exc = e9;
                                                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                            sQLiteCursor = null;
                                                                                            sQLitePreparedStatement5 = null;
                                                                                            r132 = sQLiteCursor;
                                                                                            checkSQLException(exc);
                                                                                            sQLiteDatabase2 = this.database;
                                                                                            if (sQLiteDatabase2 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatement6 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatement3 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatement4 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatement5 != null) {
                                                                                            }
                                                                                            if (r132 == 0) {
                                                                                            }
                                                                                        }
                                                                                    } catch (Throwable th11) {
                                                                                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                        th = th11;
                                                                                        sQLitePreparedStatement15 = sQLitePreparedStatement6;
                                                                                        sQLitePreparedStatement28 = sQLitePreparedStatement11;
                                                                                        sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                        sQLitePreparedStatement4 = sQLitePreparedStatement28;
                                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                        sQLiteCursor4 = null;
                                                                                        sQLitePreparedStatement5 = null;
                                                                                        r13 = sQLiteCursor4;
                                                                                        sQLiteDatabase = this.database;
                                                                                        if (sQLiteDatabase != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement6 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement3 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement4 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement5 != null) {
                                                                                        }
                                                                                        if (r13 == 0) {
                                                                                        }
                                                                                    }
                                                                                } catch (Exception e10) {
                                                                                    sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                    sQLitePreparedStatement4 = sQLitePreparedStatement11;
                                                                                    exc = e10;
                                                                                }
                                                                            } catch (Exception e11) {
                                                                                sQLitePreparedStatement4 = sQLitePreparedStatement11;
                                                                                exc = e11;
                                                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                sQLitePreparedStatement15 = sQLitePreparedStatement6;
                                                                                sQLitePreparedStatement19 = sQLitePreparedStatement4;
                                                                                sQLitePreparedStatement18 = null;
                                                                                sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                sQLitePreparedStatement4 = sQLitePreparedStatement19;
                                                                                sQLitePreparedStatement5 = sQLitePreparedStatement18;
                                                                                sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                r132 = sQLitePreparedStatement18;
                                                                                checkSQLException(exc);
                                                                                sQLiteDatabase2 = this.database;
                                                                                if (sQLiteDatabase2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement6 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement3 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement4 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement5 != null) {
                                                                                }
                                                                                if (r132 == 0) {
                                                                                }
                                                                            } catch (Throwable th12) {
                                                                                sQLitePreparedStatement4 = sQLitePreparedStatement11;
                                                                                th = th12;
                                                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                sQLitePreparedStatement15 = sQLitePreparedStatement6;
                                                                                sQLitePreparedStatement17 = sQLitePreparedStatement4;
                                                                                sQLitePreparedStatement16 = null;
                                                                                sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                sQLitePreparedStatement4 = sQLitePreparedStatement17;
                                                                                sQLitePreparedStatement5 = sQLitePreparedStatement16;
                                                                                sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                r13 = sQLitePreparedStatement16;
                                                                                sQLiteDatabase = this.database;
                                                                                if (sQLiteDatabase != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement6 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement3 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement4 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement5 != null) {
                                                                                }
                                                                                if (r13 == 0) {
                                                                                }
                                                                            }
                                                                        } else {
                                                                            i11 = size;
                                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                            sQLitePreparedStatement4 = sQLitePreparedStatement11;
                                                                            arrayList3 = arrayList2;
                                                                            arrayList4 = arrayList13;
                                                                            HashMap map4 = map3;
                                                                            message2 = message;
                                                                            long j17 = j5;
                                                                            map = map4;
                                                                            i12 = i39;
                                                                            j7 = j17;
                                                                            i13 = i40;
                                                                        }
                                                                        if (j2 == 0) {
                                                                            sQLitePreparedStatement15 = sQLitePreparedStatement30;
                                                                            if (i14 != -2) {
                                                                                j8 = j;
                                                                                sQLitePreparedStatement28 = sQLitePreparedStatement4;
                                                                            }
                                                                            long topicId2 = MessageObject.getTopicId(this.currentAccount, message2, isForum(message2.dialog_id), isMonoForum(message2.dialog_id));
                                                                            if (j2 != 0 || (i14 == -2 && topicId2 != 0)) {
                                                                                if (MediaDataController.canAddMessageToMedia(message2)) {
                                                                                    sQLitePreparedStatement29 = sQLitePreparedStatement12;
                                                                                } else {
                                                                                    sQLitePreparedStatement12.requery();
                                                                                    sQLitePreparedStatement29 = sQLitePreparedStatement12;
                                                                                    sQLitePreparedStatement29.bindInteger(1, message2.id);
                                                                                    sQLitePreparedStatement29.bindLong(2, j8);
                                                                                    if (j2 != 0) {
                                                                                        topicId2 = j2;
                                                                                    }
                                                                                    sQLitePreparedStatement29.bindLong(3, topicId2);
                                                                                    sQLitePreparedStatement29.bindInteger(4, message2.date);
                                                                                    sQLitePreparedStatement29.bindInteger(5, MediaDataController.getMediaType(message2));
                                                                                    sQLitePreparedStatement29.bindByteBuffer(6, nativeByteBuffer);
                                                                                    sQLitePreparedStatement29.step();
                                                                                }
                                                                                nativeByteBuffer.reuse();
                                                                                if (message2.ttl_period == 0) {
                                                                                    try {
                                                                                        try {
                                                                                            if (message2.id > 0) {
                                                                                                if (sQLitePreparedStatementExecuteFast4 == null) {
                                                                                                    sQLitePreparedStatementExecuteFast4 = this.database.executeFast("REPLACE INTO enc_tasks_v4 VALUES(?, ?, ?, ?)");
                                                                                                }
                                                                                                SQLitePreparedStatement sQLitePreparedStatement34 = sQLitePreparedStatementExecuteFast4;
                                                                                                try {
                                                                                                    sQLitePreparedStatement34.requery();
                                                                                                    sQLitePreparedStatement34.bindInteger(1, message2.id);
                                                                                                    sQLitePreparedStatement34.bindLong(2, message2.dialog_id);
                                                                                                    sQLitePreparedStatement34.bindInteger(3, message2.date + message2.ttl_period);
                                                                                                    sQLitePreparedStatement34.bindInteger(4, 0);
                                                                                                    sQLitePreparedStatement34.step();
                                                                                                    sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatement34;
                                                                                                    iMin = Math.min(i12, message2.date + message2.ttl_period);
                                                                                                } catch (Exception e12) {
                                                                                                    exc = e12;
                                                                                                    sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatement34;
                                                                                                    sQLitePreparedStatement19 = sQLitePreparedStatement28;
                                                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                                    sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                                    sQLitePreparedStatement18 = null;
                                                                                                    sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                                    sQLitePreparedStatement4 = sQLitePreparedStatement19;
                                                                                                    sQLitePreparedStatement5 = sQLitePreparedStatement18;
                                                                                                    sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                                    r132 = sQLitePreparedStatement18;
                                                                                                    checkSQLException(exc);
                                                                                                    sQLiteDatabase2 = this.database;
                                                                                                    if (sQLiteDatabase2 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement6 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement3 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement4 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement5 != null) {
                                                                                                    }
                                                                                                    if (r132 == 0) {
                                                                                                    }
                                                                                                } catch (Throwable th13) {
                                                                                                    th = th13;
                                                                                                    sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatement34;
                                                                                                    sQLitePreparedStatement17 = sQLitePreparedStatement28;
                                                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                                    sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                                    sQLitePreparedStatement16 = null;
                                                                                                    sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                                    sQLitePreparedStatement4 = sQLitePreparedStatement17;
                                                                                                    sQLitePreparedStatement5 = sQLitePreparedStatement16;
                                                                                                    sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                                    r13 = sQLitePreparedStatement16;
                                                                                                    sQLiteDatabase = this.database;
                                                                                                    if (sQLiteDatabase != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement6 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement3 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement4 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement5 != null) {
                                                                                                    }
                                                                                                    if (r13 == 0) {
                                                                                                    }
                                                                                                }
                                                                                            } else {
                                                                                                iMin = i12;
                                                                                            }
                                                                                            TLRPC.MessageMedia messageMedia4 = message2.media;
                                                                                            if (messageMedia4 instanceof TLRPC.TL_messageMediaPoll) {
                                                                                                if (sQLitePreparedStatementExecuteFast5 == null) {
                                                                                                    sQLitePreparedStatementExecuteFast5 = this.database.executeFast("REPLACE INTO polls_v2 VALUES(?, ?, ?)");
                                                                                                }
                                                                                                sQLitePreparedStatement31 = sQLitePreparedStatementExecuteFast5;
                                                                                                try {
                                                                                                    TLRPC.TL_messageMediaPoll tL_messageMediaPoll = (TLRPC.TL_messageMediaPoll) message2.media;
                                                                                                    sQLitePreparedStatement31.requery();
                                                                                                    sQLitePreparedStatement31.bindInteger(1, message2.id);
                                                                                                    sQLitePreparedStatement31.bindLong(2, message2.dialog_id);
                                                                                                    sQLitePreparedStatement31.bindLong(3, tL_messageMediaPoll.poll.id);
                                                                                                    sQLitePreparedStatementExecuteFast5 = sQLitePreparedStatement31;
                                                                                                    sQLitePreparedStatement31.step();
                                                                                                    if (i14 == 0 || !isValidKeyboardToSave(message2)) {
                                                                                                        map2 = map;
                                                                                                    } else {
                                                                                                        TopicKey topicKeyOf = TopicKey.of(j8, MessageObject.getTopicId(this.currentAccount, message2, isForum(j8), isMonoForum(j8)));
                                                                                                        if (map == null) {
                                                                                                            map2 = map;
                                                                                                            message6 = null;
                                                                                                        } else {
                                                                                                            map2 = map;
                                                                                                            message6 = (TLRPC.Message) map2.get(topicKeyOf);
                                                                                                        }
                                                                                                        if (message6 == null || message6.id < message2.id) {
                                                                                                            HashMap map5 = map2 == null ? new HashMap() : map2;
                                                                                                            map5.put(topicKeyOf, message2);
                                                                                                            map3 = map5;
                                                                                                        }
                                                                                                        i29 = i14;
                                                                                                        i9 = i10 + 1;
                                                                                                        sQLitePreparedStatementExecuteFast7 = sQLitePreparedStatement15;
                                                                                                        sQLitePreparedStatement12 = sQLitePreparedStatement29;
                                                                                                        j10 = j8;
                                                                                                        i38 = i15;
                                                                                                        arrayList11 = arrayList3;
                                                                                                        l = lValueOf;
                                                                                                        num2 = num;
                                                                                                        j5 = j7;
                                                                                                        arrayList13 = arrayList6;
                                                                                                        arrayList10 = arrayList5;
                                                                                                        messages_messages2 = messages_messages;
                                                                                                        sQLitePreparedStatement11 = sQLitePreparedStatement28;
                                                                                                        i39 = iMin;
                                                                                                        size = i11;
                                                                                                        sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                                    }
                                                                                                    map3 = map2;
                                                                                                    i29 = i14;
                                                                                                    i9 = i10 + 1;
                                                                                                    sQLitePreparedStatementExecuteFast7 = sQLitePreparedStatement15;
                                                                                                    sQLitePreparedStatement12 = sQLitePreparedStatement29;
                                                                                                    j10 = j8;
                                                                                                    i38 = i15;
                                                                                                    arrayList11 = arrayList3;
                                                                                                    l = lValueOf;
                                                                                                    num2 = num;
                                                                                                    j5 = j7;
                                                                                                    arrayList13 = arrayList6;
                                                                                                    arrayList10 = arrayList5;
                                                                                                    messages_messages2 = messages_messages;
                                                                                                    sQLitePreparedStatement11 = sQLitePreparedStatement28;
                                                                                                    i39 = iMin;
                                                                                                    size = i11;
                                                                                                    sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                                } catch (Exception e13) {
                                                                                                    exc = e13;
                                                                                                    sQLitePreparedStatementExecuteFast5 = sQLitePreparedStatement31;
                                                                                                    sQLitePreparedStatement19 = sQLitePreparedStatement28;
                                                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                                    sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                                    sQLitePreparedStatement18 = null;
                                                                                                    sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                                    sQLitePreparedStatement4 = sQLitePreparedStatement19;
                                                                                                    sQLitePreparedStatement5 = sQLitePreparedStatement18;
                                                                                                    sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                                    r132 = sQLitePreparedStatement18;
                                                                                                    checkSQLException(exc);
                                                                                                    sQLiteDatabase2 = this.database;
                                                                                                    if (sQLiteDatabase2 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement6 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement3 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement4 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement5 != null) {
                                                                                                    }
                                                                                                    if (r132 == 0) {
                                                                                                    }
                                                                                                } catch (Throwable th14) {
                                                                                                    th = th14;
                                                                                                    sQLitePreparedStatementExecuteFast5 = sQLitePreparedStatement31;
                                                                                                    sQLitePreparedStatement17 = sQLitePreparedStatement28;
                                                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                                    sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                                    sQLitePreparedStatement16 = null;
                                                                                                    sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                                    sQLitePreparedStatement4 = sQLitePreparedStatement17;
                                                                                                    sQLitePreparedStatement5 = sQLitePreparedStatement16;
                                                                                                    sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                                    r13 = sQLitePreparedStatement16;
                                                                                                    sQLiteDatabase = this.database;
                                                                                                    if (sQLiteDatabase != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement6 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement3 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement4 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement5 != null) {
                                                                                                    }
                                                                                                    if (r13 == 0) {
                                                                                                    }
                                                                                                }
                                                                                            } else {
                                                                                                if (messageMedia4 instanceof TLRPC.TL_messageMediaWebPage) {
                                                                                                    if (sQLitePreparedStatementExecuteFast3 == null) {
                                                                                                        sQLitePreparedStatementExecuteFast3 = this.database.executeFast("REPLACE INTO webpage_pending_v2 VALUES(?, ?, ?)");
                                                                                                    }
                                                                                                    sQLitePreparedStatement31 = sQLitePreparedStatementExecuteFast3;
                                                                                                    try {
                                                                                                        sQLitePreparedStatement31.requery();
                                                                                                        sQLitePreparedStatement31.bindLong(1, message2.media.webpage.id);
                                                                                                        sQLitePreparedStatement31.bindInteger(2, message2.id);
                                                                                                        sQLitePreparedStatement31.bindLong(3, message2.dialog_id);
                                                                                                        sQLitePreparedStatementExecuteFast3 = sQLitePreparedStatement31;
                                                                                                        sQLitePreparedStatement31.step();
                                                                                                    } catch (Exception e14) {
                                                                                                        exc = e14;
                                                                                                        sQLitePreparedStatementExecuteFast3 = sQLitePreparedStatement31;
                                                                                                        sQLitePreparedStatement19 = sQLitePreparedStatement28;
                                                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                                        sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                                        sQLitePreparedStatement18 = null;
                                                                                                        sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                                        sQLitePreparedStatement4 = sQLitePreparedStatement19;
                                                                                                        sQLitePreparedStatement5 = sQLitePreparedStatement18;
                                                                                                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                                        r132 = sQLitePreparedStatement18;
                                                                                                        checkSQLException(exc);
                                                                                                        sQLiteDatabase2 = this.database;
                                                                                                        if (sQLiteDatabase2 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatement6 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatement3 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatement4 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatement5 != null) {
                                                                                                        }
                                                                                                        if (r132 == 0) {
                                                                                                        }
                                                                                                    } catch (Throwable th15) {
                                                                                                        th = th15;
                                                                                                        sQLitePreparedStatementExecuteFast3 = sQLitePreparedStatement31;
                                                                                                        sQLitePreparedStatement17 = sQLitePreparedStatement28;
                                                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                                        sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                                        sQLitePreparedStatement16 = null;
                                                                                                        sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                                        sQLitePreparedStatement4 = sQLitePreparedStatement17;
                                                                                                        sQLitePreparedStatement5 = sQLitePreparedStatement16;
                                                                                                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                                        r13 = sQLitePreparedStatement16;
                                                                                                        sQLiteDatabase = this.database;
                                                                                                        if (sQLiteDatabase != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatement6 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatement3 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatement4 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatement5 != null) {
                                                                                                        }
                                                                                                        if (r13 == 0) {
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                                if (i14 == 0) {
                                                                                                    map2 = map;
                                                                                                    map3 = map2;
                                                                                                }
                                                                                                i29 = i14;
                                                                                                i9 = i10 + 1;
                                                                                                sQLitePreparedStatementExecuteFast7 = sQLitePreparedStatement15;
                                                                                                sQLitePreparedStatement12 = sQLitePreparedStatement29;
                                                                                                j10 = j8;
                                                                                                i38 = i15;
                                                                                                arrayList11 = arrayList3;
                                                                                                l = lValueOf;
                                                                                                num2 = num;
                                                                                                j5 = j7;
                                                                                                arrayList13 = arrayList6;
                                                                                                arrayList10 = arrayList5;
                                                                                                messages_messages2 = messages_messages;
                                                                                                sQLitePreparedStatement11 = sQLitePreparedStatement28;
                                                                                                i39 = iMin;
                                                                                                size = i11;
                                                                                                sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                            }
                                                                                        } catch (Exception e15) {
                                                                                            e = e15;
                                                                                            exc = e;
                                                                                            sQLitePreparedStatement19 = sQLitePreparedStatement28;
                                                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                            sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                            sQLitePreparedStatement18 = null;
                                                                                            sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                            sQLitePreparedStatement4 = sQLitePreparedStatement19;
                                                                                            sQLitePreparedStatement5 = sQLitePreparedStatement18;
                                                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                            r132 = sQLitePreparedStatement18;
                                                                                            checkSQLException(exc);
                                                                                            sQLiteDatabase2 = this.database;
                                                                                            if (sQLiteDatabase2 != null) {
                                                                                                sQLiteDatabase2.commitTransaction();
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                sQLitePreparedStatementExecuteFast2.dispose();
                                                                                            }
                                                                                            if (sQLitePreparedStatement6 != null) {
                                                                                                sQLitePreparedStatement6.dispose();
                                                                                            }
                                                                                            if (sQLitePreparedStatement3 != null) {
                                                                                                sQLitePreparedStatement3.dispose();
                                                                                            }
                                                                                            if (sQLitePreparedStatement4 != null) {
                                                                                                sQLitePreparedStatement4.dispose();
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                                sQLitePreparedStatementExecuteFast5.dispose();
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                                sQLitePreparedStatementExecuteFast3.dispose();
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                                sQLitePreparedStatementExecuteFast4.dispose();
                                                                                            }
                                                                                            if (sQLitePreparedStatement5 != null) {
                                                                                                sQLitePreparedStatement5.dispose();
                                                                                            }
                                                                                            if (r132 == 0) {
                                                                                                r132.dispose();
                                                                                                return;
                                                                                            }
                                                                                            return;
                                                                                        }
                                                                                    } catch (Throwable th16) {
                                                                                        th = th16;
                                                                                        th = th;
                                                                                        sQLitePreparedStatement17 = sQLitePreparedStatement28;
                                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                        sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                        sQLitePreparedStatement16 = null;
                                                                                        sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                        sQLitePreparedStatement4 = sQLitePreparedStatement17;
                                                                                        sQLitePreparedStatement5 = sQLitePreparedStatement16;
                                                                                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                        r13 = sQLitePreparedStatement16;
                                                                                        sQLiteDatabase = this.database;
                                                                                        if (sQLiteDatabase != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement6 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement3 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement4 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement5 != null) {
                                                                                        }
                                                                                        if (r13 == 0) {
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        } else {
                                                                            sQLitePreparedStatement15 = sQLitePreparedStatement30;
                                                                        }
                                                                        if (MediaDataController.canAddMessageToMedia(message2)) {
                                                                            j8 = j;
                                                                            sQLitePreparedStatement28 = sQLitePreparedStatement4;
                                                                            if ((message2 instanceof TLRPC.TL_messageService) && (message2.action instanceof TLRPC.TL_messageActionHistoryClear)) {
                                                                                try {
                                                                                    try {
                                                                                        this.database.executeFast(String.format(Locale.US, "DELETE FROM media_v4 WHERE mid = %d AND uid = %d", Integer.valueOf(message2.id), Long.valueOf(j))).stepThis().dispose();
                                                                                        this.database.executeFast("DELETE FROM media_counts_v2 WHERE uid = " + j8).stepThis().dispose();
                                                                                    } catch (Throwable th17) {
                                                                                        th = th17;
                                                                                        sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                        sQLitePreparedStatement4 = sQLitePreparedStatement28;
                                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                        sQLiteCursor4 = null;
                                                                                        sQLitePreparedStatement5 = null;
                                                                                        r13 = sQLiteCursor4;
                                                                                        sQLiteDatabase = this.database;
                                                                                        if (sQLiteDatabase != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement6 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement3 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement4 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement5 != null) {
                                                                                        }
                                                                                        if (r13 == 0) {
                                                                                        }
                                                                                    }
                                                                                } catch (Exception e16) {
                                                                                    checkSQLException(e16);
                                                                                }
                                                                            }
                                                                        } else {
                                                                            sQLitePreparedStatement4.requery();
                                                                            sQLitePreparedStatement28 = sQLitePreparedStatement4;
                                                                            sQLitePreparedStatement28.bindInteger(1, message2.id);
                                                                            j8 = j;
                                                                            sQLitePreparedStatement28.bindLong(2, j8);
                                                                            sQLitePreparedStatement28.bindInteger(3, message2.date);
                                                                            sQLitePreparedStatement28.bindInteger(4, MediaDataController.getMediaType(message2));
                                                                            sQLitePreparedStatement28.bindByteBuffer(5, nativeByteBuffer);
                                                                            sQLitePreparedStatement28.step();
                                                                        }
                                                                        long topicId22 = MessageObject.getTopicId(this.currentAccount, message2, isForum(message2.dialog_id), isMonoForum(message2.dialog_id));
                                                                        if (j2 != 0) {
                                                                            if (MediaDataController.canAddMessageToMedia(message2)) {
                                                                            }
                                                                            nativeByteBuffer.reuse();
                                                                            if (message2.ttl_period == 0) {
                                                                            }
                                                                        }
                                                                    } catch (Exception e17) {
                                                                        e = e17;
                                                                        sQLitePreparedStatement28 = sQLitePreparedStatement4;
                                                                        exc = e;
                                                                        sQLitePreparedStatement19 = sQLitePreparedStatement28;
                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                        sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                        sQLitePreparedStatement18 = null;
                                                                        sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                        sQLitePreparedStatement4 = sQLitePreparedStatement19;
                                                                        sQLitePreparedStatement5 = sQLitePreparedStatement18;
                                                                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                        r132 = sQLitePreparedStatement18;
                                                                        checkSQLException(exc);
                                                                        sQLiteDatabase2 = this.database;
                                                                        if (sQLiteDatabase2 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement6 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement3 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement4 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement5 != null) {
                                                                        }
                                                                        if (r132 == 0) {
                                                                        }
                                                                    } catch (Throwable th18) {
                                                                        th = th18;
                                                                        sQLitePreparedStatement28 = sQLitePreparedStatement4;
                                                                        th = th;
                                                                        sQLitePreparedStatement17 = sQLitePreparedStatement28;
                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                        sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                        sQLitePreparedStatement16 = null;
                                                                        sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                        sQLitePreparedStatement4 = sQLitePreparedStatement17;
                                                                        sQLitePreparedStatement5 = sQLitePreparedStatement16;
                                                                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                        r13 = sQLitePreparedStatement16;
                                                                        sQLiteDatabase = this.database;
                                                                        if (sQLiteDatabase != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement6 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement3 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement4 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement5 != null) {
                                                                        }
                                                                        if (r13 == 0) {
                                                                        }
                                                                    }
                                                                    if (i10 == 0 && z) {
                                                                        try {
                                                                            SQLiteCursor sQLiteCursorQueryFinalized3 = this.database.queryFinalized("SELECT pinned, unread_count_i, flags FROM dialogs WHERE did = " + j10, new Object[0]);
                                                                            try {
                                                                                boolean next2 = sQLiteCursorQueryFinalized3.next();
                                                                                if (next2) {
                                                                                    iIntValue2 = sQLiteCursorQueryFinalized3.intValue(0);
                                                                                    int iIntValue5 = sQLiteCursorQueryFinalized3.intValue(1);
                                                                                    iIntValue3 = sQLiteCursorQueryFinalized3.intValue(2);
                                                                                    i26 = iIntValue5;
                                                                                } else {
                                                                                    i26 = 0;
                                                                                    iIntValue2 = 0;
                                                                                    iIntValue3 = 0;
                                                                                }
                                                                                sQLiteCursorQueryFinalized3.dispose();
                                                                                if (next2) {
                                                                                    try {
                                                                                        sQLitePreparedStatementExecuteFast8 = this.database.executeFast("UPDATE dialogs SET date = ?, last_mid = ?, last_mid_group = ?, inbox_max = ?, last_mid_i = ?, pts = ?, date_i = ? WHERE did = ?");
                                                                                        try {
                                                                                            sQLitePreparedStatementExecuteFast8.bindInteger(1, message2.date);
                                                                                            sQLitePreparedStatementExecuteFast8.bindInteger(2, message2.id);
                                                                                            if ((message2.flags & 131072) != 0) {
                                                                                                sQLitePreparedStatementExecuteFast8.bindLong(3, message2.grouped_id);
                                                                                            } else {
                                                                                                sQLitePreparedStatementExecuteFast8.bindNull(3);
                                                                                            }
                                                                                            sQLitePreparedStatementExecuteFast8.bindInteger(4, message2.id);
                                                                                            sQLitePreparedStatementExecuteFast8.bindInteger(5, message2.id);
                                                                                            sQLitePreparedStatementExecuteFast8.bindInteger(6, messages_messages2.pts);
                                                                                            sQLitePreparedStatementExecuteFast8.bindInteger(7, message2.date);
                                                                                            sQLitePreparedStatementExecuteFast8.bindLong(8, j10);
                                                                                            sQLitePreparedStatementExecuteFast8.step();
                                                                                            sQLitePreparedStatementExecuteFast8.dispose();
                                                                                        } catch (Exception e18) {
                                                                                            exc = e18;
                                                                                            sQLitePreparedStatement5 = sQLitePreparedStatementExecuteFast8;
                                                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                            r132 = 0;
                                                                                            checkSQLException(exc);
                                                                                            sQLiteDatabase2 = this.database;
                                                                                            if (sQLiteDatabase2 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatement6 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatement3 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatement4 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatement5 != null) {
                                                                                            }
                                                                                            if (r132 == 0) {
                                                                                            }
                                                                                        } catch (Throwable th19) {
                                                                                            th = th19;
                                                                                            sQLitePreparedStatement5 = sQLitePreparedStatementExecuteFast8;
                                                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                            r13 = 0;
                                                                                        }
                                                                                    } catch (Exception e19) {
                                                                                        exc = e19;
                                                                                        sQLiteCursorQueryFinalized3 = null;
                                                                                        sQLiteCursor3 = sQLiteCursorQueryFinalized3;
                                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                        sQLiteCursor = sQLiteCursor3;
                                                                                        sQLitePreparedStatement5 = null;
                                                                                        r132 = sQLiteCursor;
                                                                                        checkSQLException(exc);
                                                                                        sQLiteDatabase2 = this.database;
                                                                                        if (sQLiteDatabase2 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement6 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement3 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement4 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement5 != null) {
                                                                                        }
                                                                                        if (r132 == 0) {
                                                                                        }
                                                                                    } catch (Throwable th20) {
                                                                                        th = th20;
                                                                                        sQLiteCursorQueryFinalized3 = null;
                                                                                        sQLiteCursor2 = sQLiteCursorQueryFinalized3;
                                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                        sQLiteCursor4 = sQLiteCursor2;
                                                                                        sQLitePreparedStatement5 = null;
                                                                                        r13 = sQLiteCursor4;
                                                                                        sQLiteDatabase = this.database;
                                                                                        if (sQLiteDatabase != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement6 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement3 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement4 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement5 != null) {
                                                                                        }
                                                                                        if (r13 == 0) {
                                                                                        }
                                                                                    }
                                                                                } else {
                                                                                    sQLitePreparedStatementExecuteFast8 = this.database.executeFast("REPLACE INTO dialogs VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
                                                                                    try {
                                                                                        sQLitePreparedStatementExecuteFast8.bindLong(1, j10);
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(2, message2.date);
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(3, 0);
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(4, message2.id);
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(5, message2.id);
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(6, 0);
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(7, message2.id);
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(8, i26);
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(9, messages_messages2.pts);
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(10, message2.date);
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(11, iIntValue2);
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(12, iIntValue3);
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(13, -1);
                                                                                        sQLitePreparedStatementExecuteFast8.bindNull(14);
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(15, 0);
                                                                                        if ((message2.flags & 131072) != 0) {
                                                                                            sQLitePreparedStatementExecuteFast8.bindLong(16, message2.grouped_id);
                                                                                        } else {
                                                                                            sQLitePreparedStatementExecuteFast8.bindNull(16);
                                                                                        }
                                                                                        sQLitePreparedStatementExecuteFast8.bindInteger(17, 0);
                                                                                        this.unknownDialogsIds.put(j10, Boolean.TRUE);
                                                                                        sQLitePreparedStatementExecuteFast8.step();
                                                                                        sQLitePreparedStatementExecuteFast8.dispose();
                                                                                    } catch (Exception e20) {
                                                                                        sQLitePreparedStatement5 = sQLitePreparedStatementExecuteFast8;
                                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                        r132 = 0;
                                                                                        exc = e20;
                                                                                        checkSQLException(exc);
                                                                                        sQLiteDatabase2 = this.database;
                                                                                        if (sQLiteDatabase2 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement6 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement3 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement4 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                        }
                                                                                        if (sQLitePreparedStatement5 != null) {
                                                                                        }
                                                                                        if (r132 == 0) {
                                                                                        }
                                                                                    } catch (Throwable th21) {
                                                                                        sQLitePreparedStatement5 = sQLitePreparedStatementExecuteFast8;
                                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                        r13 = 0;
                                                                                        th = th21;
                                                                                    }
                                                                                }
                                                                            } catch (Exception e21) {
                                                                                exc = e21;
                                                                            } catch (Throwable th22) {
                                                                                th = th22;
                                                                            }
                                                                        } catch (Exception e22) {
                                                                            exc = e22;
                                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                            sQLitePreparedStatement15 = sQLitePreparedStatement6;
                                                                            sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                            sQLitePreparedStatement19 = sQLitePreparedStatement4;
                                                                            sQLitePreparedStatement18 = null;
                                                                            sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                            sQLitePreparedStatement4 = sQLitePreparedStatement19;
                                                                            sQLitePreparedStatement5 = sQLitePreparedStatement18;
                                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                            r132 = sQLitePreparedStatement18;
                                                                            checkSQLException(exc);
                                                                            sQLiteDatabase2 = this.database;
                                                                            if (sQLiteDatabase2 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatement6 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatement3 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatement4 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatement5 != null) {
                                                                            }
                                                                            if (r132 == 0) {
                                                                            }
                                                                        } catch (Throwable th23) {
                                                                            th = th23;
                                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                            sQLitePreparedStatement15 = sQLitePreparedStatement6;
                                                                            sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                            sQLitePreparedStatement17 = sQLitePreparedStatement4;
                                                                            sQLitePreparedStatement16 = null;
                                                                            sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                            sQLitePreparedStatement4 = sQLitePreparedStatement17;
                                                                            sQLitePreparedStatement5 = sQLitePreparedStatement16;
                                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                            r13 = sQLitePreparedStatement16;
                                                                            sQLiteDatabase = this.database;
                                                                            if (sQLiteDatabase != null) {
                                                                            }
                                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatement6 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatement3 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatement4 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                            }
                                                                            if (sQLitePreparedStatement5 != null) {
                                                                            }
                                                                            if (r13 == 0) {
                                                                            }
                                                                        }
                                                                    }
                                                                    fixUnsupportedMedia(message2);
                                                                    MessageObject.normalizeFlags(message2);
                                                                    nativeByteBuffer = new NativeByteBuffer(message2.getObjectSize());
                                                                    message2.serializeToStream(nativeByteBuffer);
                                                                    i18 = 0;
                                                                    while (i18 < 2) {
                                                                        boolean z9 = i18 == 1;
                                                                        try {
                                                                            if (z9) {
                                                                                long j18 = 0;
                                                                                if (j2 == 0) {
                                                                                    i19 = i13;
                                                                                    topicId = MessageObject.getTopicId(this.currentAccount, message2, isForum(message2.dialog_id), isMonoForum(message2.dialog_id));
                                                                                    j18 = 0;
                                                                                } else {
                                                                                    i19 = i13;
                                                                                    topicId = j2;
                                                                                }
                                                                                if (topicId == j18) {
                                                                                    arrayList8 = arrayList10;
                                                                                    arrayList7 = arrayList4;
                                                                                    sQLitePreparedStatement33 = sQLitePreparedStatement6;
                                                                                    i18++;
                                                                                    j10 = j;
                                                                                    sQLitePreparedStatement6 = sQLitePreparedStatement33;
                                                                                    i13 = i19;
                                                                                    arrayList4 = arrayList7;
                                                                                    arrayList10 = arrayList8;
                                                                                } else {
                                                                                    j9 = j7;
                                                                                    if (j10 == j9 && MessageObject.getSavedDialogId(j9, message2) != 0) {
                                                                                        if (arrayList15 == null) {
                                                                                            arrayList15 = new ArrayList();
                                                                                        }
                                                                                        ArrayList arrayList16 = arrayList15;
                                                                                        arrayList16.add(message2);
                                                                                        arrayList15 = arrayList16;
                                                                                    }
                                                                                    sQLitePreparedStatement32 = sQLitePreparedStatementExecuteFast2;
                                                                                }
                                                                            } else {
                                                                                i19 = i13;
                                                                                j9 = j7;
                                                                                topicId = j2;
                                                                                sQLitePreparedStatement32 = sQLitePreparedStatement3;
                                                                            }
                                                                            sQLitePreparedStatement32.requery();
                                                                            j7 = j9;
                                                                            sQLitePreparedStatement32.bindInteger(1, message2.id);
                                                                            sQLitePreparedStatement32.bindLong(2, j10);
                                                                            if (z9) {
                                                                                sQLitePreparedStatement32.bindLong(3, topicId);
                                                                                i20 = 4;
                                                                            } else {
                                                                                i20 = 3;
                                                                            }
                                                                            int i41 = i20 + 1;
                                                                            sQLitePreparedStatement32.bindInteger(i20, MessageObject.getUnreadFlags(message2));
                                                                            sQLitePreparedStatement32.bindInteger(i41, message2.send_state);
                                                                            sQLitePreparedStatement32.bindInteger(i20 + 2, message2.date);
                                                                            int i42 = i20 + 4;
                                                                            sQLitePreparedStatement32.bindByteBuffer(i20 + 3, nativeByteBuffer);
                                                                            int i43 = i20 + 5;
                                                                            sQLitePreparedStatement32.bindInteger(i42, (MessageObject.isOut(message2) || message2.from_scheduled) ? 1 : 0);
                                                                            int i44 = i20 + 6;
                                                                            sQLitePreparedStatement32.bindInteger(i43, message2.ttl);
                                                                            if ((message2.flags & 1024) != 0) {
                                                                                i21 = i20 + 7;
                                                                                messageMediaType = message2.views;
                                                                            } else {
                                                                                i21 = i20 + 7;
                                                                                messageMediaType = getMessageMediaType(message2);
                                                                            }
                                                                            sQLitePreparedStatement32.bindInteger(i44, messageMediaType);
                                                                            if (message2.replyStory != null) {
                                                                                nativeByteBuffer2 = new NativeByteBuffer(message2.replyStory.getObjectSize());
                                                                                message2.replyStory.serializeToStream(nativeByteBuffer2);
                                                                                int i45 = i21 + 1;
                                                                                sQLitePreparedStatement32.bindByteBuffer(i21, nativeByteBuffer2);
                                                                                i22 = i45;
                                                                            } else {
                                                                                int i46 = i21 + 1;
                                                                                sQLitePreparedStatement32.bindNull(i21);
                                                                                i22 = i46;
                                                                                nativeByteBuffer2 = null;
                                                                            }
                                                                            int i47 = message2.stickerVerified;
                                                                            sQLitePreparedStatement32.bindInteger(i22, i47 == 0 ? 1 : i47 == 2 ? 2 : 0);
                                                                            arrayList7 = arrayList4;
                                                                            sQLitePreparedStatement32.bindInteger(i22 + 1, message2.mentioned ? 1 : 0);
                                                                            int i48 = i22 + 3;
                                                                            sQLitePreparedStatement32.bindInteger(i22 + 2, message2.forwards);
                                                                            if (message2.replies != null) {
                                                                                nativeByteBuffer3 = new NativeByteBuffer(message2.replies.getObjectSize());
                                                                                message2.replies.serializeToStream(nativeByteBuffer3);
                                                                                i23 = i22 + 4;
                                                                                sQLitePreparedStatement32.bindByteBuffer(i48, nativeByteBuffer3);
                                                                            } else {
                                                                                i23 = i22 + 4;
                                                                                sQLitePreparedStatement32.bindNull(i48);
                                                                                nativeByteBuffer3 = null;
                                                                            }
                                                                            TLRPC.MessageReplyHeader messageReplyHeader = message2.reply_to;
                                                                            if (messageReplyHeader != null) {
                                                                                int i49 = i23 + 1;
                                                                                int i50 = messageReplyHeader.reply_to_top_id;
                                                                                if (i50 == 0) {
                                                                                    i50 = messageReplyHeader.reply_to_msg_id;
                                                                                }
                                                                                sQLitePreparedStatement32.bindInteger(i23, i50);
                                                                                i24 = i49;
                                                                            } else {
                                                                                int i51 = i23 + 1;
                                                                                sQLitePreparedStatement32.bindInteger(i23, 0);
                                                                                i24 = i51;
                                                                            }
                                                                            int i52 = i24 + 1;
                                                                            arrayList8 = arrayList10;
                                                                            sQLitePreparedStatement32.bindLong(i24, MessageObject.getChannelId(message2));
                                                                            NativeByteBuffer nativeByteBufferWriteLocalParams = MessageCustomParamsHelper.writeLocalParams(message2);
                                                                            int i53 = i24 + 2;
                                                                            if (nativeByteBufferWriteLocalParams == null) {
                                                                                sQLitePreparedStatement32.bindNull(i52);
                                                                            } else {
                                                                                sQLitePreparedStatement32.bindByteBuffer(i52, nativeByteBufferWriteLocalParams);
                                                                            }
                                                                            if (!z9) {
                                                                                if ((message2.flags & 131072) != 0) {
                                                                                    i25 = i53 + 1;
                                                                                    sQLitePreparedStatement32.bindLong(i53, message2.grouped_id);
                                                                                } else {
                                                                                    i25 = i53 + 1;
                                                                                    sQLitePreparedStatement32.bindNull(i53);
                                                                                }
                                                                                i53 = i25;
                                                                            }
                                                                            TLRPC.MessageReplyHeader messageReplyHeader2 = message2.reply_to;
                                                                            if (messageReplyHeader2 != null) {
                                                                                sQLitePreparedStatement32.bindInteger(i53, messageReplyHeader2.story_id);
                                                                            } else {
                                                                                sQLitePreparedStatement32.bindInteger(i53, 0);
                                                                            }
                                                                            sQLitePreparedStatement32.step();
                                                                            if (i18 != 0 || sQLitePreparedStatement6 == null) {
                                                                                sQLitePreparedStatement33 = sQLitePreparedStatement6;
                                                                            } else {
                                                                                sQLitePreparedStatement33 = sQLitePreparedStatement6;
                                                                                try {
                                                                                    bindMessageTags(sQLitePreparedStatement33, message2);
                                                                                } catch (Exception e23) {
                                                                                    e = e23;
                                                                                    exc = e;
                                                                                    sQLitePreparedStatement15 = sQLitePreparedStatement33;
                                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                    sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                    sQLitePreparedStatement19 = sQLitePreparedStatement4;
                                                                                    sQLitePreparedStatement18 = null;
                                                                                    sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                    sQLitePreparedStatement4 = sQLitePreparedStatement19;
                                                                                    sQLitePreparedStatement5 = sQLitePreparedStatement18;
                                                                                    sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                    r132 = sQLitePreparedStatement18;
                                                                                    checkSQLException(exc);
                                                                                    sQLiteDatabase2 = this.database;
                                                                                    if (sQLiteDatabase2 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement6 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement3 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement4 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement5 != null) {
                                                                                    }
                                                                                    if (r132 == 0) {
                                                                                    }
                                                                                } catch (Throwable th24) {
                                                                                    th = th24;
                                                                                    th = th;
                                                                                    sQLitePreparedStatement15 = sQLitePreparedStatement33;
                                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                                                    sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement3;
                                                                                    sQLitePreparedStatement17 = sQLitePreparedStatement4;
                                                                                    sQLitePreparedStatement16 = null;
                                                                                    sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                                                    sQLitePreparedStatement4 = sQLitePreparedStatement17;
                                                                                    sQLitePreparedStatement5 = sQLitePreparedStatement16;
                                                                                    sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                                                    r13 = sQLitePreparedStatement16;
                                                                                    sQLiteDatabase = this.database;
                                                                                    if (sQLiteDatabase != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement6 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement3 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement4 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement5 != null) {
                                                                                    }
                                                                                    if (r13 == 0) {
                                                                                    }
                                                                                }
                                                                            }
                                                                            if (nativeByteBuffer3 != null) {
                                                                                nativeByteBuffer3.reuse();
                                                                            }
                                                                            if (nativeByteBufferWriteLocalParams != null) {
                                                                                nativeByteBufferWriteLocalParams.reuse();
                                                                            }
                                                                            if (nativeByteBuffer2 != null) {
                                                                                nativeByteBuffer2.reuse();
                                                                            }
                                                                            i18++;
                                                                            j10 = j;
                                                                            sQLitePreparedStatement6 = sQLitePreparedStatement33;
                                                                            i13 = i19;
                                                                            arrayList4 = arrayList7;
                                                                            arrayList10 = arrayList8;
                                                                        } catch (Exception e24) {
                                                                            e = e24;
                                                                            sQLitePreparedStatement33 = sQLitePreparedStatement6;
                                                                        } catch (Throwable th25) {
                                                                            th = th25;
                                                                            sQLitePreparedStatement33 = sQLitePreparedStatement6;
                                                                        }
                                                                    }
                                                                    i15 = i13;
                                                                    arrayList5 = arrayList10;
                                                                    arrayList6 = arrayList4;
                                                                    sQLitePreparedStatement30 = sQLitePreparedStatement6;
                                                                    i14 = i2;
                                                                } else {
                                                                    i10 = i9;
                                                                    sQLitePreparedStatement6 = sQLitePreparedStatementExecuteFast7;
                                                                }
                                                                arrayList2 = arrayList11;
                                                                num = num2;
                                                                j6 = 0;
                                                                lValueOf = l;
                                                                if (j12 == j6) {
                                                                }
                                                                if (i29 == -2) {
                                                                }
                                                                if (i10 == 0) {
                                                                    fixUnsupportedMedia(message2);
                                                                    MessageObject.normalizeFlags(message2);
                                                                    nativeByteBuffer = new NativeByteBuffer(message2.getObjectSize());
                                                                    message2.serializeToStream(nativeByteBuffer);
                                                                    i18 = 0;
                                                                    while (i18 < 2) {
                                                                    }
                                                                    i15 = i13;
                                                                    arrayList5 = arrayList10;
                                                                    arrayList6 = arrayList4;
                                                                    sQLitePreparedStatement30 = sQLitePreparedStatement6;
                                                                    i14 = i2;
                                                                    if (j2 == 0) {
                                                                    }
                                                                    if (MediaDataController.canAddMessageToMedia(message2)) {
                                                                    }
                                                                    long topicId222 = MessageObject.getTopicId(this.currentAccount, message2, isForum(message2.dialog_id), isMonoForum(message2.dialog_id));
                                                                    if (j2 != 0) {
                                                                    }
                                                                }
                                                            } else {
                                                                i10 = i9;
                                                                sQLitePreparedStatement6 = sQLitePreparedStatementExecuteFast7;
                                                            }
                                                            Integer numValueOf2 = Integer.valueOf(message.id);
                                                            if ((message.flags & 131072) != 0) {
                                                                arrayList2 = arrayList11;
                                                                num = numValueOf2;
                                                                lValueOf = Long.valueOf(message.grouped_id);
                                                                j6 = 0;
                                                            } else {
                                                                arrayList2 = arrayList11;
                                                                num = numValueOf2;
                                                                j6 = 0;
                                                                lValueOf = null;
                                                            }
                                                            if (j12 == j6) {
                                                            }
                                                            if (i29 == -2) {
                                                            }
                                                            if (i10 == 0) {
                                                            }
                                                        } catch (Exception e25) {
                                                            e = e25;
                                                            exc = e;
                                                            sQLitePreparedStatement19 = sQLitePreparedStatement11;
                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                            sQLitePreparedStatement15 = sQLitePreparedStatement6;
                                                            sQLitePreparedStatement18 = null;
                                                            sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                            sQLitePreparedStatement4 = sQLitePreparedStatement19;
                                                            sQLitePreparedStatement5 = sQLitePreparedStatement18;
                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                            r132 = sQLitePreparedStatement18;
                                                            checkSQLException(exc);
                                                            sQLiteDatabase2 = this.database;
                                                            if (sQLiteDatabase2 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            }
                                                            if (sQLitePreparedStatement6 != null) {
                                                            }
                                                            if (sQLitePreparedStatement3 != null) {
                                                            }
                                                            if (sQLitePreparedStatement4 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                            }
                                                            if (sQLitePreparedStatement5 != null) {
                                                            }
                                                            if (r132 == 0) {
                                                            }
                                                        } catch (Throwable th26) {
                                                            th = th26;
                                                            th = th;
                                                            sQLitePreparedStatement17 = sQLitePreparedStatement11;
                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                                            sQLitePreparedStatement15 = sQLitePreparedStatement6;
                                                            sQLitePreparedStatement16 = null;
                                                            sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                            sQLitePreparedStatement4 = sQLitePreparedStatement17;
                                                            sQLitePreparedStatement5 = sQLitePreparedStatement16;
                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                            r13 = sQLitePreparedStatement16;
                                                            sQLiteDatabase = this.database;
                                                            if (sQLiteDatabase != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            }
                                                            if (sQLitePreparedStatement6 != null) {
                                                            }
                                                            if (sQLitePreparedStatement3 != null) {
                                                            }
                                                            if (sQLitePreparedStatement4 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                            }
                                                            if (sQLitePreparedStatement5 != null) {
                                                            }
                                                            if (r13 == 0) {
                                                            }
                                                        }
                                                    }
                                                    ArrayList arrayList17 = arrayList13;
                                                    ArrayList<File> arrayList18 = arrayList10;
                                                    long j19 = j10;
                                                    sQLitePreparedStatement13 = sQLitePreparedStatementExecuteFast6;
                                                    sQLitePreparedStatement14 = sQLitePreparedStatement11;
                                                    int i54 = i39;
                                                    final ArrayList arrayList19 = arrayList11;
                                                    int i55 = i38;
                                                    sQLitePreparedStatement15 = sQLitePreparedStatementExecuteFast7;
                                                    HashMap map6 = map3;
                                                    sQLitePreparedStatement13.dispose();
                                                    sQLitePreparedStatementExecuteFast2.dispose();
                                                    if (sQLitePreparedStatement15 == null) {
                                                        try {
                                                            sQLitePreparedStatement15.dispose();
                                                            sQLitePreparedStatement20 = null;
                                                        } catch (Exception e26) {
                                                            exc = e26;
                                                            sQLitePreparedStatement19 = sQLitePreparedStatement14;
                                                            sQLitePreparedStatement18 = null;
                                                            sQLitePreparedStatementExecuteFast2 = null;
                                                            sQLitePreparedStatementExecuteFast6 = null;
                                                            sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                            sQLitePreparedStatement4 = sQLitePreparedStatement19;
                                                            sQLitePreparedStatement5 = sQLitePreparedStatement18;
                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                            r132 = sQLitePreparedStatement18;
                                                            checkSQLException(exc);
                                                            sQLiteDatabase2 = this.database;
                                                            if (sQLiteDatabase2 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            }
                                                            if (sQLitePreparedStatement6 != null) {
                                                            }
                                                            if (sQLitePreparedStatement3 != null) {
                                                            }
                                                            if (sQLitePreparedStatement4 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                            }
                                                            if (sQLitePreparedStatement5 != null) {
                                                            }
                                                            if (r132 == 0) {
                                                            }
                                                        } catch (Throwable th27) {
                                                            th = th27;
                                                            sQLitePreparedStatement17 = sQLitePreparedStatement14;
                                                            sQLitePreparedStatement16 = null;
                                                            sQLitePreparedStatementExecuteFast2 = null;
                                                            sQLitePreparedStatementExecuteFast6 = null;
                                                            sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                            sQLitePreparedStatement4 = sQLitePreparedStatement17;
                                                            sQLitePreparedStatement5 = sQLitePreparedStatement16;
                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                            r13 = sQLitePreparedStatement16;
                                                            sQLiteDatabase = this.database;
                                                            if (sQLiteDatabase != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            }
                                                            if (sQLitePreparedStatement6 != null) {
                                                            }
                                                            if (sQLitePreparedStatement3 != null) {
                                                            }
                                                            if (sQLitePreparedStatement4 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                            }
                                                            if (sQLitePreparedStatement5 != null) {
                                                            }
                                                            if (r13 == 0) {
                                                            }
                                                        }
                                                    } else {
                                                        sQLitePreparedStatement20 = sQLitePreparedStatement15;
                                                    }
                                                    sQLitePreparedStatement14.dispose();
                                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                                        try {
                                                            sQLitePreparedStatementExecuteFast3.dispose();
                                                            sQLitePreparedStatementExecuteFast3 = null;
                                                        } catch (Exception e27) {
                                                            exc = e27;
                                                            sQLitePreparedStatement15 = sQLitePreparedStatement20;
                                                            sQLitePreparedStatement19 = null;
                                                            sQLitePreparedStatement18 = null;
                                                            sQLitePreparedStatementExecuteFast2 = null;
                                                            sQLitePreparedStatementExecuteFast6 = null;
                                                            sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                            sQLitePreparedStatement4 = sQLitePreparedStatement19;
                                                            sQLitePreparedStatement5 = sQLitePreparedStatement18;
                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                            r132 = sQLitePreparedStatement18;
                                                            checkSQLException(exc);
                                                            sQLiteDatabase2 = this.database;
                                                            if (sQLiteDatabase2 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            }
                                                            if (sQLitePreparedStatement6 != null) {
                                                            }
                                                            if (sQLitePreparedStatement3 != null) {
                                                            }
                                                            if (sQLitePreparedStatement4 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                            }
                                                            if (sQLitePreparedStatement5 != null) {
                                                            }
                                                            if (r132 == 0) {
                                                            }
                                                        } catch (Throwable th28) {
                                                            th = th28;
                                                            sQLitePreparedStatement15 = sQLitePreparedStatement20;
                                                            sQLitePreparedStatement17 = null;
                                                            sQLitePreparedStatement16 = null;
                                                            sQLitePreparedStatementExecuteFast2 = null;
                                                            sQLitePreparedStatementExecuteFast6 = null;
                                                            sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                            sQLitePreparedStatement4 = sQLitePreparedStatement17;
                                                            sQLitePreparedStatement5 = sQLitePreparedStatement16;
                                                            sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                            r13 = sQLitePreparedStatement16;
                                                            sQLiteDatabase = this.database;
                                                            if (sQLiteDatabase != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            }
                                                            if (sQLitePreparedStatement6 != null) {
                                                            }
                                                            if (sQLitePreparedStatement3 != null) {
                                                            }
                                                            if (sQLitePreparedStatement4 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                            }
                                                            if (sQLitePreparedStatement5 != null) {
                                                            }
                                                            if (r13 == 0) {
                                                            }
                                                        }
                                                    }
                                                    if (sQLitePreparedStatementExecuteFast4 == null) {
                                                        try {
                                                            sQLitePreparedStatementExecuteFast4.dispose();
                                                            getMessagesController().didAddedNewTask(i54, 0L, null);
                                                            sQLitePreparedStatementExecuteFast4 = null;
                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                try {
                                                                    sQLitePreparedStatementExecuteFast5.dispose();
                                                                    sQLitePreparedStatementExecuteFast5 = null;
                                                                } catch (Exception e28) {
                                                                    e = e28;
                                                                    exc = e;
                                                                    sQLitePreparedStatement6 = sQLitePreparedStatement20;
                                                                    z3 = false;
                                                                    sQLitePreparedStatementExecuteFast2 = null;
                                                                    sQLitePreparedStatement5 = null;
                                                                    sQLitePreparedStatement3 = null;
                                                                    sQLitePreparedStatement4 = null;
                                                                    r132 = z3;
                                                                    checkSQLException(exc);
                                                                    sQLiteDatabase2 = this.database;
                                                                    if (sQLiteDatabase2 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement6 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement3 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement4 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement5 != null) {
                                                                    }
                                                                    if (r132 == 0) {
                                                                    }
                                                                } catch (Throwable th29) {
                                                                    th = th29;
                                                                    th = th;
                                                                    sQLitePreparedStatement6 = sQLitePreparedStatement20;
                                                                    z2 = false;
                                                                    sQLitePreparedStatementExecuteFast2 = null;
                                                                    sQLitePreparedStatement5 = null;
                                                                    sQLitePreparedStatement3 = null;
                                                                    sQLitePreparedStatement4 = null;
                                                                    r13 = z2;
                                                                    sQLiteDatabase = this.database;
                                                                    if (sQLiteDatabase != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement6 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement3 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement4 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement5 != null) {
                                                                    }
                                                                    if (r13 == 0) {
                                                                    }
                                                                }
                                                            }
                                                            if (map6 == null) {
                                                                try {
                                                                    for (TopicKey topicKey : map6.keySet()) {
                                                                        getMediaDataController().putBotKeyboard(topicKey, (TLRPC.Message) map6.get(topicKey));
                                                                    }
                                                                    try {
                                                                        deleteFromDownloadQueue(arrayList12, false);
                                                                        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda78
                                                                            @Override // java.lang.Runnable
                                                                            public final void run() {
                                                                                this.f$0.lambda$putMessages$219(arrayList19);
                                                                            }
                                                                        });
                                                                        getFileLoader().deleteFiles(arrayList18, 0);
                                                                        putUsersInternal(messages_messages.users);
                                                                        putChatsInternal(messages_messages.chats);
                                                                        if (i55 == Integer.MAX_VALUE) {
                                                                            try {
                                                                                this.database.executeFast(String.format(Locale.US, "UPDATE dialogs SET unread_count_i = %d WHERE did = %d", Integer.valueOf(i55), Long.valueOf(j))).stepThis().dispose();
                                                                                LongSparseIntArray longSparseIntArray = new LongSparseIntArray(1);
                                                                                longSparseIntArray.put(j19, i55);
                                                                                sQLitePreparedStatement23 = null;
                                                                                sQLitePreparedStatement23 = null;
                                                                                sQLitePreparedStatement23 = null;
                                                                                try {
                                                                                    getMessagesController().processDialogsUpdateRead(null, longSparseIntArray);
                                                                                } catch (Exception e29) {
                                                                                    e = e29;
                                                                                    exc = e;
                                                                                    sQLitePreparedStatement22 = sQLitePreparedStatement23;
                                                                                    sQLitePreparedStatement6 = sQLitePreparedStatement20;
                                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatement22;
                                                                                    sQLitePreparedStatement5 = sQLitePreparedStatementExecuteFast2;
                                                                                    sQLitePreparedStatement3 = sQLitePreparedStatement5;
                                                                                    sQLitePreparedStatement4 = sQLitePreparedStatement3;
                                                                                    r132 = sQLitePreparedStatement22;
                                                                                    checkSQLException(exc);
                                                                                    sQLiteDatabase2 = this.database;
                                                                                    if (sQLiteDatabase2 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement6 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement3 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement4 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement5 != null) {
                                                                                    }
                                                                                    if (r132 == 0) {
                                                                                    }
                                                                                } catch (Throwable th30) {
                                                                                    th = th30;
                                                                                    th = th;
                                                                                    sQLitePreparedStatement21 = sQLitePreparedStatement23;
                                                                                    sQLitePreparedStatement6 = sQLitePreparedStatement20;
                                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatement21;
                                                                                    sQLitePreparedStatement5 = sQLitePreparedStatementExecuteFast2;
                                                                                    sQLitePreparedStatement3 = sQLitePreparedStatement5;
                                                                                    sQLitePreparedStatement4 = sQLitePreparedStatement3;
                                                                                    r13 = sQLitePreparedStatement21;
                                                                                    sQLiteDatabase = this.database;
                                                                                    if (sQLiteDatabase != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement6 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement3 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement4 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement5 != null) {
                                                                                    }
                                                                                    if (r13 == 0) {
                                                                                    }
                                                                                }
                                                                            } catch (Exception e30) {
                                                                                e = e30;
                                                                                sQLitePreparedStatement25 = null;
                                                                                exc = e;
                                                                                sQLitePreparedStatement22 = sQLitePreparedStatement25;
                                                                                sQLitePreparedStatement6 = sQLitePreparedStatement20;
                                                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatement22;
                                                                                sQLitePreparedStatement5 = sQLitePreparedStatementExecuteFast2;
                                                                                sQLitePreparedStatement3 = sQLitePreparedStatement5;
                                                                                sQLitePreparedStatement4 = sQLitePreparedStatement3;
                                                                                r132 = sQLitePreparedStatement22;
                                                                                checkSQLException(exc);
                                                                                sQLiteDatabase2 = this.database;
                                                                                if (sQLiteDatabase2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement6 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement3 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement4 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement5 != null) {
                                                                                }
                                                                                if (r132 == 0) {
                                                                                }
                                                                            } catch (Throwable th31) {
                                                                                th2 = th31;
                                                                                sQLitePreparedStatement24 = null;
                                                                                th = th2;
                                                                                sQLitePreparedStatement21 = sQLitePreparedStatement24;
                                                                                sQLitePreparedStatement6 = sQLitePreparedStatement20;
                                                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatement21;
                                                                                sQLitePreparedStatement5 = sQLitePreparedStatementExecuteFast2;
                                                                                sQLitePreparedStatement3 = sQLitePreparedStatement5;
                                                                                sQLitePreparedStatement4 = sQLitePreparedStatement3;
                                                                                r13 = sQLitePreparedStatement21;
                                                                                sQLiteDatabase = this.database;
                                                                                if (sQLiteDatabase != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement6 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement3 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement4 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement5 != null) {
                                                                                }
                                                                                if (r13 == 0) {
                                                                                }
                                                                            }
                                                                        } else {
                                                                            sQLitePreparedStatement23 = null;
                                                                        }
                                                                        if (num2 == null) {
                                                                            SQLiteDatabase sQLiteDatabase7 = this.database;
                                                                            Locale locale2 = Locale.US;
                                                                            String str2 = l == null ? "NULL" : l + "";
                                                                            try {
                                                                                z4 = true;
                                                                                sQLiteDatabase7.executeFast(String.format(locale2, "UPDATE dialogs SET last_mid_group = %s WHERE did = %d AND last_mid <= %d", str2, Long.valueOf(j), num2)).stepThis().dispose();
                                                                            } catch (Exception e31) {
                                                                                e = e31;
                                                                                sQLitePreparedStatement25 = sQLitePreparedStatement23;
                                                                                exc = e;
                                                                                sQLitePreparedStatement22 = sQLitePreparedStatement25;
                                                                                sQLitePreparedStatement6 = sQLitePreparedStatement20;
                                                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatement22;
                                                                                sQLitePreparedStatement5 = sQLitePreparedStatementExecuteFast2;
                                                                                sQLitePreparedStatement3 = sQLitePreparedStatement5;
                                                                                sQLitePreparedStatement4 = sQLitePreparedStatement3;
                                                                                r132 = sQLitePreparedStatement22;
                                                                                checkSQLException(exc);
                                                                                sQLiteDatabase2 = this.database;
                                                                                if (sQLiteDatabase2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement6 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement3 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement4 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement5 != null) {
                                                                                }
                                                                                if (r132 == 0) {
                                                                                }
                                                                            } catch (Throwable th32) {
                                                                                th2 = th32;
                                                                                sQLitePreparedStatement24 = sQLitePreparedStatement23;
                                                                                th = th2;
                                                                                sQLitePreparedStatement21 = sQLitePreparedStatement24;
                                                                                sQLitePreparedStatement6 = sQLitePreparedStatement20;
                                                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatement21;
                                                                                sQLitePreparedStatement5 = sQLitePreparedStatementExecuteFast2;
                                                                                sQLitePreparedStatement3 = sQLitePreparedStatement5;
                                                                                sQLitePreparedStatement4 = sQLitePreparedStatement3;
                                                                                r13 = sQLitePreparedStatement21;
                                                                                sQLiteDatabase = this.database;
                                                                                if (sQLiteDatabase != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement6 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement3 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement4 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement5 != null) {
                                                                                }
                                                                                if (r13 == 0) {
                                                                                }
                                                                            }
                                                                        } else {
                                                                            z4 = false;
                                                                        }
                                                                        this.database.commitTransaction();
                                                                        if (!z || z4) {
                                                                            updateDialogsWithDeletedMessages(j, j12, new ArrayList(), null, false);
                                                                        }
                                                                        arrayList = arrayList15;
                                                                        if (arrayList != null) {
                                                                            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda79
                                                                                @Override // java.lang.Runnable
                                                                                public final void run() {
                                                                                    this.f$0.lambda$putMessages$220(arrayList);
                                                                                }
                                                                            });
                                                                        }
                                                                        onReactionsUpdate(arrayList17);
                                                                        sQLitePreparedStatement26 = sQLitePreparedStatement20;
                                                                        sQLitePreparedStatement27 = sQLitePreparedStatementExecuteFast5;
                                                                        sQLiteDatabase3 = this.database;
                                                                        if (sQLiteDatabase3 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement26 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement27 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatementExecuteFast4 == null) {
                                                                        }
                                                                    } catch (Exception e32) {
                                                                        e = e32;
                                                                        sQLitePreparedStatement23 = null;
                                                                    } catch (Throwable th33) {
                                                                        th = th33;
                                                                        sQLitePreparedStatement23 = null;
                                                                    }
                                                                } catch (Exception e33) {
                                                                    exc = e33;
                                                                    sQLitePreparedStatement22 = null;
                                                                    sQLitePreparedStatement6 = sQLitePreparedStatement20;
                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatement22;
                                                                    sQLitePreparedStatement5 = sQLitePreparedStatementExecuteFast2;
                                                                    sQLitePreparedStatement3 = sQLitePreparedStatement5;
                                                                    sQLitePreparedStatement4 = sQLitePreparedStatement3;
                                                                    r132 = sQLitePreparedStatement22;
                                                                    checkSQLException(exc);
                                                                    sQLiteDatabase2 = this.database;
                                                                    if (sQLiteDatabase2 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement6 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement3 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement4 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement5 != null) {
                                                                    }
                                                                    if (r132 == 0) {
                                                                    }
                                                                } catch (Throwable th34) {
                                                                    th = th34;
                                                                    sQLitePreparedStatement21 = null;
                                                                    sQLitePreparedStatement6 = sQLitePreparedStatement20;
                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatement21;
                                                                    sQLitePreparedStatement5 = sQLitePreparedStatementExecuteFast2;
                                                                    sQLitePreparedStatement3 = sQLitePreparedStatement5;
                                                                    sQLitePreparedStatement4 = sQLitePreparedStatement3;
                                                                    r13 = sQLitePreparedStatement21;
                                                                    sQLiteDatabase = this.database;
                                                                    if (sQLiteDatabase != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement6 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement3 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement4 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement5 != null) {
                                                                    }
                                                                    if (r13 == 0) {
                                                                    }
                                                                }
                                                            } else {
                                                                deleteFromDownloadQueue(arrayList12, false);
                                                                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda78
                                                                    @Override // java.lang.Runnable
                                                                    public final void run() {
                                                                        this.f$0.lambda$putMessages$219(arrayList19);
                                                                    }
                                                                });
                                                                getFileLoader().deleteFiles(arrayList18, 0);
                                                                putUsersInternal(messages_messages.users);
                                                                putChatsInternal(messages_messages.chats);
                                                                if (i55 == Integer.MAX_VALUE) {
                                                                }
                                                                if (num2 == null) {
                                                                }
                                                                this.database.commitTransaction();
                                                                if (!z) {
                                                                    updateDialogsWithDeletedMessages(j, j12, new ArrayList(), null, false);
                                                                    arrayList = arrayList15;
                                                                    if (arrayList != null) {
                                                                    }
                                                                    onReactionsUpdate(arrayList17);
                                                                    sQLitePreparedStatement26 = sQLitePreparedStatement20;
                                                                    sQLitePreparedStatement27 = sQLitePreparedStatementExecuteFast5;
                                                                }
                                                                sQLiteDatabase3 = this.database;
                                                                if (sQLiteDatabase3 != null) {
                                                                }
                                                                if (sQLitePreparedStatement26 != null) {
                                                                }
                                                                if (sQLitePreparedStatement27 != null) {
                                                                }
                                                                if (sQLitePreparedStatementExecuteFast3 != null) {
                                                                }
                                                                if (sQLitePreparedStatementExecuteFast4 == null) {
                                                                }
                                                            }
                                                        } catch (Exception e34) {
                                                            e = e34;
                                                            exc = e;
                                                            sQLitePreparedStatement6 = sQLitePreparedStatement20;
                                                            z3 = false;
                                                            sQLitePreparedStatementExecuteFast2 = null;
                                                            sQLitePreparedStatement5 = null;
                                                            sQLitePreparedStatement3 = null;
                                                            sQLitePreparedStatement4 = null;
                                                            r132 = z3;
                                                            checkSQLException(exc);
                                                            sQLiteDatabase2 = this.database;
                                                            if (sQLiteDatabase2 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            }
                                                            if (sQLitePreparedStatement6 != null) {
                                                            }
                                                            if (sQLitePreparedStatement3 != null) {
                                                            }
                                                            if (sQLitePreparedStatement4 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                            }
                                                            if (sQLitePreparedStatement5 != null) {
                                                            }
                                                            if (r132 == 0) {
                                                            }
                                                        } catch (Throwable th35) {
                                                            th = th35;
                                                            th = th;
                                                            sQLitePreparedStatement6 = sQLitePreparedStatement20;
                                                            z2 = false;
                                                            sQLitePreparedStatementExecuteFast2 = null;
                                                            sQLitePreparedStatement5 = null;
                                                            sQLitePreparedStatement3 = null;
                                                            sQLitePreparedStatement4 = null;
                                                            r13 = z2;
                                                            sQLiteDatabase = this.database;
                                                            if (sQLiteDatabase != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            }
                                                            if (sQLitePreparedStatement6 != null) {
                                                            }
                                                            if (sQLitePreparedStatement3 != null) {
                                                            }
                                                            if (sQLitePreparedStatement4 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast5 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast3 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                                            }
                                                            if (sQLitePreparedStatement5 != null) {
                                                            }
                                                            if (r13 == 0) {
                                                            }
                                                        }
                                                    } else {
                                                        if (sQLitePreparedStatementExecuteFast5 != null) {
                                                        }
                                                        if (map6 == null) {
                                                        }
                                                    }
                                                }
                                                sQLitePreparedStatement14.dispose();
                                                if (sQLitePreparedStatementExecuteFast3 != null) {
                                                }
                                                if (sQLitePreparedStatementExecuteFast4 == null) {
                                                }
                                            } catch (Exception e35) {
                                                sQLitePreparedStatement18 = null;
                                                exc = e35;
                                                sQLitePreparedStatement19 = sQLitePreparedStatement14;
                                                sQLitePreparedStatement15 = sQLitePreparedStatement20;
                                                sQLitePreparedStatementExecuteFast2 = null;
                                                sQLitePreparedStatementExecuteFast6 = null;
                                                sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                sQLitePreparedStatement4 = sQLitePreparedStatement19;
                                                sQLitePreparedStatement5 = sQLitePreparedStatement18;
                                                sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                r132 = sQLitePreparedStatement18;
                                                checkSQLException(exc);
                                                sQLiteDatabase2 = this.database;
                                                if (sQLiteDatabase2 != null) {
                                                }
                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                }
                                                if (sQLitePreparedStatement6 != null) {
                                                }
                                                if (sQLitePreparedStatement3 != null) {
                                                }
                                                if (sQLitePreparedStatement4 != null) {
                                                }
                                                if (sQLitePreparedStatementExecuteFast5 != null) {
                                                }
                                                if (sQLitePreparedStatementExecuteFast3 != null) {
                                                }
                                                if (sQLitePreparedStatementExecuteFast4 != null) {
                                                }
                                                if (sQLitePreparedStatement5 != null) {
                                                }
                                                if (r132 == 0) {
                                                }
                                            } catch (Throwable th36) {
                                                sQLitePreparedStatement16 = null;
                                                th = th36;
                                                sQLitePreparedStatement17 = sQLitePreparedStatement14;
                                                sQLitePreparedStatement15 = sQLitePreparedStatement20;
                                                sQLitePreparedStatementExecuteFast2 = null;
                                                sQLitePreparedStatementExecuteFast6 = null;
                                                sQLitePreparedStatement6 = sQLitePreparedStatement15;
                                                sQLitePreparedStatement4 = sQLitePreparedStatement17;
                                                sQLitePreparedStatement5 = sQLitePreparedStatement16;
                                                sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast6;
                                                r13 = sQLitePreparedStatement16;
                                                sQLiteDatabase = this.database;
                                                if (sQLiteDatabase != null) {
                                                }
                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                }
                                                if (sQLitePreparedStatement6 != null) {
                                                }
                                                if (sQLitePreparedStatement3 != null) {
                                                }
                                                if (sQLitePreparedStatement4 != null) {
                                                }
                                                if (sQLitePreparedStatementExecuteFast5 != null) {
                                                }
                                                if (sQLitePreparedStatementExecuteFast3 != null) {
                                                }
                                                if (sQLitePreparedStatementExecuteFast4 != null) {
                                                }
                                                if (sQLitePreparedStatement5 != null) {
                                                }
                                                if (r13 == 0) {
                                                }
                                            }
                                            sQLitePreparedStatementExecuteFast2.dispose();
                                            if (sQLitePreparedStatement15 == null) {
                                            }
                                        } catch (Exception e36) {
                                            sQLitePreparedStatement18 = null;
                                            exc = e36;
                                            sQLitePreparedStatement19 = sQLitePreparedStatement14;
                                            sQLitePreparedStatementExecuteFast6 = null;
                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                        } catch (Throwable th37) {
                                            sQLitePreparedStatement16 = null;
                                            th = th37;
                                            sQLitePreparedStatement17 = sQLitePreparedStatement14;
                                            sQLitePreparedStatementExecuteFast6 = null;
                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                        }
                                        sQLitePreparedStatement13.dispose();
                                    } catch (Exception e37) {
                                        sQLitePreparedStatement18 = null;
                                        exc = e37;
                                        sQLitePreparedStatement19 = sQLitePreparedStatement14;
                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                        sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement13;
                                    } catch (Throwable th38) {
                                        sQLitePreparedStatement16 = null;
                                        th = th38;
                                        sQLitePreparedStatement17 = sQLitePreparedStatement14;
                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast2;
                                        sQLitePreparedStatementExecuteFast6 = sQLitePreparedStatement13;
                                    }
                                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast112 = this.database.executeFast("REPLACE INTO media_topics VALUES(?, ?, ?, ?, ?, ?)");
                                    if (j4 != j10) {
                                    }
                                    i9 = 0;
                                    Long l2 = null;
                                    int i382 = Integer.MAX_VALUE;
                                    HashMap map32 = null;
                                    long j122 = 0;
                                    Integer num22 = null;
                                    sQLitePreparedStatementExecuteFast3 = null;
                                    sQLitePreparedStatementExecuteFast4 = null;
                                    sQLitePreparedStatementExecuteFast5 = null;
                                    ArrayList arrayList152 = null;
                                    int i392 = Integer.MAX_VALUE;
                                    while (i9 < size) {
                                    }
                                    ArrayList arrayList172 = arrayList13;
                                    ArrayList<File> arrayList182 = arrayList10;
                                    long j192 = j10;
                                    sQLitePreparedStatement13 = sQLitePreparedStatementExecuteFast6;
                                    sQLitePreparedStatement14 = sQLitePreparedStatement11;
                                    int i542 = i392;
                                    final ArrayList arrayList192 = arrayList11;
                                    int i552 = i382;
                                    sQLitePreparedStatement15 = sQLitePreparedStatementExecuteFast7;
                                    HashMap map62 = map32;
                                } catch (Exception e38) {
                                    sQLitePreparedStatement9 = sQLitePreparedStatementExecuteFast6;
                                    sQLitePreparedStatement10 = null;
                                    exc = e38;
                                    sQLitePreparedStatementExecuteFast = sQLitePreparedStatement11;
                                    r12 = sQLitePreparedStatement9;
                                    sQLitePreparedStatement2 = sQLitePreparedStatement10;
                                    sQLitePreparedStatement3 = r12;
                                    sQLitePreparedStatement4 = sQLitePreparedStatementExecuteFast;
                                    sQLitePreparedStatement5 = sQLitePreparedStatement2;
                                    sQLitePreparedStatementExecuteFast3 = sQLitePreparedStatement5;
                                    sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatementExecuteFast3;
                                    sQLitePreparedStatementExecuteFast5 = sQLitePreparedStatementExecuteFast4;
                                    sQLitePreparedStatement6 = sQLitePreparedStatementExecuteFast5;
                                    r132 = sQLitePreparedStatement2;
                                    checkSQLException(exc);
                                    sQLiteDatabase2 = this.database;
                                    if (sQLiteDatabase2 != null) {
                                    }
                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                    }
                                    if (sQLitePreparedStatement6 != null) {
                                    }
                                    if (sQLitePreparedStatement3 != null) {
                                    }
                                    if (sQLitePreparedStatement4 != null) {
                                    }
                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                    }
                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                    }
                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                    }
                                    if (sQLitePreparedStatement5 != null) {
                                    }
                                    if (r132 == 0) {
                                    }
                                } catch (Throwable th39) {
                                    sQLitePreparedStatement7 = sQLitePreparedStatementExecuteFast6;
                                    sQLitePreparedStatement8 = null;
                                    th = th39;
                                    sQLitePreparedStatementExecuteFast = sQLitePreparedStatement11;
                                    r1 = sQLitePreparedStatement7;
                                    sQLitePreparedStatement = sQLitePreparedStatement8;
                                    sQLitePreparedStatement3 = r1;
                                    sQLitePreparedStatement4 = sQLitePreparedStatementExecuteFast;
                                    sQLitePreparedStatement5 = sQLitePreparedStatement;
                                    sQLitePreparedStatementExecuteFast3 = sQLitePreparedStatement5;
                                    sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatementExecuteFast3;
                                    sQLitePreparedStatementExecuteFast5 = sQLitePreparedStatementExecuteFast4;
                                    sQLitePreparedStatement6 = sQLitePreparedStatementExecuteFast5;
                                    r13 = sQLitePreparedStatement;
                                    sQLiteDatabase = this.database;
                                    if (sQLiteDatabase != null) {
                                    }
                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                    }
                                    if (sQLitePreparedStatement6 != null) {
                                    }
                                    if (sQLitePreparedStatement3 != null) {
                                    }
                                    if (sQLitePreparedStatement4 != null) {
                                    }
                                    if (sQLitePreparedStatementExecuteFast5 != null) {
                                    }
                                    if (sQLitePreparedStatementExecuteFast3 != null) {
                                    }
                                    if (sQLitePreparedStatementExecuteFast4 != null) {
                                    }
                                    if (sQLitePreparedStatement5 != null) {
                                    }
                                    if (r13 == 0) {
                                    }
                                }
                                sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO media_v4 VALUES(?, ?, ?, ?, ?)");
                                sQLitePreparedStatement11 = sQLitePreparedStatementExecuteFast;
                            } catch (Exception e39) {
                                sQLitePreparedStatement9 = sQLitePreparedStatementExecuteFast6;
                                sQLitePreparedStatement10 = null;
                                exc = e39;
                                sQLitePreparedStatementExecuteFast = null;
                            } catch (Throwable th40) {
                                sQLitePreparedStatement7 = sQLitePreparedStatementExecuteFast6;
                                sQLitePreparedStatement8 = null;
                                th = th40;
                                sQLitePreparedStatementExecuteFast = null;
                            }
                            sQLitePreparedStatementExecuteFast6 = this.database.executeFast("REPLACE INTO messages_v2 VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 0, ?, ?, ?)");
                        } catch (Exception e40) {
                            sQLitePreparedStatement2 = null;
                            exc = e40;
                            r12 = 0;
                            sQLitePreparedStatementExecuteFast = null;
                        } catch (Throwable th41) {
                            sQLitePreparedStatement = null;
                            th = th41;
                            r1 = 0;
                            sQLitePreparedStatementExecuteFast = null;
                        }
                        closeHolesInMedia(j, i8, i7, -1, j2);
                        size = messages_messages2.messages.size();
                        ArrayList<File> arrayList102 = new ArrayList<>();
                        ArrayList arrayList112 = new ArrayList();
                        ArrayList arrayList122 = new ArrayList();
                        j4 = j3;
                        if (j10 != j4) {
                        }
                        sQLitePreparedStatementExecuteFast2 = this.database.executeFast("REPLACE INTO messages_topics VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 0, ?, ?)");
                    }
                } catch (Exception e41) {
                    exc = e41;
                    i5 = 0;
                    sQLitePreparedStatementExecuteFast = null;
                    sQLitePreparedStatement2 = null;
                    sQLitePreparedStatementExecuteFast2 = null;
                    r12 = i5;
                    sQLitePreparedStatement3 = r12;
                    sQLitePreparedStatement4 = sQLitePreparedStatementExecuteFast;
                    sQLitePreparedStatement5 = sQLitePreparedStatement2;
                    sQLitePreparedStatementExecuteFast3 = sQLitePreparedStatement5;
                    sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatementExecuteFast3;
                    sQLitePreparedStatementExecuteFast5 = sQLitePreparedStatementExecuteFast4;
                    sQLitePreparedStatement6 = sQLitePreparedStatementExecuteFast5;
                    r132 = sQLitePreparedStatement2;
                    checkSQLException(exc);
                    sQLiteDatabase2 = this.database;
                    if (sQLiteDatabase2 != null) {
                    }
                    if (sQLitePreparedStatementExecuteFast2 != null) {
                    }
                    if (sQLitePreparedStatement6 != null) {
                    }
                    if (sQLitePreparedStatement3 != null) {
                    }
                    if (sQLitePreparedStatement4 != null) {
                    }
                    if (sQLitePreparedStatementExecuteFast5 != null) {
                    }
                    if (sQLitePreparedStatementExecuteFast3 != null) {
                    }
                    if (sQLitePreparedStatementExecuteFast4 != null) {
                    }
                    if (sQLitePreparedStatement5 != null) {
                    }
                    if (r132 == 0) {
                    }
                } catch (Throwable th42) {
                    th = th42;
                    i4 = 0;
                    sQLitePreparedStatementExecuteFast = null;
                    sQLitePreparedStatement = null;
                    sQLitePreparedStatementExecuteFast2 = null;
                    r1 = i4;
                    sQLitePreparedStatement3 = r1;
                    sQLitePreparedStatement4 = sQLitePreparedStatementExecuteFast;
                    sQLitePreparedStatement5 = sQLitePreparedStatement;
                    sQLitePreparedStatementExecuteFast3 = sQLitePreparedStatement5;
                    sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatementExecuteFast3;
                    sQLitePreparedStatementExecuteFast5 = sQLitePreparedStatementExecuteFast4;
                    sQLitePreparedStatement6 = sQLitePreparedStatementExecuteFast5;
                    r13 = sQLitePreparedStatement;
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase != null) {
                    }
                    if (sQLitePreparedStatementExecuteFast2 != null) {
                    }
                    if (sQLitePreparedStatement6 != null) {
                    }
                    if (sQLitePreparedStatement3 != null) {
                    }
                    if (sQLitePreparedStatement4 != null) {
                    }
                    if (sQLitePreparedStatementExecuteFast5 != null) {
                    }
                    if (sQLitePreparedStatementExecuteFast3 != null) {
                    }
                    if (sQLitePreparedStatementExecuteFast4 != null) {
                    }
                    if (sQLitePreparedStatement5 != null) {
                    }
                    if (r13 == 0) {
                    }
                }
            } catch (Exception e42) {
                exc = e42;
                i5 = i28;
                sQLitePreparedStatementExecuteFast = null;
                sQLitePreparedStatement2 = null;
                sQLitePreparedStatementExecuteFast2 = null;
                r12 = i5;
                sQLitePreparedStatement3 = r12;
                sQLitePreparedStatement4 = sQLitePreparedStatementExecuteFast;
                sQLitePreparedStatement5 = sQLitePreparedStatement2;
                sQLitePreparedStatementExecuteFast3 = sQLitePreparedStatement5;
                sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatementExecuteFast3;
                sQLitePreparedStatementExecuteFast5 = sQLitePreparedStatementExecuteFast4;
                sQLitePreparedStatement6 = sQLitePreparedStatementExecuteFast5;
                r132 = sQLitePreparedStatement2;
                checkSQLException(exc);
                sQLiteDatabase2 = this.database;
                if (sQLiteDatabase2 != null) {
                }
                if (sQLitePreparedStatementExecuteFast2 != null) {
                }
                if (sQLitePreparedStatement6 != null) {
                }
                if (sQLitePreparedStatement3 != null) {
                }
                if (sQLitePreparedStatement4 != null) {
                }
                if (sQLitePreparedStatementExecuteFast5 != null) {
                }
                if (sQLitePreparedStatementExecuteFast3 != null) {
                }
                if (sQLitePreparedStatementExecuteFast4 != null) {
                }
                if (sQLitePreparedStatement5 != null) {
                }
                if (r132 == 0) {
                }
            } catch (Throwable th43) {
                th = th43;
                i4 = i28;
                sQLitePreparedStatementExecuteFast = null;
                sQLitePreparedStatement = null;
                sQLitePreparedStatementExecuteFast2 = null;
                r1 = i4;
                sQLitePreparedStatement3 = r1;
                sQLitePreparedStatement4 = sQLitePreparedStatementExecuteFast;
                sQLitePreparedStatement5 = sQLitePreparedStatement;
                sQLitePreparedStatementExecuteFast3 = sQLitePreparedStatement5;
                sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatementExecuteFast3;
                sQLitePreparedStatementExecuteFast5 = sQLitePreparedStatementExecuteFast4;
                sQLitePreparedStatement6 = sQLitePreparedStatementExecuteFast5;
                r13 = sQLitePreparedStatement;
                sQLiteDatabase = this.database;
                if (sQLiteDatabase != null) {
                }
                if (sQLitePreparedStatementExecuteFast2 != null) {
                }
                if (sQLitePreparedStatement6 != null) {
                }
                if (sQLitePreparedStatement3 != null) {
                }
                if (sQLitePreparedStatement4 != null) {
                }
                if (sQLitePreparedStatementExecuteFast5 != null) {
                }
                if (sQLitePreparedStatementExecuteFast3 != null) {
                }
                if (sQLitePreparedStatementExecuteFast4 != null) {
                }
                if (sQLitePreparedStatement5 != null) {
                }
                if (r13 == 0) {
                }
            }
        } catch (Exception e43) {
            sQLitePreparedStatement2 = null;
            exc = e43;
            r12 = 0;
            sQLitePreparedStatementExecuteFast = null;
            sQLitePreparedStatementExecuteFast2 = null;
        } catch (Throwable th44) {
            sQLitePreparedStatement = null;
            th = th44;
            r1 = 0;
            sQLitePreparedStatementExecuteFast = null;
            sQLitePreparedStatementExecuteFast2 = null;
        }
        sQLiteDatabase = this.database;
        if (sQLiteDatabase != null) {
            sQLiteDatabase.commitTransaction();
        }
        if (sQLitePreparedStatementExecuteFast2 != null) {
            sQLitePreparedStatementExecuteFast2.dispose();
        }
        if (sQLitePreparedStatement6 != null) {
            sQLitePreparedStatement6.dispose();
        }
        if (sQLitePreparedStatement3 != null) {
            sQLitePreparedStatement3.dispose();
        }
        if (sQLitePreparedStatement4 != null) {
            sQLitePreparedStatement4.dispose();
        }
        if (sQLitePreparedStatementExecuteFast5 != null) {
            sQLitePreparedStatementExecuteFast5.dispose();
        }
        if (sQLitePreparedStatementExecuteFast3 != null) {
            sQLitePreparedStatementExecuteFast3.dispose();
        }
        if (sQLitePreparedStatementExecuteFast4 != null) {
            sQLitePreparedStatementExecuteFast4.dispose();
        }
        if (sQLitePreparedStatement5 != null) {
            sQLitePreparedStatement5.dispose();
        }
        if (r13 == 0) {
            throw th;
        }
        r13.dispose();
        throw th;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$putMessagesInternal$190(int i) {
        getDownloadController().newDownloadObjectsAvailable(i);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$putMessagesInternal$191(ArrayList arrayList) {
        if (getMessagesController().getSavedMessagesController().updateSavedDialogs(arrayList)) {
            getMessagesController().getSavedMessagesController().update();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$putMessagesInternal$192(ArrayList arrayList) {
        Iterator it = arrayList.iterator();
        while (it.hasNext()) {
            Pair pair = (Pair) it.next();
            getMessagesController().reportMessageDelivery(((Long) pair.first).longValue(), ((Integer) pair.second).intValue(), false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$putPushMessage$42(MessageObject messageObject) {
        try {
            NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(messageObject.messageOwner.getObjectSize());
            messageObject.messageOwner.serializeToStream(nativeByteBuffer);
            int i = messageObject.localType == 2 ? 1 : 0;
            if (messageObject.localChannel) {
                i |= 2;
            }
            SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO unread_push_messages VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
            sQLitePreparedStatementExecuteFast.requery();
            sQLitePreparedStatementExecuteFast.bindLong(1, messageObject.getDialogId());
            sQLitePreparedStatementExecuteFast.bindInteger(2, messageObject.getId());
            sQLitePreparedStatementExecuteFast.bindLong(3, messageObject.messageOwner.random_id);
            sQLitePreparedStatementExecuteFast.bindInteger(4, messageObject.messageOwner.date);
            sQLitePreparedStatementExecuteFast.bindByteBuffer(5, nativeByteBuffer);
            CharSequence charSequence = messageObject.messageText;
            if (charSequence == null) {
                sQLitePreparedStatementExecuteFast.bindNull(6);
            } else {
                sQLitePreparedStatementExecuteFast.bindString(6, charSequence.toString());
            }
            String str = messageObject.localName;
            if (str == null) {
                sQLitePreparedStatementExecuteFast.bindNull(7);
            } else {
                sQLitePreparedStatementExecuteFast.bindString(7, str);
            }
            String str2 = messageObject.localUserName;
            if (str2 == null) {
                sQLitePreparedStatementExecuteFast.bindNull(8);
            } else {
                sQLitePreparedStatementExecuteFast.bindString(8, str2);
            }
            sQLitePreparedStatementExecuteFast.bindInteger(9, i);
            sQLitePreparedStatementExecuteFast.bindLong(10, MessageObject.getTopicId(this.currentAccount, messageObject.messageOwner, false));
            sQLitePreparedStatementExecuteFast.bindInteger(11, (messageObject.isReactionPush ? 1 : 0) + (messageObject.isStoryReactionPush ? 1 : 0));
            sQLitePreparedStatementExecuteFast.step();
            nativeByteBuffer.reuse();
            sQLitePreparedStatementExecuteFast.dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:18:0x0033 A[RETURN] */
    /* JADX WARN: Removed duplicated region for block: B:19:0x0034 A[Catch: all -> 0x001b, Exception -> 0x001d, TRY_LEAVE, TryCatch #0 {Exception -> 0x001d, blocks: (B:3:0x0001, B:5:0x0007, B:7:0x000c, B:8:0x0018, B:19:0x0034, B:13:0x001f, B:15:0x0023), top: B:31:0x0001, outer: #1 }] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$putSentFile$164(String str, TLObject tLObject, int i, String str2) {
        TLRPC.MessageMedia tL_messageMediaDocument;
        int i2;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                String strMD5 = Utilities.MD5(str);
                if (strMD5 != null) {
                    if (tLObject instanceof TLRPC.Photo) {
                        tL_messageMediaDocument = new TLRPC.TL_messageMediaPhoto();
                        tL_messageMediaDocument.photo = (TLRPC.Photo) tLObject;
                        i2 = tL_messageMediaDocument.flags | 1;
                    } else if (tLObject instanceof TLRPC.Document) {
                        tL_messageMediaDocument = new TLRPC.TL_messageMediaDocument();
                        tL_messageMediaDocument.document = (TLRPC.Document) tLObject;
                        i2 = tL_messageMediaDocument.flags | 1;
                    } else {
                        tL_messageMediaDocument = null;
                        if (tL_messageMediaDocument != null) {
                            return;
                        }
                        sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO sent_files_v2 VALUES(?, ?, ?, ?)");
                        sQLitePreparedStatementExecuteFast.requery();
                        NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(tL_messageMediaDocument.getObjectSize());
                        tL_messageMediaDocument.serializeToStream(nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast.bindString(1, strMD5);
                        sQLitePreparedStatementExecuteFast.bindInteger(2, i);
                        sQLitePreparedStatementExecuteFast.bindByteBuffer(3, nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast.bindString(4, str2);
                        sQLitePreparedStatementExecuteFast.step();
                        nativeByteBuffer.reuse();
                    }
                    tL_messageMediaDocument.flags = i2;
                    if (tL_messageMediaDocument != null) {
                    }
                }
                if (sQLitePreparedStatementExecuteFast == null) {
                    return;
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLitePreparedStatementExecuteFast == null) {
                    return;
                }
            }
            sQLitePreparedStatementExecuteFast.dispose();
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$putStoryPushMessage$38(NotificationsController.StoryNotification storyNotification) {
        try {
            this.database.executeFast("DELETE FROM story_pushes WHERE uid = " + storyNotification.dialogId).stepThis().dispose();
            SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO story_pushes VALUES(?, ?, ?, ?, ?, ?)");
            for (Map.Entry<Integer, Pair<Long, Long>> entry : storyNotification.dateByIds.entrySet()) {
                int iIntValue = entry.getKey().intValue();
                long jLongValue = ((Long) entry.getValue().first).longValue();
                long jLongValue2 = ((Long) entry.getValue().second).longValue();
                sQLitePreparedStatementExecuteFast.requery();
                sQLitePreparedStatementExecuteFast.bindLong(1, storyNotification.dialogId);
                sQLitePreparedStatementExecuteFast.bindInteger(2, iIntValue);
                sQLitePreparedStatementExecuteFast.bindLong(3, jLongValue);
                if (storyNotification.localName == null) {
                    storyNotification.localName = "";
                }
                sQLitePreparedStatementExecuteFast.bindString(4, storyNotification.localName);
                sQLitePreparedStatementExecuteFast.bindInteger(5, storyNotification.hidden ? 1 : 0);
                sQLitePreparedStatementExecuteFast.bindLong(6, jLongValue2);
                sQLitePreparedStatementExecuteFast.step();
            }
            sQLitePreparedStatementExecuteFast.dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:39:0x0093  */
    /* JADX WARN: Removed duplicated region for block: B:41:0x0098  */
    /* JADX WARN: Removed duplicated region for block: B:62:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$putWallpapers$75(int i, ArrayList arrayList) throws Throwable {
        Exception e;
        SQLiteDatabase sQLiteDatabase;
        SQLiteDatabase sQLiteDatabase2;
        String str;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            if (i == 1) {
                try {
                    this.database.executeFast("DELETE FROM wallpapers2 WHERE num >= -1").stepThis().dispose();
                } catch (Exception e2) {
                    e = e2;
                    checkSQLException(e);
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase != null) {
                        sQLiteDatabase.commitTransaction();
                    }
                    if (sQLitePreparedStatement == null) {
                        sQLitePreparedStatement.dispose();
                        return;
                    }
                    return;
                }
            }
            this.database.beginTransaction();
            if (i != 0) {
                sQLiteDatabase2 = this.database;
                str = "REPLACE INTO wallpapers2 VALUES(?, ?, ?)";
            } else {
                sQLiteDatabase2 = this.database;
                str = "UPDATE wallpapers2 SET data = ? WHERE uid = ?";
            }
            sQLitePreparedStatementExecuteFast = sQLiteDatabase2.executeFast(str);
        } catch (Throwable th) {
            th = th;
        }
        try {
            int size = arrayList.size();
            for (int i2 = 0; i2 < size; i2++) {
                TLRPC.WallPaper wallPaper = (TLRPC.WallPaper) arrayList.get(i2);
                sQLitePreparedStatementExecuteFast.requery();
                NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(wallPaper.getObjectSize());
                wallPaper.serializeToStream(nativeByteBuffer);
                if (i != 0) {
                    sQLitePreparedStatementExecuteFast.bindLong(1, wallPaper.id);
                    sQLitePreparedStatementExecuteFast.bindByteBuffer(2, nativeByteBuffer);
                    if (i < 0) {
                        sQLitePreparedStatementExecuteFast.bindInteger(3, i);
                    } else {
                        sQLitePreparedStatementExecuteFast.bindInteger(3, i == 2 ? -1 : i2);
                    }
                } else {
                    sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBuffer);
                    sQLitePreparedStatementExecuteFast.bindLong(2, wallPaper.id);
                }
                sQLitePreparedStatementExecuteFast.step();
                nativeByteBuffer.reuse();
            }
            sQLitePreparedStatementExecuteFast.dispose();
            this.database.commitTransaction();
            SQLiteDatabase sQLiteDatabase3 = this.database;
            if (sQLiteDatabase3 != null) {
                sQLiteDatabase3.commitTransaction();
            }
        } catch (Exception e3) {
            e = e3;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            checkSQLException(e);
            sQLiteDatabase = this.database;
            if (sQLiteDatabase != null) {
            }
            if (sQLitePreparedStatement == null) {
            }
        } catch (Throwable th2) {
            th = th2;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            SQLiteDatabase sQLiteDatabase4 = this.database;
            if (sQLiteDatabase4 != null) {
                sQLiteDatabase4.commitTransaction();
            }
            if (sQLitePreparedStatement != null) {
                sQLitePreparedStatement.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$putWebPages$181(ArrayList arrayList) {
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.didReceivedWebpages, arrayList);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:101:0x01c5  */
    /* JADX WARN: Removed duplicated region for block: B:108:0x01d3  */
    /* JADX WARN: Removed duplicated region for block: B:110:0x01d8  */
    /* JADX WARN: Removed duplicated region for block: B:112:0x01dd  */
    /* JADX WARN: Removed duplicated region for block: B:115:0x01e4  */
    /* JADX WARN: Removed duplicated region for block: B:150:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:97:0x01bb  */
    /* JADX WARN: Removed duplicated region for block: B:99:0x01c0  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$putWebPages$182(LongSparseArray longSparseArray) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLiteCursor sQLiteCursor;
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLiteDatabase sQLiteDatabase;
        SQLiteDatabase sQLiteDatabase2;
        final ArrayList arrayList;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast2;
        int i = 0;
        int i2 = 1;
        try {
            try {
                arrayList = new ArrayList();
                int size = longSparseArray.size();
                int i3 = 0;
                while (i3 < size) {
                    try {
                        SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT mid, uid FROM webpage_pending_v2 WHERE id = " + longSparseArray.keyAt(i3), new Object[i]);
                        try {
                            LongSparseArray longSparseArray2 = new LongSparseArray();
                            while (sQLiteCursorQueryFinalized.next()) {
                                long jLongValue = sQLiteCursorQueryFinalized.longValue(i2);
                                ArrayList arrayList2 = (ArrayList) longSparseArray2.get(jLongValue);
                                if (arrayList2 == null) {
                                    arrayList2 = new ArrayList();
                                    longSparseArray2.put(jLongValue, arrayList2);
                                }
                                arrayList2.add(Integer.valueOf(sQLiteCursorQueryFinalized.intValue(i)));
                            }
                            sQLiteCursorQueryFinalized.dispose();
                            try {
                                if (!longSparseArray2.isEmpty()) {
                                    int size2 = longSparseArray2.size();
                                    for (int i4 = 0; i4 < size2; i4++) {
                                        boolean z = false;
                                        SQLiteCursor sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT mid, data FROM messages_v2 WHERE mid IN (%s) AND uid = %d", TextUtils.join(",", (ArrayList) longSparseArray2.valueAt(i4)), Long.valueOf(longSparseArray2.keyAt(i4))), new Object[0]);
                                        while (sQLiteCursorQueryFinalized2.next()) {
                                            try {
                                                int iIntValue = sQLiteCursorQueryFinalized2.intValue(z ? 1 : 0);
                                                NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized2.byteBufferValue(1);
                                                if (nativeByteBufferByteBufferValue != null) {
                                                    TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(z), z);
                                                    messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                                                    nativeByteBufferByteBufferValue.reuse();
                                                    TLRPC.MessageMedia messageMedia = messageTLdeserialize.media;
                                                    if (messageMedia instanceof TLRPC.TL_messageMediaWebPage) {
                                                        messageTLdeserialize.id = iIntValue;
                                                        messageMedia.webpage = (TLRPC.WebPage) longSparseArray.valueAt(i3);
                                                        arrayList.add(messageTLdeserialize);
                                                    }
                                                    z = false;
                                                }
                                            } catch (Exception e) {
                                                e = e;
                                                sQLiteCursor = sQLiteCursorQueryFinalized2;
                                                sQLitePreparedStatementExecuteFast = null;
                                                sQLitePreparedStatement = null;
                                                try {
                                                    checkSQLException(e);
                                                    if (sQLiteCursor != null) {
                                                    }
                                                    if (sQLitePreparedStatement != null) {
                                                    }
                                                    if (sQLitePreparedStatementExecuteFast != null) {
                                                    }
                                                    sQLiteDatabase2 = this.database;
                                                    if (sQLiteDatabase2 == null) {
                                                    }
                                                    sQLiteDatabase2.commitTransaction();
                                                } catch (Throwable th) {
                                                    th = th;
                                                    if (sQLiteCursor != null) {
                                                        sQLiteCursor.dispose();
                                                    }
                                                    if (sQLitePreparedStatement != null) {
                                                        sQLitePreparedStatement.dispose();
                                                    }
                                                    if (sQLitePreparedStatementExecuteFast != null) {
                                                        sQLitePreparedStatementExecuteFast.dispose();
                                                    }
                                                    sQLiteDatabase = this.database;
                                                    if (sQLiteDatabase != null) {
                                                        sQLiteDatabase.commitTransaction();
                                                    }
                                                    throw th;
                                                }
                                            } catch (Throwable th2) {
                                                th = th2;
                                                sQLiteCursor = sQLiteCursorQueryFinalized2;
                                                sQLitePreparedStatementExecuteFast = null;
                                                sQLitePreparedStatement = null;
                                                if (sQLiteCursor != null) {
                                                }
                                                if (sQLitePreparedStatement != null) {
                                                }
                                                if (sQLitePreparedStatementExecuteFast != null) {
                                                }
                                                sQLiteDatabase = this.database;
                                                if (sQLiteDatabase != null) {
                                                }
                                                throw th;
                                            }
                                        }
                                        sQLiteCursorQueryFinalized2.dispose();
                                    }
                                }
                                i3++;
                                i = 0;
                                i2 = 1;
                            } catch (Exception e2) {
                                e = e2;
                                sQLiteCursorQueryFinalized = null;
                                sQLiteCursor = sQLiteCursorQueryFinalized;
                                sQLitePreparedStatementExecuteFast = null;
                                sQLitePreparedStatement = null;
                                checkSQLException(e);
                                if (sQLiteCursor != null) {
                                }
                                if (sQLitePreparedStatement != null) {
                                }
                                if (sQLitePreparedStatementExecuteFast != null) {
                                }
                                sQLiteDatabase2 = this.database;
                                if (sQLiteDatabase2 == null) {
                                }
                                sQLiteDatabase2.commitTransaction();
                            } catch (Throwable th3) {
                                th = th3;
                                sQLiteCursorQueryFinalized = null;
                                sQLiteCursor = sQLiteCursorQueryFinalized;
                                sQLitePreparedStatementExecuteFast = null;
                                sQLitePreparedStatement = null;
                                if (sQLiteCursor != null) {
                                }
                                if (sQLitePreparedStatement != null) {
                                }
                                if (sQLitePreparedStatementExecuteFast != null) {
                                }
                                sQLiteDatabase = this.database;
                                if (sQLiteDatabase != null) {
                                }
                                throw th;
                            }
                        } catch (Exception e3) {
                            e = e3;
                        } catch (Throwable th4) {
                            th = th4;
                        }
                    } catch (Exception e4) {
                        e = e4;
                        sQLitePreparedStatementExecuteFast2 = null;
                        sQLitePreparedStatementExecuteFast = null;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                        sQLiteCursor = null;
                        checkSQLException(e);
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                            sQLitePreparedStatementExecuteFast.dispose();
                        }
                        sQLiteDatabase2 = this.database;
                        if (sQLiteDatabase2 == null) {
                            return;
                        }
                        sQLiteDatabase2.commitTransaction();
                    }
                }
            } catch (Exception e5) {
                e = e5;
                sQLitePreparedStatementExecuteFast = null;
                sQLiteCursor = null;
            }
            if (arrayList.isEmpty()) {
                SQLiteDatabase sQLiteDatabase3 = this.database;
                if (sQLiteDatabase3 != null) {
                    sQLiteDatabase3.commitTransaction();
                    return;
                }
                return;
            }
            this.database.beginTransaction();
            sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE messages_v2 SET data = ? WHERE mid = ? AND uid = ?");
            try {
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE media_v4 SET data = ? WHERE mid = ? AND uid = ?");
                for (int i5 = 0; i5 < arrayList.size(); i5++) {
                    try {
                        TLRPC.Message message = (TLRPC.Message) arrayList.get(i5);
                        MessageObject.normalizeFlags(message);
                        NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(message.getObjectSize());
                        message.serializeToStream(nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast2.requery();
                        sQLitePreparedStatementExecuteFast2.bindByteBuffer(1, nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast2.bindInteger(2, message.id);
                        sQLitePreparedStatementExecuteFast2.bindLong(3, MessageObject.getDialogId(message));
                        sQLitePreparedStatementExecuteFast2.step();
                        sQLitePreparedStatementExecuteFast.requery();
                        sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast.bindInteger(2, message.id);
                        sQLitePreparedStatementExecuteFast.bindLong(3, MessageObject.getDialogId(message));
                        sQLitePreparedStatementExecuteFast.step();
                        nativeByteBuffer.reuse();
                    } catch (Exception e6) {
                        e = e6;
                    } catch (Throwable th5) {
                        th = th5;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                        sQLiteCursor = null;
                        if (sQLiteCursor != null) {
                        }
                        if (sQLitePreparedStatement != null) {
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                        }
                        sQLiteDatabase = this.database;
                        if (sQLiteDatabase != null) {
                        }
                        throw th;
                    }
                }
                sQLitePreparedStatementExecuteFast2.dispose();
            } catch (Exception e7) {
                e = e7;
                sQLitePreparedStatementExecuteFast = null;
                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                sQLiteCursor = null;
                checkSQLException(e);
                if (sQLiteCursor != null) {
                }
                if (sQLitePreparedStatement != null) {
                }
                if (sQLitePreparedStatementExecuteFast != null) {
                }
                sQLiteDatabase2 = this.database;
                if (sQLiteDatabase2 == null) {
                }
                sQLiteDatabase2.commitTransaction();
            } catch (Throwable th6) {
                th = th6;
                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                sQLitePreparedStatementExecuteFast = null;
            }
            try {
                sQLitePreparedStatementExecuteFast.dispose();
                this.database.commitTransaction();
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda121
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$putWebPages$181(arrayList);
                    }
                });
                sQLiteDatabase2 = this.database;
                if (sQLiteDatabase2 == null) {
                    return;
                }
            } catch (Exception e8) {
                e = e8;
                sQLitePreparedStatementExecuteFast2 = null;
                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                sQLiteCursor = null;
                checkSQLException(e);
                if (sQLiteCursor != null) {
                }
                if (sQLitePreparedStatement != null) {
                }
                if (sQLitePreparedStatementExecuteFast != null) {
                }
                sQLiteDatabase2 = this.database;
                if (sQLiteDatabase2 == null) {
                }
                sQLiteDatabase2.commitTransaction();
            } catch (Throwable th7) {
                th = th7;
                sQLiteCursor = null;
                sQLitePreparedStatement = null;
                if (sQLiteCursor != null) {
                }
                if (sQLitePreparedStatement != null) {
                }
                if (sQLitePreparedStatementExecuteFast != null) {
                }
                sQLiteDatabase = this.database;
                if (sQLiteDatabase != null) {
                }
                throw th;
            }
            sQLiteDatabase2.commitTransaction();
        } catch (Throwable th8) {
            th = th8;
            sQLitePreparedStatementExecuteFast = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$putWidgetDialogs$160(int i, ArrayList arrayList) {
        try {
            this.database.beginTransaction();
            this.database.executeFast("DELETE FROM shortcut_widget WHERE id = " + i).stepThis().dispose();
            SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO shortcut_widget VALUES(?, ?, ?)");
            if (arrayList.isEmpty()) {
                sQLitePreparedStatementExecuteFast.requery();
                sQLitePreparedStatementExecuteFast.bindInteger(1, i);
                sQLitePreparedStatementExecuteFast.bindLong(2, -1L);
                sQLitePreparedStatementExecuteFast.bindInteger(3, 0);
                sQLitePreparedStatementExecuteFast.step();
            } else {
                int size = arrayList.size();
                for (int i2 = 0; i2 < size; i2++) {
                    long j = ((TopicKey) arrayList.get(i2)).dialogId;
                    sQLitePreparedStatementExecuteFast.requery();
                    sQLitePreparedStatementExecuteFast.bindInteger(1, i);
                    sQLitePreparedStatementExecuteFast.bindLong(2, j);
                    sQLitePreparedStatementExecuteFast.bindInteger(3, i2);
                    sQLitePreparedStatementExecuteFast.step();
                }
            }
            sQLitePreparedStatementExecuteFast.dispose();
            this.database.commitTransaction();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$readAllDialogs$61(ArrayList arrayList, ArrayList arrayList2, ArrayList arrayList3, LongSparseArray longSparseArray) {
        getMessagesController().putUsers(arrayList, true);
        getMessagesController().putChats(arrayList2, true);
        getMessagesController().putEncryptedChats(arrayList3, true);
        for (int i = 0; i < longSparseArray.size(); i++) {
            long jKeyAt = longSparseArray.keyAt(i);
            ReadDialog readDialog = (ReadDialog) longSparseArray.valueAt(i);
            if (getMessagesController().isForum(jKeyAt) || getMessagesController().isMonoForumWithManageRights(jKeyAt)) {
                getMessagesController().markAllTopicsAsRead(jKeyAt);
            }
            MessagesController messagesController = getMessagesController();
            int i2 = readDialog.lastMid;
            messagesController.markDialogAsRead(jKeyAt, i2, i2, readDialog.date, false, 0L, readDialog.unreadCount, true, 0);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Type inference failed for: r2v0, types: [org.telegram.messenger.MessagesStorage$1] */
    /* JADX WARN: Type inference failed for: r2v4 */
    public /* synthetic */ void lambda$readAllDialogs$62(int i) throws Throwable {
        Long lValueOf;
        ArrayList<Long> arrayList;
        SQLiteCursor sQLiteCursor = 0;
        SQLiteCursor sQLiteCursor2 = null;
        try {
            try {
                ArrayList<Long> arrayList2 = new ArrayList<>();
                ArrayList<Long> arrayList3 = new ArrayList<>();
                ArrayList arrayList4 = new ArrayList();
                final LongSparseArray longSparseArray = new LongSparseArray();
                SQLiteCursor sQLiteCursorQueryFinalized = i >= 0 ? this.database.queryFinalized(String.format(Locale.US, "SELECT did, last_mid, unread_count, date FROM dialogs WHERE unread_count > 0 AND folder_id = %1$d", Integer.valueOf(i)), new Object[0]) : this.database.queryFinalized("SELECT did, last_mid, unread_count, date FROM dialogs WHERE unread_count > 0", new Object[0]);
                while (sQLiteCursorQueryFinalized.next()) {
                    try {
                        long jLongValue = sQLiteCursorQueryFinalized.longValue(0);
                        if (!DialogObject.isFolderDialogId(jLongValue)) {
                            ReadDialog readDialog = new ReadDialog();
                            readDialog.lastMid = sQLiteCursorQueryFinalized.intValue(1);
                            readDialog.unreadCount = sQLiteCursorQueryFinalized.intValue(2);
                            readDialog.date = sQLiteCursorQueryFinalized.intValue(3);
                            longSparseArray.put(jLongValue, readDialog);
                            if (DialogObject.isEncryptedDialog(jLongValue)) {
                                int encryptedChatId = DialogObject.getEncryptedChatId(jLongValue);
                                if (!arrayList4.contains(Integer.valueOf(encryptedChatId))) {
                                    arrayList4.add(Integer.valueOf(encryptedChatId));
                                }
                            } else if (DialogObject.isChatDialog(jLongValue)) {
                                long j = -jLongValue;
                                if (!arrayList3.contains(Long.valueOf(j))) {
                                    lValueOf = Long.valueOf(j);
                                    arrayList = arrayList3;
                                    arrayList.add(lValueOf);
                                }
                            } else if (!arrayList2.contains(Long.valueOf(jLongValue))) {
                                lValueOf = Long.valueOf(jLongValue);
                                arrayList = arrayList2;
                                arrayList.add(lValueOf);
                            }
                        }
                    } catch (Exception e) {
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        e = e;
                        checkSQLException(e);
                        if (sQLiteCursor != 0) {
                            sQLiteCursor.dispose();
                            return;
                        }
                        return;
                    } catch (Throwable th) {
                        sQLiteCursor2 = sQLiteCursorQueryFinalized;
                        th = th;
                        if (sQLiteCursor2 != null) {
                            sQLiteCursor2.dispose();
                        }
                        throw th;
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
                final ArrayList<TLRPC.User> arrayList5 = new ArrayList<>();
                final ArrayList<TLRPC.Chat> arrayList6 = new ArrayList<>();
                final ArrayList<TLRPC.EncryptedChat> arrayList7 = new ArrayList<>();
                if (!arrayList4.isEmpty()) {
                    getEncryptedChatsInternal(TextUtils.join(",", arrayList4), arrayList7, arrayList2);
                }
                if (!arrayList2.isEmpty()) {
                    getUsersInternal(arrayList2, arrayList5);
                }
                if (!arrayList3.isEmpty()) {
                    getChatsInternal(TextUtils.join(",", arrayList3), arrayList6);
                }
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda157
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$readAllDialogs$61(arrayList5, arrayList6, arrayList7, longSparseArray);
                    }
                });
            } catch (Throwable th2) {
                th = th2;
            }
        } catch (Exception e2) {
            e = e2;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$removeFromDownloadQueue$176(boolean z, int i, long j) throws Throwable {
        Throwable th;
        Exception e;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                try {
                    if (z) {
                        SQLiteDatabase sQLiteDatabase = this.database;
                        Locale locale = Locale.US;
                        SQLiteCursor sQLiteCursorQueryFinalized = sQLiteDatabase.queryFinalized(String.format(locale, "SELECT min(date) FROM download_queue WHERE type = %d", Integer.valueOf(i)), new Object[0]);
                        try {
                            int iIntValue = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : -1;
                            sQLiteCursorQueryFinalized.dispose();
                            if (iIntValue == -1) {
                                return;
                            } else {
                                sQLitePreparedStatementExecuteFast = this.database.executeFast(String.format(locale, "UPDATE download_queue SET date = %d WHERE uid = %d AND type = %d", Integer.valueOf(iIntValue - 1), Long.valueOf(j), Integer.valueOf(i)));
                            }
                        } catch (Exception e2) {
                            e = e2;
                            sQLiteCursor = sQLiteCursorQueryFinalized;
                            checkSQLException(e);
                            if (sQLiteCursor != null) {
                                sQLiteCursor.dispose();
                                return;
                            }
                            return;
                        } catch (Throwable th2) {
                            th = th2;
                            sQLiteCursor = sQLiteCursorQueryFinalized;
                            if (sQLiteCursor != null) {
                                sQLiteCursor.dispose();
                            }
                            throw th;
                        }
                    } else {
                        sQLitePreparedStatementExecuteFast = this.database.executeFast(String.format(Locale.US, "DELETE FROM download_queue WHERE uid = %d AND type = %d", Long.valueOf(j), Integer.valueOf(i)));
                    }
                    sQLitePreparedStatementExecuteFast.stepThis().dispose();
                } catch (Exception e3) {
                    e = e3;
                }
            } catch (Throwable th3) {
                th = th3;
            }
        } catch (Exception e4) {
            e = e4;
        } catch (Throwable th4) {
            th = th4;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$removePendingTask$11(long j) {
        try {
            this.database.executeFast("DELETE FROM pending_tasks WHERE id = " + j).stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$removeTopic$54(long j, long j2) {
        try {
            SQLiteDatabase sQLiteDatabase = this.database;
            Locale locale = Locale.US;
            sQLiteDatabase.executeFast(String.format(locale, "DELETE FROM topics WHERE did = %d AND topic_id = %d", Long.valueOf(j), Long.valueOf(j2))).stepThis().dispose();
            this.database.executeFast(String.format(locale, "DELETE FROM messages_v2 WHERE uid = %d AND mid IN (SELECT mid FROM messages_topics WHERE uid = %d AND topic_id = %d)", Long.valueOf(j), Long.valueOf(j), Long.valueOf(j2))).stepThis().dispose();
            this.database.executeFast(String.format(locale, "DELETE FROM messages_topics WHERE uid = %d AND topic_id = %d", Long.valueOf(j), Long.valueOf(j2))).stepThis().dispose();
        } catch (SQLiteException e) {
            e.printStackTrace();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$removeTopics$55(ArrayList arrayList, long j) {
        try {
            String strJoin = TextUtils.join(", ", arrayList);
            SQLiteDatabase sQLiteDatabase = this.database;
            Locale locale = Locale.US;
            sQLiteDatabase.executeFast(String.format(locale, "DELETE FROM topics WHERE did = %d AND topic_id IN (%s)", Long.valueOf(j), strJoin)).stepThis().dispose();
            try {
                this.database.executeFast(String.format(locale, "DELETE FROM messages_v2 WHERE uid = %d AND mid IN (SELECT mid FROM messages_topics WHERE uid = %d AND topic_id IN (%s))", Long.valueOf(j), Long.valueOf(j), strJoin)).stepThis().dispose();
            } catch (SQLiteException e) {
                e.printStackTrace();
            }
            this.database.executeFast(String.format(Locale.US, "DELETE FROM messages_topics WHERE uid = %d AND topic_id IN (%s)", Long.valueOf(j), strJoin)).stepThis().dispose();
        } catch (SQLiteException e2) {
            e2.printStackTrace();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$replaceMessageIfExists$215(MessageObject messageObject, ArrayList arrayList) {
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.replaceMessagesObjects, Long.valueOf(messageObject.getDialogId()), arrayList);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$replaceMessageIfExists$216(ArrayList arrayList) {
        if (getMessagesController().getSavedMessagesController().updateSavedDialogs(arrayList)) {
            getMessagesController().getSavedMessagesController().update();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:136:0x0250  */
    /* JADX WARN: Removed duplicated region for block: B:169:0x02da A[Catch: Exception -> 0x0229, all -> 0x02ca, TryCatch #2 {Exception -> 0x0229, blocks: (B:7:0x0035, B:18:0x004e, B:30:0x0064, B:32:0x0071, B:33:0x0074, B:117:0x0223, B:123:0x022d, B:143:0x025a, B:149:0x027a, B:151:0x0283, B:150:0x027f, B:164:0x02c6, B:167:0x02d0, B:169:0x02da, B:170:0x02e5, B:172:0x02eb, B:174:0x0300, B:176:0x0306, B:177:0x031a, B:179:0x0339, B:28:0x0060, B:186:0x0353, B:187:0x0356), top: B:211:0x0008 }] */
    /* JADX WARN: Removed duplicated region for block: B:179:0x0339 A[Catch: Exception -> 0x0229, all -> 0x02ca, TRY_LEAVE, TryCatch #2 {Exception -> 0x0229, blocks: (B:7:0x0035, B:18:0x004e, B:30:0x0064, B:32:0x0071, B:33:0x0074, B:117:0x0223, B:123:0x022d, B:143:0x025a, B:149:0x027a, B:151:0x0283, B:150:0x027f, B:164:0x02c6, B:167:0x02d0, B:169:0x02da, B:170:0x02e5, B:172:0x02eb, B:174:0x0300, B:176:0x0306, B:177:0x031a, B:179:0x0339, B:28:0x0060, B:186:0x0353, B:187:0x0356), top: B:211:0x0008 }] */
    /* JADX WARN: Removed duplicated region for block: B:182:0x0345  */
    /* JADX WARN: Removed duplicated region for block: B:186:0x0353 A[Catch: all -> 0x0227, Exception -> 0x0229, TRY_ENTER, TryCatch #2 {Exception -> 0x0229, blocks: (B:7:0x0035, B:18:0x004e, B:30:0x0064, B:32:0x0071, B:33:0x0074, B:117:0x0223, B:123:0x022d, B:143:0x025a, B:149:0x027a, B:151:0x0283, B:150:0x027f, B:164:0x02c6, B:167:0x02d0, B:169:0x02da, B:170:0x02e5, B:172:0x02eb, B:174:0x0300, B:176:0x0306, B:177:0x031a, B:179:0x0339, B:28:0x0060, B:186:0x0353, B:187:0x0356), top: B:211:0x0008 }] */
    /* JADX WARN: Removed duplicated region for block: B:191:0x035e  */
    /* JADX WARN: Removed duplicated region for block: B:193:0x0363  */
    /* JADX WARN: Removed duplicated region for block: B:195:0x0368  */
    /* JADX WARN: Removed duplicated region for block: B:202:0x037d  */
    /* JADX WARN: Removed duplicated region for block: B:204:0x0382  */
    /* JADX WARN: Removed duplicated region for block: B:206:0x0387  */
    /* JADX WARN: Removed duplicated region for block: B:212:0x02c6 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:235:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:237:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:28:0x0060 A[Catch: all -> 0x0227, Exception -> 0x0229, TRY_ENTER, TryCatch #2 {Exception -> 0x0229, blocks: (B:7:0x0035, B:18:0x004e, B:30:0x0064, B:32:0x0071, B:33:0x0074, B:117:0x0223, B:123:0x022d, B:143:0x025a, B:149:0x027a, B:151:0x0283, B:150:0x027f, B:164:0x02c6, B:167:0x02d0, B:169:0x02da, B:170:0x02e5, B:172:0x02eb, B:174:0x0300, B:176:0x0306, B:177:0x031a, B:179:0x0339, B:28:0x0060, B:186:0x0353, B:187:0x0356), top: B:211:0x0008 }] */
    /* JADX WARN: Removed duplicated region for block: B:32:0x0071 A[Catch: all -> 0x0227, Exception -> 0x0229, TryCatch #2 {Exception -> 0x0229, blocks: (B:7:0x0035, B:18:0x004e, B:30:0x0064, B:32:0x0071, B:33:0x0074, B:117:0x0223, B:123:0x022d, B:143:0x025a, B:149:0x027a, B:151:0x0283, B:150:0x027f, B:164:0x02c6, B:167:0x02d0, B:169:0x02da, B:170:0x02e5, B:172:0x02eb, B:174:0x0300, B:176:0x0306, B:177:0x031a, B:179:0x0339, B:28:0x0060, B:186:0x0353, B:187:0x0356), top: B:211:0x0008 }] */
    /* JADX WARN: Removed duplicated region for block: B:36:0x0092  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$replaceMessageIfExists$217(TLRPC.Message message, boolean z, ArrayList arrayList, ArrayList arrayList2) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLitePreparedStatement sQLitePreparedStatement2;
        SQLitePreparedStatement sQLitePreparedStatement3;
        Throwable th;
        SQLiteDatabase sQLiteDatabase;
        SQLitePreparedStatement sQLitePreparedStatement4;
        SQLitePreparedStatement sQLitePreparedStatement5;
        SQLitePreparedStatement sQLitePreparedStatement6;
        SQLiteDatabase sQLiteDatabase2;
        SQLiteCursor sQLiteCursor;
        SQLiteCursor sQLiteCursorQueryFinalized;
        int iIntValue;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        final ArrayList arrayList3;
        int i;
        SQLiteDatabase sQLiteDatabase3;
        SQLiteDatabase sQLiteDatabase4;
        String str;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        int i2;
        int i3;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast2;
        int i4;
        int i5;
        NativeByteBuffer nativeByteBuffer;
        int i6;
        NativeByteBuffer nativeByteBuffer2;
        int i7;
        int i8;
        int i9 = 3;
        int i10 = 2;
        int i11 = 1;
        try {
            try {
                try {
                    try {
                        sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT uid, read_state, custom_params FROM messages_v2 WHERE mid = %d AND uid = %d LIMIT 1", Integer.valueOf(message.id), Long.valueOf(MessageObject.getDialogId(message))), new Object[0]);
                        try {
                        } catch (Exception e) {
                            e = e;
                            iIntValue = 0;
                            checkSQLException(e);
                            if (sQLiteCursorQueryFinalized != null) {
                            }
                            nativeByteBufferByteBufferValue = null;
                            this.database.beginTransaction();
                            long j = 0;
                            if (message.dialog_id == 0) {
                            }
                            fixUnsupportedMedia(message);
                            MessageObject.normalizeFlags(message);
                            NativeByteBuffer nativeByteBuffer3 = new NativeByteBuffer(message.getObjectSize());
                            message.serializeToStream(nativeByteBuffer3);
                            long clientUserId = getUserConfig().getClientUserId();
                            arrayList3 = null;
                            i = 0;
                            while (i < i10) {
                            }
                            if (MediaDataController.canAddMessageToMedia(message)) {
                            }
                            if (nativeByteBufferByteBufferValue != null) {
                            }
                            nativeByteBuffer3.reuse();
                            this.database.commitTransaction();
                            if (z) {
                            }
                            if (arrayList3 != null) {
                            }
                            sQLiteDatabase3 = this.database;
                            if (sQLiteDatabase3 != null) {
                            }
                        }
                    } catch (Throwable th2) {
                        th = th2;
                        if (0 != 0) {
                            sQLiteCursor.dispose();
                        }
                        throw th;
                    }
                } catch (Throwable th3) {
                    th = th3;
                    sQLitePreparedStatement3 = null;
                    sQLitePreparedStatement2 = null;
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase != null) {
                        sQLiteDatabase.commitTransaction();
                    }
                    if (sQLitePreparedStatement3 != null) {
                        sQLitePreparedStatement3.dispose();
                    }
                    if (sQLitePreparedStatement2 != null) {
                        sQLitePreparedStatement2.dispose();
                    }
                    throw th;
                }
            } catch (Exception e2) {
                e = e2;
                sQLiteCursorQueryFinalized = null;
            } catch (Throwable th4) {
                th = th4;
                sQLiteCursor = null;
                if (0 != 0) {
                }
                throw th;
            }
            if (!sQLiteCursorQueryFinalized.next()) {
                sQLiteCursorQueryFinalized.dispose();
                sQLiteCursorQueryFinalized.dispose();
                SQLiteDatabase sQLiteDatabase5 = this.database;
                if (sQLiteDatabase5 != null) {
                    sQLiteDatabase5.commitTransaction();
                    return;
                }
                return;
            }
            iIntValue = sQLiteCursorQueryFinalized.intValue(1);
            try {
                nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(2);
                sQLiteCursorQueryFinalized.dispose();
            } catch (Exception e3) {
                e = e3;
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                    sQLiteCursorQueryFinalized.dispose();
                }
                nativeByteBufferByteBufferValue = null;
                this.database.beginTransaction();
                long j2 = 0;
                if (message.dialog_id == 0) {
                }
                fixUnsupportedMedia(message);
                MessageObject.normalizeFlags(message);
                NativeByteBuffer nativeByteBuffer32 = new NativeByteBuffer(message.getObjectSize());
                message.serializeToStream(nativeByteBuffer32);
                long clientUserId2 = getUserConfig().getClientUserId();
                arrayList3 = null;
                i = 0;
                while (i < i10) {
                }
                if (MediaDataController.canAddMessageToMedia(message)) {
                }
                if (nativeByteBufferByteBufferValue != null) {
                }
                nativeByteBuffer32.reuse();
                this.database.commitTransaction();
                if (z) {
                }
                if (arrayList3 != null) {
                }
                sQLiteDatabase3 = this.database;
                if (sQLiteDatabase3 != null) {
                }
            }
            this.database.beginTransaction();
            long j22 = 0;
            if (message.dialog_id == 0) {
                MessageObject.getDialogId(message);
            }
            fixUnsupportedMedia(message);
            MessageObject.normalizeFlags(message);
            NativeByteBuffer nativeByteBuffer322 = new NativeByteBuffer(message.getObjectSize());
            message.serializeToStream(nativeByteBuffer322);
            long clientUserId22 = getUserConfig().getClientUserId();
            arrayList3 = null;
            i = 0;
            while (i < i10) {
                boolean z2 = i == i11;
                try {
                    NativeByteBuffer nativeByteBuffer4 = nativeByteBuffer322;
                    long topicId = MessageObject.getTopicId(this.currentAccount, message, isForum(message.dialog_id), isMonoForum(message.dialog_id));
                    long j3 = message.dialog_id;
                    if (!z2) {
                        sQLitePreparedStatementExecuteFast2 = this.database.executeFast("REPLACE INTO messages_v2 VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 0, ?, ?, ?)");
                    } else if (topicId == j22) {
                        nativeByteBuffer322 = nativeByteBuffer4;
                        i8 = 1;
                        i += i8;
                        i9 = 3;
                        i10 = 2;
                        i11 = 1;
                        j22 = 0;
                    } else {
                        sQLitePreparedStatementExecuteFast2 = this.database.executeFast("REPLACE INTO messages_topics VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 0, ?, ?)");
                        if (j3 == clientUserId22) {
                            try {
                                if (MessageObject.getSavedDialogId(clientUserId22, message) != j22) {
                                    if (arrayList3 == null) {
                                        arrayList3 = new ArrayList();
                                    }
                                    arrayList3.add(message);
                                }
                            } catch (Exception e4) {
                                e = e4;
                                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                                sQLitePreparedStatement6 = null;
                                try {
                                    checkSQLException(e);
                                    sQLiteDatabase2 = this.database;
                                    if (sQLiteDatabase2 != null) {
                                    }
                                    if (sQLitePreparedStatement != null) {
                                    }
                                    if (sQLitePreparedStatement6 != null) {
                                    }
                                } catch (Throwable th5) {
                                    th = th5;
                                    SQLitePreparedStatement sQLitePreparedStatement7 = sQLitePreparedStatement6;
                                    sQLitePreparedStatement4 = sQLitePreparedStatement;
                                    sQLitePreparedStatement5 = sQLitePreparedStatement7;
                                    SQLitePreparedStatement sQLitePreparedStatement8 = sQLitePreparedStatement4;
                                    sQLitePreparedStatement2 = sQLitePreparedStatement5;
                                    sQLitePreparedStatement3 = sQLitePreparedStatement8;
                                    sQLiteDatabase = this.database;
                                    if (sQLiteDatabase != null) {
                                    }
                                    if (sQLitePreparedStatement3 != null) {
                                    }
                                    if (sQLitePreparedStatement2 != null) {
                                    }
                                    throw th;
                                }
                            } catch (Throwable th6) {
                                th = th6;
                                sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast2;
                                sQLitePreparedStatement2 = null;
                                sQLiteDatabase = this.database;
                                if (sQLiteDatabase != null) {
                                }
                                if (sQLitePreparedStatement3 != null) {
                                }
                                if (sQLitePreparedStatement2 != null) {
                                }
                                throw th;
                            }
                        }
                    }
                    sQLitePreparedStatementExecuteFast2.requery();
                    sQLitePreparedStatementExecuteFast2.bindInteger(1, message.id);
                    sQLitePreparedStatementExecuteFast2.bindLong(2, j3);
                    if (z2) {
                        sQLitePreparedStatementExecuteFast2.bindLong(i9, topicId);
                        i4 = 4;
                    } else {
                        i4 = 3;
                    }
                    sQLitePreparedStatementExecuteFast2.bindInteger(i4, iIntValue);
                    sQLitePreparedStatementExecuteFast2.bindInteger(i4 + 1, message.send_state);
                    sQLitePreparedStatementExecuteFast2.bindInteger(i4 + 2, message.date);
                    int i12 = i4 + 4;
                    sQLitePreparedStatementExecuteFast2.bindByteBuffer(i4 + 3, nativeByteBuffer4);
                    int i13 = i4 + 5;
                    sQLitePreparedStatementExecuteFast2.bindInteger(i12, (MessageObject.isOut(message) || message.from_scheduled) ? 1 : 0);
                    int i14 = i4 + 6;
                    sQLitePreparedStatementExecuteFast2.bindInteger(i13, message.ttl);
                    int i15 = i4 + 7;
                    sQLitePreparedStatementExecuteFast2.bindInteger(i14, (message.flags & 1024) != 0 ? message.views : getMessageMediaType(message));
                    if (message.replyStory != null) {
                        nativeByteBuffer = new NativeByteBuffer(message.replyStory.getObjectSize());
                        message.replyStory.serializeToStream(nativeByteBuffer);
                        i5 = i15 + 1;
                        nativeByteBuffer322 = nativeByteBuffer4;
                        sQLitePreparedStatementExecuteFast2.bindByteBuffer(i15, nativeByteBuffer);
                    } else {
                        nativeByteBuffer322 = nativeByteBuffer4;
                        i5 = i15 + 1;
                        sQLitePreparedStatementExecuteFast2.bindNull(i15);
                        nativeByteBuffer = null;
                    }
                    int i16 = message.stickerVerified;
                    sQLitePreparedStatementExecuteFast2.bindInteger(i5, i16 == 0 ? 1 : i16 == 2 ? 2 : 0);
                    sQLitePreparedStatementExecuteFast2.bindInteger(i5 + 1, message.mentioned ? 1 : 0);
                    int i17 = i5 + 3;
                    sQLitePreparedStatementExecuteFast2.bindInteger(i5 + 2, message.forwards);
                    if (message.replies != null) {
                        NativeByteBuffer nativeByteBuffer5 = new NativeByteBuffer(message.replies.getObjectSize());
                        message.replies.serializeToStream(nativeByteBuffer5);
                        i6 = i5 + 4;
                        sQLitePreparedStatementExecuteFast2.bindByteBuffer(i17, nativeByteBuffer5);
                        nativeByteBuffer2 = nativeByteBuffer5;
                    } else {
                        i6 = i5 + 4;
                        sQLitePreparedStatementExecuteFast2.bindNull(i17);
                        nativeByteBuffer2 = null;
                    }
                    TLRPC.MessageReplyHeader messageReplyHeader = message.reply_to;
                    if (messageReplyHeader != null) {
                        int i18 = i6 + 1;
                        int i19 = messageReplyHeader.reply_to_top_id;
                        if (i19 == 0) {
                            i19 = messageReplyHeader.reply_to_msg_id;
                        }
                        sQLitePreparedStatementExecuteFast2.bindInteger(i6, i19);
                        i7 = i18;
                    } else {
                        sQLitePreparedStatementExecuteFast2.bindInteger(i6, 0);
                        i7 = i6 + 1;
                    }
                    int i20 = i7 + 1;
                    NativeByteBuffer nativeByteBuffer6 = nativeByteBuffer;
                    sQLitePreparedStatementExecuteFast2.bindLong(i7, MessageObject.getChannelId(message));
                    int i21 = i7 + 2;
                    if (nativeByteBufferByteBufferValue != null) {
                        sQLitePreparedStatementExecuteFast2.bindByteBuffer(i20, nativeByteBufferByteBufferValue);
                    } else {
                        sQLitePreparedStatementExecuteFast2.bindNull(i20);
                    }
                    if (!z2) {
                        if ((message.flags & 131072) != 0) {
                            sQLitePreparedStatementExecuteFast2.bindLong(i21, message.grouped_id);
                            i21++;
                        } else {
                            sQLitePreparedStatementExecuteFast2.bindNull(i21);
                            i21++;
                        }
                    }
                    TLRPC.MessageReplyHeader messageReplyHeader2 = message.reply_to;
                    if (messageReplyHeader2 != null) {
                        sQLitePreparedStatementExecuteFast2.bindInteger(i21, messageReplyHeader2.story_id);
                    } else {
                        sQLitePreparedStatementExecuteFast2.bindInteger(i21, 0);
                    }
                    sQLitePreparedStatementExecuteFast2.step();
                    sQLitePreparedStatementExecuteFast2.dispose();
                    if (nativeByteBuffer2 != null) {
                        nativeByteBuffer2.reuse();
                    }
                    if (nativeByteBuffer6 != null) {
                        nativeByteBuffer6.reuse();
                    }
                    i8 = 1;
                    i += i8;
                    i9 = 3;
                    i10 = 2;
                    i11 = 1;
                    j22 = 0;
                } catch (Exception e5) {
                    e = e5;
                    sQLitePreparedStatementExecuteFast = null;
                    sQLitePreparedStatement6 = sQLitePreparedStatementExecuteFast;
                    sQLitePreparedStatement = null;
                    checkSQLException(e);
                    sQLiteDatabase2 = this.database;
                    if (sQLiteDatabase2 != null) {
                        sQLiteDatabase2.commitTransaction();
                    }
                    if (sQLitePreparedStatement != null) {
                        sQLitePreparedStatement.dispose();
                    }
                    if (sQLitePreparedStatement6 != null) {
                        sQLitePreparedStatement6.dispose();
                        return;
                    }
                    return;
                } catch (Throwable th7) {
                    th = th7;
                    sQLitePreparedStatementExecuteFast = null;
                    sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast;
                    sQLitePreparedStatement3 = null;
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase != null) {
                    }
                    if (sQLitePreparedStatement3 != null) {
                    }
                    if (sQLitePreparedStatement2 != null) {
                    }
                    throw th;
                }
            }
            if (MediaDataController.canAddMessageToMedia(message)) {
                int i22 = 0;
                while (i22 < 2) {
                    boolean z3 = i22 == 1;
                    long topicId2 = MessageObject.getTopicId(this.currentAccount, message, isForum(message.dialog_id), isMonoForum(message.dialog_id));
                    if (z3 && topicId2 == 0) {
                        i3 = 1;
                    } else {
                        if (i22 == 0) {
                            sQLiteDatabase4 = this.database;
                            str = "REPLACE INTO media_v4 VALUES(?, ?, ?, ?, ?)";
                        } else {
                            sQLiteDatabase4 = this.database;
                            str = "REPLACE INTO media_topics VALUES(?, ?, ?, ?, ?, ?)";
                        }
                        sQLitePreparedStatementExecuteFast = sQLiteDatabase4.executeFast(str);
                        try {
                            sQLitePreparedStatementExecuteFast.requery();
                            sQLitePreparedStatementExecuteFast.bindInteger(1, message.id);
                            sQLitePreparedStatementExecuteFast.bindLong(2, message.dialog_id);
                            if (i22 != 0) {
                                sQLitePreparedStatementExecuteFast.bindLong(3, topicId2);
                                i2 = 4;
                            } else {
                                i2 = 3;
                            }
                            sQLitePreparedStatementExecuteFast.bindInteger(i2, message.date);
                            sQLitePreparedStatementExecuteFast.bindInteger(i2 + 1, MediaDataController.getMediaType(message));
                            sQLitePreparedStatementExecuteFast.bindByteBuffer(i2 + 2, nativeByteBuffer322);
                            sQLitePreparedStatementExecuteFast.step();
                            sQLitePreparedStatementExecuteFast.dispose();
                            i3 = 1;
                        } catch (Exception e6) {
                            e = e6;
                            sQLitePreparedStatement6 = sQLitePreparedStatementExecuteFast;
                            sQLitePreparedStatement = null;
                            checkSQLException(e);
                            sQLiteDatabase2 = this.database;
                            if (sQLiteDatabase2 != null) {
                            }
                            if (sQLitePreparedStatement != null) {
                            }
                            if (sQLitePreparedStatement6 != null) {
                            }
                        } catch (Throwable th8) {
                            th = th8;
                            sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast;
                            sQLitePreparedStatement3 = null;
                            sQLiteDatabase = this.database;
                            if (sQLiteDatabase != null) {
                            }
                            if (sQLitePreparedStatement3 != null) {
                            }
                            if (sQLitePreparedStatement2 != null) {
                            }
                            throw th;
                        }
                    }
                    i22 += i3;
                }
            }
            if (nativeByteBufferByteBufferValue != null) {
                try {
                    nativeByteBufferByteBufferValue.reuse();
                } catch (Throwable th9) {
                    th = th9;
                    sQLitePreparedStatement5 = null;
                    sQLitePreparedStatement4 = null;
                    SQLitePreparedStatement sQLitePreparedStatement82 = sQLitePreparedStatement4;
                    sQLitePreparedStatement2 = sQLitePreparedStatement5;
                    sQLitePreparedStatement3 = sQLitePreparedStatement82;
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase != null) {
                    }
                    if (sQLitePreparedStatement3 != null) {
                    }
                    if (sQLitePreparedStatement2 != null) {
                    }
                    throw th;
                }
            }
            nativeByteBuffer322.reuse();
            this.database.commitTransaction();
            if (z) {
                HashMap map = new HashMap();
                HashMap map2 = new HashMap();
                for (int i23 = 0; i23 < arrayList.size(); i23++) {
                    TLRPC.User user = (TLRPC.User) arrayList.get(i23);
                    map.put(Long.valueOf(user.id), user);
                }
                for (int i24 = 0; i24 < arrayList2.size(); i24++) {
                    TLRPC.Chat chat = (TLRPC.Chat) arrayList2.get(i24);
                    map2.put(Long.valueOf(chat.id), chat);
                }
                final MessageObject messageObject = new MessageObject(this.currentAccount, message, (AbstractMap<Long, TLRPC.User>) map, (AbstractMap<Long, TLRPC.Chat>) map2, true, true);
                final ArrayList arrayList4 = new ArrayList();
                arrayList4.add(messageObject);
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda67
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$replaceMessageIfExists$215(messageObject, arrayList4);
                    }
                });
            }
            if (arrayList3 != null) {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda68
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$replaceMessageIfExists$216(arrayList3);
                    }
                });
            }
            sQLiteDatabase3 = this.database;
            if (sQLiteDatabase3 != null) {
                sQLiteDatabase3.commitTransaction();
            }
        } catch (Exception e7) {
            e = e7;
            sQLitePreparedStatement = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$reset$58() {
        for (int i = 0; i < 2; i++) {
            getUserConfig().setDialogsLoadOffset(i, 0, 0, 0L, 0L, 0L, 0L);
            getUserConfig().setTotalDialogsCount(i, 0);
        }
        getUserConfig().clearFilters();
        getUserConfig().clearPinnedDialogsLoaded();
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.didClearDatabase, new Object[0]);
        getMediaDataController().loadAttachMenuBots(false, true);
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.onDatabaseReset, new Object[0]);
        getMessagesController().getStoriesController().cleanup();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$resetAllUnreadCounters$233() {
        ArrayList<MessagesController.DialogFilter> arrayList = getMessagesController().dialogFilters;
        int size = arrayList.size();
        for (int i = 0; i < size; i++) {
            arrayList.get(i).unreadCount = arrayList.get(i).pendingUnreadCount;
        }
        this.mainUnreadCount = this.pendingMainUnreadCount;
        this.archiveUnreadCount = this.pendingArchiveUnreadCount;
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.updateInterfaces, Integer.valueOf(MessagesController.UPDATE_MASK_READ_DIALOG_MESSAGE));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public static /* synthetic */ int lambda$resetDialogs$89(LongSparseIntArray longSparseIntArray, Long l, Long l2) {
        int i = longSparseIntArray.get(l.longValue());
        int i2 = longSparseIntArray.get(l2.longValue());
        if (i < i2) {
            return 1;
        }
        return i > i2 ? -1 : 0;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:102:0x035e  */
    /* JADX WARN: Removed duplicated region for block: B:104:0x0363  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$resetDialogs$90(TLRPC.messages_Dialogs messages_dialogs, int i, int i2, int i3, int i4, int i5, TLRPC.Message message, int i6, LongSparseArray longSparseArray, LongSparseArray longSparseArray2) throws Throwable {
        SQLiteCursor sQLiteCursor;
        SQLiteDatabase sQLiteDatabase;
        long j;
        long j2;
        long j3;
        long j4;
        long j5;
        int i7;
        try {
            ArrayList arrayList = new ArrayList();
            int size = messages_dialogs.dialogs.size() - i;
            final LongSparseIntArray longSparseIntArray = new LongSparseIntArray();
            ArrayList arrayList2 = new ArrayList();
            ArrayList arrayList3 = new ArrayList();
            for (int i8 = i; i8 < messages_dialogs.dialogs.size(); i8++) {
                arrayList3.add(Long.valueOf(((TLRPC.Dialog) messages_dialogs.dialogs.get(i8)).id));
            }
            SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT did, pinned FROM dialogs WHERE 1", new Object[0]);
            int iMax = 0;
            while (sQLiteCursorQueryFinalized.next()) {
                try {
                    long jLongValue = sQLiteCursorQueryFinalized.longValue(0);
                    int iIntValue = sQLiteCursorQueryFinalized.intValue(1);
                    if (!DialogObject.isEncryptedDialog(jLongValue)) {
                        arrayList.add(Long.valueOf(jLongValue));
                        if (iIntValue > 0) {
                            iMax = Math.max(iIntValue, iMax);
                            longSparseIntArray.put(jLongValue, iIntValue);
                            arrayList2.add(Long.valueOf(jLongValue));
                        }
                    }
                } catch (Exception e) {
                    e = e;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    try {
                        checkSQLException(e);
                        SQLiteDatabase sQLiteDatabase2 = this.database;
                        if (sQLiteDatabase2 != null) {
                            sQLiteDatabase2.commitTransaction();
                        }
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                            return;
                        }
                        return;
                    } catch (Throwable th) {
                        th = th;
                        sQLiteDatabase = this.database;
                        if (sQLiteDatabase != null) {
                            sQLiteDatabase.commitTransaction();
                        }
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        throw th;
                    }
                } catch (Throwable th2) {
                    th = th2;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase != null) {
                    }
                    if (sQLiteCursor != null) {
                    }
                    throw th;
                }
            }
            Collections.sort(arrayList2, new Comparator() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda84
                @Override // java.util.Comparator
                public final int compare(Object obj, Object obj2) {
                    return MessagesStorage.lambda$resetDialogs$89(longSparseIntArray, (Long) obj, (Long) obj2);
                }
            });
            while (arrayList2.size() < size) {
                arrayList2.add(0, 0L);
            }
            sQLiteCursorQueryFinalized.dispose();
            String str = "(" + TextUtils.join(",", arrayList) + ")";
            this.database.beginTransaction();
            this.database.executeFast("DELETE FROM chat_pinned_count WHERE uid IN " + str).stepThis().dispose();
            this.database.executeFast("DELETE FROM chat_pinned_v2 WHERE uid IN " + str).stepThis().dispose();
            this.database.executeFast("DELETE FROM dialogs WHERE did IN " + str).stepThis().dispose();
            this.database.executeFast("DELETE FROM messages_v2 WHERE uid IN " + str).stepThis().dispose();
            this.database.executeFast("DELETE FROM polls_v2 WHERE 1").stepThis().dispose();
            this.database.executeFast("DELETE FROM bot_keyboard WHERE uid IN " + str).stepThis().dispose();
            this.database.executeFast("DELETE FROM bot_keyboard_topics WHERE uid IN " + str).stepThis().dispose();
            this.database.executeFast("DELETE FROM media_v4 WHERE uid IN " + str).stepThis().dispose();
            this.database.executeFast("DELETE FROM messages_holes WHERE uid IN " + str).stepThis().dispose();
            this.database.executeFast("DELETE FROM media_holes_v2 WHERE uid IN " + str).stepThis().dispose();
            this.database.commitTransaction();
            for (int i9 = 0; i9 < size; i9++) {
                TLRPC.Dialog dialog = (TLRPC.Dialog) messages_dialogs.dialogs.get(i + i9);
                if (!(dialog instanceof TLRPC.TL_dialog) || dialog.pinned) {
                    int iIndexOf = arrayList2.indexOf(Long.valueOf(dialog.id));
                    int iIndexOf2 = arrayList3.indexOf(Long.valueOf(dialog.id));
                    if (iIndexOf != -1 && iIndexOf2 != -1) {
                        if (iIndexOf == iIndexOf2) {
                            i7 = longSparseIntArray.get(dialog.id, -1);
                            if (i7 != -1) {
                                dialog.pinnedNum = i7;
                            }
                        } else {
                            i7 = longSparseIntArray.get(((Long) arrayList2.get(iIndexOf2)).longValue(), -1);
                            if (i7 != -1) {
                                dialog.pinnedNum = i7;
                            }
                        }
                    }
                    if (dialog.pinnedNum == 0) {
                        dialog.pinnedNum = (size - i9) + iMax;
                    }
                }
            }
            putDialogsInternal(messages_dialogs, 0);
            lambda$saveDiffParams$35(i2, i3, i4, i5);
            int totalDialogsCount = getUserConfig().getTotalDialogsCount(0) + messages_dialogs.dialogs.size();
            int i10 = message.id;
            int i11 = message.date;
            TLRPC.Peer peer = message.peer_id;
            long j6 = peer.channel_id;
            if (j6 != 0) {
                int i12 = 0;
                while (true) {
                    if (i12 >= messages_dialogs.chats.size()) {
                        j2 = 0;
                        break;
                    }
                    TLRPC.Chat chat = (TLRPC.Chat) messages_dialogs.chats.get(i12);
                    if (chat.id == j6) {
                        j2 = chat.access_hash;
                        break;
                    }
                    i12++;
                }
                j = j6;
                j3 = 0;
                j4 = 0;
            } else {
                long j7 = peer.chat_id;
                if (j7 != 0) {
                    int i13 = 0;
                    while (true) {
                        if (i13 >= messages_dialogs.chats.size()) {
                            j2 = 0;
                            break;
                        }
                        TLRPC.Chat chat2 = (TLRPC.Chat) messages_dialogs.chats.get(i13);
                        if (chat2.id == j7) {
                            j2 = chat2.access_hash;
                            break;
                        }
                        i13++;
                    }
                    j4 = j7;
                    j3 = 0;
                    j = 0;
                } else {
                    long j8 = peer.user_id;
                    j = 0;
                    if (j8 != 0) {
                        int i14 = 0;
                        while (true) {
                            if (i14 >= messages_dialogs.users.size()) {
                                j5 = 0;
                                break;
                            }
                            TLRPC.User user = (TLRPC.User) messages_dialogs.users.get(i14);
                            if (user.id == j8) {
                                j5 = user.access_hash;
                                break;
                            }
                            i14++;
                        }
                        j4 = 0;
                        j2 = j5;
                        j3 = j8;
                    } else {
                        j2 = 0;
                        j3 = 0;
                        j4 = 0;
                    }
                }
            }
            for (int i15 = 0; i15 < 2; i15++) {
                getUserConfig().setDialogsLoadOffset(i15, i10, i11, j3, j4, j, j2);
                getUserConfig().setTotalDialogsCount(i15, totalDialogsCount);
            }
            getUserConfig().draftsLoaded = false;
            getUserConfig().saveConfig(false);
            getMessagesController().completeDialogsReset(messages_dialogs, i6, i2, i3, i4, i5, longSparseArray, longSparseArray2, message);
            SQLiteDatabase sQLiteDatabase3 = this.database;
            if (sQLiteDatabase3 != null) {
                sQLiteDatabase3.commitTransaction();
            }
        } catch (Exception e2) {
            e = e2;
            sQLiteCursor = null;
        } catch (Throwable th3) {
            th = th3;
            sQLiteCursor = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:34:0x00f8  */
    /* JADX WARN: Removed duplicated region for block: B:37:0x00fe  */
    /* JADX WARN: Removed duplicated region for block: B:48:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$resetMentionsCount$109(long j, long j2, int i) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        SQLiteCursor sQLiteCursor = null;
        try {
            if (j == 0) {
                try {
                    sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT unread_count_i FROM dialogs WHERE did = " + j2, new Object[0]);
                } catch (Exception e) {
                    e = e;
                }
                try {
                    int iIntValue = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : 0;
                    sQLiteCursorQueryFinalized.dispose();
                    if (iIntValue == 0 && i == 0) {
                        return;
                    }
                    if (i == 0) {
                        this.database.executeFast(String.format(Locale.US, "UPDATE messages_v2 SET read_state = read_state | 2 WHERE uid = %d AND mention = 1 AND read_state IN(0, 1)", Long.valueOf(j2))).stepThis().dispose();
                    }
                    this.database.executeFast(String.format(Locale.US, "UPDATE dialogs SET unread_count_i = %d WHERE did = %d", Integer.valueOf(i), Long.valueOf(j2))).stepThis().dispose();
                    LongSparseIntArray longSparseIntArray = new LongSparseIntArray(1);
                    longSparseIntArray.put(j2, i);
                    getMessagesController().processDialogsUpdateRead(null, longSparseIntArray);
                    if (i == 0) {
                        updateFiltersReadCounter(null, longSparseIntArray, true);
                        return;
                    }
                    return;
                } catch (Exception e2) {
                    e = e2;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    checkSQLException(e);
                    if (sQLiteCursor == null) {
                        sQLiteCursor.dispose();
                        return;
                    }
                    return;
                } catch (Throwable th) {
                    th = th;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    if (sQLiteCursor != null) {
                        sQLiteCursor.dispose();
                    }
                    throw th;
                }
            }
            try {
                this.database.executeFast(String.format(Locale.US, "UPDATE topics SET unread_mentions = %d WHERE did = %d AND topic_id = %d", Integer.valueOf(i), Long.valueOf(j2), Long.valueOf(j))).stepThis().dispose();
                TopicsController.TopicUpdate topicUpdate = new TopicsController.TopicUpdate();
                topicUpdate.dialogId = j2;
                topicUpdate.topicId = j;
                topicUpdate.onlyCounters = true;
                topicUpdate.unreadMentions = i;
                topicUpdate.unreadCount = -1;
                getMessagesController().getTopicsController().processUpdate(Collections.singletonList(topicUpdate));
            } catch (Exception e3) {
                e = e3;
                sQLiteCursor = null;
                checkSQLException(e);
                if (sQLiteCursor == null) {
                }
            } catch (Throwable th2) {
                th = th2;
                sQLiteCursor = null;
                if (sQLiteCursor != null) {
                }
                throw th;
            }
        } catch (Throwable th3) {
            th = th3;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$saveBotCache$121(TLObject tLObject, String str) throws Throwable {
        int currentTime;
        int i;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                currentTime = getConnectionsManager().getCurrentTime();
            } catch (Throwable th) {
                th = th;
            }
        } catch (Exception e) {
            e = e;
        }
        try {
            if (!(tLObject instanceof TLRPC.TL_messages_botCallbackAnswer)) {
                if (tLObject instanceof TLRPC.TL_messages_botResults) {
                    i = ((TLRPC.TL_messages_botResults) tLObject).cache_time;
                }
                sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO botcache VALUES(?, ?, ?)");
                NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(tLObject.getObjectSize());
                tLObject.serializeToStream(nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.bindString(1, str);
                sQLitePreparedStatementExecuteFast.bindInteger(2, currentTime);
                sQLitePreparedStatementExecuteFast.bindByteBuffer(3, nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
                nativeByteBuffer.reuse();
                return;
            }
            i = ((TLRPC.TL_messages_botCallbackAnswer) tLObject).cache_time;
            NativeByteBuffer nativeByteBuffer2 = new NativeByteBuffer(tLObject.getObjectSize());
            tLObject.serializeToStream(nativeByteBuffer2);
            sQLitePreparedStatementExecuteFast.bindString(1, str);
            sQLitePreparedStatementExecuteFast.bindInteger(2, currentTime);
            sQLitePreparedStatementExecuteFast.bindByteBuffer(3, nativeByteBuffer2);
            sQLitePreparedStatementExecuteFast.step();
            sQLitePreparedStatementExecuteFast.dispose();
            nativeByteBuffer2.reuse();
            return;
        } catch (Exception e2) {
            e = e2;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            checkSQLException(e);
            if (sQLitePreparedStatement != null) {
                sQLitePreparedStatement.dispose();
                return;
            }
            return;
        } catch (Throwable th2) {
            th = th2;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            if (sQLitePreparedStatement != null) {
                sQLitePreparedStatement.dispose();
            }
            throw th;
        }
        currentTime += i;
        sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO botcache VALUES(?, ?, ?)");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$saveChannelPts$34(int i, long j) {
        try {
            SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET pts = ? WHERE did = ?");
            sQLitePreparedStatementExecuteFast.bindInteger(1, i);
            sQLitePreparedStatementExecuteFast.bindLong(2, -j);
            sQLitePreparedStatementExecuteFast.step();
            sQLitePreparedStatementExecuteFast.dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$saveChatInviter$127(long j, long j2) {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE chat_settings_v2 SET inviter = ? WHERE uid = ?");
                sQLitePreparedStatementExecuteFast.requery();
                sQLitePreparedStatementExecuteFast.bindLong(1, j);
                sQLitePreparedStatementExecuteFast.bindLong(2, j2);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLitePreparedStatementExecuteFast == null) {
                    return;
                }
            }
            sQLitePreparedStatementExecuteFast.dispose();
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$saveChatLinksCount$128(int i, long j) {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE chat_settings_v2 SET links = ? WHERE uid = ?");
                sQLitePreparedStatementExecuteFast.requery();
                sQLitePreparedStatementExecuteFast.bindInteger(1, i);
                sQLitePreparedStatementExecuteFast.bindLong(2, j);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLitePreparedStatementExecuteFast != null) {
                    sQLitePreparedStatementExecuteFast.dispose();
                }
            }
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$saveDialogFilter$70() {
        ArrayList<MessagesController.DialogFilter> arrayList = getMessagesController().dialogFilters;
        int size = arrayList.size();
        for (int i = 0; i < size; i++) {
            arrayList.get(i).unreadCount = arrayList.get(i).pendingUnreadCount;
        }
        this.mainUnreadCount = this.pendingMainUnreadCount;
        this.archiveUnreadCount = this.pendingArchiveUnreadCount;
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.updateInterfaces, Integer.valueOf(MessagesController.UPDATE_MASK_READ_DIALOG_MESSAGE));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$saveDialogFilter$71(MessagesController.DialogFilter dialogFilter, boolean z, boolean z2) throws Throwable {
        saveDialogFilterInternal(dialogFilter, z, z2);
        calcUnreadCounters(false);
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda196
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$saveDialogFilter$70();
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$saveDialogFiltersOrder$72(ArrayList arrayList) {
        this.dialogFilters.clear();
        this.dialogFiltersMap.clear();
        this.dialogFilters.addAll(arrayList);
        for (int i = 0; i < arrayList.size(); i++) {
            ((MessagesController.DialogFilter) arrayList.get(i)).order = i;
            this.dialogFiltersMap.put(((MessagesController.DialogFilter) arrayList.get(i)).id, (MessagesController.DialogFilter) arrayList.get(i));
        }
        saveDialogFiltersOrderInternal();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$saveSecretParams$7(int i, int i2, byte[] bArr) {
        try {
            SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE params SET lsv = ?, sg = ?, pbytes = ? WHERE id = 1");
            sQLitePreparedStatementExecuteFast.bindInteger(1, i);
            sQLitePreparedStatementExecuteFast.bindInteger(2, i2);
            NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(bArr != null ? bArr.length : 1);
            if (bArr != null) {
                nativeByteBuffer.writeBytes(bArr);
            }
            sQLitePreparedStatementExecuteFast.bindByteBuffer(3, nativeByteBuffer);
            sQLitePreparedStatementExecuteFast.step();
            sQLitePreparedStatementExecuteFast.dispose();
            nativeByteBuffer.reuse();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$saveTopics$45(long j, List list, boolean z, int i) throws Throwable {
        saveTopicsInternal(j, list, z, true, i);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Can't wrap try/catch for region: R(34:0|2|146|3|4|(1:6)(1:15)|16|(1:18)(1:19)|20|144|21|(1:23)(2:29|(1:31)(21:32|33|(3:35|(1:37)(1:38)|39)|40|(1:42)(1:43)|44|154|45|46|(7:49|(4:79|80|(4:85|(1:101)(4:87|(3:89|(1:91)|92)(1:93)|94|(1:92)(2:98|(1:100)))|102|157)|103)(10:52|53|150|54|148|55|(4:58|(2:60|161)(1:160)|67|56)|159|68|69)|70|158|103|152|47)|156|104|(1:106)|107|108|(1:110)|111|(1:113)(1:114)|115|116|(3:118|130|131)(1:162)))|24|33|(0)|40|(0)(0)|44|154|45|46|(2:152|47)|156|104|(0)|107|108|(0)|111|(0)(0)|115|116|(0)(0)|(1:(0))) */
    /* JADX WARN: Code restructure failed: missing block: B:119:0x025e, code lost:
    
        r0 = th;
     */
    /* JADX WARN: Code restructure failed: missing block: B:121:0x0261, code lost:
    
        r0 = e;
     */
    /* JADX WARN: Code restructure failed: missing block: B:13:0x002f, code lost:
    
        r7 = null;
     */
    /* JADX WARN: Code restructure failed: missing block: B:9:0x0028, code lost:
    
        r7 = null;
     */
    /* JADX WARN: Removed duplicated region for block: B:106:0x021e A[Catch: all -> 0x0175, Exception -> 0x0179, TryCatch #10 {Exception -> 0x0179, all -> 0x0175, blocks: (B:54:0x00fe, B:80:0x018b, B:83:0x0192, B:85:0x019c, B:87:0x01a9, B:89:0x01ad, B:94:0x01bc, B:96:0x01c2, B:98:0x01c8, B:100:0x01dd, B:102:0x01e5, B:104:0x0211, B:106:0x021e, B:107:0x0221, B:110:0x0229, B:111:0x0230, B:113:0x0236, B:115:0x0242), top: B:150:0x00fe }] */
    /* JADX WARN: Removed duplicated region for block: B:110:0x0229 A[Catch: all -> 0x0175, Exception -> 0x0179, TRY_ENTER, TryCatch #10 {Exception -> 0x0179, all -> 0x0175, blocks: (B:54:0x00fe, B:80:0x018b, B:83:0x0192, B:85:0x019c, B:87:0x01a9, B:89:0x01ad, B:94:0x01bc, B:96:0x01c2, B:98:0x01c8, B:100:0x01dd, B:102:0x01e5, B:104:0x0211, B:106:0x021e, B:107:0x0221, B:110:0x0229, B:111:0x0230, B:113:0x0236, B:115:0x0242), top: B:150:0x00fe }] */
    /* JADX WARN: Removed duplicated region for block: B:113:0x0236 A[Catch: all -> 0x0175, Exception -> 0x0179, TryCatch #10 {Exception -> 0x0179, all -> 0x0175, blocks: (B:54:0x00fe, B:80:0x018b, B:83:0x0192, B:85:0x019c, B:87:0x01a9, B:89:0x01ad, B:94:0x01bc, B:96:0x01c2, B:98:0x01c8, B:100:0x01dd, B:102:0x01e5, B:104:0x0211, B:106:0x021e, B:107:0x0221, B:110:0x0229, B:111:0x0230, B:113:0x0236, B:115:0x0242), top: B:150:0x00fe }] */
    /* JADX WARN: Removed duplicated region for block: B:114:0x0240  */
    /* JADX WARN: Removed duplicated region for block: B:118:0x025b  */
    /* JADX WARN: Removed duplicated region for block: B:125:0x0269  */
    /* JADX WARN: Removed duplicated region for block: B:127:0x026e  */
    /* JADX WARN: Removed duplicated region for block: B:129:0x0273  */
    /* JADX WARN: Removed duplicated region for block: B:134:0x027c  */
    /* JADX WARN: Removed duplicated region for block: B:136:0x0281  */
    /* JADX WARN: Removed duplicated region for block: B:138:0x0286  */
    /* JADX WARN: Removed duplicated region for block: B:162:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:163:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:35:0x00a0 A[Catch: all -> 0x0082, Exception -> 0x0086, TryCatch #13 {Exception -> 0x0086, all -> 0x0082, blocks: (B:21:0x0052, B:23:0x0077, B:33:0x0096, B:35:0x00a0, B:39:0x00ae, B:42:0x00b8, B:44:0x00c1, B:29:0x008a, B:31:0x008e), top: B:144:0x0052 }] */
    /* JADX WARN: Removed duplicated region for block: B:42:0x00b8 A[Catch: all -> 0x0082, Exception -> 0x0086, TryCatch #13 {Exception -> 0x0086, all -> 0x0082, blocks: (B:21:0x0052, B:23:0x0077, B:33:0x0096, B:35:0x00a0, B:39:0x00ae, B:42:0x00b8, B:44:0x00c1, B:29:0x008a, B:31:0x008e), top: B:144:0x0052 }] */
    /* JADX WARN: Removed duplicated region for block: B:43:0x00c0  */
    /* JADX WARN: Removed duplicated region for block: B:49:0x00e0 A[Catch: all -> 0x017d, Exception -> 0x0181, TryCatch #9 {Exception -> 0x0181, all -> 0x017d, blocks: (B:47:0x00da, B:49:0x00e0, B:52:0x00ed), top: B:152:0x00da }] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$searchSavedByTag$98(String str, long j, TLRPC.Reaction reaction, int i, int i2, boolean z, final Utilities.Callback4 callback4) throws Throwable {
        SQLiteCursor sQLiteCursorQuery;
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLiteCursor sQLiteCursor;
        SQLiteCursor sQLiteCursor2;
        long clientUserId;
        String str2;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        final ArrayList<TLRPC.User> arrayList;
        final ArrayList<TLRPC.Chat> arrayList2;
        ArrayList arrayList3;
        ArrayList<Long> arrayList4;
        ArrayList arrayList5;
        ArrayList<TLRPC.Document> arrayList6;
        int i3;
        long jHashCode;
        SQLiteCursor sQLiteCursor3;
        ArrayList<TLRPC.Document> arrayList7;
        SQLiteCursor sQLiteCursor4;
        ArrayList<TLRPC.Document> arrayList8;
        TLRPC.Message messageTLdeserialize;
        int i4;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        try {
            clientUserId = getUserConfig().getClientUserId();
            SQLiteDatabase sQLiteDatabase = this.database;
            StringBuilder sb = new StringBuilder();
            sb.append("SELECT m.data, m.replydata, m.group_id FROM messages_v2 m INNER JOIN tag_message_id t ON m.mid = t.mid WHERE m.uid = ? AND t.tag = ?");
            str2 = "";
            sb.append(!TextUtils.isEmpty(str) ? " AND t.text LIKE '%' || ? || '%'" : "");
            sb.append(j != 0 ? " AND topic_id = ? " : "");
            sb.append(" ORDER BY m.mid DESC LIMIT ? OFFSET ?");
            sQLitePreparedStatementExecuteFast = sQLiteDatabase.executeFast(sb.toString());
            try {
                arrayList = new ArrayList<>();
                arrayList2 = new ArrayList<>();
                arrayList3 = new ArrayList();
                arrayList4 = new ArrayList<>();
                arrayList5 = new ArrayList();
                arrayList6 = new ArrayList<>();
                sQLitePreparedStatementExecuteFast.bindLong(1, clientUserId);
            } catch (Exception e) {
                e = e;
                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                sQLiteCursorQuery = null;
                sQLiteCursor = null;
                try {
                    FileLog.e(e);
                    if (sQLitePreparedStatement != null) {
                        sQLitePreparedStatement.dispose();
                    }
                    if (sQLiteCursorQuery != null) {
                        sQLiteCursorQuery.dispose();
                    }
                    if (sQLiteCursor == null) {
                        sQLiteCursor2 = sQLiteCursor;
                        sQLiteCursor2.dispose();
                        return;
                    }
                    return;
                } catch (Throwable th) {
                    th = th;
                    if (sQLitePreparedStatement != null) {
                        sQLitePreparedStatement.dispose();
                    }
                    if (sQLiteCursorQuery != null) {
                        sQLiteCursorQuery.dispose();
                    }
                    if (sQLiteCursor != null) {
                        sQLiteCursor.dispose();
                    }
                    throw th;
                }
            } catch (Throwable th2) {
                th = th2;
                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                sQLiteCursorQuery = null;
                sQLiteCursor = null;
                if (sQLitePreparedStatement != null) {
                }
                if (sQLiteCursorQuery != null) {
                }
                if (sQLiteCursor != null) {
                }
                throw th;
            }
        } catch (Exception e2) {
            e = e2;
            sQLiteCursorQuery = null;
        } catch (Throwable th3) {
            th = th3;
            sQLiteCursorQuery = null;
        }
        if (reaction instanceof TLRPC.TL_reactionEmoji) {
            jHashCode = ((TLRPC.TL_reactionEmoji) reaction).emoticon.hashCode();
        } else {
            if (!(reaction instanceof TLRPC.TL_reactionCustomEmoji)) {
                i3 = 2;
                jHashCode = 0;
                sQLitePreparedStatementExecuteFast.bindLong(i3, jHashCode);
                int i5 = 3;
                if (!TextUtils.isEmpty(str)) {
                    String translitString = LocaleController.getInstance().getTranslitString(str);
                    if (translitString != null) {
                        str2 = translitString;
                    }
                    sQLitePreparedStatementExecuteFast.bindString(3, str2);
                    i5 = 4;
                }
                if (j == 0) {
                    sQLitePreparedStatementExecuteFast.bindLong(i5, j);
                    i5++;
                }
                sQLitePreparedStatementExecuteFast.bindInteger(i5, i);
                sQLitePreparedStatementExecuteFast.bindInteger(i5 + 1, i2);
                sQLiteCursorQuery = sQLitePreparedStatementExecuteFast.query(new Object[0]);
                final ArrayList arrayList9 = new ArrayList();
                SQLiteCursor sQLiteCursor5 = null;
                while (sQLiteCursorQuery.next()) {
                    try {
                        long jLongValue = sQLiteCursorQuery.longValue(2);
                        if (jLongValue == 0 || !z) {
                            sQLiteCursor4 = sQLiteCursor5;
                            arrayList8 = arrayList6;
                            NativeByteBuffer nativeByteBufferByteBufferValue2 = sQLiteCursorQuery.byteBufferValue(0);
                            if (nativeByteBufferByteBufferValue2 != null && (messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue2, nativeByteBufferByteBufferValue2.readInt32(false), false)) != null) {
                                messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue2, clientUserId);
                                nativeByteBufferByteBufferValue2.reuse();
                                addUsersAndChatsFromMessage(messageTLdeserialize, arrayList4, arrayList5, arrayList3);
                                TLRPC.MessageReplyHeader messageReplyHeader = messageTLdeserialize.reply_to;
                                if (messageReplyHeader != null) {
                                    if (messageReplyHeader.reply_to_msg_id == 0) {
                                        long j2 = messageReplyHeader.reply_to_random_id;
                                        i4 = 1;
                                        if (j2 != 0) {
                                        }
                                    } else {
                                        i4 = 1;
                                    }
                                    if (!sQLiteCursorQuery.isNull(i4) && (nativeByteBufferByteBufferValue = sQLiteCursorQuery.byteBufferValue(i4)) != null) {
                                        TLRPC.Message messageTLdeserialize2 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                                        messageTLdeserialize.replyMessage = messageTLdeserialize2;
                                        messageTLdeserialize2.readAttachPath(nativeByteBufferByteBufferValue, clientUserId);
                                        nativeByteBufferByteBufferValue.reuse();
                                        TLRPC.Message message = messageTLdeserialize.replyMessage;
                                        if (message != null) {
                                            addUsersAndChatsFromMessage(message, arrayList4, arrayList5, arrayList3);
                                        }
                                    }
                                }
                                arrayList9.add(new MessageObject(this.currentAccount, messageTLdeserialize, null, null, null, null, null, true, true, 0L, false, false, true));
                            }
                            arrayList6 = arrayList8;
                            sQLiteCursor5 = sQLiteCursor4;
                        } else {
                            SQLiteDatabase sQLiteDatabase2 = this.database;
                            Long lValueOf = Long.valueOf(clientUserId);
                            Long lValueOf2 = Long.valueOf(jLongValue);
                            sQLiteCursor3 = sQLiteCursor5;
                            arrayList8 = arrayList6;
                            try {
                                SQLiteCursor sQLiteCursorQueryFinalized = sQLiteDatabase2.queryFinalized("SELECT data, replydata, group_id FROM messages_v2 WHERE uid = ? AND group_id = ? ORDER BY mid DESC", lValueOf, lValueOf2);
                                try {
                                    ArrayList arrayList10 = new ArrayList();
                                    while (sQLiteCursorQueryFinalized.next()) {
                                        NativeByteBuffer nativeByteBufferByteBufferValue3 = sQLiteCursorQueryFinalized.byteBufferValue(0);
                                        TLRPC.Message messageTLdeserialize3 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue3, nativeByteBufferByteBufferValue3.readInt32(false), false);
                                        messageTLdeserialize3.readAttachPath(nativeByteBufferByteBufferValue3, clientUserId);
                                        nativeByteBufferByteBufferValue3.reuse();
                                        addUsersAndChatsFromMessage(messageTLdeserialize3, arrayList4, arrayList5, arrayList3);
                                        MessageObject messageObject = new MessageObject(this.currentAccount, messageTLdeserialize3, null, null, null, null, null, true, true, 0L, false, false, true);
                                        if (messageTLdeserialize3.reactions != null) {
                                            messageObject.isPrimaryGroupMessage = true;
                                        }
                                        arrayList10.add(messageObject);
                                    }
                                    sQLiteCursorQueryFinalized.dispose();
                                    arrayList9.addAll(arrayList10);
                                    sQLiteCursor4 = sQLiteCursorQueryFinalized;
                                } catch (Exception e3) {
                                    e = e3;
                                    sQLiteCursor = sQLiteCursorQueryFinalized;
                                    sQLitePreparedStatement = null;
                                    FileLog.e(e);
                                    if (sQLitePreparedStatement != null) {
                                    }
                                    if (sQLiteCursorQuery != null) {
                                    }
                                    if (sQLiteCursor == null) {
                                    }
                                } catch (Throwable th4) {
                                    th = th4;
                                    sQLiteCursor = sQLiteCursorQueryFinalized;
                                    sQLitePreparedStatement = null;
                                    if (sQLitePreparedStatement != null) {
                                    }
                                    if (sQLiteCursorQuery != null) {
                                    }
                                    if (sQLiteCursor != null) {
                                    }
                                    throw th;
                                }
                            } catch (Exception e4) {
                                e = e4;
                                sQLiteCursor = sQLiteCursor3;
                                sQLitePreparedStatement = null;
                                FileLog.e(e);
                                if (sQLitePreparedStatement != null) {
                                }
                                if (sQLiteCursorQuery != null) {
                                }
                                if (sQLiteCursor == null) {
                                }
                            } catch (Throwable th5) {
                                th = th5;
                                sQLiteCursor = sQLiteCursor3;
                                sQLitePreparedStatement = null;
                                if (sQLitePreparedStatement != null) {
                                }
                                if (sQLiteCursorQuery != null) {
                                }
                                if (sQLiteCursor != null) {
                                }
                                throw th;
                            }
                        }
                        arrayList6 = arrayList8;
                        sQLiteCursor5 = sQLiteCursor4;
                    } catch (Exception e5) {
                        e = e5;
                        sQLiteCursor3 = sQLiteCursor5;
                    } catch (Throwable th6) {
                        th = th6;
                        sQLiteCursor3 = sQLiteCursor5;
                    }
                }
                sQLiteCursor3 = sQLiteCursor5;
                ArrayList<TLRPC.Document> arrayList11 = arrayList6;
                sQLiteCursorQuery.dispose();
                if (!arrayList4.isEmpty()) {
                    getUsersInternal(arrayList4, arrayList);
                }
                if (!arrayList5.isEmpty()) {
                    getChatsInternal(TextUtils.join(",", arrayList5), arrayList2);
                }
                if (arrayList3.isEmpty()) {
                    arrayList7 = arrayList11;
                    getAnimatedEmoji(TextUtils.join(",", arrayList3), arrayList7);
                } else {
                    arrayList7 = arrayList11;
                }
                final ArrayList<TLRPC.Document> arrayList12 = arrayList7;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda96
                    @Override // java.lang.Runnable
                    public final void run() {
                        callback4.run(arrayList9, arrayList, arrayList2, arrayList12);
                    }
                });
                sQLiteCursorQuery.dispose();
                if (sQLiteCursor3 == null) {
                    sQLiteCursor2 = sQLiteCursor3;
                    sQLiteCursor2.dispose();
                    return;
                }
                return;
            }
            jHashCode = ((TLRPC.TL_reactionCustomEmoji) reaction).document_id;
        }
        i3 = 2;
        sQLitePreparedStatementExecuteFast.bindLong(i3, jHashCode);
        int i52 = 3;
        if (!TextUtils.isEmpty(str)) {
        }
        if (j == 0) {
        }
        sQLitePreparedStatementExecuteFast.bindInteger(i52, i);
        sQLitePreparedStatementExecuteFast.bindInteger(i52 + 1, i2);
        sQLiteCursorQuery = sQLitePreparedStatementExecuteFast.query(new Object[0]);
        final ArrayList arrayList92 = new ArrayList();
        SQLiteCursor sQLiteCursor52 = null;
        while (sQLiteCursorQuery.next()) {
        }
        sQLiteCursor3 = sQLiteCursor52;
        ArrayList<TLRPC.Document> arrayList112 = arrayList6;
        sQLiteCursorQuery.dispose();
        if (!arrayList4.isEmpty()) {
        }
        if (!arrayList5.isEmpty()) {
        }
        if (arrayList3.isEmpty()) {
        }
        final ArrayList arrayList122 = arrayList7;
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda96
            @Override // java.lang.Runnable
            public final void run() {
                callback4.run(arrayList92, arrayList, arrayList2, arrayList122);
            }
        });
        sQLiteCursorQuery.dispose();
        if (sQLiteCursor3 == null) {
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$setDialogFlags$37(long j, long j2) {
        try {
            SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT flags FROM dialog_settings WHERE did = " + j, new Object[0]);
            int iIntValue = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : 0;
            sQLiteCursorQueryFinalized.dispose();
            if (j2 == iIntValue) {
                return;
            }
            this.database.executeFast(String.format(Locale.US, "REPLACE INTO dialog_settings VALUES(%d, %d)", Long.valueOf(j), Long.valueOf(j2))).stepThis().dispose();
            resetAllUnreadCounters(true);
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$setDialogPinned$234(int i, long j) {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET pinned = ? WHERE did = ?");
                sQLitePreparedStatementExecuteFast.bindInteger(1, i);
                sQLitePreparedStatementExecuteFast.bindLong(2, j);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLitePreparedStatementExecuteFast != null) {
                    sQLitePreparedStatementExecuteFast.dispose();
                }
            }
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$setDialogTtl$57(int i, long j) {
        try {
            this.database.executeFast(String.format(Locale.US, "UPDATE dialogs SET ttl_period = %d WHERE did = %d", Integer.valueOf(i), Long.valueOf(j))).stepThis().dispose();
        } catch (SQLiteException e) {
            checkSQLException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:28:0x0043 A[Catch: all -> 0x003b, Exception -> 0x003d, TryCatch #1 {Exception -> 0x003d, blocks: (B:20:0x0037, B:28:0x0043, B:30:0x0048, B:29:0x0046, B:33:0x0066, B:34:0x0069), top: B:44:0x0002, outer: #4 }] */
    /* JADX WARN: Removed duplicated region for block: B:29:0x0046 A[Catch: all -> 0x003b, Exception -> 0x003d, TryCatch #1 {Exception -> 0x003d, blocks: (B:20:0x0037, B:28:0x0043, B:30:0x0048, B:29:0x0046, B:33:0x0066, B:34:0x0069), top: B:44:0x0002, outer: #4 }] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$setDialogUnread$231(long j, boolean z) {
        SQLiteCursor sQLiteCursorQueryFinalized;
        int iIntValue;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        SQLiteCursor sQLiteCursor = null;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
        } catch (Throwable th) {
            th = th;
        }
        try {
            try {
                try {
                    sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT flags FROM dialogs WHERE did = " + j, new Object[0]);
                } catch (Exception e) {
                    checkSQLException(e);
                    if (0 == 0) {
                        return;
                    }
                }
                try {
                } catch (Exception e2) {
                    e = e2;
                    checkSQLException(e);
                    if (sQLiteCursorQueryFinalized == null) {
                        iIntValue = 0;
                        if (z) {
                        }
                        sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET flags = ? WHERE did = ?");
                        sQLitePreparedStatementExecuteFast.bindInteger(1, i);
                        sQLitePreparedStatementExecuteFast.bindLong(2, j);
                        sQLitePreparedStatementExecuteFast.step();
                        sQLitePreparedStatementExecuteFast.dispose();
                        resetAllUnreadCounters(false);
                        sQLitePreparedStatementExecuteFast.dispose();
                    }
                    sQLiteCursorQueryFinalized.dispose();
                    if (z) {
                    }
                    sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET flags = ? WHERE did = ?");
                    sQLitePreparedStatementExecuteFast.bindInteger(1, i);
                    sQLitePreparedStatementExecuteFast.bindLong(2, j);
                    sQLitePreparedStatementExecuteFast.step();
                    sQLitePreparedStatementExecuteFast.dispose();
                    resetAllUnreadCounters(false);
                    sQLitePreparedStatementExecuteFast.dispose();
                }
            } catch (Throwable th2) {
                if (0 != 0) {
                    sQLitePreparedStatement.dispose();
                }
                throw th2;
            }
        } catch (Exception e3) {
            e = e3;
            sQLiteCursorQueryFinalized = null;
        } catch (Throwable th3) {
            th = th3;
            if (0 != 0) {
                sQLiteCursor.dispose();
            }
            throw th;
        }
        iIntValue = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : 0;
        sQLiteCursorQueryFinalized.dispose();
        int i = z ? iIntValue | 1 : iIntValue & (-2);
        sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET flags = ? WHERE did = ?");
        sQLitePreparedStatementExecuteFast.bindInteger(1, i);
        sQLitePreparedStatementExecuteFast.bindLong(2, j);
        sQLitePreparedStatementExecuteFast.step();
        sQLitePreparedStatementExecuteFast.dispose();
        resetAllUnreadCounters(false);
        sQLitePreparedStatementExecuteFast.dispose();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:24:0x003e A[Catch: all -> 0x0038, Exception -> 0x003a, TryCatch #1 {Exception -> 0x003a, blocks: (B:18:0x0034, B:24:0x003e, B:26:0x0043, B:25:0x0041, B:29:0x005f, B:30:0x0062), top: B:40:0x0002, outer: #3 }] */
    /* JADX WARN: Removed duplicated region for block: B:25:0x0041 A[Catch: all -> 0x0038, Exception -> 0x003a, TryCatch #1 {Exception -> 0x003a, blocks: (B:18:0x0034, B:24:0x003e, B:26:0x0043, B:25:0x0041, B:29:0x005f, B:30:0x0062), top: B:40:0x0002, outer: #3 }] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$setDialogViewThreadAsMessages$232(long j, boolean z) {
        SQLiteCursor sQLiteCursorQueryFinalized;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        int iIntValue = 0;
        try {
        } catch (Throwable th) {
            th = th;
        }
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT flags FROM dialogs WHERE did = " + j, new Object[0]);
            } catch (Exception e) {
                checkSQLException(e);
                if (0 == 0) {
                    return;
                }
            }
            try {
                if (sQLiteCursorQueryFinalized.next()) {
                    iIntValue = sQLiteCursorQueryFinalized.intValue(0);
                }
            } catch (Exception e2) {
                e = e2;
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                    sQLiteCursorQueryFinalized.dispose();
                }
                if (!z) {
                }
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET flags = ? WHERE did = ?");
                sQLitePreparedStatementExecuteFast.bindInteger(1, i);
                sQLitePreparedStatementExecuteFast.bindLong(2, j);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
                sQLitePreparedStatementExecuteFast.dispose();
            }
        } catch (Exception e3) {
            e = e3;
            sQLiteCursorQueryFinalized = null;
        } catch (Throwable th2) {
            th = th2;
            sQLiteCursorQueryFinalized = null;
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
        try {
            sQLiteCursorQueryFinalized.dispose();
            int i = !z ? iIntValue | 64 : iIntValue & (-65);
            sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET flags = ? WHERE did = ?");
            sQLitePreparedStatementExecuteFast.bindInteger(1, i);
            sQLitePreparedStatementExecuteFast.bindLong(2, j);
            sQLitePreparedStatementExecuteFast.step();
            sQLitePreparedStatementExecuteFast.dispose();
            sQLitePreparedStatementExecuteFast.dispose();
        } catch (Throwable th3) {
            if (0 != 0) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th3;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$setDialogsFolderId$227(ArrayList arrayList, ArrayList arrayList2, int i, long j) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        boolean z;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                this.database.beginTransaction();
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET folder_id = ?, pinned = ? WHERE did = ?");
            } catch (Throwable th) {
                th = th;
            }
        } catch (Exception e) {
            e = e;
        }
        try {
            if (arrayList != null) {
                int size = arrayList.size();
                z = false;
                for (int i2 = 0; i2 < size; i2++) {
                    TLRPC.TL_folderPeer tL_folderPeer = (TLRPC.TL_folderPeer) arrayList.get(i2);
                    long peerDialogId = DialogObject.getPeerDialogId(tL_folderPeer.peer);
                    sQLitePreparedStatementExecuteFast.requery();
                    sQLitePreparedStatementExecuteFast.bindInteger(1, tL_folderPeer.folder_id);
                    if (tL_folderPeer.folder_id == 1) {
                        z = true;
                    }
                    sQLitePreparedStatementExecuteFast.bindInteger(2, 0);
                    sQLitePreparedStatementExecuteFast.bindLong(3, peerDialogId);
                    sQLitePreparedStatementExecuteFast.step();
                    this.unknownDialogsIds.remove(peerDialogId);
                }
            } else if (arrayList2 != null) {
                int size2 = arrayList2.size();
                z = false;
                for (int i3 = 0; i3 < size2; i3++) {
                    TLRPC.TL_inputFolderPeer tL_inputFolderPeer = (TLRPC.TL_inputFolderPeer) arrayList2.get(i3);
                    long peerDialogId2 = DialogObject.getPeerDialogId(tL_inputFolderPeer.peer);
                    sQLitePreparedStatementExecuteFast.requery();
                    sQLitePreparedStatementExecuteFast.bindInteger(1, tL_inputFolderPeer.folder_id);
                    if (tL_inputFolderPeer.folder_id == 1) {
                        z = true;
                    }
                    sQLitePreparedStatementExecuteFast.bindInteger(2, 0);
                    sQLitePreparedStatementExecuteFast.bindLong(3, peerDialogId2);
                    sQLitePreparedStatementExecuteFast.step();
                    this.unknownDialogsIds.remove(peerDialogId2);
                }
            } else {
                sQLitePreparedStatementExecuteFast.requery();
                sQLitePreparedStatementExecuteFast.bindInteger(1, i);
                boolean z2 = i == 1;
                sQLitePreparedStatementExecuteFast.bindInteger(2, 0);
                sQLitePreparedStatementExecuteFast.bindLong(3, j);
                sQLitePreparedStatementExecuteFast.step();
                z = z2;
            }
            sQLitePreparedStatementExecuteFast.dispose();
            this.database.commitTransaction();
            if (!z) {
                lambda$checkIfFolderEmpty$229(1);
            }
            resetAllUnreadCounters(false);
            SQLiteDatabase sQLiteDatabase = this.database;
            if (sQLiteDatabase != null) {
                sQLiteDatabase.commitTransaction();
            }
        } catch (Exception e2) {
            e = e2;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            checkSQLException(e);
            SQLiteDatabase sQLiteDatabase2 = this.database;
            if (sQLiteDatabase2 != null) {
                sQLiteDatabase2.commitTransaction();
            }
            if (sQLitePreparedStatement != null) {
                sQLitePreparedStatement.dispose();
            }
        } catch (Throwable th2) {
            th = th2;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            SQLiteDatabase sQLiteDatabase3 = this.database;
            if (sQLiteDatabase3 != null) {
                sQLiteDatabase3.commitTransaction();
            }
            if (sQLitePreparedStatement != null) {
                sQLitePreparedStatement.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$setDialogsPinned$235(ArrayList arrayList, ArrayList arrayList2) {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET pinned = ? WHERE did = ?");
                int size = arrayList.size();
                for (int i = 0; i < size; i++) {
                    sQLitePreparedStatementExecuteFast.requery();
                    sQLitePreparedStatementExecuteFast.bindInteger(1, ((Integer) arrayList2.get(i)).intValue());
                    sQLitePreparedStatementExecuteFast.bindLong(2, ((Long) arrayList.get(i)).longValue());
                    sQLitePreparedStatementExecuteFast.step();
                }
                sQLitePreparedStatementExecuteFast.dispose();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLitePreparedStatementExecuteFast != null) {
                    sQLitePreparedStatementExecuteFast.dispose();
                }
            }
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$setMessageSeq$197(int i, int i2, int i3) {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO messages_seq VALUES(?, ?, ?)");
                sQLitePreparedStatementExecuteFast.requery();
                sQLitePreparedStatementExecuteFast.bindInteger(1, i);
                sQLitePreparedStatementExecuteFast.bindInteger(2, i2);
                sQLitePreparedStatementExecuteFast.bindInteger(3, i3);
                sQLitePreparedStatementExecuteFast.step();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLitePreparedStatementExecuteFast == null) {
                    return;
                }
            }
            sQLitePreparedStatementExecuteFast.dispose();
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:100:0x01b6  */
    /* JADX WARN: Removed duplicated region for block: B:113:0x00e6 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:127:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:33:0x00b9  */
    /* JADX WARN: Removed duplicated region for block: B:35:0x00c0  */
    /* JADX WARN: Removed duplicated region for block: B:36:0x00c8 A[PHI: r9 r14
      0x00c8: PHI (r9v4 org.telegram.SQLite.SQLiteCursor) = (r9v2 org.telegram.SQLite.SQLiteCursor), (r9v8 org.telegram.SQLite.SQLiteCursor) binds: [B:43:0x00da, B:34:0x00be] A[DONT_GENERATE, DONT_INLINE]
      0x00c8: PHI (r14v3 int) = (r14v2 int), (r14v7 int) binds: [B:43:0x00da, B:34:0x00be] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:41:0x00d3  */
    /* JADX WARN: Removed duplicated region for block: B:43:0x00da  */
    /* JADX WARN: Removed duplicated region for block: B:44:0x00de  */
    /* JADX WARN: Removed duplicated region for block: B:75:0x0181  */
    /* JADX WARN: Removed duplicated region for block: B:77:0x0185  */
    /* JADX WARN: Removed duplicated region for block: B:94:0x01ab A[ORIG_RETURN, RETURN] */
    /* JADX WARN: Removed duplicated region for block: B:98:0x01b1  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$toggleTodo$95(long j, int i, long j2, int i2, boolean z, int i3) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        int i4;
        SQLiteCursor sQLiteCursorQueryFinalized;
        SQLitePreparedStatement sQLitePreparedStatement;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        SQLiteCursor sQLiteCursor;
        NativeByteBuffer nativeByteBufferByteBufferValue2;
        SQLiteCursor sQLiteCursor2 = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT data FROM messages_v2 WHERE uid = " + j + " AND mid = " + i, new Object[0]);
                try {
                } catch (Exception e) {
                    e = e;
                    i4 = 1;
                    sQLitePreparedStatementExecuteFast = null;
                } catch (Throwable th) {
                    th = th;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                }
            } catch (Exception e2) {
                e = e2;
                i4 = 1;
            }
            if (!sQLiteCursorQueryFinalized.next() || (nativeByteBufferByteBufferValue2 = sQLiteCursorQueryFinalized.byteBufferValue(0)) == null) {
                i4 = 1;
                sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized;
                if (sQLiteCursorQueryFinalized == null) {
                    sQLiteCursorQueryFinalized.dispose();
                    sQLiteCursorQueryFinalized = null;
                    sQLitePreparedStatement = null;
                } else {
                    sQLitePreparedStatement = null;
                }
            } else {
                TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue2, nativeByteBufferByteBufferValue2.readInt32(false), false);
                messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue2, j2);
                nativeByteBufferByteBufferValue2.reuse();
                TLRPC.MessageMedia messageMedia = messageTLdeserialize.media;
                if (messageMedia instanceof TLRPC.TL_messageMediaToDo) {
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    i4 = 1;
                    try {
                        MessageObject.toggleTodo((TLRPC.TL_messageMediaToDo) messageMedia, i2, z, j2, i3);
                        sQLiteCursor.dispose();
                        try {
                            sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE messages_v2 SET data = ? WHERE mid = ? AND uid = ?");
                        } catch (Exception e3) {
                            e = e3;
                            sQLitePreparedStatementExecuteFast = null;
                            sQLiteCursorQueryFinalized = null;
                            try {
                                FileLog.e(e);
                                if (sQLiteCursorQueryFinalized != null) {
                                    sQLiteCursorQueryFinalized.dispose();
                                    sQLiteCursorQueryFinalized = null;
                                }
                                if (sQLitePreparedStatementExecuteFast == null) {
                                    sQLitePreparedStatementExecuteFast.dispose();
                                    sQLitePreparedStatement = null;
                                    if (isForumOrMonoForum(j)) {
                                    }
                                } else {
                                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                    if (isForumOrMonoForum(j)) {
                                    }
                                }
                            } catch (Throwable th2) {
                                th = th2;
                                sQLiteCursor2 = sQLiteCursorQueryFinalized;
                                if (sQLiteCursor2 != null) {
                                    sQLiteCursor2.dispose();
                                }
                                if (sQLitePreparedStatementExecuteFast != null) {
                                    sQLitePreparedStatementExecuteFast.dispose();
                                }
                                throw th;
                            }
                        }
                    } catch (Exception e4) {
                        e = e4;
                        sQLitePreparedStatementExecuteFast = null;
                        sQLiteCursorQueryFinalized = sQLiteCursor;
                    } catch (Throwable th3) {
                        th = th3;
                        sQLitePreparedStatementExecuteFast = null;
                        sQLiteCursor2 = sQLiteCursor;
                        if (sQLiteCursor2 != null) {
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                        }
                        throw th;
                    }
                    try {
                        sQLitePreparedStatementExecuteFast.requery();
                        NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(messageTLdeserialize.getObjectSize());
                        messageTLdeserialize.serializeToStream(nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast.bindInteger(2, i);
                        sQLitePreparedStatementExecuteFast.bindLong(3, j);
                        sQLitePreparedStatementExecuteFast.step();
                        sQLitePreparedStatementExecuteFast.dispose();
                        nativeByteBuffer.reuse();
                        sQLiteCursorQueryFinalized = null;
                    } catch (Exception e5) {
                        e = e5;
                        sQLiteCursorQueryFinalized = null;
                        FileLog.e(e);
                        if (sQLiteCursorQueryFinalized != null) {
                        }
                        if (sQLitePreparedStatementExecuteFast == null) {
                        }
                    } catch (Throwable th4) {
                        th = th4;
                        if (sQLiteCursor2 != null) {
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                        }
                        throw th;
                    }
                }
                if (sQLiteCursorQueryFinalized == null) {
                }
            }
            if (isForumOrMonoForum(j)) {
                try {
                    SQLiteCursor sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT data FROM messages_topics WHERE uid = " + j + " AND mid = " + i, new Object[0]);
                    try {
                        if (!sQLiteCursorQueryFinalized2.next() || (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized2.byteBufferValue(0)) == null) {
                            sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                            if (sQLiteCursor2 != null) {
                                sQLiteCursor2.dispose();
                            }
                            if (sQLitePreparedStatement == null) {
                                return;
                            }
                        } else {
                            TLRPC.Message messageTLdeserialize2 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            messageTLdeserialize2.readAttachPath(nativeByteBufferByteBufferValue, j2);
                            nativeByteBufferByteBufferValue.reuse();
                            TLRPC.MessageMedia messageMedia2 = messageTLdeserialize2.media;
                            if (messageMedia2 instanceof TLRPC.TL_messageMediaToDo) {
                                MessageObject.toggleTodo((TLRPC.TL_messageMediaToDo) messageMedia2, i2, z, j2, i3);
                                sQLiteCursorQueryFinalized2.dispose();
                                try {
                                    try {
                                        SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE messages_topics SET data = ? WHERE mid = ? AND uid = ?");
                                        try {
                                            sQLitePreparedStatementExecuteFast2.requery();
                                            NativeByteBuffer nativeByteBuffer2 = new NativeByteBuffer(messageTLdeserialize2.getObjectSize());
                                            messageTLdeserialize2.serializeToStream(nativeByteBuffer2);
                                            sQLitePreparedStatementExecuteFast2.bindByteBuffer(i4, nativeByteBuffer2);
                                            sQLitePreparedStatementExecuteFast2.bindInteger(2, i);
                                            sQLitePreparedStatementExecuteFast2.bindLong(3, j);
                                            sQLitePreparedStatementExecuteFast2.step();
                                            sQLitePreparedStatementExecuteFast2.dispose();
                                            try {
                                                nativeByteBuffer2.reuse();
                                                sQLitePreparedStatement = null;
                                            } catch (Exception e6) {
                                                e = e6;
                                                sQLitePreparedStatement = null;
                                                FileLog.e(e);
                                                if (sQLiteCursor2 != null) {
                                                    sQLiteCursor2.dispose();
                                                }
                                                if (sQLitePreparedStatement == null) {
                                                    return;
                                                }
                                                sQLitePreparedStatement.dispose();
                                            } catch (Throwable th5) {
                                                th = th5;
                                                sQLitePreparedStatement = null;
                                                if (sQLiteCursor2 != null) {
                                                    sQLiteCursor2.dispose();
                                                }
                                                if (sQLitePreparedStatement != null) {
                                                    sQLitePreparedStatement.dispose();
                                                }
                                                throw th;
                                            }
                                        } catch (Exception e7) {
                                            e = e7;
                                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                                        } catch (Throwable th6) {
                                            th = th6;
                                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                                        }
                                    } catch (Exception e8) {
                                        e = e8;
                                    }
                                } catch (Throwable th7) {
                                    th = th7;
                                }
                            }
                            if (sQLiteCursor2 != null) {
                            }
                            if (sQLitePreparedStatement == null) {
                            }
                        }
                    } catch (Exception e9) {
                        e = e9;
                        sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                    } catch (Throwable th8) {
                        th = th8;
                        sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                    }
                } catch (Exception e10) {
                    e = e10;
                    sQLiteCursor2 = sQLiteCursorQueryFinalized;
                } catch (Throwable th9) {
                    th = th9;
                    sQLiteCursor2 = sQLiteCursorQueryFinalized;
                }
                sQLitePreparedStatement.dispose();
            }
        } catch (Throwable th10) {
            th = th10;
            sQLitePreparedStatementExecuteFast = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:45:0x00a1  */
    /* JADX WARN: Removed duplicated region for block: B:47:0x00a6  */
    /* JADX WARN: Removed duplicated region for block: B:50:0x00ac  */
    /* JADX WARN: Removed duplicated region for block: B:52:0x00b1  */
    /* JADX WARN: Removed duplicated region for block: B:75:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$unpinAllDialogsExceptNew$230(ArrayList arrayList, int i) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        ArrayList arrayList2;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                arrayList2 = new ArrayList();
            } catch (Throwable th) {
                th = th;
                sQLitePreparedStatement = arrayList;
            }
            try {
                SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT did, folder_id FROM dialogs WHERE pinned > 0 AND did NOT IN (%s)", TextUtils.join(",", arrayList)), new Object[0]);
                while (sQLiteCursorQueryFinalized.next()) {
                    try {
                        long jLongValue = sQLiteCursorQueryFinalized.longValue(0);
                        if (sQLiteCursorQueryFinalized.intValue(1) == i && !DialogObject.isEncryptedDialog(jLongValue) && !DialogObject.isFolderDialogId(jLongValue)) {
                            arrayList2.add(Long.valueOf(sQLiteCursorQueryFinalized.longValue(0)));
                        }
                    } catch (Exception e) {
                        e = e;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        sQLitePreparedStatementExecuteFast = null;
                    } catch (Throwable th2) {
                        th = th2;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        sQLitePreparedStatement = 0;
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        if (sQLitePreparedStatement != 0) {
                            sQLitePreparedStatement.dispose();
                        }
                        throw th;
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
                if (arrayList2.isEmpty()) {
                    return;
                }
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET pinned = ? WHERE did = ?");
                for (int i2 = 0; i2 < arrayList2.size(); i2++) {
                    try {
                        long jLongValue2 = ((Long) arrayList2.get(i2)).longValue();
                        sQLitePreparedStatementExecuteFast.requery();
                        sQLitePreparedStatementExecuteFast.bindInteger(1, 0);
                        sQLitePreparedStatementExecuteFast.bindLong(2, jLongValue2);
                        sQLitePreparedStatementExecuteFast.step();
                    } catch (Exception e2) {
                        e = e2;
                        checkSQLException(e);
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        if (sQLitePreparedStatementExecuteFast == null) {
                            sQLitePreparedStatementExecuteFast.dispose();
                            return;
                        }
                        return;
                    }
                }
                sQLitePreparedStatementExecuteFast.dispose();
            } catch (Exception e3) {
                e = e3;
                sQLitePreparedStatementExecuteFast = null;
                checkSQLException(e);
                if (sQLiteCursor != null) {
                }
                if (sQLitePreparedStatementExecuteFast == null) {
                }
            } catch (Throwable th3) {
                th = th3;
                sQLitePreparedStatement = 0;
                if (sQLiteCursor != null) {
                }
                if (sQLitePreparedStatement != 0) {
                }
                throw th;
            }
        } catch (Exception e4) {
            e = e4;
        } catch (Throwable th4) {
            th = th4;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateChannelUsers$120(long j, ArrayList arrayList) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        long j2 = -j;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                this.database.executeFast("DELETE FROM channel_users_v2 WHERE did = " + j2).stepThis().dispose();
                this.database.beginTransaction();
                sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO channel_users_v2 VALUES(?, ?, ?, ?)");
            } catch (Throwable th) {
                th = th;
            }
        } catch (Exception e) {
            e = e;
        }
        try {
            int iCurrentTimeMillis = (int) (System.currentTimeMillis() / 1000);
            for (int i = 0; i < arrayList.size(); i++) {
                TLRPC.ChannelParticipant channelParticipant = (TLRPC.ChannelParticipant) arrayList.get(i);
                sQLitePreparedStatementExecuteFast.requery();
                sQLitePreparedStatementExecuteFast.bindLong(1, j2);
                sQLitePreparedStatementExecuteFast.bindLong(2, MessageObject.getPeerId(channelParticipant.peer));
                sQLitePreparedStatementExecuteFast.bindInteger(3, iCurrentTimeMillis);
                NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(channelParticipant.getObjectSize());
                channelParticipant.serializeToStream(nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.bindByteBuffer(4, nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.step();
                nativeByteBuffer.reuse();
                iCurrentTimeMillis--;
            }
            sQLitePreparedStatementExecuteFast.dispose();
            this.database.commitTransaction();
            loadChatInfo(j, true, null, false, true);
            SQLiteDatabase sQLiteDatabase = this.database;
            if (sQLiteDatabase != null) {
                sQLiteDatabase.commitTransaction();
            }
        } catch (Exception e2) {
            e = e2;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            checkSQLException(e);
            SQLiteDatabase sQLiteDatabase2 = this.database;
            if (sQLiteDatabase2 != null) {
                sQLiteDatabase2.commitTransaction();
            }
            if (sQLitePreparedStatement != null) {
                sQLitePreparedStatement.dispose();
            }
        } catch (Throwable th2) {
            th = th2;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            SQLiteDatabase sQLiteDatabase3 = this.database;
            if (sQLiteDatabase3 != null) {
                sQLiteDatabase3.commitTransaction();
            }
            if (sQLitePreparedStatement != null) {
                sQLitePreparedStatement.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:43:0x0097  */
    /* JADX WARN: Removed duplicated region for block: B:45:0x009c  */
    /* JADX WARN: Removed duplicated region for block: B:48:0x00a2  */
    /* JADX WARN: Removed duplicated region for block: B:50:0x00a7  */
    /* JADX WARN: Type inference failed for: r8v18, types: [org.telegram.SQLite.SQLitePreparedStatement] */
    /* JADX WARN: Type inference failed for: r8v6 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$updateChatDefaultBannedRights$174(long j, int i, TLRPC.TL_chatBannedRights tL_chatBannedRights) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        TLRPC.Chat chatTLdeserialize;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
            } catch (Throwable th) {
                th = th;
            }
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data FROM chats WHERE uid = %d", Long.valueOf(j)), new Object[0]);
            } catch (Exception e) {
                e = e;
                j = 0;
                checkSQLException(e);
                if (sQLiteCursor != null) {
                }
                if (j != 0) {
                }
            } catch (Throwable th2) {
                th = th2;
                j = 0;
                if (sQLiteCursor != null) {
                    sQLiteCursor.dispose();
                }
                if (j != 0) {
                    j.dispose();
                }
                throw th;
            }
        } catch (Exception e2) {
            e = e2;
        } catch (Throwable th3) {
            th = th3;
        }
        try {
            if (!sQLiteCursorQueryFinalized.next() || (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0)) == null) {
                chatTLdeserialize = null;
            } else {
                chatTLdeserialize = TLRPC.Chat.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                nativeByteBufferByteBufferValue.reuse();
            }
            sQLiteCursorQueryFinalized.dispose();
        } catch (Exception e3) {
            e = e3;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            j = 0;
        } catch (Throwable th4) {
            th = th4;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            j = 0;
            if (sQLiteCursor != null) {
            }
            if (j != 0) {
            }
            throw th;
        }
        if (chatTLdeserialize != null) {
            if (chatTLdeserialize.default_banned_rights == null || i >= chatTLdeserialize.version) {
                chatTLdeserialize.default_banned_rights = tL_chatBannedRights;
                chatTLdeserialize.flags |= 262144;
                chatTLdeserialize.version = i;
                j = this.database.executeFast("UPDATE chats SET data = ? WHERE uid = ?");
                try {
                    NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(chatTLdeserialize.getObjectSize());
                    chatTLdeserialize.serializeToStream(nativeByteBuffer);
                    j.bindByteBuffer(1, nativeByteBuffer);
                    j.bindLong(2, chatTLdeserialize.id);
                    j.step();
                    nativeByteBuffer.reuse();
                    j.dispose();
                } catch (Exception e4) {
                    e = e4;
                    checkSQLException(e);
                    if (sQLiteCursor != null) {
                        sQLiteCursor.dispose();
                    }
                    if (j != 0) {
                        j.dispose();
                    }
                }
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:107:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:77:0x0176  */
    /* JADX WARN: Removed duplicated region for block: B:79:0x017b  */
    /* JADX WARN: Removed duplicated region for block: B:85:0x0184  */
    /* JADX WARN: Removed duplicated region for block: B:87:0x0189  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$updateChatInfo$129(TLRPC.ChatFull chatFull, boolean z) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast2;
        int iIntValue;
        int iIntValue2;
        SQLiteCursor sQLiteCursor = null;
        try {
            sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT online, inviter, links FROM chat_settings_v2 WHERE uid = " + chatFull.id, new Object[0]);
        } catch (Exception e) {
            e = e;
            sQLiteCursorQueryFinalized = null;
        } catch (Throwable th) {
            th = th;
            sQLiteCursorQueryFinalized = null;
        }
        try {
            if (sQLiteCursorQueryFinalized.next()) {
                iIntValue = sQLiteCursorQueryFinalized.intValue(0);
                chatFull.inviterId = sQLiteCursorQueryFinalized.longValue(1);
                iIntValue2 = sQLiteCursorQueryFinalized.intValue(2);
            } else {
                iIntValue = -1;
                iIntValue2 = 0;
            }
            sQLiteCursorQueryFinalized.dispose();
            if (z && iIntValue == -1) {
                return;
            }
            if (iIntValue >= 0) {
                try {
                    if ((chatFull.flags & LiteMode.FLAG_ANIMATED_EMOJI_REACTIONS_NOT_PREMIUM) == 0) {
                        chatFull.online_count = iIntValue;
                    }
                } catch (Exception e2) {
                    e = e2;
                    sQLitePreparedStatementExecuteFast = null;
                    try {
                        checkSQLException(e);
                        if (sQLiteCursor != null) {
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                        }
                    } catch (Throwable th2) {
                        th = th2;
                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                        sQLitePreparedStatementExecuteFast = sQLitePreparedStatementExecuteFast2;
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                            sQLitePreparedStatementExecuteFast.dispose();
                        }
                        throw th;
                    }
                } catch (Throwable th3) {
                    th = th3;
                    sQLitePreparedStatementExecuteFast = null;
                    if (sQLiteCursor != null) {
                    }
                    if (sQLitePreparedStatementExecuteFast != null) {
                    }
                    throw th;
                }
            }
            if (iIntValue2 >= 0) {
                chatFull.invitesCount = iIntValue2;
            }
            sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO chat_settings_v2 VALUES(?, ?, ?, ?, ?, ?, ?)");
            try {
                NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(chatFull.getObjectSize());
                chatFull.serializeToStream(nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.bindLong(1, chatFull.id);
                sQLitePreparedStatementExecuteFast.bindByteBuffer(2, nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.bindInteger(3, chatFull.pinned_msg_id);
                sQLitePreparedStatementExecuteFast.bindInteger(4, chatFull.online_count);
                sQLitePreparedStatementExecuteFast.bindLong(5, chatFull.inviterId);
                sQLitePreparedStatementExecuteFast.bindInteger(6, chatFull.invitesCount);
                sQLitePreparedStatementExecuteFast.bindInteger(7, chatFull.participants_count);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
                nativeByteBuffer.reuse();
                if (chatFull instanceof TLRPC.TL_channelFull) {
                    SQLiteCursor sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT inbox_max, outbox_max FROM dialogs WHERE did = " + (-chatFull.id), new Object[0]);
                    try {
                        if (!sQLiteCursorQueryFinalized2.next() || sQLiteCursorQueryFinalized2.intValue(0) >= chatFull.read_inbox_max_id) {
                            sQLitePreparedStatementExecuteFast2 = null;
                        } else {
                            int iIntValue3 = sQLiteCursorQueryFinalized2.intValue(1);
                            sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE dialogs SET unread_count = ?, inbox_max = ?, outbox_max = ? WHERE did = ?");
                            try {
                                sQLitePreparedStatementExecuteFast2.bindInteger(1, chatFull.unread_count);
                                sQLitePreparedStatementExecuteFast2.bindInteger(2, chatFull.read_inbox_max_id);
                                sQLitePreparedStatementExecuteFast2.bindInteger(3, Math.max(iIntValue3, chatFull.read_outbox_max_id));
                                sQLitePreparedStatementExecuteFast2.bindLong(4, -chatFull.id);
                                sQLitePreparedStatementExecuteFast2.step();
                                sQLitePreparedStatementExecuteFast2.dispose();
                            } catch (Exception e3) {
                                e = e3;
                                sQLiteCursor = sQLiteCursorQueryFinalized2;
                                sQLitePreparedStatementExecuteFast = sQLitePreparedStatementExecuteFast2;
                                checkSQLException(e);
                                if (sQLiteCursor != null) {
                                }
                                if (sQLitePreparedStatementExecuteFast != null) {
                                }
                            } catch (Throwable th4) {
                                th = th4;
                                sQLiteCursor = sQLiteCursorQueryFinalized2;
                                sQLitePreparedStatementExecuteFast = sQLitePreparedStatementExecuteFast2;
                                if (sQLiteCursor != null) {
                                }
                                if (sQLitePreparedStatementExecuteFast != null) {
                                }
                                throw th;
                            }
                        }
                        sQLiteCursorQueryFinalized2.dispose();
                    } catch (Exception e4) {
                        e = e4;
                        sQLiteCursor = sQLiteCursorQueryFinalized2;
                        sQLitePreparedStatementExecuteFast = null;
                        checkSQLException(e);
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                            sQLitePreparedStatementExecuteFast.dispose();
                            return;
                        }
                        return;
                    } catch (Throwable th5) {
                        th = th5;
                        sQLiteCursor = sQLiteCursorQueryFinalized2;
                        sQLitePreparedStatementExecuteFast = null;
                        if (sQLiteCursor != null) {
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                        }
                        throw th;
                    }
                } else {
                    sQLitePreparedStatementExecuteFast2 = null;
                }
                try {
                    if ((chatFull.flags & 2048) != 0) {
                        SQLitePreparedStatement sQLitePreparedStatementExecuteFast3 = this.database.executeFast("UPDATE dialogs SET folder_id = ? WHERE did = ?");
                        sQLitePreparedStatementExecuteFast3.bindInteger(1, chatFull.folder_id);
                        sQLitePreparedStatementExecuteFast3.bindLong(2, -chatFull.id);
                        sQLitePreparedStatementExecuteFast3.step();
                        sQLitePreparedStatementExecuteFast3.dispose();
                        try {
                            this.unknownDialogsIds.remove(-chatFull.id);
                        } catch (Exception e5) {
                            e = e5;
                            sQLitePreparedStatementExecuteFast2 = null;
                            sQLitePreparedStatementExecuteFast = sQLitePreparedStatementExecuteFast2;
                            checkSQLException(e);
                            if (sQLiteCursor != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast != null) {
                            }
                        } catch (Throwable th6) {
                            th = th6;
                            sQLitePreparedStatementExecuteFast2 = null;
                            sQLitePreparedStatementExecuteFast = sQLitePreparedStatementExecuteFast2;
                            if (sQLiteCursor != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast != null) {
                            }
                            throw th;
                        }
                    }
                    sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE dialogs SET ttl_period = ? WHERE did = ?");
                    sQLitePreparedStatementExecuteFast2.bindInteger(1, chatFull.ttl_period);
                    sQLitePreparedStatementExecuteFast2.bindLong(2, -chatFull.id);
                    sQLitePreparedStatementExecuteFast2.step();
                    sQLitePreparedStatementExecuteFast2.dispose();
                } catch (Exception e6) {
                    e = e6;
                } catch (Throwable th7) {
                    th = th7;
                }
            } catch (Exception e7) {
                e = e7;
            } catch (Throwable th8) {
                th = th8;
            }
        } catch (Exception e8) {
            e = e8;
            sQLitePreparedStatementExecuteFast = null;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            checkSQLException(e);
            if (sQLiteCursor != null) {
            }
            if (sQLitePreparedStatementExecuteFast != null) {
            }
        } catch (Throwable th9) {
            th = th9;
            sQLitePreparedStatementExecuteFast = null;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            if (sQLiteCursor != null) {
            }
            if (sQLitePreparedStatementExecuteFast != null) {
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateChatInfo$134(TLRPC.ChatFull chatFull) {
        NotificationCenter notificationCenter = getNotificationCenter();
        int i = NotificationCenter.chatInfoDidLoad;
        Boolean bool = Boolean.FALSE;
        notificationCenter.lambda$postNotificationNameOnUIThread$1(i, chatFull, 0, bool, bool);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateChatInfo$135(long j, int i, long j2, long j3, int i2) throws Throwable {
        int i3;
        SQLiteCursor sQLiteCursorQueryFinalized;
        final TLRPC.ChatFull chatFullTLdeserialize;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                i3 = 0;
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT info, pinned, online, inviter FROM chat_settings_v2 WHERE uid = " + j, new Object[0]);
            } catch (Exception e) {
                e = e;
            }
        } catch (Throwable th) {
            th = th;
        }
        try {
            new ArrayList();
            if (!sQLiteCursorQueryFinalized.next() || (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0)) == null) {
                chatFullTLdeserialize = null;
            } else {
                chatFullTLdeserialize = TLRPC.ChatFull.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                nativeByteBufferByteBufferValue.reuse();
                chatFullTLdeserialize.pinned_msg_id = sQLiteCursorQueryFinalized.intValue(1);
                chatFullTLdeserialize.online_count = sQLiteCursorQueryFinalized.intValue(2);
                chatFullTLdeserialize.inviterId = sQLiteCursorQueryFinalized.longValue(3);
            }
            sQLiteCursorQueryFinalized.dispose();
            if (chatFullTLdeserialize instanceof TLRPC.TL_chatFull) {
                if (i == 1) {
                    while (true) {
                        if (i3 >= chatFullTLdeserialize.participants.participants.size()) {
                            break;
                        }
                        if (((TLRPC.ChatParticipant) chatFullTLdeserialize.participants.participants.get(i3)).user_id == j2) {
                            chatFullTLdeserialize.participants.participants.remove(i3);
                            break;
                        }
                        i3++;
                    }
                } else if (i == 0) {
                    Iterator it = chatFullTLdeserialize.participants.participants.iterator();
                    while (it.hasNext()) {
                        if (((TLRPC.ChatParticipant) it.next()).user_id == j2) {
                            return;
                        }
                    }
                    TLRPC.TL_chatParticipant tL_chatParticipant = new TLRPC.TL_chatParticipant();
                    tL_chatParticipant.user_id = j2;
                    tL_chatParticipant.inviter_id = j3;
                    tL_chatParticipant.date = getConnectionsManager().getCurrentTime();
                    chatFullTLdeserialize.participants.participants.add(tL_chatParticipant);
                } else if (i == 2) {
                    while (true) {
                        if (i3 >= chatFullTLdeserialize.participants.participants.size()) {
                            break;
                        }
                        TLRPC.ChatParticipant chatParticipant = (TLRPC.ChatParticipant) chatFullTLdeserialize.participants.participants.get(i3);
                        if (chatParticipant.user_id == j2) {
                            TLRPC.ChatParticipant tL_chatParticipantAdmin = j3 == 1 ? new TLRPC.TL_chatParticipantAdmin() : new TLRPC.TL_chatParticipant();
                            tL_chatParticipantAdmin.user_id = chatParticipant.user_id;
                            tL_chatParticipantAdmin.date = chatParticipant.date;
                            tL_chatParticipantAdmin.inviter_id = chatParticipant.inviter_id;
                            chatFullTLdeserialize.participants.participants.set(i3, tL_chatParticipantAdmin);
                        } else {
                            i3++;
                        }
                    }
                }
                chatFullTLdeserialize.participants.version = i2;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda246
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$updateChatInfo$134(chatFullTLdeserialize);
                    }
                });
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO chat_settings_v2 VALUES(?, ?, ?, ?, ?, ?, ?)");
                NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(chatFullTLdeserialize.getObjectSize());
                chatFullTLdeserialize.serializeToStream(nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.bindLong(1, j);
                sQLitePreparedStatementExecuteFast.bindByteBuffer(2, nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.bindInteger(3, chatFullTLdeserialize.pinned_msg_id);
                sQLitePreparedStatementExecuteFast.bindInteger(4, chatFullTLdeserialize.online_count);
                sQLitePreparedStatementExecuteFast.bindLong(5, chatFullTLdeserialize.inviterId);
                sQLitePreparedStatementExecuteFast.bindInteger(6, chatFullTLdeserialize.invitesCount);
                sQLitePreparedStatementExecuteFast.bindInteger(7, chatFullTLdeserialize.participants_count);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
                nativeByteBuffer.reuse();
            }
        } catch (Exception e2) {
            e = e2;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            checkSQLException(e);
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
        } catch (Throwable th2) {
            th = th2;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateChatOnlineCount$130(int i, long j) {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE chat_settings_v2 SET online = ? WHERE uid = ?");
                sQLitePreparedStatementExecuteFast.requery();
                sQLitePreparedStatementExecuteFast.bindInteger(1, i);
                sQLitePreparedStatementExecuteFast.bindLong(2, j);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLitePreparedStatementExecuteFast != null) {
                    sQLitePreparedStatementExecuteFast.dispose();
                }
            }
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateChatParticipants$116(TLRPC.ChatFull chatFull) {
        NotificationCenter notificationCenter = getNotificationCenter();
        int i = NotificationCenter.chatInfoDidLoad;
        Boolean bool = Boolean.FALSE;
        notificationCenter.lambda$postNotificationNameOnUIThread$1(i, chatFull, 0, bool, bool);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateChatParticipants$117(TLRPC.ChatParticipants chatParticipants) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        final TLRPC.ChatFull chatFullTLdeserialize;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT info, pinned, online, inviter FROM chat_settings_v2 WHERE uid = " + chatParticipants.chat_id, new Object[0]);
            } catch (Exception e) {
                e = e;
            }
        } catch (Throwable th) {
            th = th;
        }
        try {
            new ArrayList();
            if (!sQLiteCursorQueryFinalized.next() || (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0)) == null) {
                chatFullTLdeserialize = null;
            } else {
                chatFullTLdeserialize = TLRPC.ChatFull.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                nativeByteBufferByteBufferValue.reuse();
                chatFullTLdeserialize.pinned_msg_id = sQLiteCursorQueryFinalized.intValue(1);
                chatFullTLdeserialize.online_count = sQLiteCursorQueryFinalized.intValue(2);
                chatFullTLdeserialize.inviterId = sQLiteCursorQueryFinalized.longValue(3);
            }
            sQLiteCursorQueryFinalized.dispose();
            if (chatFullTLdeserialize instanceof TLRPC.TL_chatFull) {
                chatFullTLdeserialize.participants = chatParticipants;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda172
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$updateChatParticipants$116(chatFullTLdeserialize);
                    }
                });
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO chat_settings_v2 VALUES(?, ?, ?, ?, ?, ?, ?)");
                NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(chatFullTLdeserialize.getObjectSize());
                chatFullTLdeserialize.serializeToStream(nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.bindLong(1, chatFullTLdeserialize.id);
                sQLitePreparedStatementExecuteFast.bindByteBuffer(2, nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.bindInteger(3, chatFullTLdeserialize.pinned_msg_id);
                sQLitePreparedStatementExecuteFast.bindInteger(4, chatFullTLdeserialize.online_count);
                sQLitePreparedStatementExecuteFast.bindLong(5, chatFullTLdeserialize.inviterId);
                sQLitePreparedStatementExecuteFast.bindInteger(6, chatFullTLdeserialize.invitesCount);
                sQLitePreparedStatementExecuteFast.bindInteger(7, chatFullTLdeserialize.participants_count);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
                nativeByteBuffer.reuse();
            }
        } catch (Exception e2) {
            e = e2;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            checkSQLException(e);
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
        } catch (Throwable th2) {
            th = th2;
            sQLiteCursor = sQLiteCursorQueryFinalized;
            if (sQLiteCursor != null) {
                sQLiteCursor.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateDbToLastVersion$3() {
        this.databaseMigrationInProgress = true;
        NotificationCenter.getInstance(this.currentAccount).lambda$postNotificationNameOnUIThread$1(NotificationCenter.onDatabaseMigration, Boolean.TRUE);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateDbToLastVersion$4() {
        this.databaseMigrationInProgress = false;
        NotificationCenter.getInstance(this.currentAccount).lambda$postNotificationNameOnUIThread$1(NotificationCenter.onDatabaseMigration, Boolean.FALSE);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:34:0x0074  */
    /* JADX WARN: Removed duplicated region for block: B:36:0x0079  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$updateDialogData$224(TLRPC.Dialog dialog) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLiteCursor sQLiteCursor = null;
        try {
            SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT data FROM dialogs WHERE did = " + dialog.id, new Object[0]);
            try {
                if (!sQLiteCursorQueryFinalized.next()) {
                    sQLiteCursorQueryFinalized.dispose();
                    return;
                }
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET data = ? WHERE did = ?");
                try {
                    NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(dialog.getObjectSize());
                    dialog.serializeToStream(nativeByteBuffer);
                    sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBuffer);
                    sQLitePreparedStatementExecuteFast.bindLong(2, dialog.id);
                    sQLitePreparedStatementExecuteFast.step();
                    sQLitePreparedStatementExecuteFast.dispose();
                    nativeByteBuffer.reuse();
                    sQLiteCursorQueryFinalized.dispose();
                } catch (Exception e) {
                    e = e;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    try {
                        checkSQLException(e);
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                            sQLitePreparedStatementExecuteFast.dispose();
                        }
                    } catch (Throwable th) {
                        th = th;
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        if (sQLitePreparedStatementExecuteFast != null) {
                            sQLitePreparedStatementExecuteFast.dispose();
                        }
                        throw th;
                    }
                } catch (Throwable th2) {
                    th = th2;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    if (sQLiteCursor != null) {
                    }
                    if (sQLitePreparedStatementExecuteFast != null) {
                    }
                    throw th;
                }
            } catch (Exception e2) {
                e = e2;
                sQLitePreparedStatementExecuteFast = null;
            } catch (Throwable th3) {
                th = th3;
                sQLitePreparedStatementExecuteFast = null;
            }
        } catch (Exception e3) {
            e = e3;
            sQLitePreparedStatementExecuteFast = null;
        } catch (Throwable th4) {
            th = th4;
            sQLitePreparedStatementExecuteFast = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:55:0x00df  */
    /* JADX WARN: Removed duplicated region for block: B:57:0x00e4  */
    /* JADX WARN: Removed duplicated region for block: B:60:0x00ea  */
    /* JADX WARN: Removed duplicated region for block: B:62:0x00ef  */
    /* JADX WARN: Removed duplicated region for block: B:76:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Type inference failed for: r9v13 */
    /* JADX WARN: Type inference failed for: r9v2 */
    /* JADX WARN: Type inference failed for: r9v24, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r9v26 */
    /* JADX WARN: Type inference failed for: r9v27 */
    /* JADX WARN: Type inference failed for: r9v3 */
    /* JADX WARN: Type inference failed for: r9v4, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r9v6 */
    /* JADX WARN: Type inference failed for: r9v7 */
    /* JADX WARN: Type inference failed for: r9v9, types: [org.telegram.SQLite.SQLiteCursor] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$updateDialogUnreadReactions$246(boolean z, long j, int i, long j2) throws Throwable {
        int iMax;
        ?? r9;
        ?? QueryFinalized;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        if (z) {
            try {
                SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT unread_reactions FROM dialogs WHERE did = " + j, new Object[0]);
                try {
                    iMax = sQLiteCursorQueryFinalized.next() ? Math.max(0, sQLiteCursorQueryFinalized.intValue(0)) : 0;
                    sQLiteCursorQueryFinalized.dispose();
                } catch (SQLiteException e) {
                    e = e;
                    QueryFinalized = sQLiteCursorQueryFinalized;
                    e.printStackTrace();
                    if (sQLitePreparedStatement != null) {
                    }
                    if (QueryFinalized == 0) {
                    }
                } catch (Throwable th) {
                    th = th;
                    r9 = sQLiteCursorQueryFinalized;
                    if (sQLitePreparedStatement != null) {
                    }
                    if (r9 != 0) {
                    }
                    throw th;
                }
            } catch (SQLiteException e2) {
                e = e2;
                QueryFinalized = 0;
            } catch (Throwable th2) {
                th = th2;
                r9 = 0;
            }
        } else {
            iMax = 0;
        }
        int i2 = iMax + i;
        try {
            sQLitePreparedStatementExecuteFast = getMessagesStorage().getDatabase().executeFast("UPDATE dialogs SET unread_reactions = ? WHERE did = ?");
            try {
                sQLitePreparedStatementExecuteFast.bindInteger(1, i2);
                sQLitePreparedStatementExecuteFast.bindLong(2, j);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
                if (j2 != 0) {
                    if (z) {
                        QueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT unread_reactions FROM topics WHERE did = %d AND topic_id = %d", Long.valueOf(j), Long.valueOf(j2)), new Object[0]);
                        try {
                            try {
                                iMax = QueryFinalized.next() ? Math.max(0, QueryFinalized.intValue(0)) : 0;
                                QueryFinalized.dispose();
                            } catch (SQLiteException e3) {
                                e = e3;
                                sQLitePreparedStatementExecuteFast = null;
                                sQLitePreparedStatement = QueryFinalized;
                                SQLitePreparedStatement sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast;
                                QueryFinalized = sQLitePreparedStatement;
                                sQLitePreparedStatement = sQLitePreparedStatement2;
                                e.printStackTrace();
                                if (sQLitePreparedStatement != null) {
                                    sQLitePreparedStatement.dispose();
                                }
                                if (QueryFinalized == 0) {
                                    QueryFinalized.dispose();
                                    return;
                                }
                                return;
                            }
                        } catch (Throwable th3) {
                            th = th3;
                            SQLitePreparedStatement sQLitePreparedStatement3 = QueryFinalized;
                            sQLitePreparedStatementExecuteFast = sQLitePreparedStatement;
                            sQLitePreparedStatement = sQLitePreparedStatement3;
                            SQLitePreparedStatement sQLitePreparedStatement4 = sQLitePreparedStatementExecuteFast;
                            r9 = sQLitePreparedStatement;
                            sQLitePreparedStatement = sQLitePreparedStatement4;
                            if (sQLitePreparedStatement != null) {
                                sQLitePreparedStatement.dispose();
                            }
                            if (r9 != 0) {
                                r9.dispose();
                            }
                            throw th;
                        }
                    }
                    int i3 = iMax + i;
                    sQLitePreparedStatementExecuteFast = getMessagesStorage().getDatabase().executeFast("UPDATE topics SET unread_reactions = ? WHERE did = ? AND topic_id = ?");
                    sQLitePreparedStatementExecuteFast.bindInteger(1, i3);
                    sQLitePreparedStatementExecuteFast.bindLong(2, j);
                    sQLitePreparedStatementExecuteFast.bindLong(3, j2);
                    sQLitePreparedStatementExecuteFast.step();
                    sQLitePreparedStatementExecuteFast.dispose();
                }
            } catch (SQLiteException e4) {
                e = e4;
            } catch (Throwable th4) {
                th = th4;
                SQLitePreparedStatement sQLitePreparedStatement42 = sQLitePreparedStatementExecuteFast;
                r9 = sQLitePreparedStatement;
                sQLitePreparedStatement = sQLitePreparedStatement42;
                if (sQLitePreparedStatement != null) {
                }
                if (r9 != 0) {
                }
                throw th;
            }
        } catch (SQLiteException e5) {
            e = e5;
            sQLitePreparedStatementExecuteFast = null;
        } catch (Throwable th5) {
            th = th5;
            sQLitePreparedStatementExecuteFast = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateDialogsWithReadMessages$115(LongSparseIntArray longSparseIntArray, LongSparseIntArray longSparseIntArray2, LongSparseArray longSparseArray, LongSparseIntArray longSparseIntArray3) {
        updateDialogsWithReadMessagesInternal(null, longSparseIntArray, longSparseIntArray2, longSparseArray, longSparseIntArray3);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateEncryptedChat$168(TLRPC.EncryptedChat encryptedChat) {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                byte[] bArr = encryptedChat.key_hash;
                if (bArr == null || bArr.length < 16) {
                    byte[] bArr2 = encryptedChat.auth_key;
                    if (bArr2 != null) {
                        encryptedChat.key_hash = AndroidUtilities.calcAuthKeyHash(bArr2);
                    }
                }
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE enc_chats SET data = ?, g = ?, authkey = ?, ttl = ?, layer = ?, seq_in = ?, seq_out = ?, use_count = ?, exchange_id = ?, key_date = ?, fprint = ?, fauthkey = ?, khash = ?, in_seq_no = ?, admin_id = ?, mtproto_seq = ? WHERE uid = ?");
                NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(encryptedChat.getObjectSize());
                byte[] bArr3 = encryptedChat.a_or_b;
                NativeByteBuffer nativeByteBuffer2 = new NativeByteBuffer(bArr3 != null ? bArr3.length : 1);
                byte[] bArr4 = encryptedChat.auth_key;
                NativeByteBuffer nativeByteBuffer3 = new NativeByteBuffer(bArr4 != null ? bArr4.length : 1);
                byte[] bArr5 = encryptedChat.future_auth_key;
                NativeByteBuffer nativeByteBuffer4 = new NativeByteBuffer(bArr5 != null ? bArr5.length : 1);
                byte[] bArr6 = encryptedChat.key_hash;
                NativeByteBuffer nativeByteBuffer5 = new NativeByteBuffer(bArr6 != null ? bArr6.length : 1);
                encryptedChat.serializeToStream(nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBuffer);
                byte[] bArr7 = encryptedChat.a_or_b;
                if (bArr7 != null) {
                    nativeByteBuffer2.writeBytes(bArr7);
                }
                byte[] bArr8 = encryptedChat.auth_key;
                if (bArr8 != null) {
                    nativeByteBuffer3.writeBytes(bArr8);
                }
                byte[] bArr9 = encryptedChat.future_auth_key;
                if (bArr9 != null) {
                    nativeByteBuffer4.writeBytes(bArr9);
                }
                byte[] bArr10 = encryptedChat.key_hash;
                if (bArr10 != null) {
                    nativeByteBuffer5.writeBytes(bArr10);
                }
                sQLitePreparedStatementExecuteFast.bindByteBuffer(2, nativeByteBuffer2);
                sQLitePreparedStatementExecuteFast.bindByteBuffer(3, nativeByteBuffer3);
                sQLitePreparedStatementExecuteFast.bindInteger(4, encryptedChat.ttl);
                sQLitePreparedStatementExecuteFast.bindInteger(5, encryptedChat.layer);
                sQLitePreparedStatementExecuteFast.bindInteger(6, encryptedChat.seq_in);
                sQLitePreparedStatementExecuteFast.bindInteger(7, encryptedChat.seq_out);
                sQLitePreparedStatementExecuteFast.bindInteger(8, (encryptedChat.key_use_count_in << 16) | encryptedChat.key_use_count_out);
                sQLitePreparedStatementExecuteFast.bindLong(9, encryptedChat.exchange_id);
                sQLitePreparedStatementExecuteFast.bindInteger(10, encryptedChat.key_create_date);
                sQLitePreparedStatementExecuteFast.bindLong(11, encryptedChat.future_key_fingerprint);
                sQLitePreparedStatementExecuteFast.bindByteBuffer(12, nativeByteBuffer4);
                sQLitePreparedStatementExecuteFast.bindByteBuffer(13, nativeByteBuffer5);
                sQLitePreparedStatementExecuteFast.bindInteger(14, encryptedChat.in_seq_no);
                sQLitePreparedStatementExecuteFast.bindLong(15, encryptedChat.admin_id);
                sQLitePreparedStatementExecuteFast.bindInteger(16, encryptedChat.mtproto_seq);
                sQLitePreparedStatementExecuteFast.bindInteger(17, encryptedChat.id);
                sQLitePreparedStatementExecuteFast.step();
                nativeByteBuffer.reuse();
                nativeByteBuffer2.reuse();
                nativeByteBuffer3.reuse();
                nativeByteBuffer4.reuse();
                nativeByteBuffer5.reuse();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLitePreparedStatementExecuteFast == null) {
                    return;
                }
            }
            sQLitePreparedStatementExecuteFast.dispose();
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateEncryptedChatLayer$167(TLRPC.EncryptedChat encryptedChat) {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE enc_chats SET layer = ? WHERE uid = ?");
                sQLitePreparedStatementExecuteFast.bindInteger(1, encryptedChat.layer);
                sQLitePreparedStatementExecuteFast.bindInteger(2, encryptedChat.id);
                sQLitePreparedStatementExecuteFast.step();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLitePreparedStatementExecuteFast == null) {
                    return;
                }
            }
            sQLitePreparedStatementExecuteFast.dispose();
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateEncryptedChatSeq$165(TLRPC.EncryptedChat encryptedChat, boolean z) {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE enc_chats SET seq_in = ?, seq_out = ?, use_count = ?, in_seq_no = ?, mtproto_seq = ? WHERE uid = ?");
                sQLitePreparedStatementExecuteFast.bindInteger(1, encryptedChat.seq_in);
                sQLitePreparedStatementExecuteFast.bindInteger(2, encryptedChat.seq_out);
                sQLitePreparedStatementExecuteFast.bindInteger(3, (encryptedChat.key_use_count_in << 16) | encryptedChat.key_use_count_out);
                sQLitePreparedStatementExecuteFast.bindInteger(4, encryptedChat.in_seq_no);
                sQLitePreparedStatementExecuteFast.bindInteger(5, encryptedChat.mtproto_seq);
                sQLitePreparedStatementExecuteFast.bindInteger(6, encryptedChat.id);
                sQLitePreparedStatementExecuteFast.step();
                if (z && encryptedChat.in_seq_no != 0) {
                    long encryptedChatId = DialogObject.getEncryptedChatId(encryptedChat.id);
                    this.database.executeFast(String.format(Locale.US, "DELETE FROM messages_v2 WHERE mid IN (SELECT m.mid FROM messages_v2 as m LEFT JOIN messages_seq as s ON m.mid = s.mid WHERE m.uid = %d AND m.date = 0 AND m.mid < 0 AND s.seq_out <= %d) AND uid = %d", Long.valueOf(encryptedChatId), Integer.valueOf(encryptedChat.in_seq_no), Long.valueOf(encryptedChatId))).stepThis().dispose();
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLitePreparedStatementExecuteFast == null) {
                    return;
                }
            }
            sQLitePreparedStatementExecuteFast.dispose();
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateEncryptedChatTTL$166(TLRPC.EncryptedChat encryptedChat) {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE enc_chats SET ttl = ? WHERE uid = ?");
                sQLitePreparedStatementExecuteFast.bindInteger(1, encryptedChat.ttl);
                sQLitePreparedStatementExecuteFast.bindInteger(2, encryptedChat.id);
                sQLitePreparedStatementExecuteFast.step();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLitePreparedStatementExecuteFast == null) {
                    return;
                }
            }
            sQLitePreparedStatementExecuteFast.dispose();
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateFiltersReadCounter$114() {
        ArrayList<MessagesController.DialogFilter> arrayList = getMessagesController().dialogFilters;
        int size = arrayList.size();
        for (int i = 0; i < size; i++) {
            arrayList.get(i).unreadCount = arrayList.get(i).pendingUnreadCount;
        }
        this.mainUnreadCount = this.pendingMainUnreadCount;
        this.archiveUnreadCount = this.pendingArchiveUnreadCount;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateMessageCustomParams$105(TLRPC.Message message, long j) throws Throwable {
        SQLiteDatabase sQLiteDatabase;
        String str;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                this.database.beginTransaction();
                TLRPC.Message messageWithCustomParamsOnlyInternal = getMessageWithCustomParamsOnlyInternal(message.id, j);
                MessageCustomParamsHelper.copyParams(message, messageWithCustomParamsOnlyInternal);
                for (int i = 0; i < 2; i++) {
                    if (i == 0) {
                        sQLiteDatabase = this.database;
                        str = "UPDATE messages_v2 SET custom_params = ? WHERE mid = ? AND uid = ?";
                    } else {
                        sQLiteDatabase = this.database;
                        str = "UPDATE messages_topics SET custom_params = ? WHERE mid = ? AND uid = ?";
                    }
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast = sQLiteDatabase.executeFast(str);
                    try {
                        sQLitePreparedStatementExecuteFast.requery();
                        NativeByteBuffer nativeByteBufferWriteLocalParams = MessageCustomParamsHelper.writeLocalParams(messageWithCustomParamsOnlyInternal);
                        if (nativeByteBufferWriteLocalParams != null) {
                            sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBufferWriteLocalParams);
                        } else {
                            sQLitePreparedStatementExecuteFast.bindNull(1);
                        }
                        sQLitePreparedStatementExecuteFast.bindInteger(2, message.id);
                        sQLitePreparedStatementExecuteFast.bindLong(3, j);
                        sQLitePreparedStatementExecuteFast.step();
                        sQLitePreparedStatementExecuteFast.dispose();
                        if (nativeByteBufferWriteLocalParams != null) {
                            nativeByteBufferWriteLocalParams.reuse();
                        }
                    } catch (Exception e) {
                        e = e;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        checkSQLException(e);
                        SQLiteDatabase sQLiteDatabase2 = this.database;
                        if (sQLiteDatabase2 != null) {
                            sQLiteDatabase2.commitTransaction();
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                            return;
                        }
                        return;
                    } catch (Throwable th) {
                        th = th;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        SQLiteDatabase sQLiteDatabase3 = this.database;
                        if (sQLiteDatabase3 != null) {
                            sQLiteDatabase3.commitTransaction();
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        throw th;
                    }
                }
                this.database.commitTransaction();
                SQLiteDatabase sQLiteDatabase4 = this.database;
                if (sQLiteDatabase4 != null) {
                    sQLiteDatabase4.commitTransaction();
                }
            } catch (Exception e2) {
                e = e2;
            }
        } catch (Throwable th2) {
            th = th2;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:73:0x01d6  */
    /* JADX WARN: Removed duplicated region for block: B:93:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Type inference failed for: r14v16 */
    /* JADX WARN: Type inference failed for: r14v7 */
    /* JADX WARN: Type inference failed for: r14v8, types: [boolean, int] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$updateMessagePollResults$96(long j, TLRPC.Poll poll, TLRPC.PollResults pollResults) throws Throwable {
        LongSparseArray longSparseArray;
        int i;
        ArrayList arrayList;
        SQLitePreparedStatement sQLitePreparedStatement;
        int i2;
        ?? r14;
        SQLiteCursor sQLiteCursorQueryFinalized;
        int i3 = 2;
        int i4 = 0;
        int i5 = 1;
        SQLiteCursor sQLiteCursor = null;
        try {
            try {
                SQLiteCursor sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT uid, mid FROM polls_v2 WHERE id = %d", Long.valueOf(j)), new Object[0]);
                LongSparseArray longSparseArray2 = null;
                while (sQLiteCursorQueryFinalized2.next()) {
                    try {
                        long jLongValue = sQLiteCursorQueryFinalized2.longValue(0);
                        if (longSparseArray2 == null) {
                            longSparseArray2 = new LongSparseArray();
                        }
                        ArrayList arrayList2 = (ArrayList) longSparseArray2.get(jLongValue);
                        if (arrayList2 == null) {
                            arrayList2 = new ArrayList();
                            longSparseArray2.put(jLongValue, arrayList2);
                        }
                        arrayList2.add(Integer.valueOf(sQLiteCursorQueryFinalized2.intValue(1)));
                    } catch (Exception e) {
                        e = e;
                        sQLiteCursor = sQLiteCursorQueryFinalized2;
                    } catch (Throwable th) {
                        th = th;
                        sQLiteCursor = sQLiteCursorQueryFinalized2;
                    }
                }
                sQLiteCursorQueryFinalized2.dispose();
                if (longSparseArray2 != null) {
                    this.database.beginTransaction();
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE messages_v2 SET data = ? WHERE mid = ? AND uid = ?");
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE messages_topics SET data = ? WHERE mid = ? AND uid = ?");
                    int size = longSparseArray2.size();
                    int i6 = 0;
                    while (i6 < size) {
                        long jKeyAt = longSparseArray2.keyAt(i6);
                        ArrayList arrayList3 = (ArrayList) longSparseArray2.valueAt(i6);
                        int size2 = arrayList3.size();
                        while (i4 < size2) {
                            Integer num = (Integer) arrayList3.get(i4);
                            SQLiteCursor sQLiteCursor2 = sQLiteCursor;
                            int i7 = 0;
                            boolean z = false;
                            while (i7 < i3) {
                                if (i7 == i5) {
                                    try {
                                        longSparseArray = longSparseArray2;
                                        i = size;
                                        arrayList = arrayList3;
                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                                        i2 = size2;
                                        r14 = 0;
                                        sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data FROM messages_topics WHERE mid = %d AND uid = %d", num, Long.valueOf(jKeyAt)), new Object[0]);
                                    } catch (Exception e2) {
                                        e = e2;
                                        sQLiteCursor = sQLiteCursor2;
                                        checkSQLException(e);
                                        if (sQLiteCursor == null) {
                                        }
                                        sQLiteCursor.dispose();
                                    } catch (Throwable th2) {
                                        th = th2;
                                        sQLiteCursor = sQLiteCursor2;
                                        if (sQLiteCursor != null) {
                                        }
                                        throw th;
                                    }
                                } else {
                                    longSparseArray = longSparseArray2;
                                    i = size;
                                    arrayList = arrayList3;
                                    i2 = size2;
                                    r14 = 0;
                                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                    sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data FROM messages_v2 WHERE mid = %d AND uid = %d", num, Long.valueOf(jKeyAt)), new Object[0]);
                                }
                                try {
                                    if (sQLiteCursorQueryFinalized.next()) {
                                        NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(r14);
                                        if (nativeByteBufferByteBufferValue != 0) {
                                            TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(r14), r14);
                                            messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                                            nativeByteBufferByteBufferValue.reuse();
                                            TLRPC.MessageMedia messageMedia = messageTLdeserialize.media;
                                            if (messageMedia instanceof TLRPC.TL_messageMediaPoll) {
                                                TLRPC.TL_messageMediaPoll tL_messageMediaPoll = (TLRPC.TL_messageMediaPoll) messageMedia;
                                                if (poll != null) {
                                                    tL_messageMediaPoll.poll = poll;
                                                }
                                                if (pollResults != null) {
                                                    MessageObject.updatePollResults(tL_messageMediaPoll, pollResults);
                                                }
                                                MessageObject.normalizeFlags(messageTLdeserialize);
                                                NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(messageTLdeserialize.getObjectSize());
                                                messageTLdeserialize.serializeToStream(nativeByteBuffer);
                                                sQLitePreparedStatement.requery();
                                                sQLitePreparedStatement.bindByteBuffer(1, nativeByteBuffer);
                                                sQLitePreparedStatement.bindInteger(2, num.intValue());
                                                sQLitePreparedStatement.bindLong(3, jKeyAt);
                                                sQLitePreparedStatement.step();
                                                nativeByteBuffer.reuse();
                                            }
                                        }
                                        z = true;
                                    }
                                    sQLiteCursorQueryFinalized.dispose();
                                    i5 = 1;
                                    i7++;
                                    longSparseArray2 = longSparseArray;
                                    sQLiteCursor2 = sQLiteCursorQueryFinalized;
                                    size2 = i2;
                                    size = i;
                                    arrayList3 = arrayList;
                                    i3 = 2;
                                } catch (Exception e3) {
                                    e = e3;
                                    sQLiteCursor = sQLiteCursorQueryFinalized;
                                    checkSQLException(e);
                                    if (sQLiteCursor == null) {
                                        return;
                                    }
                                    sQLiteCursor.dispose();
                                } catch (Throwable th3) {
                                    th = th3;
                                    sQLiteCursor = sQLiteCursorQueryFinalized;
                                    if (sQLiteCursor != null) {
                                        sQLiteCursor.dispose();
                                    }
                                    throw th;
                                }
                            }
                            LongSparseArray longSparseArray3 = longSparseArray2;
                            int i8 = size;
                            ArrayList arrayList4 = arrayList3;
                            int i9 = size2;
                            if (!z) {
                                this.database.executeFast(String.format(Locale.US, "DELETE FROM polls_v2 WHERE mid = %d AND uid = %d", num, Long.valueOf(jKeyAt))).stepThis().dispose();
                            }
                            i4++;
                            sQLiteCursor = sQLiteCursor2;
                            longSparseArray2 = longSparseArray3;
                            size2 = i9;
                            size = i8;
                            arrayList3 = arrayList4;
                            i3 = 2;
                            i5 = 1;
                        }
                        i6++;
                        size = size;
                        i3 = 2;
                        i4 = 0;
                        i5 = 1;
                    }
                    sQLitePreparedStatementExecuteFast.dispose();
                    sQLitePreparedStatementExecuteFast2.dispose();
                    this.database.commitTransaction();
                }
                if (sQLiteCursor == null) {
                    return;
                }
            } catch (Exception e4) {
                e = e4;
            }
            sQLiteCursor.dispose();
        } catch (Throwable th4) {
            th = th4;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:60:0x015a  */
    /* JADX WARN: Removed duplicated region for block: B:62:0x015f  */
    /* JADX WARN: Type inference failed for: r5v0 */
    /* JADX WARN: Type inference failed for: r5v2 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$updateMessageReactions$99(int i, long j, TLRPC.TL_messageReactions tL_messageReactions) throws Throwable {
        SQLiteCursor sQLiteCursor;
        SQLiteDatabase sQLiteDatabase;
        long j2;
        SQLiteCursor sQLiteCursorQueryFinalized;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        long savedDialogId;
        SQLiteDatabase sQLiteDatabase2;
        String str;
        TLRPC.TL_messageReactions tL_messageReactions2;
        long j3;
        int i2 = 2;
        int i3 = 0;
        try {
            long clientUserId = getUserConfig().getClientUserId();
            this.database.beginTransaction();
            long j4 = 0;
            int i4 = 0;
            TLRPC.TL_messageReactions tL_messageReactions3 = null;
            while (i4 < i2) {
                if (i4 == 0) {
                    SQLiteDatabase sQLiteDatabase3 = this.database;
                    Locale locale = Locale.US;
                    Integer numValueOf = Integer.valueOf(i);
                    Long lValueOf = Long.valueOf(j);
                    Object[] objArr = new Object[i2];
                    objArr[i3] = numValueOf;
                    objArr[1] = lValueOf;
                    sQLiteCursorQueryFinalized = sQLiteDatabase3.queryFinalized(String.format(locale, "SELECT data FROM messages_v2 WHERE mid = %d AND uid = %d", objArr), new Object[i3]);
                    j2 = j4;
                } else {
                    SQLiteDatabase sQLiteDatabase4 = this.database;
                    Locale locale2 = Locale.US;
                    Integer numValueOf2 = Integer.valueOf(i);
                    Long lValueOf2 = Long.valueOf(j);
                    j2 = j4;
                    Object[] objArr2 = new Object[i2];
                    objArr2[i3] = numValueOf2;
                    objArr2[1] = lValueOf2;
                    sQLiteCursorQueryFinalized = sQLiteDatabase4.queryFinalized(String.format(locale2, "SELECT data FROM messages_topics WHERE mid = %d AND uid = %d", objArr2), new Object[i3]);
                }
                try {
                    if (sQLiteCursorQueryFinalized.next() && (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(i3)) != null) {
                        TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(i3), i3);
                        if (messageTLdeserialize != null) {
                            messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                            nativeByteBufferByteBufferValue.reuse();
                            if (tL_messageReactions3 == null) {
                                tL_messageReactions3 = messageTLdeserialize.reactions;
                                savedDialogId = MessageObject.getSavedDialogId(clientUserId, messageTLdeserialize);
                            } else {
                                savedDialogId = j2;
                            }
                            MessageObject.updateReactions(messageTLdeserialize, tL_messageReactions);
                            if (i4 == 0) {
                                sQLiteDatabase2 = this.database;
                                str = "UPDATE messages_v2 SET data = ? WHERE mid = ? AND uid = ?";
                            } else {
                                sQLiteDatabase2 = this.database;
                                str = "UPDATE messages_topics SET data = ? WHERE mid = ? AND uid = ?";
                            }
                            SQLitePreparedStatement sQLitePreparedStatementExecuteFast = sQLiteDatabase2.executeFast(str);
                            MessageObject.normalizeFlags(messageTLdeserialize);
                            NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(messageTLdeserialize.getObjectSize());
                            messageTLdeserialize.serializeToStream(nativeByteBuffer);
                            sQLitePreparedStatementExecuteFast.requery();
                            sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBuffer);
                            sQLitePreparedStatementExecuteFast.bindInteger(i2, i);
                            sQLitePreparedStatementExecuteFast.bindLong(3, j);
                            sQLitePreparedStatementExecuteFast.step();
                            nativeByteBuffer.reuse();
                            sQLitePreparedStatementExecuteFast.dispose();
                            if (clientUserId == j) {
                                tL_messageReactions2 = tL_messageReactions3;
                                j3 = savedDialogId;
                                this.database.executeFast(String.format(Locale.US, "DELETE FROM tag_message_id WHERE mid = %d", Integer.valueOf(messageTLdeserialize.id))).stepThis().dispose();
                                SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("REPLACE INTO tag_message_id VALUES(?, ?, ?, ?)");
                                bindMessageTags(sQLitePreparedStatementExecuteFast2, messageTLdeserialize);
                                sQLitePreparedStatementExecuteFast2.dispose();
                            } else {
                                tL_messageReactions2 = tL_messageReactions3;
                                j3 = savedDialogId;
                            }
                            tL_messageReactions3 = tL_messageReactions2;
                            j4 = j3;
                            sQLiteCursorQueryFinalized.dispose();
                            i4++;
                            i2 = 2;
                            i3 = 0;
                        } else {
                            nativeByteBufferByteBufferValue.reuse();
                        }
                    }
                    j4 = j2;
                    sQLiteCursorQueryFinalized.dispose();
                    i4++;
                    i2 = 2;
                    i3 = 0;
                } catch (Exception e) {
                    e = e;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    try {
                        checkSQLException(e);
                        SQLiteDatabase sQLiteDatabase5 = this.database;
                        if (sQLiteDatabase5 != null) {
                            sQLiteDatabase5.commitTransaction();
                        }
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                            return;
                        }
                        return;
                    } catch (Throwable th) {
                        th = th;
                        sQLiteDatabase = this.database;
                        if (sQLiteDatabase != null) {
                            sQLiteDatabase.commitTransaction();
                        }
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        throw th;
                    }
                } catch (Throwable th2) {
                    th = th2;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase != null) {
                    }
                    if (sQLiteCursor != null) {
                    }
                    throw th;
                }
            }
            long j5 = j4;
            this.database.commitTransaction();
            if (j == clientUserId && tL_messageReactions3 != null) {
                onReactionsUpdate(j5, tL_messageReactions3, tL_messageReactions);
            }
            SQLiteDatabase sQLiteDatabase6 = this.database;
            if (sQLiteDatabase6 != null) {
                sQLiteDatabase6.commitTransaction();
            }
        } catch (Exception e2) {
            e = e2;
            sQLiteCursor = null;
        } catch (Throwable th3) {
            th = th3;
            sQLiteCursor = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateMessageStateAndIdInternal$198(TLRPC.TL_updates tL_updates) {
        getMessagesController().processUpdates(tL_updates, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateMessageVerifyFlags$189(ArrayList arrayList) throws Throwable {
        SQLiteDatabase sQLiteDatabase;
        SQLiteDatabase sQLiteDatabase2;
        boolean z = false;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                this.database.beginTransaction();
                try {
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE messages_v2 SET imp = ? WHERE mid = ? AND uid = ?");
                    try {
                        int size = arrayList.size();
                        for (int i = 0; i < size; i++) {
                            TLRPC.Message message = (TLRPC.Message) arrayList.get(i);
                            sQLitePreparedStatementExecuteFast.requery();
                            int i2 = message.stickerVerified;
                            sQLitePreparedStatementExecuteFast.bindInteger(1, i2 == 0 ? 1 : i2 == 2 ? 2 : 0);
                            sQLitePreparedStatementExecuteFast.bindInteger(2, message.id);
                            sQLitePreparedStatementExecuteFast.bindLong(3, MessageObject.getDialogId(message));
                            sQLitePreparedStatementExecuteFast.step();
                        }
                        sQLitePreparedStatementExecuteFast.dispose();
                        this.database.commitTransaction();
                    } catch (Exception e) {
                        e = e;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        z = true;
                        checkSQLException(e);
                        if (z && (sQLiteDatabase2 = this.database) != null) {
                            sQLiteDatabase2.commitTransaction();
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                    } catch (Throwable th) {
                        th = th;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        z = true;
                        if (z && (sQLiteDatabase = this.database) != null) {
                            sQLiteDatabase.commitTransaction();
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        throw th;
                    }
                } catch (Exception e2) {
                    e = e2;
                } catch (Throwable th2) {
                    th = th2;
                }
            } catch (Exception e3) {
                e = e3;
            }
        } catch (Throwable th3) {
            th = th3;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateMessageVoiceTranscription$103(int i, long j, boolean z, long j2, String str) throws Throwable {
        TLRPC.Message messageWithCustomParamsOnlyInternal;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                this.database.beginTransaction();
                messageWithCustomParamsOnlyInternal = getMessageWithCustomParamsOnlyInternal(i, j);
                messageWithCustomParamsOnlyInternal.voiceTranscriptionFinal = z;
                messageWithCustomParamsOnlyInternal.voiceTranscriptionId = j2;
                messageWithCustomParamsOnlyInternal.voiceTranscription = str;
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE messages_v2 SET custom_params = ? WHERE mid = ? AND uid = ?");
            } catch (Exception e) {
                e = e;
            }
        } catch (Throwable th) {
            th = th;
        }
        try {
            sQLitePreparedStatementExecuteFast.requery();
            NativeByteBuffer nativeByteBufferWriteLocalParams = MessageCustomParamsHelper.writeLocalParams(messageWithCustomParamsOnlyInternal);
            if (nativeByteBufferWriteLocalParams != null) {
                sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBufferWriteLocalParams);
            } else {
                sQLitePreparedStatementExecuteFast.bindNull(1);
            }
            sQLitePreparedStatementExecuteFast.bindInteger(2, i);
            sQLitePreparedStatementExecuteFast.bindLong(3, j);
            sQLitePreparedStatementExecuteFast.step();
            sQLitePreparedStatementExecuteFast.dispose();
            this.database.commitTransaction();
            if (nativeByteBufferWriteLocalParams != null) {
                nativeByteBufferWriteLocalParams.reuse();
            }
            SQLiteDatabase sQLiteDatabase = this.database;
            if (sQLiteDatabase != null) {
                sQLiteDatabase.commitTransaction();
            }
        } catch (Exception e2) {
            e = e2;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            checkSQLException(e);
            SQLiteDatabase sQLiteDatabase2 = this.database;
            if (sQLiteDatabase2 != null) {
                sQLiteDatabase2.commitTransaction();
            }
            if (sQLitePreparedStatement != null) {
                sQLitePreparedStatement.dispose();
            }
        } catch (Throwable th2) {
            th = th2;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            SQLiteDatabase sQLiteDatabase3 = this.database;
            if (sQLiteDatabase3 != null) {
                sQLiteDatabase3.commitTransaction();
            }
            if (sQLitePreparedStatement != null) {
                sQLitePreparedStatement.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateMessageVoiceTranscription$104(int i, long j, TLRPC.Message message, String str) throws Throwable {
        SQLiteDatabase sQLiteDatabase;
        String str2;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                this.database.beginTransaction();
                TLRPC.Message messageWithCustomParamsOnlyInternal = getMessageWithCustomParamsOnlyInternal(i, j);
                messageWithCustomParamsOnlyInternal.voiceTranscriptionOpen = message.voiceTranscriptionOpen;
                messageWithCustomParamsOnlyInternal.voiceTranscriptionRated = message.voiceTranscriptionRated;
                messageWithCustomParamsOnlyInternal.voiceTranscriptionFinal = message.voiceTranscriptionFinal;
                messageWithCustomParamsOnlyInternal.voiceTranscriptionForce = message.voiceTranscriptionForce;
                messageWithCustomParamsOnlyInternal.voiceTranscriptionId = message.voiceTranscriptionId;
                messageWithCustomParamsOnlyInternal.voiceTranscription = str;
                for (int i2 = 0; i2 < 2; i2++) {
                    if (i2 == 0) {
                        sQLiteDatabase = this.database;
                        str2 = "UPDATE messages_v2 SET custom_params = ? WHERE mid = ? AND uid = ?";
                    } else {
                        sQLiteDatabase = this.database;
                        str2 = "UPDATE messages_topics SET custom_params = ? WHERE mid = ? AND uid = ?";
                    }
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast = sQLiteDatabase.executeFast(str2);
                    try {
                        sQLitePreparedStatementExecuteFast.requery();
                        NativeByteBuffer nativeByteBufferWriteLocalParams = MessageCustomParamsHelper.writeLocalParams(messageWithCustomParamsOnlyInternal);
                        if (nativeByteBufferWriteLocalParams != null) {
                            sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBufferWriteLocalParams);
                        } else {
                            sQLitePreparedStatementExecuteFast.bindNull(1);
                        }
                        sQLitePreparedStatementExecuteFast.bindInteger(2, i);
                        sQLitePreparedStatementExecuteFast.bindLong(3, j);
                        sQLitePreparedStatementExecuteFast.step();
                        sQLitePreparedStatementExecuteFast.dispose();
                        this.database.commitTransaction();
                        if (nativeByteBufferWriteLocalParams != null) {
                            nativeByteBufferWriteLocalParams.reuse();
                        }
                    } catch (Exception e) {
                        e = e;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        checkSQLException(e);
                        SQLiteDatabase sQLiteDatabase2 = this.database;
                        if (sQLiteDatabase2 != null) {
                            sQLiteDatabase2.commitTransaction();
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                            return;
                        }
                        return;
                    } catch (Throwable th) {
                        th = th;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        SQLiteDatabase sQLiteDatabase3 = this.database;
                        if (sQLiteDatabase3 != null) {
                            sQLiteDatabase3.commitTransaction();
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        throw th;
                    }
                }
                SQLiteDatabase sQLiteDatabase4 = this.database;
                if (sQLiteDatabase4 != null) {
                    sQLiteDatabase4.commitTransaction();
                }
            } catch (Throwable th2) {
                th = th2;
            }
        } catch (Exception e2) {
            e = e2;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateMessageVoiceTranscriptionOpen$102(int i, long j, TLRPC.Message message) throws Throwable {
        SQLiteDatabase sQLiteDatabase;
        String str;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                this.database.beginTransaction();
                TLRPC.Message messageWithCustomParamsOnlyInternal = getMessageWithCustomParamsOnlyInternal(i, j);
                messageWithCustomParamsOnlyInternal.voiceTranscriptionOpen = message.voiceTranscriptionOpen;
                messageWithCustomParamsOnlyInternal.voiceTranscriptionRated = message.voiceTranscriptionRated;
                messageWithCustomParamsOnlyInternal.voiceTranscriptionFinal = message.voiceTranscriptionFinal;
                messageWithCustomParamsOnlyInternal.voiceTranscriptionForce = message.voiceTranscriptionForce;
                messageWithCustomParamsOnlyInternal.voiceTranscriptionId = message.voiceTranscriptionId;
                for (int i2 = 0; i2 < 2; i2++) {
                    if (i2 == 0) {
                        sQLiteDatabase = this.database;
                        str = "UPDATE messages_v2 SET custom_params = ? WHERE mid = ? AND uid = ?";
                    } else {
                        sQLiteDatabase = this.database;
                        str = "UPDATE messages_topics SET custom_params = ? WHERE mid = ? AND uid = ?";
                    }
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast = sQLiteDatabase.executeFast(str);
                    try {
                        sQLitePreparedStatementExecuteFast.requery();
                        NativeByteBuffer nativeByteBufferWriteLocalParams = MessageCustomParamsHelper.writeLocalParams(messageWithCustomParamsOnlyInternal);
                        if (nativeByteBufferWriteLocalParams != null) {
                            sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBufferWriteLocalParams);
                        } else {
                            sQLitePreparedStatementExecuteFast.bindNull(1);
                        }
                        sQLitePreparedStatementExecuteFast.bindInteger(2, i);
                        sQLitePreparedStatementExecuteFast.bindLong(3, j);
                        sQLitePreparedStatementExecuteFast.step();
                        sQLitePreparedStatementExecuteFast.dispose();
                        if (nativeByteBufferWriteLocalParams != null) {
                            nativeByteBufferWriteLocalParams.reuse();
                        }
                    } catch (Exception e) {
                        e = e;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        checkSQLException(e);
                        SQLiteDatabase sQLiteDatabase2 = this.database;
                        if (sQLiteDatabase2 != null) {
                            sQLiteDatabase2.commitTransaction();
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                            return;
                        }
                        return;
                    } catch (Throwable th) {
                        th = th;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        SQLiteDatabase sQLiteDatabase3 = this.database;
                        if (sQLiteDatabase3 != null) {
                            sQLiteDatabase3.commitTransaction();
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        throw th;
                    }
                }
                this.database.commitTransaction();
                SQLiteDatabase sQLiteDatabase4 = this.database;
                if (sQLiteDatabase4 != null) {
                    sQLiteDatabase4.commitTransaction();
                }
            } catch (Exception e2) {
                e = e2;
            }
        } catch (Throwable th2) {
            th = th2;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateMutedDialogsFiltersCounters$36() {
        resetAllUnreadCounters(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updatePinnedMessages$131(long j, ArrayList arrayList, HashMap map, int i, int i2, boolean z) {
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.didLoadPinnedMessages, Long.valueOf(j), arrayList, Boolean.TRUE, null, map, Integer.valueOf(i), Integer.valueOf(i2), Boolean.valueOf(z));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updatePinnedMessages$132(long j, ArrayList arrayList, HashMap map, int i, int i2, boolean z) {
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.didLoadPinnedMessages, Long.valueOf(j), arrayList, Boolean.FALSE, null, map, Integer.valueOf(i), Integer.valueOf(i2), Boolean.valueOf(z));
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:111:0x02cf A[PHI: r13
      0x02cf: PHI (r13v6 int) = (r13v5 int), (r13v8 int) binds: [B:107:0x02bb, B:109:0x02cb] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:131:0x0320  */
    /* JADX WARN: Removed duplicated region for block: B:133:0x0325  */
    /* JADX WARN: Removed duplicated region for block: B:135:0x032a  */
    /* JADX WARN: Removed duplicated region for block: B:140:0x0333  */
    /* JADX WARN: Removed duplicated region for block: B:142:0x0338  */
    /* JADX WARN: Removed duplicated region for block: B:144:0x033d  */
    /* JADX WARN: Removed duplicated region for block: B:163:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Type inference failed for: r14v0 */
    /* JADX WARN: Type inference failed for: r14v2 */
    /* JADX WARN: Type inference failed for: r14v23 */
    /* JADX WARN: Type inference failed for: r14v27 */
    /* JADX WARN: Type inference failed for: r14v4 */
    /* JADX WARN: Type inference failed for: r14v5 */
    /* JADX WARN: Type inference failed for: r14v6 */
    /* JADX WARN: Type inference failed for: r14v7, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r14v8, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r16v0 */
    /* JADX WARN: Type inference failed for: r16v1 */
    /* JADX WARN: Type inference failed for: r16v2 */
    /* JADX WARN: Type inference failed for: r16v3 */
    /* JADX WARN: Type inference failed for: r16v4 */
    /* JADX WARN: Type inference failed for: r16v5, types: [org.telegram.SQLite.SQLitePreparedStatement] */
    /* JADX WARN: Type inference failed for: r16v6, types: [org.telegram.SQLite.SQLitePreparedStatement] */
    /* JADX WARN: Type inference failed for: r16v7 */
    /* JADX WARN: Type inference failed for: r16v8 */
    /* JADX WARN: Type inference failed for: r16v9 */
    /* JADX WARN: Type inference failed for: r1v4, types: [org.telegram.SQLite.SQLitePreparedStatement] */
    /* JADX WARN: Type inference failed for: r1v7, types: [org.telegram.SQLite.SQLitePreparedStatement] */
    /* JADX WARN: Type inference failed for: r20v0, types: [java.util.HashMap] */
    /* JADX WARN: Type inference failed for: r6v15, types: [org.telegram.SQLite.SQLiteCursor] */
    /* JADX WARN: Type inference failed for: r9v14 */
    /* JADX WARN: Type inference failed for: r9v16, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r9v17 */
    /* JADX WARN: Type inference failed for: r9v4 */
    /* JADX WARN: Type inference failed for: r9v7, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r9v9 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$updatePinnedMessages$133(boolean z, final HashMap map, final int i, final long j, final ArrayList arrayList, int i2, boolean z2) throws Throwable {
        ?? r14;
        String str;
        ?? r16;
        SQLiteDatabase sQLiteDatabase;
        SQLiteDatabase sQLiteDatabase2;
        final ?? r9;
        final int iMax;
        Runnable runnable;
        int iIntValue;
        int iIntValue2;
        final int iMax2;
        final ?? r92;
        NativeByteBuffer nativeByteBuffer;
        Object obj = "REPLACE INTO chat_pinned_count VALUES(?, ?, ?)";
        String str2 = ",";
        int i3 = 2;
        try {
            try {
                try {
                    if (z) {
                        this.database.beginTransaction();
                        if (map != 0) {
                            if (i == 0) {
                                this.database.executeFast("DELETE FROM chat_pinned_v2 WHERE uid = " + j).stepThis().dispose();
                            }
                            iIntValue = 0;
                        } else {
                            SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT COUNT(mid) FROM chat_pinned_v2 WHERE uid = %d AND mid IN (%s)", Long.valueOf(j), TextUtils.join(",", arrayList)), new Object[0]);
                            iIntValue = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : 0;
                            sQLiteCursorQueryFinalized.dispose();
                        }
                        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO chat_pinned_v2 VALUES(?, ?, ?)");
                        try {
                            int size = arrayList.size();
                            int i4 = 0;
                            while (i4 < size) {
                                Integer num = (Integer) arrayList.get(i4);
                                sQLitePreparedStatementExecuteFast.requery();
                                sQLitePreparedStatementExecuteFast.bindLong(1, j);
                                sQLitePreparedStatementExecuteFast.bindInteger(i3, num.intValue());
                                MessageObject messageObject = map != 0 ? (MessageObject) map.get(num) : null;
                                if (messageObject != null) {
                                    nativeByteBuffer = new NativeByteBuffer(messageObject.messageOwner.getObjectSize());
                                    messageObject.messageOwner.serializeToStream(nativeByteBuffer);
                                    sQLitePreparedStatementExecuteFast.bindByteBuffer(3, nativeByteBuffer);
                                } else {
                                    sQLitePreparedStatementExecuteFast.bindNull(3);
                                    nativeByteBuffer = null;
                                }
                                sQLitePreparedStatementExecuteFast.step();
                                if (nativeByteBuffer != null) {
                                    nativeByteBuffer.reuse();
                                }
                                i4++;
                                i3 = 2;
                            }
                            sQLitePreparedStatementExecuteFast.dispose();
                            this.database.commitTransaction();
                            SQLiteDatabase sQLiteDatabase3 = this.database;
                            Locale locale = Locale.US;
                            ?? QueryFinalized = sQLiteDatabase3.queryFinalized(String.format(locale, "SELECT COUNT(mid) FROM chat_pinned_v2 WHERE uid = %d", Long.valueOf(j)), new Object[0]);
                            try {
                                int iIntValue3 = QueryFinalized.next() ? QueryFinalized.intValue(0) : 0;
                                QueryFinalized.dispose();
                                if (map != 0) {
                                    r92 = z2;
                                    iMax2 = Math.max(i2, iIntValue3);
                                } else {
                                    SQLiteCursor sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(locale, "SELECT count, end FROM chat_pinned_count WHERE uid = %d", Long.valueOf(j)), new Object[0]);
                                    if (sQLiteCursorQueryFinalized2.next()) {
                                        iIntValue2 = sQLiteCursorQueryFinalized2.intValue(0);
                                        boolean z3 = sQLiteCursorQueryFinalized2.intValue(1) != 0;
                                        sQLiteCursorQueryFinalized2.dispose();
                                        iMax2 = Math.max(iIntValue2 + (arrayList.size() - iIntValue), iIntValue3);
                                        r92 = z3;
                                    } else {
                                        iIntValue2 = 0;
                                    }
                                    sQLiteCursorQueryFinalized2.dispose();
                                    iMax2 = Math.max(iIntValue2 + (arrayList.size() - iIntValue), iIntValue3);
                                    r92 = z3;
                                }
                                ?? ExecuteFast = this.database.executeFast("REPLACE INTO chat_pinned_count VALUES(?, ?, ?)");
                                ExecuteFast.requery();
                                ExecuteFast.bindLong(1, j);
                                ExecuteFast.bindInteger(2, iMax2);
                                ExecuteFast.bindInteger(3, r92);
                                ExecuteFast.step();
                                ExecuteFast.dispose();
                                obj = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda141
                                    @Override // java.lang.Runnable
                                    public final void run() {
                                        this.f$0.lambda$updatePinnedMessages$131(j, arrayList, map, i, iMax2, r92);
                                    }
                                };
                            } catch (Exception e) {
                                e = e;
                                str = QueryFinalized;
                                r16 = null;
                                r14 = str;
                                try {
                                    checkSQLException(e);
                                    sQLiteDatabase2 = this.database;
                                    if (sQLiteDatabase2 != null) {
                                    }
                                    if (r14 != 0) {
                                    }
                                    if (r16 != null) {
                                    }
                                } catch (Throwable th) {
                                    th = th;
                                    sQLiteDatabase = this.database;
                                    if (sQLiteDatabase != null) {
                                        sQLiteDatabase.commitTransaction();
                                    }
                                    if (r14 != 0) {
                                        r14.dispose();
                                    }
                                    if (r16 != null) {
                                        r16.dispose();
                                    }
                                    throw th;
                                }
                            } catch (Throwable th2) {
                                th = th2;
                                r14 = QueryFinalized;
                                r16 = null;
                                sQLiteDatabase = this.database;
                                if (sQLiteDatabase != null) {
                                }
                                if (r14 != 0) {
                                }
                                if (r16 != null) {
                                }
                                throw th;
                            }
                        } catch (Exception e2) {
                            e = e2;
                            r16 = sQLitePreparedStatementExecuteFast;
                            r14 = 0;
                            checkSQLException(e);
                            sQLiteDatabase2 = this.database;
                            if (sQLiteDatabase2 != null) {
                            }
                            if (r14 != 0) {
                            }
                            if (r16 != null) {
                            }
                        } catch (Throwable th3) {
                            th = th3;
                            r16 = sQLitePreparedStatementExecuteFast;
                            r14 = 0;
                            sQLiteDatabase = this.database;
                            if (sQLiteDatabase != null) {
                            }
                            if (r14 != 0) {
                            }
                            if (r16 != null) {
                            }
                            throw th;
                        }
                    } else {
                        if (arrayList == null) {
                            this.database.executeFast("DELETE FROM chat_pinned_v2 WHERE uid = " + j).stepThis().dispose();
                            (DialogObject.isChatDialog(j) ? this.database.executeFast(String.format(Locale.US, "UPDATE chat_settings_v2 SET pinned = 0 WHERE uid = %d", Long.valueOf(-j))) : this.database.executeFast(String.format(Locale.US, "UPDATE user_settings SET pinned = 0 WHERE uid = %d", Long.valueOf(j)))).stepThis().dispose();
                            iMax = 0;
                            r9 = 1;
                        } else {
                            String strJoin = TextUtils.join(",", arrayList);
                            (DialogObject.isChatDialog(j) ? this.database.executeFast(String.format(Locale.US, "UPDATE chat_settings_v2 SET pinned = 0 WHERE uid = %d AND pinned IN (%s)", Long.valueOf(-j), strJoin)) : this.database.executeFast(String.format(Locale.US, "UPDATE user_settings SET pinned = 0 WHERE uid = %d AND pinned IN (%s)", Long.valueOf(j), strJoin))).stepThis().dispose();
                            SQLiteDatabase sQLiteDatabase4 = this.database;
                            Locale locale2 = Locale.US;
                            sQLiteDatabase4.executeFast(String.format(locale2, "DELETE FROM chat_pinned_v2 WHERE uid = %d AND mid IN(%s)", Long.valueOf(j), strJoin)).stepThis().dispose();
                            SQLiteCursor sQLiteCursorQueryFinalized3 = this.database.queryFinalized("SELECT changes()", new Object[0]);
                            int iIntValue4 = sQLiteCursorQueryFinalized3.next() ? sQLiteCursorQueryFinalized3.intValue(0) : 0;
                            sQLiteCursorQueryFinalized3.dispose();
                            try {
                                SQLiteCursor sQLiteCursorQueryFinalized4 = this.database.queryFinalized(String.format(locale2, "SELECT COUNT(mid) FROM chat_pinned_v2 WHERE uid = %d", Long.valueOf(j)), new Object[0]);
                                int iIntValue5 = sQLiteCursorQueryFinalized4.next() ? sQLiteCursorQueryFinalized4.intValue(0) : 0;
                                sQLiteCursorQueryFinalized4.dispose();
                                int iMax3 = 0;
                                SQLiteCursor sQLiteCursorQueryFinalized5 = this.database.queryFinalized(String.format(locale2, "SELECT count, end FROM chat_pinned_count WHERE uid = %d", Long.valueOf(j)), new Object[0]);
                                if (sQLiteCursorQueryFinalized5.next()) {
                                    iMax3 = Math.max(0, sQLiteCursorQueryFinalized5.intValue(0) - iIntValue4);
                                    boolean z4 = sQLiteCursorQueryFinalized5.intValue(1) != 0;
                                    sQLiteCursorQueryFinalized5.dispose();
                                    r9 = z4;
                                    iMax = Math.max(iIntValue5, iMax3);
                                }
                            } catch (Exception e3) {
                                e = e3;
                                str2 = null;
                                str = str2;
                                r16 = null;
                                r14 = str;
                                checkSQLException(e);
                                sQLiteDatabase2 = this.database;
                                if (sQLiteDatabase2 != null) {
                                    sQLiteDatabase2.commitTransaction();
                                }
                                if (r14 != 0) {
                                    r14.dispose();
                                }
                                if (r16 != null) {
                                    r16.dispose();
                                    return;
                                }
                                return;
                            } catch (Throwable th4) {
                                th = th4;
                                str2 = null;
                                r14 = str2;
                                r16 = null;
                                sQLiteDatabase = this.database;
                                if (sQLiteDatabase != null) {
                                }
                                if (r14 != 0) {
                                }
                                if (r16 != null) {
                                }
                                throw th;
                            }
                        }
                        ?? ExecuteFast2 = this.database.executeFast("REPLACE INTO chat_pinned_count VALUES(?, ?, ?)");
                        ExecuteFast2.requery();
                        ExecuteFast2.bindLong(1, j);
                        ExecuteFast2.bindInteger(2, iMax);
                        ExecuteFast2.bindInteger(3, r9);
                        ExecuteFast2.step();
                        ExecuteFast2.dispose();
                        obj = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda142
                            @Override // java.lang.Runnable
                            public final void run() {
                                this.f$0.lambda$updatePinnedMessages$132(j, arrayList, map, i, iMax, r9);
                            }
                        };
                    }
                    AndroidUtilities.runOnUIThread(runnable);
                    SQLiteDatabase sQLiteDatabase5 = this.database;
                    if (sQLiteDatabase5 != null) {
                        sQLiteDatabase5.commitTransaction();
                    }
                } catch (Exception e4) {
                    e = e4;
                    r16 = obj;
                } catch (Throwable th5) {
                    th = th5;
                    r16 = obj;
                }
            } catch (Exception e5) {
                e = e5;
            } catch (Throwable th6) {
                th = th6;
            }
        } catch (Exception e6) {
            e = e6;
            str = null;
        } catch (Throwable th7) {
            th = th7;
            r14 = 0;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:43:0x00b1  */
    /* JADX WARN: Removed duplicated region for block: B:45:0x00b6  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$updateRepliesCount$188(int i, long j, int i2, ArrayList arrayList, int i3) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        TLRPC.MessageReplies messageRepliesTLdeserialize;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE messages_v2 SET replies_data = ? WHERE mid = ? AND uid = ?");
            try {
                long j2 = -j;
                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.ENGLISH, "SELECT replies_data FROM messages_v2 WHERE mid = %d AND uid = %d", Integer.valueOf(i), Long.valueOf(j2)), new Object[0]);
                try {
                    if (!sQLiteCursorQueryFinalized.next() || (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0)) == null) {
                        messageRepliesTLdeserialize = null;
                    } else {
                        messageRepliesTLdeserialize = TLRPC.MessageReplies.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                        nativeByteBufferByteBufferValue.reuse();
                    }
                    sQLiteCursorQueryFinalized.dispose();
                    if (messageRepliesTLdeserialize != null) {
                        int i4 = messageRepliesTLdeserialize.replies + i2;
                        messageRepliesTLdeserialize.replies = i4;
                        if (i4 < 0) {
                            messageRepliesTLdeserialize.replies = 0;
                        }
                        if (arrayList != null) {
                            messageRepliesTLdeserialize.recent_repliers = arrayList;
                            messageRepliesTLdeserialize.flags |= 2;
                        }
                        if (i3 != 0) {
                            messageRepliesTLdeserialize.max_id = i3;
                        }
                        sQLitePreparedStatementExecuteFast.requery();
                        NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(messageRepliesTLdeserialize.getObjectSize());
                        messageRepliesTLdeserialize.serializeToStream(nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast.bindInteger(2, i);
                        sQLitePreparedStatementExecuteFast.bindLong(3, j2);
                        sQLitePreparedStatementExecuteFast.step();
                        nativeByteBuffer.reuse();
                    }
                    sQLitePreparedStatementExecuteFast.dispose();
                } catch (Exception e) {
                    e = e;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                    try {
                        checkSQLException(e);
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        if (sQLiteCursorQueryFinalized != null) {
                            sQLiteCursorQueryFinalized.dispose();
                        }
                    } catch (Throwable th) {
                        th = th;
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        if (sQLiteCursorQueryFinalized != null) {
                            sQLiteCursorQueryFinalized.dispose();
                        }
                        throw th;
                    }
                } catch (Throwable th2) {
                    th = th2;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                    if (sQLitePreparedStatement != null) {
                    }
                    if (sQLiteCursorQueryFinalized != null) {
                    }
                    throw th;
                }
            } catch (Exception e2) {
                e = e2;
                sQLiteCursorQueryFinalized = null;
            } catch (Throwable th3) {
                th = th3;
                sQLiteCursorQueryFinalized = null;
            }
        } catch (Exception e3) {
            e = e3;
            sQLiteCursorQueryFinalized = null;
        } catch (Throwable th4) {
            th = th4;
            sQLiteCursorQueryFinalized = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateRepliesMaxReadIdInternal$186(long j, long j2, int i, int i2, int i3) {
        getMessagesController().getTopicsController().updateMaxReadId(j, j2, i, i2, i3);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopicData$46(long j, TLRPC.TL_forumTopic tL_forumTopic, int i) {
        getMessagesController().getTopicsController().updateTopicInUi(j, tL_forumTopic, i);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:44:0x00b6 A[Catch: all -> 0x0035, Exception -> 0x003b, TRY_ENTER, TRY_LEAVE, TryCatch #9 {Exception -> 0x003b, all -> 0x0035, blocks: (B:5:0x001d, B:7:0x002e, B:15:0x0044, B:24:0x005f, B:44:0x00b6, B:66:0x00fb, B:14:0x0041), top: B:95:0x001d }] */
    /* JADX WARN: Removed duplicated region for block: B:54:0x00d8 A[Catch: all -> 0x00c8, Exception -> 0x00ce, TRY_LEAVE, TryCatch #11 {Exception -> 0x00ce, all -> 0x00c8, blocks: (B:47:0x00be, B:52:0x00d4, B:54:0x00d8, B:57:0x00e4, B:59:0x00e9, B:61:0x00ed, B:62:0x00f1, B:64:0x00f5), top: B:91:0x00be }] */
    /* JADX WARN: Removed duplicated region for block: B:57:0x00e4 A[Catch: all -> 0x00c8, Exception -> 0x00ce, TRY_ENTER, TryCatch #11 {Exception -> 0x00ce, all -> 0x00c8, blocks: (B:47:0x00be, B:52:0x00d4, B:54:0x00d8, B:57:0x00e4, B:59:0x00e9, B:61:0x00ed, B:62:0x00f1, B:64:0x00f5), top: B:91:0x00be }] */
    /* JADX WARN: Removed duplicated region for block: B:58:0x00e8  */
    /* JADX WARN: Removed duplicated region for block: B:61:0x00ed A[Catch: all -> 0x00c8, Exception -> 0x00ce, TryCatch #11 {Exception -> 0x00ce, all -> 0x00c8, blocks: (B:47:0x00be, B:52:0x00d4, B:54:0x00d8, B:57:0x00e4, B:59:0x00e9, B:61:0x00ed, B:62:0x00f1, B:64:0x00f5), top: B:91:0x00be }] */
    /* JADX WARN: Removed duplicated region for block: B:64:0x00f5 A[Catch: all -> 0x00c8, Exception -> 0x00ce, TRY_LEAVE, TryCatch #11 {Exception -> 0x00ce, all -> 0x00c8, blocks: (B:47:0x00be, B:52:0x00d4, B:54:0x00d8, B:57:0x00e4, B:59:0x00e9, B:61:0x00ed, B:62:0x00f1, B:64:0x00f5), top: B:91:0x00be }] */
    /* JADX WARN: Removed duplicated region for block: B:73:0x0152  */
    /* JADX WARN: Removed duplicated region for block: B:76:0x015b  */
    /* JADX WARN: Removed duplicated region for block: B:78:0x0160  */
    /* JADX WARN: Removed duplicated region for block: B:83:0x016c  */
    /* JADX WARN: Removed duplicated region for block: B:85:0x0171  */
    /* JADX WARN: Removed duplicated region for block: B:91:0x00be A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$updateTopicData$47(final int i, final TLRPC.TL_forumTopic tL_forumTopic, final long j, int i2) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLiteCursor sQLiteCursor;
        int iIntValue;
        TLRPC.TL_forumTopic tL_forumTopicTLdeserialize;
        MessagesStorage messagesStorage = this;
        if ((i & 16) != 0) {
            try {
                sQLitePreparedStatementExecuteFast = messagesStorage.database.executeFast("UPDATE topics SET total_messages_count = ? WHERE did = ? AND topic_id = ?");
                try {
                    sQLitePreparedStatementExecuteFast.requery();
                    sQLitePreparedStatementExecuteFast.bindInteger(1, tL_forumTopic.totalMessagesCount);
                    sQLitePreparedStatementExecuteFast.bindLong(2, j);
                    sQLitePreparedStatementExecuteFast.bindLong(3, messagesStorage.isMonoForum(j) ? DialogObject.getPeerDialogId(tL_forumTopic.from_id) : tL_forumTopic.id);
                    sQLitePreparedStatementExecuteFast.step();
                    sQLitePreparedStatementExecuteFast.dispose();
                    if (i == 16) {
                        sQLitePreparedStatementExecuteFast.dispose();
                        messagesStorage.database.commitTransaction();
                        return;
                    }
                } catch (Exception e) {
                    e = e;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                    sQLiteCursor = null;
                    try {
                        messagesStorage.checkSQLException(e);
                        if (sQLitePreparedStatement != null) {
                        }
                        if (sQLiteCursor != null) {
                        }
                        messagesStorage.database.commitTransaction();
                    } catch (Throwable th) {
                        th = th;
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        messagesStorage.database.commitTransaction();
                        throw th;
                    }
                } catch (Throwable th2) {
                    th = th2;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                    sQLiteCursor = null;
                    if (sQLitePreparedStatement != null) {
                    }
                    if (sQLiteCursor != null) {
                    }
                    messagesStorage.database.commitTransaction();
                    throw th;
                }
            } catch (Exception e2) {
                e = e2;
                sQLitePreparedStatement = null;
                sQLiteCursor = null;
                messagesStorage.checkSQLException(e);
                if (sQLitePreparedStatement != null) {
                }
                if (sQLiteCursor != null) {
                }
                messagesStorage.database.commitTransaction();
            } catch (Throwable th3) {
                th = th3;
                sQLitePreparedStatement = null;
                sQLiteCursor = null;
                if (sQLitePreparedStatement != null) {
                }
                if (sQLiteCursor != null) {
                }
                messagesStorage.database.commitTransaction();
                throw th;
            }
        } else {
            sQLitePreparedStatementExecuteFast = null;
        }
        SQLiteCursor sQLiteCursorQueryFinalized = messagesStorage.database.queryFinalized(String.format(Locale.US, "SELECT data, edit_date FROM topics WHERE did = %d AND topic_id = %d", Long.valueOf(j), Integer.valueOf(tL_forumTopic.id)), new Object[0]);
        try {
        } catch (Exception e3) {
            e = e3;
            sQLiteCursor = sQLiteCursorQueryFinalized;
        } catch (Throwable th4) {
            th = th4;
            sQLiteCursor = sQLiteCursorQueryFinalized;
        }
        if (sQLiteCursorQueryFinalized.next()) {
            NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
            iIntValue = sQLiteCursorQueryFinalized.intValue(1);
            if (nativeByteBufferByteBufferValue != null) {
                tL_forumTopicTLdeserialize = TLRPC.TL_forumTopic.TLdeserialize((InputSerializedData) nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(true), true);
                nativeByteBufferByteBufferValue.reuse();
            }
            sQLiteCursorQueryFinalized.dispose();
            if (tL_forumTopicTLdeserialize != null && (iIntValue == 0 || iIntValue <= i2)) {
                if ((i & 1) != 0) {
                    tL_forumTopicTLdeserialize.title = tL_forumTopic.title;
                }
                if ((i & 2) != 0) {
                    try {
                        tL_forumTopicTLdeserialize.icon_emoji_id = tL_forumTopic.icon_emoji_id;
                        tL_forumTopicTLdeserialize.flags |= 1;
                    } catch (Exception e4) {
                        e = e4;
                        sQLiteCursor = null;
                        messagesStorage = this;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        messagesStorage.checkSQLException(e);
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        if (sQLiteCursor != null) {
                            sQLiteCursor.dispose();
                        }
                        messagesStorage.database.commitTransaction();
                    } catch (Throwable th5) {
                        th = th5;
                        sQLiteCursor = null;
                        messagesStorage = this;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        if (sQLitePreparedStatement != null) {
                        }
                        if (sQLiteCursor != null) {
                        }
                        messagesStorage.database.commitTransaction();
                        throw th;
                    }
                }
                if ((i & 4) != 0) {
                    tL_forumTopicTLdeserialize.pinned = tL_forumTopic.pinned;
                    tL_forumTopicTLdeserialize.pinnedOrder = tL_forumTopic.pinnedOrder;
                }
                try {
                    int i3 = !tL_forumTopicTLdeserialize.pinned ? tL_forumTopicTLdeserialize.pinnedOrder + 1 : 0;
                    if ((i & 8) != 0) {
                        tL_forumTopicTLdeserialize.closed = tL_forumTopic.closed;
                    }
                    if ((i & 32) != 0) {
                        tL_forumTopicTLdeserialize.hidden = tL_forumTopic.hidden;
                    }
                    messagesStorage = this;
                    sQLitePreparedStatementExecuteFast = messagesStorage.database.executeFast("UPDATE topics SET data = ?, pinned = ?, hidden = ?, edit_date = ? WHERE did = ? AND topic_id = ?");
                    messagesStorage.database.beginTransaction();
                    NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(tL_forumTopicTLdeserialize.getObjectSize());
                    tL_forumTopicTLdeserialize.serializeToStream(nativeByteBuffer);
                    sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBuffer);
                    sQLitePreparedStatementExecuteFast.bindInteger(2, i3);
                    sQLitePreparedStatementExecuteFast.bindInteger(3, tL_forumTopicTLdeserialize.hidden ? 1 : 0);
                    sQLitePreparedStatementExecuteFast.bindInteger(4, i2);
                    sQLitePreparedStatementExecuteFast.bindLong(5, j);
                    sQLitePreparedStatementExecuteFast.bindLong(6, tL_forumTopicTLdeserialize.id);
                    sQLitePreparedStatementExecuteFast.step();
                    nativeByteBuffer.reuse();
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda237
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$updateTopicData$46(j, tL_forumTopic, i);
                        }
                    });
                } catch (Exception e5) {
                    e = e5;
                    messagesStorage = this;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                    sQLiteCursor = null;
                    messagesStorage.checkSQLException(e);
                    if (sQLitePreparedStatement != null) {
                    }
                    if (sQLiteCursor != null) {
                    }
                    messagesStorage.database.commitTransaction();
                } catch (Throwable th6) {
                    th = th6;
                    messagesStorage = this;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                    sQLiteCursor = null;
                    if (sQLitePreparedStatement != null) {
                    }
                    if (sQLiteCursor != null) {
                    }
                    messagesStorage.database.commitTransaction();
                    throw th;
                }
            }
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            messagesStorage.database.commitTransaction();
        }
        iIntValue = 0;
        tL_forumTopicTLdeserialize = null;
        sQLiteCursorQueryFinalized.dispose();
        if (tL_forumTopicTLdeserialize != null) {
            if ((i & 1) != 0) {
            }
            if ((i & 2) != 0) {
            }
            if ((i & 4) != 0) {
            }
            if (!tL_forumTopicTLdeserialize.pinned) {
            }
            if ((i & 8) != 0) {
            }
            if ((i & 32) != 0) {
            }
            messagesStorage = this;
            sQLitePreparedStatementExecuteFast = messagesStorage.database.executeFast("UPDATE topics SET data = ?, pinned = ?, hidden = ?, edit_date = ? WHERE did = ? AND topic_id = ?");
            messagesStorage.database.beginTransaction();
            NativeByteBuffer nativeByteBuffer2 = new NativeByteBuffer(tL_forumTopicTLdeserialize.getObjectSize());
            tL_forumTopicTLdeserialize.serializeToStream(nativeByteBuffer2);
            sQLitePreparedStatementExecuteFast.bindByteBuffer(1, nativeByteBuffer2);
            sQLitePreparedStatementExecuteFast.bindInteger(2, i3);
            sQLitePreparedStatementExecuteFast.bindInteger(3, tL_forumTopicTLdeserialize.hidden ? 1 : 0);
            sQLitePreparedStatementExecuteFast.bindInteger(4, i2);
            sQLitePreparedStatementExecuteFast.bindLong(5, j);
            sQLitePreparedStatementExecuteFast.bindLong(6, tL_forumTopicTLdeserialize.id);
            sQLitePreparedStatementExecuteFast.step();
            nativeByteBuffer2.reuse();
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda237
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$updateTopicData$46(j, tL_forumTopic, i);
                }
            });
        }
        if (sQLitePreparedStatementExecuteFast != null) {
        }
        messagesStorage.database.commitTransaction();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopicsWithReadMessages$56(HashMap map) {
        for (TopicKey topicKey : map.keySet()) {
            Integer num = (Integer) map.get(topicKey);
            num.intValue();
            try {
                this.database.executeFast(String.format(Locale.US, "UPDATE topics SET read_outbox = max((SELECT read_outbox FROM topics WHERE did = %d AND topic_id = %d), %d) WHERE did = %d AND topic_id = %d", Long.valueOf(topicKey.dialogId), Long.valueOf(topicKey.topicId), num, Long.valueOf(topicKey.dialogId), Long.valueOf(topicKey.topicId))).stepThis().dispose();
            } catch (SQLiteException e) {
                checkSQLException(e);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:64:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$updateUnreadReactionsCount$244(long j, boolean z, long j2, int i) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        int iIntValue;
        SQLiteException e;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast2;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast3 = null;
        try {
            if (j == 0) {
                try {
                    sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET unread_reactions = ? WHERE did = ?");
                } catch (SQLiteException e2) {
                    e = e2;
                }
                try {
                    sQLitePreparedStatementExecuteFast.bindInteger(1, Math.max(i, 0));
                    sQLitePreparedStatementExecuteFast.bindLong(2, j2);
                    sQLitePreparedStatementExecuteFast.step();
                    sQLitePreparedStatementExecuteFast.dispose();
                    if (i == 0) {
                        sQLitePreparedStatementExecuteFast3 = this.database.executeFast("UPDATE reaction_mentions SET state = 0 WHERE dialog_id = ?");
                        sQLitePreparedStatementExecuteFast3.bindLong(1, j2);
                        sQLitePreparedStatementExecuteFast3.step();
                        sQLitePreparedStatementExecuteFast3.dispose();
                    }
                } catch (SQLiteException e3) {
                    sQLitePreparedStatementExecuteFast3 = sQLitePreparedStatementExecuteFast;
                    e = e3;
                    e.printStackTrace();
                    if (sQLitePreparedStatementExecuteFast3 != null) {
                        sQLitePreparedStatementExecuteFast3.dispose();
                    }
                } catch (Throwable th) {
                    sQLitePreparedStatementExecuteFast3 = sQLitePreparedStatementExecuteFast;
                    th = th;
                    if (sQLitePreparedStatementExecuteFast3 != null) {
                        sQLitePreparedStatementExecuteFast3.dispose();
                    }
                    throw th;
                }
            }
            try {
                if (z) {
                    try {
                        SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.ENGLISH, "SELECT unread_reactions FROM topics WHERE did = %d AND topic_id = %d", Long.valueOf(j2), Long.valueOf(j)), new Object[0]);
                        iIntValue = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : 0;
                        sQLiteCursorQueryFinalized.dispose();
                    } catch (SQLiteException e4) {
                        e = e4;
                        e.printStackTrace();
                        if (sQLitePreparedStatementExecuteFast3 == null) {
                            return;
                        }
                        sQLitePreparedStatementExecuteFast3.dispose();
                    }
                } else {
                    iIntValue = 0;
                }
                sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE topics SET unread_reactions = ? WHERE did = ? AND topic_id = ?");
            } catch (Throwable th2) {
                th = th2;
            }
            try {
                sQLitePreparedStatementExecuteFast2.bindInteger(1, Math.max(iIntValue + i, 0));
                sQLitePreparedStatementExecuteFast2.bindLong(2, j2);
                sQLitePreparedStatementExecuteFast2.bindLong(3, j);
                sQLitePreparedStatementExecuteFast2.step();
                sQLitePreparedStatementExecuteFast2.dispose();
                if (i == 0) {
                    sQLitePreparedStatementExecuteFast3 = this.database.executeFast("UPDATE reaction_mentions_topics SET state = 0 WHERE dialog_id = ? AND topic_id = ? ");
                    sQLitePreparedStatementExecuteFast3.bindLong(1, j2);
                    sQLitePreparedStatementExecuteFast3.bindLong(2, j);
                    sQLitePreparedStatementExecuteFast3.step();
                    sQLitePreparedStatementExecuteFast3.dispose();
                    return;
                }
                return;
            } catch (SQLiteException e5) {
                e = e5;
                sQLitePreparedStatementExecuteFast3 = sQLitePreparedStatementExecuteFast2;
                e.printStackTrace();
                if (sQLitePreparedStatementExecuteFast3 == null) {
                }
                sQLitePreparedStatementExecuteFast3.dispose();
            } catch (Throwable th3) {
                th = th3;
                sQLitePreparedStatementExecuteFast3 = sQLitePreparedStatementExecuteFast2;
                if (sQLitePreparedStatementExecuteFast3 != null) {
                    sQLitePreparedStatementExecuteFast3.dispose();
                }
                throw th;
            }
            sQLitePreparedStatementExecuteFast3.dispose();
        } catch (Throwable th4) {
            th = th4;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:47:0x00bf  */
    /* JADX WARN: Removed duplicated region for block: B:49:0x00c4  */
    /* JADX WARN: Removed duplicated region for block: B:52:0x00ca  */
    /* JADX WARN: Removed duplicated region for block: B:54:0x00cf  */
    /* JADX WARN: Removed duplicated region for block: B:67:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Type inference failed for: r11v12 */
    /* JADX WARN: Type inference failed for: r11v4 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public /* synthetic */ void lambda$updateUserInfo$125(TLRPC.UserFull userFull, boolean z) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        TLRPC.User user = userFull.user;
        long j = user != null ? user.id : userFull.id;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            if (z != 0) {
                try {
                    try {
                        sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT uid FROM user_settings WHERE uid = " + j, new Object[0]);
                    } catch (Throwable th) {
                        th = th;
                        z = 0;
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        if (z != 0) {
                            z.dispose();
                        }
                        throw th;
                    }
                } catch (Exception e) {
                    e = e;
                    sQLiteCursorQueryFinalized = null;
                }
                try {
                    boolean next = sQLiteCursorQueryFinalized.next();
                    sQLiteCursorQueryFinalized.dispose();
                    if (!next) {
                        return;
                    }
                } catch (Exception e2) {
                    e = e2;
                    checkSQLException(e);
                    if (sQLitePreparedStatement != null) {
                    }
                    if (sQLiteCursorQueryFinalized == null) {
                    }
                }
            }
            SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO user_settings VALUES(?, ?, ?)");
            try {
                NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(userFull.getObjectSize());
                userFull.serializeToStream(nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.bindLong(1, j);
                sQLitePreparedStatementExecuteFast.bindByteBuffer(2, nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.bindInteger(3, userFull.pinned_msg_id);
                sQLitePreparedStatementExecuteFast.step();
                sQLitePreparedStatementExecuteFast.dispose();
                try {
                    try {
                        nativeByteBuffer.reuse();
                        if ((userFull.flags & 2048) != 0) {
                            SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE dialogs SET folder_id = ? WHERE did = ?");
                            sQLitePreparedStatementExecuteFast2.bindInteger(1, userFull.folder_id);
                            sQLitePreparedStatementExecuteFast2.bindLong(2, j);
                            sQLitePreparedStatementExecuteFast2.step();
                            sQLitePreparedStatementExecuteFast2.dispose();
                            this.unknownDialogsIds.remove(j);
                        }
                        if ((userFull.flags & LiteMode.FLAG_ANIMATED_EMOJI_KEYBOARD_NOT_PREMIUM) != 0) {
                            sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET ttl_period = ? WHERE did = ?");
                            sQLitePreparedStatementExecuteFast.bindInteger(1, userFull.ttl_period);
                            sQLitePreparedStatementExecuteFast.bindLong(2, j);
                            sQLitePreparedStatementExecuteFast.step();
                            sQLitePreparedStatementExecuteFast.dispose();
                        }
                    } catch (Exception e3) {
                        e = e3;
                        sQLitePreparedStatementExecuteFast = null;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        sQLiteCursorQueryFinalized = null;
                        checkSQLException(e);
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        if (sQLiteCursorQueryFinalized == null) {
                            sQLiteCursorQueryFinalized.dispose();
                        }
                    }
                } catch (Throwable th2) {
                    th = th2;
                    sQLitePreparedStatementExecuteFast = null;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                    z = 0;
                    if (sQLitePreparedStatement != null) {
                    }
                    if (z != 0) {
                    }
                    throw th;
                }
            } catch (Exception e4) {
                e = e4;
            } catch (Throwable th3) {
                th = th3;
            }
        } catch (Throwable th4) {
            th = th4;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateUserInfoContactBlocked$126(long j, TL_account$RequirementToContact tL_account$RequirementToContact) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        TLRPC.UserFull userFullTLdeserialize;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT uid, info, pinned FROM user_settings WHERE uid = " + j, new Object[0]);
            try {
                try {
                    boolean next = sQLiteCursorQueryFinalized.next();
                    if (next) {
                        NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(1);
                        userFullTLdeserialize = TLRPC.UserFull.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(true), true);
                        if (userFullTLdeserialize != null) {
                            userFullTLdeserialize.pinned_msg_id = sQLiteCursorQueryFinalized.intValue(2);
                        }
                        nativeByteBufferByteBufferValue.reuse();
                    } else {
                        userFullTLdeserialize = null;
                    }
                    sQLiteCursorQueryFinalized.dispose();
                    if (next && userFullTLdeserialize != null && UserObject.applyRequirementToContact(userFullTLdeserialize, tL_account$RequirementToContact)) {
                        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO user_settings VALUES(?, ?, ?)");
                        try {
                            NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(userFullTLdeserialize.getObjectSize());
                            userFullTLdeserialize.serializeToStream(nativeByteBuffer);
                            sQLitePreparedStatementExecuteFast.bindLong(1, j);
                            sQLitePreparedStatementExecuteFast.bindByteBuffer(2, nativeByteBuffer);
                            sQLitePreparedStatementExecuteFast.bindInteger(3, userFullTLdeserialize.pinned_msg_id);
                            sQLitePreparedStatementExecuteFast.step();
                            sQLitePreparedStatementExecuteFast.dispose();
                            nativeByteBuffer.reuse();
                        } catch (Exception e) {
                            e = e;
                            sQLiteCursorQueryFinalized = null;
                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                            checkSQLException(e);
                            if (sQLitePreparedStatement != null) {
                                sQLitePreparedStatement.dispose();
                            }
                            if (sQLiteCursorQueryFinalized != null) {
                                sQLiteCursorQueryFinalized.dispose();
                            }
                        } catch (Throwable th) {
                            th = th;
                            sQLiteCursorQueryFinalized = null;
                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                            if (sQLitePreparedStatement != null) {
                                sQLitePreparedStatement.dispose();
                            }
                            if (sQLiteCursorQueryFinalized != null) {
                                sQLiteCursorQueryFinalized.dispose();
                            }
                            throw th;
                        }
                    }
                } catch (Exception e2) {
                    e = e2;
                }
            } catch (Throwable th2) {
                th = th2;
            }
        } catch (Exception e3) {
            e = e3;
            sQLiteCursorQueryFinalized = null;
        } catch (Throwable th3) {
            th = th3;
            sQLiteCursorQueryFinalized = null;
        }
    }

    /* JADX WARN: Can't wrap try/catch for region: R(16:28|(4:31|32|284|29)|330|37|97|(3:310|99|(1:101))|(2:112|(3:115|116|113))|300|117|118|(13:326|119|282|120|121|(8:296|124|125|304|126|127|122|318)|331|138|290|139|324|140|141)|(8:143|292|144|145|(1:147)|308|154|(8:328|156|(6:158|(3:306|160|(0)(1:163))(1:168)|169|170|320|171)(1:183)|184|(6:186|(1:188)(1:189)|190|302|191|(3:193|(2:195|196)|332))(1:205)|206|260|261)(0))(1:153)|148|308|154|(0)(0)) */
    /* JADX WARN: Code restructure failed: missing block: B:201:0x0360, code lost:
    
        r0 = th;
     */
    /* JADX WARN: Code restructure failed: missing block: B:203:0x0364, code lost:
    
        r0 = e;
     */
    /* JADX WARN: Code restructure failed: missing block: B:204:0x0365, code lost:
    
        r19 = r15;
     */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:115:0x0209 A[Catch: all -> 0x01da, Exception -> 0x01e4, TRY_LEAVE, TryCatch #42 {Exception -> 0x01e4, all -> 0x01da, blocks: (B:99:0x01cc, B:101:0x01d2, B:108:0x01f2, B:110:0x01f6, B:113:0x01fd, B:115:0x0209), top: B:310:0x01cc }] */
    /* JADX WARN: Removed duplicated region for block: B:143:0x029c A[Catch: all -> 0x0260, Exception -> 0x0267, TRY_ENTER, TRY_LEAVE, TryCatch #45 {Exception -> 0x0267, all -> 0x0260, blocks: (B:126:0x0251, B:143:0x029c), top: B:304:0x0251 }] */
    /* JADX WARN: Removed duplicated region for block: B:153:0x02bb  */
    /* JADX WARN: Removed duplicated region for block: B:183:0x031c  */
    /* JADX WARN: Removed duplicated region for block: B:24:0x0078  */
    /* JADX WARN: Removed duplicated region for block: B:258:0x0405  */
    /* JADX WARN: Removed duplicated region for block: B:266:0x0426  */
    /* JADX WARN: Removed duplicated region for block: B:296:0x0247 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:310:0x01cc A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:328:0x02c2 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Type inference failed for: r2v0 */
    /* JADX WARN: Type inference failed for: r2v12, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r2v20 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    private TLRPC.ChatFull loadChatInfoInternal(long j, boolean z, boolean z2, boolean z3, int i) throws Throwable {
        ArrayList<Integer> arrayList;
        SQLiteCursor sQLiteCursorQueryFinalized;
        TLRPC.ChatFull chatFull;
        ArrayList<Integer> arrayList2;
        boolean z4;
        ArrayList<Integer> arrayList3;
        TLRPC.ChatFull chatFull2;
        int i2;
        boolean z5;
        SQLiteCursor sQLiteCursor;
        int i3;
        SQLiteCursor sQLiteCursor2;
        boolean z6;
        int i4;
        int i5;
        ArrayList<Long> arrayList4;
        ArrayList<Integer> arrayList5;
        ArrayList<Long> arrayList6;
        TLRPC.User userTLdeserialize;
        TLRPC.ChannelParticipant channelParticipantTLdeserialize;
        TLRPC.ChatFull chatFull3;
        SQLiteCursor sQLiteCursorQueryFinalized2;
        long j2;
        int i6;
        boolean z7;
        int i7;
        int iIntValue;
        ArrayList arrayList7;
        int i8;
        long j3 = j;
        ?? r2 = 0;
        ArrayList<TLRPC.User> arrayList8 = new ArrayList<>();
        HashMap<Integer, MessageObject> map = new HashMap<>();
        ArrayList<Integer> arrayList9 = new ArrayList<>();
        try {
            sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT info, pinned, online, inviter, links FROM chat_settings_v2 WHERE uid = " + j3, new Object[0]);
            try {
                i5 = 2;
            } catch (Exception e) {
                e = e;
                arrayList2 = arrayList9;
                z4 = false;
                chatFull = null;
            } catch (Throwable th) {
                th = th;
                arrayList = arrayList9;
                chatFull = null;
            }
        } catch (Exception e2) {
            e = e2;
            arrayList2 = arrayList9;
            z4 = false;
            sQLiteCursorQueryFinalized = null;
            chatFull = null;
        } catch (Throwable th2) {
            th = th2;
            arrayList = arrayList9;
            sQLiteCursorQueryFinalized = null;
            chatFull = null;
        }
        if (sQLiteCursorQueryFinalized.next()) {
            try {
                NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                if (nativeByteBufferByteBufferValue != null) {
                    TLRPC.ChatFull chatFullTLdeserialize = TLRPC.ChatFull.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                    try {
                        nativeByteBufferByteBufferValue.reuse();
                        chatFullTLdeserialize.pinned_msg_id = sQLiteCursorQueryFinalized.intValue(1);
                        chatFullTLdeserialize.online_count = sQLiteCursorQueryFinalized.intValue(2);
                        chatFullTLdeserialize.inviterId = sQLiteCursorQueryFinalized.longValue(3);
                        chatFullTLdeserialize.invitesCount = sQLiteCursorQueryFinalized.intValue(4);
                        chatFull = chatFullTLdeserialize;
                    } catch (Exception e3) {
                        e = e3;
                        arrayList2 = arrayList9;
                        chatFull = chatFullTLdeserialize;
                        z4 = false;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        i3 = 0;
                        try {
                            checkSQLException(e);
                            if (sQLiteCursor != null) {
                            }
                            i4 = i3;
                            z6 = z4;
                            getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                            return chatFull;
                        } catch (Throwable th3) {
                            th = th3;
                            arrayList3 = arrayList2;
                            sQLiteCursor2 = sQLiteCursor;
                            i2 = i3;
                            z5 = z4;
                            sQLiteCursorQueryFinalized = sQLiteCursor2;
                            chatFull2 = chatFull;
                            if (sQLiteCursorQueryFinalized != null) {
                            }
                            getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                            throw th;
                        }
                    } catch (Throwable th4) {
                        th = th4;
                        arrayList = arrayList9;
                        chatFull = chatFullTLdeserialize;
                        arrayList3 = arrayList;
                        chatFull2 = chatFull;
                        i2 = 0;
                        z5 = false;
                        if (sQLiteCursorQueryFinalized != null) {
                        }
                        getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                        throw th;
                    }
                } else {
                    chatFull = null;
                }
                try {
                    sQLiteCursorQueryFinalized.dispose();
                    try {
                        arrayList4 = new ArrayList<>();
                    } catch (Exception e4) {
                        e = e4;
                        arrayList2 = arrayList9;
                        z4 = false;
                        sQLiteCursorQueryFinalized = null;
                    } catch (Throwable th5) {
                        th = th5;
                        arrayList = arrayList9;
                        sQLiteCursorQueryFinalized = null;
                    }
                } catch (Exception e5) {
                    e = e5;
                    arrayList2 = arrayList9;
                } catch (Throwable th6) {
                    th = th6;
                    arrayList = arrayList9;
                }
            } catch (Exception e6) {
                e = e6;
                arrayList2 = arrayList9;
                chatFull = null;
            } catch (Throwable th7) {
                th = th7;
                arrayList = arrayList9;
                chatFull = null;
            }
            if (chatFull instanceof TLRPC.TL_chatFull) {
                for (int i9 = 0; i9 < chatFull.participants.participants.size(); i9++) {
                    try {
                        arrayList4.add(Long.valueOf(((TLRPC.ChatParticipant) chatFull.participants.participants.get(i9)).user_id));
                    } catch (Exception e7) {
                        e = e7;
                        arrayList2 = arrayList9;
                        sQLiteCursorQueryFinalized = null;
                        z4 = false;
                        sQLiteCursor = sQLiteCursorQueryFinalized;
                        i3 = 0;
                        checkSQLException(e);
                        if (sQLiteCursor != null) {
                        }
                        i4 = i3;
                        z6 = z4;
                        getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                        return chatFull;
                    } catch (Throwable th8) {
                        th = th8;
                        arrayList = arrayList9;
                        sQLiteCursorQueryFinalized = null;
                        arrayList3 = arrayList;
                        chatFull2 = chatFull;
                        i2 = 0;
                        z5 = false;
                        if (sQLiteCursorQueryFinalized != null) {
                        }
                        getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                        throw th;
                    }
                }
                arrayList6 = arrayList4;
                arrayList5 = arrayList9;
                if (chatFull != null) {
                    try {
                        long j4 = chatFull.inviterId;
                        if (j4 != 0) {
                            arrayList6.add(Long.valueOf(j4));
                        }
                    } catch (Exception e8) {
                        e = e8;
                        arrayList2 = arrayList5;
                        i3 = 0;
                        sQLiteCursor = null;
                        z4 = false;
                        chatFull3 = chatFull;
                        chatFull = chatFull3;
                        checkSQLException(e);
                        if (sQLiteCursor != null) {
                        }
                        i4 = i3;
                        z6 = z4;
                        getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                        return chatFull;
                    } catch (Throwable th9) {
                        th = th9;
                        arrayList3 = arrayList5;
                        i3 = 0;
                        z4 = false;
                        sQLiteCursor2 = null;
                        i2 = i3;
                        z5 = z4;
                        sQLiteCursorQueryFinalized = sQLiteCursor2;
                        chatFull2 = chatFull;
                        if (sQLiteCursorQueryFinalized != null) {
                        }
                        getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                        throw th;
                    }
                }
                if (chatFull != null && (arrayList7 = chatFull.recent_requesters) != null && !arrayList7.isEmpty()) {
                    for (i8 = 0; i8 < Math.min(3, chatFull.recent_requesters.size()); i8++) {
                        ArrayList arrayList10 = chatFull.recent_requesters;
                        arrayList6.add((Long) arrayList10.get((arrayList10.size() - 1) - i8));
                    }
                }
                try {
                    getUsersInternal(arrayList6, arrayList8);
                    j2 = -j;
                } catch (Exception e9) {
                    e = e9;
                } catch (Throwable th10) {
                    th = th10;
                }
                try {
                    try {
                        int i10 = 0;
                        sQLiteCursorQueryFinalized2 = getMessagesStorage().getDatabase().queryFinalized(String.format(Locale.US, "SELECT mid FROM chat_pinned_v2 WHERE uid = %d ORDER BY mid DESC", Long.valueOf(j2)), new Object[0]);
                        while (sQLiteCursorQueryFinalized2.next()) {
                            try {
                                try {
                                    iIntValue = sQLiteCursorQueryFinalized2.intValue(i10);
                                    arrayList2 = arrayList5;
                                } catch (Exception e10) {
                                    e = e10;
                                    arrayList2 = arrayList5;
                                    sQLiteCursor = sQLiteCursorQueryFinalized2;
                                    chatFull3 = chatFull;
                                    i3 = 0;
                                    z4 = false;
                                    chatFull = chatFull3;
                                    checkSQLException(e);
                                    if (sQLiteCursor != null) {
                                    }
                                    i4 = i3;
                                    z6 = z4;
                                    getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                                    return chatFull;
                                } catch (Throwable th11) {
                                    th = th11;
                                    arrayList2 = arrayList5;
                                    arrayList3 = arrayList2;
                                    z4 = false;
                                    sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                                    i3 = 0;
                                    i2 = i3;
                                    z5 = z4;
                                    sQLiteCursorQueryFinalized = sQLiteCursor2;
                                    chatFull2 = chatFull;
                                    if (sQLiteCursorQueryFinalized != null) {
                                    }
                                    getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                                    throw th;
                                }
                                try {
                                    arrayList2.add(Integer.valueOf(iIntValue));
                                    map.put(Integer.valueOf(iIntValue), null);
                                    arrayList5 = arrayList2;
                                    i10 = 0;
                                } catch (Exception e11) {
                                    e = e11;
                                    sQLiteCursor = sQLiteCursorQueryFinalized2;
                                    chatFull3 = chatFull;
                                    i3 = 0;
                                    z4 = false;
                                    chatFull = chatFull3;
                                    checkSQLException(e);
                                    if (sQLiteCursor != null) {
                                    }
                                    i4 = i3;
                                    z6 = z4;
                                    getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                                    return chatFull;
                                } catch (Throwable th12) {
                                    th = th12;
                                    arrayList3 = arrayList2;
                                    z4 = false;
                                    sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                                    i3 = 0;
                                    i2 = i3;
                                    z5 = z4;
                                    sQLiteCursorQueryFinalized = sQLiteCursor2;
                                    chatFull2 = chatFull;
                                    if (sQLiteCursorQueryFinalized != null) {
                                    }
                                    getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                                    throw th;
                                }
                            } catch (Exception e12) {
                                e = e12;
                                arrayList2 = arrayList5;
                                z4 = false;
                                chatFull3 = chatFull;
                                sQLiteCursor = sQLiteCursorQueryFinalized2;
                                i3 = 0;
                                chatFull = chatFull3;
                                checkSQLException(e);
                                if (sQLiteCursor != null) {
                                }
                                i4 = i3;
                                z6 = z4;
                                getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                                return chatFull;
                            } catch (Throwable th13) {
                                th = th13;
                                arrayList2 = arrayList5;
                                z4 = false;
                                arrayList3 = arrayList2;
                                sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                                i3 = 0;
                                i2 = i3;
                                z5 = z4;
                                sQLiteCursorQueryFinalized = sQLiteCursor2;
                                chatFull2 = chatFull;
                                if (sQLiteCursorQueryFinalized != null) {
                                }
                                getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                                throw th;
                            }
                        }
                        arrayList2 = arrayList5;
                        try {
                            sQLiteCursorQueryFinalized2.dispose();
                        } catch (Exception e13) {
                            e = e13;
                            chatFull3 = chatFull;
                        } catch (Throwable th14) {
                            th = th14;
                        }
                    } catch (Exception e14) {
                        e = e14;
                        arrayList2 = arrayList5;
                        sQLiteCursorQueryFinalized2 = null;
                    } catch (Throwable th15) {
                        th = th15;
                        sQLiteCursorQueryFinalized2 = null;
                        z4 = false;
                        arrayList3 = arrayList5;
                        chatFull = chatFull;
                    }
                    try {
                        sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT count, end FROM chat_pinned_count WHERE uid = " + j2, new Object[0]);
                    } catch (Exception e15) {
                        e = e15;
                        chatFull3 = chatFull;
                        sQLiteCursorQueryFinalized2 = null;
                        z4 = false;
                        sQLiteCursor = sQLiteCursorQueryFinalized2;
                        i3 = 0;
                        chatFull = chatFull3;
                        checkSQLException(e);
                        if (sQLiteCursor != null) {
                        }
                        i4 = i3;
                        z6 = z4;
                        getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                        return chatFull;
                    } catch (Throwable th16) {
                        th = th16;
                        sQLiteCursorQueryFinalized2 = null;
                        z4 = false;
                        arrayList3 = arrayList2;
                        sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                        i3 = 0;
                        i2 = i3;
                        z5 = z4;
                        sQLiteCursorQueryFinalized = sQLiteCursor2;
                        chatFull2 = chatFull;
                        if (sQLiteCursorQueryFinalized != null) {
                        }
                        getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                        throw th;
                    }
                } catch (Exception e16) {
                    e = e16;
                    arrayList2 = arrayList5;
                    sQLiteCursorQueryFinalized2 = null;
                    z4 = false;
                    chatFull3 = chatFull;
                    sQLiteCursor = sQLiteCursorQueryFinalized2;
                    i3 = 0;
                    chatFull = chatFull3;
                    checkSQLException(e);
                    if (sQLiteCursor != null) {
                    }
                    i4 = i3;
                    z6 = z4;
                    getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                    return chatFull;
                } catch (Throwable th17) {
                    th = th17;
                    arrayList2 = arrayList5;
                    sQLiteCursorQueryFinalized2 = null;
                    z4 = false;
                    arrayList3 = arrayList2;
                    sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                    i3 = 0;
                    i2 = i3;
                    z5 = z4;
                    sQLiteCursorQueryFinalized = sQLiteCursor2;
                    chatFull2 = chatFull;
                    if (sQLiteCursorQueryFinalized != null) {
                    }
                    getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                    throw th;
                }
                if (sQLiteCursorQueryFinalized2.next()) {
                    i6 = 0;
                } else {
                    int iIntValue2 = sQLiteCursorQueryFinalized2.intValue(0);
                    try {
                        i6 = iIntValue2;
                        z7 = sQLiteCursorQueryFinalized2.intValue(1) != 0;
                        sQLiteCursorQueryFinalized2.dispose();
                    } catch (Exception e17) {
                        e = e17;
                        sQLiteCursor = sQLiteCursorQueryFinalized2;
                        chatFull3 = chatFull;
                        i3 = iIntValue2;
                        z4 = false;
                        chatFull = chatFull3;
                        checkSQLException(e);
                        if (sQLiteCursor != null) {
                        }
                        i4 = i3;
                        z6 = z4;
                        getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                        return chatFull;
                    } catch (Throwable th18) {
                        th = th18;
                        arrayList3 = arrayList2;
                        z4 = false;
                        sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                        i3 = iIntValue2;
                        i2 = i3;
                        z5 = z4;
                        sQLiteCursorQueryFinalized = sQLiteCursor2;
                        chatFull2 = chatFull;
                        if (sQLiteCursorQueryFinalized != null) {
                        }
                        getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                        throw th;
                    }
                    if (chatFull != null) {
                        try {
                            if (chatFull.pinned_msg_id != 0) {
                                if (arrayList2.isEmpty()) {
                                    i7 = 0;
                                } else {
                                    try {
                                        i7 = 0;
                                        if (chatFull.pinned_msg_id <= arrayList2.get(0).intValue()) {
                                            sQLiteCursorQueryFinalized2 = null;
                                        }
                                    } catch (Exception e18) {
                                        e = e18;
                                        i3 = i6;
                                        z4 = z7;
                                        chatFull3 = chatFull;
                                        sQLiteCursor = null;
                                        chatFull = chatFull3;
                                        checkSQLException(e);
                                        if (sQLiteCursor != null) {
                                        }
                                        i4 = i3;
                                        z6 = z4;
                                        getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                                        return chatFull;
                                    } catch (Throwable th19) {
                                        th = th19;
                                        i3 = i6;
                                        arrayList3 = arrayList2;
                                        z4 = z7;
                                        sQLiteCursor2 = null;
                                        i2 = i3;
                                        z5 = z4;
                                        sQLiteCursorQueryFinalized = sQLiteCursor2;
                                        chatFull2 = chatFull;
                                        if (sQLiteCursorQueryFinalized != null) {
                                        }
                                        getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                                        throw th;
                                    }
                                }
                                arrayList2.clear();
                                arrayList2.add(Integer.valueOf(chatFull.pinned_msg_id));
                                sQLiteCursorQueryFinalized2 = null;
                                try {
                                    map.put(Integer.valueOf(chatFull.pinned_msg_id), null);
                                } catch (Exception e19) {
                                    e = e19;
                                    z4 = z7;
                                    chatFull3 = chatFull;
                                    int i11 = i6;
                                    sQLiteCursor = sQLiteCursorQueryFinalized2;
                                    i3 = i11;
                                    chatFull = chatFull3;
                                    checkSQLException(e);
                                    if (sQLiteCursor != null) {
                                    }
                                    i4 = i3;
                                    z6 = z4;
                                    getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                                    return chatFull;
                                } catch (Throwable th20) {
                                    th = th20;
                                    arrayList3 = arrayList2;
                                    z4 = z7;
                                    sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                                    i3 = i6;
                                    i2 = i3;
                                    z5 = z4;
                                    sQLiteCursorQueryFinalized = sQLiteCursor2;
                                    chatFull2 = chatFull;
                                    if (sQLiteCursorQueryFinalized != null) {
                                    }
                                    getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                                    throw th;
                                }
                            } else {
                                sQLiteCursorQueryFinalized2 = null;
                                i7 = 0;
                            }
                            if (arrayList2.isEmpty()) {
                                chatFull3 = chatFull;
                            } else {
                                chatFull3 = chatFull;
                                try {
                                    ArrayList<MessageObject> arrayListLoadPinnedMessages = getMediaDataController().loadPinnedMessages(j2, z ? j : 0L, arrayList2, false);
                                    if (arrayListLoadPinnedMessages != null) {
                                        int size = arrayListLoadPinnedMessages.size();
                                        while (i7 < size) {
                                            MessageObject messageObject = arrayListLoadPinnedMessages.get(i7);
                                            map.put(Integer.valueOf(messageObject.getId()), messageObject);
                                            i7++;
                                        }
                                    }
                                } catch (Exception e20) {
                                    e = e20;
                                    z4 = z7;
                                    int i112 = i6;
                                    sQLiteCursor = sQLiteCursorQueryFinalized2;
                                    i3 = i112;
                                    chatFull = chatFull3;
                                    checkSQLException(e);
                                    if (sQLiteCursor != null) {
                                    }
                                    i4 = i3;
                                    z6 = z4;
                                    getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                                    return chatFull;
                                } catch (Throwable th21) {
                                    th = th21;
                                    arrayList3 = arrayList2;
                                    z4 = z7;
                                    chatFull = chatFull3;
                                    sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                                    i3 = i6;
                                    i2 = i3;
                                    z5 = z4;
                                    sQLiteCursorQueryFinalized = sQLiteCursor2;
                                    chatFull2 = chatFull;
                                    if (sQLiteCursorQueryFinalized != null) {
                                    }
                                    getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                                    throw th;
                                }
                            }
                            i4 = i6;
                            z6 = z7;
                            chatFull = chatFull3;
                        } catch (Exception e21) {
                            e = e21;
                            sQLiteCursorQueryFinalized2 = null;
                        } catch (Throwable th22) {
                            th = th22;
                            sQLiteCursorQueryFinalized2 = null;
                        }
                        getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                        return chatFull;
                    }
                }
                sQLiteCursorQueryFinalized2.dispose();
                if (chatFull != null) {
                }
            } else {
                if (chatFull instanceof TLRPC.TL_channelFull) {
                    try {
                        SQLiteDatabase sQLiteDatabase = this.database;
                        StringBuilder sb = new StringBuilder();
                        sb.append("SELECT us.data, us.status, cu.data, cu.date FROM channel_users_v2 as cu LEFT JOIN users as us ON us.uid = cu.uid WHERE cu.did = ");
                        ArrayList<Long> arrayList11 = arrayList4;
                        sb.append(-j3);
                        sb.append(" ORDER BY cu.date DESC");
                        SQLiteCursor sQLiteCursorQueryFinalized3 = sQLiteDatabase.queryFinalized(sb.toString(), new Object[0]);
                        try {
                            try {
                                chatFull.participants = new TLRPC.TL_chatParticipants();
                                while (sQLiteCursorQueryFinalized3.next()) {
                                    try {
                                        NativeByteBuffer nativeByteBufferByteBufferValue2 = sQLiteCursorQueryFinalized3.byteBufferValue(r2);
                                        if (nativeByteBufferByteBufferValue2 != 0) {
                                            try {
                                                userTLdeserialize = TLRPC.User.TLdeserialize(nativeByteBufferByteBufferValue2, nativeByteBufferByteBufferValue2.readInt32(r2), r2);
                                                nativeByteBufferByteBufferValue2.reuse();
                                            } catch (Throwable th23) {
                                                th = th23;
                                                sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized3;
                                                arrayList = arrayList9;
                                                arrayList3 = arrayList;
                                                chatFull2 = chatFull;
                                                i2 = 0;
                                                z5 = false;
                                                if (sQLiteCursorQueryFinalized != null) {
                                                }
                                                getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                                                throw th;
                                            }
                                        } else {
                                            userTLdeserialize = null;
                                        }
                                        NativeByteBuffer nativeByteBufferByteBufferValue3 = sQLiteCursorQueryFinalized3.byteBufferValue(i5);
                                        if (nativeByteBufferByteBufferValue3 != 0) {
                                            channelParticipantTLdeserialize = TLRPC.ChannelParticipant.TLdeserialize(nativeByteBufferByteBufferValue3, nativeByteBufferByteBufferValue3.readInt32(r2), r2);
                                            nativeByteBufferByteBufferValue3.reuse();
                                        } else {
                                            channelParticipantTLdeserialize = null;
                                        }
                                        if (channelParticipantTLdeserialize != null) {
                                            arrayList5 = arrayList9;
                                            try {
                                                try {
                                                    if (channelParticipantTLdeserialize.user_id == getUserConfig().clientUserId) {
                                                        userTLdeserialize = getUserConfig().getCurrentUser();
                                                    }
                                                } catch (Throwable th24) {
                                                    th = th24;
                                                    sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized3;
                                                    arrayList = arrayList5;
                                                    arrayList3 = arrayList;
                                                    chatFull2 = chatFull;
                                                    i2 = 0;
                                                    z5 = false;
                                                    if (sQLiteCursorQueryFinalized != null) {
                                                    }
                                                    getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                                                    throw th;
                                                }
                                            } catch (Exception e22) {
                                                e = e22;
                                                try {
                                                    checkSQLException(e);
                                                    j3 = j;
                                                    arrayList9 = arrayList5;
                                                    r2 = 0;
                                                    i5 = 2;
                                                } catch (Exception e23) {
                                                    e = e23;
                                                    sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized3;
                                                    arrayList2 = arrayList5;
                                                    z4 = false;
                                                    sQLiteCursor = sQLiteCursorQueryFinalized;
                                                    i3 = 0;
                                                    checkSQLException(e);
                                                    if (sQLiteCursor != null) {
                                                        sQLiteCursor.dispose();
                                                    }
                                                    i4 = i3;
                                                    z6 = z4;
                                                    getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                                                    return chatFull;
                                                }
                                            }
                                        } else {
                                            arrayList5 = arrayList9;
                                        }
                                        if (userTLdeserialize != null && channelParticipantTLdeserialize != null) {
                                            TLRPC.UserStatus userStatus = userTLdeserialize.status;
                                            if (userStatus != null) {
                                                userStatus.expires = sQLiteCursorQueryFinalized3.intValue(1);
                                            }
                                            arrayList8.add(userTLdeserialize);
                                            channelParticipantTLdeserialize.date = sQLiteCursorQueryFinalized3.intValue(3);
                                            TLRPC.TL_chatChannelParticipant tL_chatChannelParticipant = new TLRPC.TL_chatChannelParticipant();
                                            tL_chatChannelParticipant.user_id = MessageObject.getPeerId(channelParticipantTLdeserialize.peer);
                                            tL_chatChannelParticipant.date = channelParticipantTLdeserialize.date;
                                            tL_chatChannelParticipant.inviter_id = channelParticipantTLdeserialize.inviter_id;
                                            tL_chatChannelParticipant.channelParticipant = channelParticipantTLdeserialize;
                                            chatFull.participants.participants.add(tL_chatChannelParticipant);
                                        }
                                    } catch (Exception e24) {
                                        e = e24;
                                        arrayList5 = arrayList9;
                                    }
                                    j3 = j;
                                    arrayList9 = arrayList5;
                                    r2 = 0;
                                    i5 = 2;
                                }
                                arrayList5 = arrayList9;
                                sQLiteCursorQueryFinalized3.dispose();
                                int i12 = 0;
                                while (i12 < chatFull.bot_info.size()) {
                                    try {
                                        ArrayList<Long> arrayList12 = arrayList11;
                                        arrayList12.add(Long.valueOf(((TL_bots$BotInfo) chatFull.bot_info.get(i12)).user_id));
                                        i12++;
                                        arrayList11 = arrayList12;
                                    } catch (Exception e25) {
                                        e = e25;
                                        arrayList2 = arrayList5;
                                        z4 = false;
                                        sQLiteCursorQueryFinalized = null;
                                        sQLiteCursor = sQLiteCursorQueryFinalized;
                                        i3 = 0;
                                        checkSQLException(e);
                                        if (sQLiteCursor != null) {
                                        }
                                        i4 = i3;
                                        z6 = z4;
                                        getMessagesController().processChatInfo(j, chatFull, arrayList8, true, z2, z3, arrayList2, map, i4, z6);
                                        return chatFull;
                                    } catch (Throwable th25) {
                                        th = th25;
                                        arrayList = arrayList5;
                                        sQLiteCursorQueryFinalized = null;
                                        arrayList3 = arrayList;
                                        chatFull2 = chatFull;
                                        i2 = 0;
                                        z5 = false;
                                        if (sQLiteCursorQueryFinalized != null) {
                                        }
                                        getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
                                        throw th;
                                    }
                                }
                                arrayList6 = arrayList11;
                            } catch (Throwable th26) {
                                th = th26;
                                arrayList5 = arrayList9;
                            }
                        } catch (Exception e26) {
                            e = e26;
                            arrayList5 = arrayList9;
                        }
                    } catch (Exception e27) {
                        e = e27;
                        arrayList5 = arrayList9;
                    } catch (Throwable th27) {
                        th = th27;
                        arrayList5 = arrayList9;
                    }
                } else {
                    arrayList6 = arrayList4;
                    arrayList5 = arrayList9;
                }
                if (chatFull != null) {
                }
                if (chatFull != null) {
                    while (i8 < Math.min(3, chatFull.recent_requesters.size())) {
                    }
                }
                getUsersInternal(arrayList6, arrayList8);
                j2 = -j;
                int i102 = 0;
                sQLiteCursorQueryFinalized2 = getMessagesStorage().getDatabase().queryFinalized(String.format(Locale.US, "SELECT mid FROM chat_pinned_v2 WHERE uid = %d ORDER BY mid DESC", Long.valueOf(j2)), new Object[0]);
                while (sQLiteCursorQueryFinalized2.next()) {
                }
                arrayList2 = arrayList5;
                sQLiteCursorQueryFinalized2.dispose();
                sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT count, end FROM chat_pinned_count WHERE uid = " + j2, new Object[0]);
                if (sQLiteCursorQueryFinalized2.next()) {
                }
                sQLiteCursorQueryFinalized2.dispose();
                if (chatFull != null) {
                }
            }
        }
        if (sQLiteCursorQueryFinalized != null) {
            sQLiteCursorQueryFinalized.dispose();
        }
        getMessagesController().processChatInfo(j, chatFull2, arrayList8, true, z2, z3, arrayList3, map, i2, z5);
        throw th;
    }

    private void loadDialogFilters() {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda38
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$loadDialogFilters$64();
            }
        });
    }

    /* JADX WARN: Removed duplicated region for block: B:194:0x03f0  */
    /* JADX WARN: Removed duplicated region for block: B:82:0x01c1 A[Catch: all -> 0x0067, Exception -> 0x006b, TryCatch #3 {Exception -> 0x006b, blocks: (B:4:0x002e, B:6:0x0035, B:8:0x005c, B:17:0x0070, B:21:0x008f, B:25:0x00a6, B:29:0x00af, B:31:0x00c2, B:33:0x00ca, B:34:0x00cf, B:36:0x00eb, B:37:0x00f2, B:39:0x0106, B:41:0x0111, B:43:0x0136, B:44:0x0138, B:80:0x01bb, B:82:0x01c1, B:84:0x01c7, B:85:0x01ca, B:87:0x01d0, B:89:0x01de, B:91:0x01ed, B:93:0x01f3, B:95:0x01fd, B:99:0x0213, B:96:0x0203, B:98:0x020e, B:77:0x01ae, B:78:0x01b2, B:100:0x0217), top: B:202:0x002e }] */
    /* JADX WARN: Removed duplicated region for block: B:87:0x01d0 A[Catch: all -> 0x0067, Exception -> 0x006b, TryCatch #3 {Exception -> 0x006b, blocks: (B:4:0x002e, B:6:0x0035, B:8:0x005c, B:17:0x0070, B:21:0x008f, B:25:0x00a6, B:29:0x00af, B:31:0x00c2, B:33:0x00ca, B:34:0x00cf, B:36:0x00eb, B:37:0x00f2, B:39:0x0106, B:41:0x0111, B:43:0x0136, B:44:0x0138, B:80:0x01bb, B:82:0x01c1, B:84:0x01c7, B:85:0x01ca, B:87:0x01d0, B:89:0x01de, B:91:0x01ed, B:93:0x01f3, B:95:0x01fd, B:99:0x0213, B:96:0x0203, B:98:0x020e, B:77:0x01ae, B:78:0x01b2, B:100:0x0217), top: B:202:0x002e }] */
    /* JADX WARN: Removed duplicated region for block: B:91:0x01ed A[Catch: all -> 0x0067, Exception -> 0x006b, TryCatch #3 {Exception -> 0x006b, blocks: (B:4:0x002e, B:6:0x0035, B:8:0x005c, B:17:0x0070, B:21:0x008f, B:25:0x00a6, B:29:0x00af, B:31:0x00c2, B:33:0x00ca, B:34:0x00cf, B:36:0x00eb, B:37:0x00f2, B:39:0x0106, B:41:0x0111, B:43:0x0136, B:44:0x0138, B:80:0x01bb, B:82:0x01c1, B:84:0x01c7, B:85:0x01ca, B:87:0x01d0, B:89:0x01de, B:91:0x01ed, B:93:0x01f3, B:95:0x01fd, B:99:0x0213, B:96:0x0203, B:98:0x020e, B:77:0x01ae, B:78:0x01b2, B:100:0x0217), top: B:202:0x002e }] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    private TLRPC.messages_Dialogs loadDialogsByIds(String str, ArrayList<Long> arrayList, ArrayList<Long> arrayList2, ArrayList<Integer> arrayList3) throws Throwable {
        SQLiteCursor sQLiteCursor;
        SQLiteCursor sQLiteCursorQueryFinalized;
        TLRPC.Dialog dialog;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        NativeByteBuffer nativeByteBufferByteBufferValue2;
        TLRPC.TL_messages_dialogs tL_messages_dialogs;
        LongSparseArray longSparseArray;
        Long lValueOf;
        ArrayList<Long> arrayList4;
        NativeByteBuffer nativeByteBufferByteBufferValue3;
        int i = 2;
        int i2 = 0;
        int i3 = 1;
        TLRPC.TL_messages_dialogs tL_messages_dialogs2 = new TLRPC.TL_messages_dialogs();
        LongSparseArray longSparseArray2 = new LongSparseArray();
        LongSparseArray longSparseArray3 = new LongSparseArray();
        try {
            SQLiteCursor sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT d.did, d.last_mid, d.unread_count, d.date, m.data, m.read_state, m.mid, m.send_state, s.flags, m.date, d.pts, d.inbox_max, d.outbox_max, m.replydata, d.pinned, d.unread_count_i, d.flags, d.folder_id, d.data, d.unread_reactions, d.last_mid_group, d.ttl_period FROM dialogs as d LEFT JOIN messages_v2 as m ON d.last_mid = m.mid AND d.did = m.uid LEFT JOIN dialog_settings as s ON d.did = s.did WHERE d.did IN (%s) ORDER BY d.pinned DESC, d.date DESC", str), new Object[0]);
            while (sQLiteCursorQueryFinalized2.next()) {
                try {
                    try {
                        long jLongValue = sQLiteCursorQueryFinalized2.longValue(i2);
                        TLRPC.TL_dialog tL_dialog = new TLRPC.TL_dialog();
                        tL_dialog.id = jLongValue;
                        tL_dialog.top_message = sQLiteCursorQueryFinalized2.intValue(i3);
                        tL_dialog.unread_count = sQLiteCursorQueryFinalized2.intValue(i);
                        tL_dialog.last_message_date = sQLiteCursorQueryFinalized2.intValue(3);
                        int iIntValue = sQLiteCursorQueryFinalized2.intValue(10);
                        tL_dialog.pts = iIntValue;
                        tL_dialog.flags = (iIntValue == 0 || DialogObject.isUserDialog(tL_dialog.id)) ? 0 : 1;
                        tL_dialog.read_inbox_max_id = sQLiteCursorQueryFinalized2.intValue(11);
                        tL_dialog.read_outbox_max_id = sQLiteCursorQueryFinalized2.intValue(12);
                        int iIntValue2 = sQLiteCursorQueryFinalized2.intValue(14);
                        tL_dialog.pinnedNum = iIntValue2;
                        tL_dialog.pinned = iIntValue2 != 0;
                        tL_dialog.unread_mentions_count = sQLiteCursorQueryFinalized2.intValue(15);
                        int iIntValue3 = sQLiteCursorQueryFinalized2.intValue(16);
                        tL_dialog.unread_mark = (iIntValue3 & 1) != 0;
                        tL_dialog.view_forum_as_messages = (iIntValue3 & 64) != 0;
                        long jLongValue2 = sQLiteCursorQueryFinalized2.longValue(8);
                        TLRPC.TL_peerNotifySettings tL_peerNotifySettings = new TLRPC.TL_peerNotifySettings();
                        tL_dialog.notify_settings = tL_peerNotifySettings;
                        if ((((int) jLongValue2) & i3) != 0) {
                            int i4 = (int) (jLongValue2 >> 32);
                            tL_peerNotifySettings.mute_until = i4;
                            if (i4 == 0) {
                                tL_peerNotifySettings.mute_until = Integer.MAX_VALUE;
                            }
                        }
                        tL_dialog.folder_id = sQLiteCursorQueryFinalized2.intValue(17);
                        tL_dialog.unread_reactions_count = sQLiteCursorQueryFinalized2.intValue(19);
                        long jLongValue3 = sQLiteCursorQueryFinalized2.longValue(20);
                        if (jLongValue3 != 0) {
                            longSparseArray3.append(jLongValue, Long.valueOf(jLongValue3));
                        }
                        tL_dialog.ttl_period = sQLiteCursorQueryFinalized2.intValue(21);
                        tL_messages_dialogs2.dialogs.add(tL_dialog);
                        NativeByteBuffer nativeByteBufferByteBufferValue4 = sQLiteCursorQueryFinalized2.byteBufferValue(4);
                        if (nativeByteBufferByteBufferValue4 != null) {
                            TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue4, nativeByteBufferByteBufferValue4.readInt32(false), false);
                            if (messageTLdeserialize != null) {
                                TLRPC.TL_messages_dialogs tL_messages_dialogs3 = tL_messages_dialogs2;
                                messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue4, getUserConfig().clientUserId);
                                nativeByteBufferByteBufferValue4.reuse();
                                MessageObject.setUnreadFlags(messageTLdeserialize, sQLiteCursorQueryFinalized2.intValue(5));
                                messageTLdeserialize.id = sQLiteCursorQueryFinalized2.intValue(6);
                                int iIntValue4 = sQLiteCursorQueryFinalized2.intValue(9);
                                if (iIntValue4 != 0) {
                                    tL_dialog.last_message_date = iIntValue4;
                                }
                                messageTLdeserialize.send_state = sQLiteCursorQueryFinalized2.intValue(7);
                                messageTLdeserialize.dialog_id = tL_dialog.id;
                                tL_messages_dialogs = tL_messages_dialogs3;
                                tL_messages_dialogs.messages.add(messageTLdeserialize);
                                addUsersAndChatsFromMessage(messageTLdeserialize, arrayList, arrayList2, null);
                                try {
                                    TLRPC.MessageReplyHeader messageReplyHeader = messageTLdeserialize.reply_to;
                                    if (messageReplyHeader != null && messageReplyHeader.reply_to_msg_id != 0) {
                                        TLRPC.MessageAction messageAction = messageTLdeserialize.action;
                                        if ((messageAction instanceof TLRPC.TL_messageActionPinMessage) || (messageAction instanceof TLRPC.TL_messageActionPaymentSent) || (messageAction instanceof TLRPC.TL_messageActionGameScore) || (messageAction instanceof TLRPC.TL_messageActionSuggestedPostApproval)) {
                                            if (sQLiteCursorQueryFinalized2.isNull(13) || (nativeByteBufferByteBufferValue3 = sQLiteCursorQueryFinalized2.byteBufferValue(13)) == null) {
                                                longSparseArray = longSparseArray3;
                                            } else {
                                                TLRPC.Message messageTLdeserialize2 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue3, nativeByteBufferByteBufferValue3.readInt32(false), false);
                                                messageTLdeserialize.replyMessage = messageTLdeserialize2;
                                                longSparseArray = longSparseArray3;
                                                try {
                                                    messageTLdeserialize2.readAttachPath(nativeByteBufferByteBufferValue3, getUserConfig().clientUserId);
                                                    nativeByteBufferByteBufferValue3.reuse();
                                                    TLRPC.Message message = messageTLdeserialize.replyMessage;
                                                    if (message != null) {
                                                        addUsersAndChatsFromMessage(message, arrayList, arrayList2, null);
                                                    }
                                                } catch (Exception e) {
                                                    e = e;
                                                    checkSQLException(e);
                                                    if (!DialogObject.isEncryptedDialog(jLongValue)) {
                                                    }
                                                    if (DialogObject.isEncryptedDialog(jLongValue)) {
                                                    }
                                                    tL_messages_dialogs2 = tL_messages_dialogs;
                                                    longSparseArray3 = longSparseArray;
                                                    i = 2;
                                                    i2 = 0;
                                                    i3 = 1;
                                                }
                                            }
                                            if (messageTLdeserialize.replyMessage == null) {
                                                longSparseArray2.put(tL_dialog.id, messageTLdeserialize);
                                            }
                                        }
                                    }
                                } catch (Exception e2) {
                                    e = e2;
                                    longSparseArray = longSparseArray3;
                                }
                            } else {
                                tL_messages_dialogs = tL_messages_dialogs2;
                                longSparseArray = longSparseArray3;
                                nativeByteBufferByteBufferValue4.reuse();
                            }
                            if (!DialogObject.isEncryptedDialog(jLongValue) && tL_dialog.read_inbox_max_id > tL_dialog.top_message) {
                                tL_dialog.read_inbox_max_id = 0;
                            }
                            if (DialogObject.isEncryptedDialog(jLongValue)) {
                                int encryptedChatId = DialogObject.getEncryptedChatId(jLongValue);
                                if (!arrayList3.contains(Integer.valueOf(encryptedChatId))) {
                                    arrayList3.add(Integer.valueOf(encryptedChatId));
                                }
                            } else if (!DialogObject.isUserDialog(jLongValue)) {
                                long j = -jLongValue;
                                if (!arrayList2.contains(Long.valueOf(j))) {
                                    lValueOf = Long.valueOf(j);
                                    arrayList4 = arrayList2;
                                    arrayList4.add(lValueOf);
                                }
                            } else if (!arrayList.contains(Long.valueOf(jLongValue))) {
                                lValueOf = Long.valueOf(jLongValue);
                                arrayList4 = arrayList;
                                arrayList4.add(lValueOf);
                            }
                            tL_messages_dialogs2 = tL_messages_dialogs;
                            longSparseArray3 = longSparseArray;
                            i = 2;
                            i2 = 0;
                            i3 = 1;
                        } else {
                            tL_messages_dialogs = tL_messages_dialogs2;
                        }
                        longSparseArray = longSparseArray3;
                        if (!DialogObject.isEncryptedDialog(jLongValue)) {
                            tL_dialog.read_inbox_max_id = 0;
                        }
                        if (DialogObject.isEncryptedDialog(jLongValue)) {
                        }
                        tL_messages_dialogs2 = tL_messages_dialogs;
                        longSparseArray3 = longSparseArray;
                        i = 2;
                        i2 = 0;
                        i3 = 1;
                    } catch (Exception e3) {
                        e = e3;
                        sQLiteCursor = sQLiteCursorQueryFinalized2;
                    }
                } catch (Throwable th) {
                    th = th;
                    sQLiteCursor = sQLiteCursorQueryFinalized2;
                }
            }
            TLRPC.TL_messages_dialogs tL_messages_dialogs4 = tL_messages_dialogs2;
            LongSparseArray longSparseArray4 = longSparseArray3;
            sQLiteCursorQueryFinalized2.dispose();
            if (longSparseArray4.isEmpty()) {
                sQLiteCursorQueryFinalized = null;
            } else {
                try {
                    StringBuilder sb = new StringBuilder();
                    int i5 = 0;
                    while (i5 < longSparseArray4.size()) {
                        sb.append("uid = ");
                        LongSparseArray longSparseArray5 = longSparseArray4;
                        sb.append(longSparseArray5.keyAt(i5));
                        sb.append(" AND group_id = ");
                        sb.append(longSparseArray5.valueAt(i5));
                        i5++;
                        if (i5 < longSparseArray5.size()) {
                            sb.append(" OR ");
                        }
                        longSparseArray4 = longSparseArray5;
                    }
                    int i6 = 0;
                    sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT uid, data, read_state, mid, send_state, date, replydata FROM messages_v2 WHERE %s ORDER BY date DESC", sb), new Object[0]);
                    while (sQLiteCursorQueryFinalized.next()) {
                        try {
                            try {
                                long jLongValue4 = sQLiteCursorQueryFinalized.longValue(i6);
                                int i7 = 0;
                                while (true) {
                                    if (i7 >= tL_messages_dialogs4.dialogs.size()) {
                                        dialog = null;
                                        break;
                                    }
                                    dialog = (TLRPC.Dialog) tL_messages_dialogs4.dialogs.get(i7);
                                    if (dialog != null && dialog.id == jLongValue4) {
                                        break;
                                    }
                                    i7++;
                                }
                                if (dialog != null && (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(1)) != null) {
                                    TLRPC.Message messageTLdeserialize3 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                                    if (messageTLdeserialize3 != null) {
                                        messageTLdeserialize3.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                                        nativeByteBufferByteBufferValue.reuse();
                                        MessageObject.setUnreadFlags(messageTLdeserialize3, sQLiteCursorQueryFinalized.intValue(2));
                                        messageTLdeserialize3.id = sQLiteCursorQueryFinalized.intValue(3);
                                        int iIntValue5 = sQLiteCursorQueryFinalized.intValue(5);
                                        if (iIntValue5 != 0) {
                                            dialog.last_message_date = iIntValue5;
                                        }
                                        messageTLdeserialize3.send_state = sQLiteCursorQueryFinalized.intValue(4);
                                        messageTLdeserialize3.dialog_id = dialog.id;
                                        tL_messages_dialogs4.messages.add(messageTLdeserialize3);
                                        addUsersAndChatsFromMessage(messageTLdeserialize3, arrayList, arrayList2, null);
                                        try {
                                            TLRPC.MessageReplyHeader messageReplyHeader2 = messageTLdeserialize3.reply_to;
                                            if (messageReplyHeader2 != null && messageReplyHeader2.reply_to_msg_id != 0) {
                                                TLRPC.MessageAction messageAction2 = messageTLdeserialize3.action;
                                                if ((messageAction2 instanceof TLRPC.TL_messageActionPinMessage) || (messageAction2 instanceof TLRPC.TL_messageActionPaymentSent) || (messageAction2 instanceof TLRPC.TL_messageActionGameScore) || (messageAction2 instanceof TLRPC.TL_messageActionSuggestedPostApproval)) {
                                                    if (!sQLiteCursorQueryFinalized.isNull(6) && (nativeByteBufferByteBufferValue2 = sQLiteCursorQueryFinalized.byteBufferValue(6)) != null) {
                                                        TLRPC.Message messageTLdeserialize4 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue2, nativeByteBufferByteBufferValue2.readInt32(false), false);
                                                        messageTLdeserialize3.replyMessage = messageTLdeserialize4;
                                                        messageTLdeserialize4.readAttachPath(nativeByteBufferByteBufferValue2, getUserConfig().clientUserId);
                                                        nativeByteBufferByteBufferValue2.reuse();
                                                        TLRPC.Message message2 = messageTLdeserialize3.replyMessage;
                                                        if (message2 != null) {
                                                            addUsersAndChatsFromMessage(message2, arrayList, arrayList2, null);
                                                        }
                                                    }
                                                    if (messageTLdeserialize3.replyMessage == null) {
                                                        longSparseArray2.put(dialog.id, messageTLdeserialize3);
                                                    }
                                                }
                                            }
                                        } catch (Exception e4) {
                                            checkSQLException(e4);
                                        }
                                    } else {
                                        nativeByteBufferByteBufferValue.reuse();
                                    }
                                }
                                i6 = 0;
                            } catch (Exception e5) {
                                e = e5;
                                sQLiteCursor = sQLiteCursorQueryFinalized;
                                try {
                                    throw e;
                                } catch (Throwable th2) {
                                    th = th2;
                                    if (sQLiteCursor != null) {
                                        sQLiteCursor.dispose();
                                    }
                                    throw th;
                                }
                            }
                        } catch (Throwable th3) {
                            th = th3;
                            sQLiteCursor = sQLiteCursorQueryFinalized;
                            if (sQLiteCursor != null) {
                            }
                            throw th;
                        }
                    }
                    sQLiteCursorQueryFinalized.dispose();
                } catch (Exception e6) {
                    e = e6;
                    sQLiteCursor = null;
                    throw e;
                } catch (Throwable th4) {
                    th = th4;
                    sQLiteCursor = null;
                    if (sQLiteCursor != null) {
                    }
                    throw th;
                }
            }
            if (!longSparseArray2.isEmpty()) {
                int size = longSparseArray2.size();
                for (int i8 = 0; i8 < size; i8++) {
                    long jKeyAt = longSparseArray2.keyAt(i8);
                    TLRPC.Message message3 = (TLRPC.Message) longSparseArray2.valueAt(i8);
                    boolean z = false;
                    SQLiteCursor sQLiteCursorQueryFinalized3 = this.database.queryFinalized(String.format(Locale.US, "SELECT data, mid, date, uid FROM messages_v2 WHERE mid = %d and uid = %d", Integer.valueOf(message3.id), Long.valueOf(jKeyAt)), new Object[0]);
                    while (sQLiteCursorQueryFinalized3.next()) {
                        NativeByteBuffer nativeByteBufferByteBufferValue5 = sQLiteCursorQueryFinalized3.byteBufferValue(z ? 1 : 0);
                        if (nativeByteBufferByteBufferValue5 != null) {
                            TLRPC.Message messageTLdeserialize5 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue5, nativeByteBufferByteBufferValue5.readInt32(z), z);
                            messageTLdeserialize5.readAttachPath(nativeByteBufferByteBufferValue5, getUserConfig().clientUserId);
                            nativeByteBufferByteBufferValue5.reuse();
                            messageTLdeserialize5.id = sQLiteCursorQueryFinalized3.intValue(1);
                            messageTLdeserialize5.date = sQLiteCursorQueryFinalized3.intValue(2);
                            messageTLdeserialize5.dialog_id = sQLiteCursorQueryFinalized3.longValue(3);
                            addUsersAndChatsFromMessage(messageTLdeserialize5, arrayList, arrayList2, null);
                            message3.replyMessage = messageTLdeserialize5;
                            messageTLdeserialize5.dialog_id = message3.dialog_id;
                            z = false;
                        }
                    }
                    sQLiteCursorQueryFinalized3.dispose();
                }
            }
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            return tL_messages_dialogs4;
        } catch (Exception e7) {
            e = e7;
            sQLiteCursor = null;
        } catch (Throwable th5) {
            th = th5;
            sQLiteCursor = null;
        }
    }

    private void loadPendingTasks() {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda56
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$loadPendingTasks$33();
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:119:0x0330  */
    /* JADX WARN: Removed duplicated region for block: B:121:0x0335  */
    /* JADX WARN: Removed duplicated region for block: B:128:0x0346  */
    /* JADX WARN: Removed duplicated region for block: B:130:0x034b  */
    /* JADX WARN: Removed duplicated region for block: B:168:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:46:0x010b A[Catch: all -> 0x0263, Exception -> 0x0265, TRY_LEAVE, TryCatch #1 {all -> 0x0263, blocks: (B:43:0x00f1, B:44:0x0105, B:46:0x010b, B:70:0x01a2, B:81:0x020e), top: B:134:0x00f1 }] */
    /* JADX WARN: Removed duplicated region for block: B:73:0x01fd A[Catch: all -> 0x0202, Exception -> 0x0205, TryCatch #21 {Exception -> 0x0205, all -> 0x0202, blocks: (B:71:0x01f7, B:73:0x01fd, B:79:0x0209), top: B:148:0x01f7 }] */
    /* JADX WARN: Removed duplicated region for block: B:78:0x0208  */
    /* JADX WARN: Removed duplicated region for block: B:81:0x020e A[Catch: all -> 0x0263, Exception -> 0x0265, TRY_ENTER, TRY_LEAVE, TryCatch #1 {all -> 0x0263, blocks: (B:43:0x00f1, B:44:0x0105, B:46:0x010b, B:70:0x01a2, B:81:0x020e), top: B:134:0x00f1 }] */
    /* renamed from: markMessagesAsDeletedInternal, reason: merged with bridge method [inline-methods] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public ArrayList<Long> lambda$markMessagesAsDeleted$214(long j, int i, boolean z) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        SQLiteCursor sQLiteCursor;
        SQLiteCursor sQLiteCursorQueryFinalized2;
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLiteCursor sQLiteCursor2;
        SQLitePreparedStatement sQLitePreparedStatement2;
        ArrayList<Pair<Long, Integer>> arrayList;
        int i2;
        int i3;
        ArrayList<Long> arrayList2;
        Locale locale;
        SQLiteCursor sQLiteCursorQueryFinalized3;
        int iIntValue;
        int iIntValue2;
        int iIntValue3;
        int i4 = 2;
        boolean z2 = false;
        try {
            ArrayList<Long> arrayList3 = new ArrayList<>();
            LongSparseArray longSparseArray = new LongSparseArray();
            ArrayList<File> arrayList4 = new ArrayList<>();
            final ArrayList<String> arrayList5 = new ArrayList<>();
            ArrayList<Pair<Long, Integer>> arrayList6 = new ArrayList<>();
            long clientUserId = getUserConfig().getClientUserId();
            ArrayList<Long> arrayList7 = arrayList3;
            long j2 = -j;
            try {
                try {
                    sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT uid, data, read_state, out, mention FROM messages_v2 WHERE uid = %d AND mid <= %d", Long.valueOf(j2), Integer.valueOf(i)), new Object[0]);
                    while (sQLiteCursorQueryFinalized.next()) {
                        try {
                            try {
                                long jLongValue = sQLiteCursorQueryFinalized.longValue(z2 ? 1 : 0);
                                if (jLongValue != clientUserId) {
                                    int iIntValue4 = sQLiteCursorQueryFinalized.intValue(i4);
                                    if (sQLiteCursorQueryFinalized.intValue(3) == 0) {
                                        Integer[] numArr = (Integer[]) longSparseArray.get(jLongValue);
                                        if (numArr == null) {
                                            Integer numValueOf = Integer.valueOf(z2 ? 1 : 0);
                                            Integer numValueOf2 = Integer.valueOf(z2 ? 1 : 0);
                                            Integer[] numArr2 = new Integer[i4];
                                            numArr2[z2 ? 1 : 0] = numValueOf;
                                            numArr2[1] = numValueOf2;
                                            longSparseArray.put(jLongValue, numArr2);
                                            numArr = numArr2;
                                        }
                                        if (iIntValue4 < i4) {
                                            numArr[1] = Integer.valueOf(numArr[1].intValue() + 1);
                                        }
                                        if (iIntValue4 == 0 || iIntValue4 == i4) {
                                            numArr[z2 ? 1 : 0] = Integer.valueOf(numArr[z2 ? 1 : 0].intValue() + 1);
                                        }
                                    }
                                }
                                if (DialogObject.isEncryptedDialog(jLongValue) || z) {
                                    NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(1);
                                    if (nativeByteBufferByteBufferValue != null) {
                                        TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(z2), z2);
                                        messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                                        nativeByteBufferByteBufferValue.reuse();
                                        i2 = 3;
                                        arrayList = arrayList6;
                                        try {
                                            addFilesToDelete(messageTLdeserialize, arrayList4, arrayList6, arrayList5, false);
                                            arrayList6 = arrayList;
                                            i4 = 2;
                                        } catch (Exception e) {
                                            e = e;
                                            try {
                                                checkSQLException(e);
                                                sQLiteCursorQueryFinalized.dispose();
                                                deleteFromDownloadQueue(arrayList, true);
                                                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda85
                                                    @Override // java.lang.Runnable
                                                    public final void run() {
                                                        this.f$0.lambda$markMessagesAsDeletedInternal$213(arrayList5);
                                                    }
                                                });
                                                getFileLoader().deleteFiles(arrayList4, 0);
                                                i3 = 0;
                                                while (i3 < longSparseArray.size()) {
                                                }
                                                arrayList2 = arrayList7;
                                                SQLiteDatabase sQLiteDatabase = this.database;
                                                locale = Locale.US;
                                                sQLiteDatabase.executeFast(String.format(locale, "UPDATE chat_settings_v2 SET pinned = 0 WHERE uid = %d AND pinned <= %d", Long.valueOf(j), Integer.valueOf(i))).stepThis().dispose();
                                                this.database.executeFast(String.format(locale, "DELETE FROM chat_pinned_v2 WHERE uid = %d AND mid <= %d", Long.valueOf(j), Integer.valueOf(i))).stepThis().dispose();
                                                sQLiteCursorQueryFinalized3 = this.database.queryFinalized("SELECT changes()", new Object[0]);
                                                if (!sQLiteCursorQueryFinalized3.next()) {
                                                }
                                                sQLiteCursorQueryFinalized3.dispose();
                                                if (iIntValue > 0) {
                                                }
                                                try {
                                                    this.database.executeFast(String.format(locale, "DELETE FROM messages_v2 WHERE uid = %d AND mid <= %d", Long.valueOf(j2), Integer.valueOf(i))).stepThis().dispose();
                                                    this.database.executeFast(String.format(locale, "DELETE FROM messages_topics WHERE uid = %d AND mid <= %d", Long.valueOf(j2), Integer.valueOf(i))).stepThis().dispose();
                                                    this.database.executeFast(String.format(locale, "DELETE FROM media_v4 WHERE uid = %d AND mid <= %d", Long.valueOf(j2), Integer.valueOf(i))).stepThis().dispose();
                                                    this.database.executeFast(String.format(locale, "UPDATE media_counts_v2 SET old = 1 WHERE uid = %d", Long.valueOf(j2))).stepThis().dispose();
                                                    this.database.executeFast(String.format(locale, "UPDATE media_counts_topics SET old = 1 WHERE uid = %d", Long.valueOf(j2))).stepThis().dispose();
                                                    updateWidgets(arrayList2);
                                                    return arrayList2;
                                                } catch (Throwable th) {
                                                    th = th;
                                                    sQLitePreparedStatement2 = null;
                                                    sQLiteCursor2 = null;
                                                    SQLiteCursor sQLiteCursor3 = sQLiteCursor2;
                                                    sQLitePreparedStatement = sQLitePreparedStatement2;
                                                    sQLiteCursor = sQLiteCursor3;
                                                    if (sQLiteCursor != null) {
                                                    }
                                                    if (sQLitePreparedStatement != null) {
                                                    }
                                                    throw th;
                                                }
                                            } catch (Exception e2) {
                                                e = e2;
                                                sQLiteCursorQueryFinalized2 = sQLiteCursorQueryFinalized;
                                                sQLitePreparedStatementExecuteFast = null;
                                                try {
                                                    checkSQLException(e);
                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                        sQLiteCursorQueryFinalized2.dispose();
                                                    }
                                                    if (sQLitePreparedStatementExecuteFast == null) {
                                                        return null;
                                                    }
                                                    sQLitePreparedStatementExecuteFast.dispose();
                                                    return null;
                                                } catch (Throwable th2) {
                                                    th = th2;
                                                    sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast;
                                                    sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                                                    SQLiteCursor sQLiteCursor32 = sQLiteCursor2;
                                                    sQLitePreparedStatement = sQLitePreparedStatement2;
                                                    sQLiteCursor = sQLiteCursor32;
                                                    if (sQLiteCursor != null) {
                                                    }
                                                    if (sQLitePreparedStatement != null) {
                                                    }
                                                    throw th;
                                                }
                                            }
                                        }
                                    }
                                    z2 = false;
                                }
                            } catch (Throwable th3) {
                                th = th3;
                                sQLiteCursor = sQLiteCursorQueryFinalized;
                                sQLitePreparedStatement = null;
                                if (sQLiteCursor != null) {
                                }
                                if (sQLitePreparedStatement != null) {
                                }
                                throw th;
                            }
                        } catch (Exception e3) {
                            e = e3;
                            arrayList = arrayList6;
                            i2 = 3;
                        }
                    }
                    arrayList = arrayList6;
                    i2 = 3;
                    sQLiteCursorQueryFinalized.dispose();
                    try {
                        deleteFromDownloadQueue(arrayList, true);
                        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda85
                            @Override // java.lang.Runnable
                            public final void run() {
                                this.f$0.lambda$markMessagesAsDeletedInternal$213(arrayList5);
                            }
                        });
                        getFileLoader().deleteFiles(arrayList4, 0);
                        i3 = 0;
                        while (i3 < longSparseArray.size()) {
                            long jKeyAt = longSparseArray.keyAt(i3);
                            Integer[] numArr3 = (Integer[]) longSparseArray.valueAt(i3);
                            sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT unread_count, unread_count_i FROM dialogs WHERE did = " + jKeyAt, new Object[0]);
                            try {
                                if (sQLiteCursorQueryFinalized2.next()) {
                                    iIntValue2 = sQLiteCursorQueryFinalized2.intValue(0);
                                    iIntValue3 = sQLiteCursorQueryFinalized2.intValue(1);
                                } else {
                                    iIntValue2 = 0;
                                    iIntValue3 = 0;
                                }
                                sQLiteCursorQueryFinalized2.dispose();
                                try {
                                    ArrayList<Long> arrayList8 = arrayList7;
                                    arrayList8.add(Long.valueOf(jKeyAt));
                                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE dialogs SET unread_count = ?, unread_count_i = ? WHERE did = ?");
                                    try {
                                        sQLitePreparedStatementExecuteFast2.requery();
                                        sQLitePreparedStatementExecuteFast2.bindInteger(1, Math.max(0, iIntValue2 - numArr3[0].intValue()));
                                        sQLitePreparedStatementExecuteFast2.bindInteger(2, Math.max(0, iIntValue3 - numArr3[1].intValue()));
                                        sQLitePreparedStatementExecuteFast2.bindLong(i2, jKeyAt);
                                        sQLitePreparedStatementExecuteFast2.step();
                                        sQLitePreparedStatementExecuteFast2.dispose();
                                        i3++;
                                        arrayList7 = arrayList8;
                                    } catch (Exception e4) {
                                        e = e4;
                                        sQLitePreparedStatementExecuteFast = sQLitePreparedStatementExecuteFast2;
                                        sQLiteCursorQueryFinalized2 = null;
                                        checkSQLException(e);
                                        if (sQLiteCursorQueryFinalized2 != null) {
                                        }
                                        if (sQLitePreparedStatementExecuteFast == null) {
                                        }
                                    } catch (Throwable th4) {
                                        th = th4;
                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                                        sQLiteCursor = null;
                                        if (sQLiteCursor != null) {
                                        }
                                        if (sQLitePreparedStatement != null) {
                                        }
                                        throw th;
                                    }
                                } catch (Exception e5) {
                                    e = e5;
                                    sQLiteCursorQueryFinalized2 = null;
                                    sQLitePreparedStatementExecuteFast = null;
                                    checkSQLException(e);
                                    if (sQLiteCursorQueryFinalized2 != null) {
                                    }
                                    if (sQLitePreparedStatementExecuteFast == null) {
                                    }
                                } catch (Throwable th5) {
                                    th = th5;
                                    sQLiteCursorQueryFinalized2 = null;
                                    sQLiteCursor = sQLiteCursorQueryFinalized2;
                                    sQLitePreparedStatement = null;
                                    if (sQLiteCursor != null) {
                                    }
                                    if (sQLitePreparedStatement != null) {
                                    }
                                    throw th;
                                }
                            } catch (Exception e6) {
                                e = e6;
                            } catch (Throwable th6) {
                                th = th6;
                            }
                        }
                        arrayList2 = arrayList7;
                        SQLiteDatabase sQLiteDatabase2 = this.database;
                        locale = Locale.US;
                        sQLiteDatabase2.executeFast(String.format(locale, "UPDATE chat_settings_v2 SET pinned = 0 WHERE uid = %d AND pinned <= %d", Long.valueOf(j), Integer.valueOf(i))).stepThis().dispose();
                        this.database.executeFast(String.format(locale, "DELETE FROM chat_pinned_v2 WHERE uid = %d AND mid <= %d", Long.valueOf(j), Integer.valueOf(i))).stepThis().dispose();
                        sQLiteCursorQueryFinalized3 = this.database.queryFinalized("SELECT changes()", new Object[0]);
                    } catch (Throwable th7) {
                        th = th7;
                        sQLiteCursor = null;
                    }
                } catch (Throwable th8) {
                    th = th8;
                    sQLiteCursorQueryFinalized = null;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    sQLitePreparedStatement = null;
                    if (sQLiteCursor != null) {
                        sQLiteCursor.dispose();
                    }
                    if (sQLitePreparedStatement != null) {
                        sQLitePreparedStatement.dispose();
                    }
                    throw th;
                }
            } catch (Exception e7) {
                e = e7;
                sQLitePreparedStatementExecuteFast = null;
            }
            try {
                iIntValue = !sQLiteCursorQueryFinalized3.next() ? sQLiteCursorQueryFinalized3.intValue(0) : 0;
                sQLiteCursorQueryFinalized3.dispose();
                if (iIntValue > 0) {
                    sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(locale, "SELECT count FROM chat_pinned_count WHERE uid = %d", Long.valueOf(j2)), new Object[0]);
                    if (sQLiteCursorQueryFinalized2.next()) {
                        int iIntValue5 = sQLiteCursorQueryFinalized2.intValue(0);
                        sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE chat_pinned_count SET count = ? WHERE uid = ?");
                        try {
                            sQLitePreparedStatementExecuteFast.requery();
                            sQLitePreparedStatementExecuteFast.bindInteger(1, Math.max(0, iIntValue5 - iIntValue));
                            sQLitePreparedStatementExecuteFast.bindLong(2, j2);
                            sQLitePreparedStatementExecuteFast.step();
                            sQLitePreparedStatementExecuteFast.dispose();
                        } catch (Exception e8) {
                            e = e8;
                            checkSQLException(e);
                            if (sQLiteCursorQueryFinalized2 != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast == null) {
                            }
                        } catch (Throwable th9) {
                            th = th9;
                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                            sQLiteCursor = sQLiteCursorQueryFinalized2;
                            if (sQLiteCursor != null) {
                            }
                            if (sQLitePreparedStatement != null) {
                            }
                            throw th;
                        }
                    }
                    sQLiteCursorQueryFinalized2.dispose();
                }
                this.database.executeFast(String.format(locale, "DELETE FROM messages_v2 WHERE uid = %d AND mid <= %d", Long.valueOf(j2), Integer.valueOf(i))).stepThis().dispose();
                this.database.executeFast(String.format(locale, "DELETE FROM messages_topics WHERE uid = %d AND mid <= %d", Long.valueOf(j2), Integer.valueOf(i))).stepThis().dispose();
                this.database.executeFast(String.format(locale, "DELETE FROM media_v4 WHERE uid = %d AND mid <= %d", Long.valueOf(j2), Integer.valueOf(i))).stepThis().dispose();
                this.database.executeFast(String.format(locale, "UPDATE media_counts_v2 SET old = 1 WHERE uid = %d", Long.valueOf(j2))).stepThis().dispose();
                this.database.executeFast(String.format(locale, "UPDATE media_counts_topics SET old = 1 WHERE uid = %d", Long.valueOf(j2))).stepThis().dispose();
                updateWidgets(arrayList2);
                return arrayList2;
            } catch (Exception e9) {
                e = e9;
                sQLiteCursorQueryFinalized2 = sQLiteCursorQueryFinalized3;
                sQLitePreparedStatementExecuteFast = null;
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized2 != null) {
                }
                if (sQLitePreparedStatementExecuteFast == null) {
                }
            } catch (Throwable th10) {
                th = th10;
                sQLiteCursor = sQLiteCursorQueryFinalized3;
                sQLitePreparedStatement = null;
                if (sQLiteCursor != null) {
                }
                if (sQLitePreparedStatement != null) {
                }
                throw th;
            }
        } catch (Exception e10) {
            e = e10;
            sQLiteCursorQueryFinalized = null;
        } catch (Throwable th11) {
            th = th11;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Path cross not found for [B:126:0x0277, B:132:0x0285], limit reached: 968 */
    /* JADX WARN: Path cross not found for [B:843:0x01cd, B:92:0x01ea], limit reached: 968 */
    /* JADX WARN: Path cross not found for [B:95:0x01f5, B:123:0x026d], limit reached: 968 */
    /* JADX WARN: Removed duplicated region for block: B:134:0x028c A[Catch: all -> 0x01d6, Exception -> 0x0315, TRY_LEAVE, TryCatch #25 {Exception -> 0x0315, blocks: (B:124:0x0271, B:132:0x0285, B:134:0x028c, B:137:0x029d), top: B:821:0x0271 }] */
    /* JADX WARN: Removed duplicated region for block: B:21:0x0050  */
    /* JADX WARN: Removed duplicated region for block: B:22:0x0052  */
    /* JADX WARN: Removed duplicated region for block: B:252:0x04aa  */
    /* JADX WARN: Removed duplicated region for block: B:257:0x04ba  */
    /* JADX WARN: Removed duplicated region for block: B:25:0x0056 A[Catch: all -> 0x0037, Exception -> 0x003a, TRY_LEAVE, TryCatch #113 {Exception -> 0x003a, all -> 0x0037, blocks: (B:3:0x000b, B:6:0x0019, B:8:0x0027, B:19:0x0049, B:25:0x0056, B:27:0x006a, B:32:0x0083, B:34:0x009c, B:47:0x00cd, B:49:0x00dd, B:51:0x00f2, B:60:0x010c, B:69:0x0167, B:72:0x0181, B:75:0x0191, B:78:0x01a3, B:66:0x0158), top: B:895:0x000b }] */
    /* JADX WARN: Removed duplicated region for block: B:296:0x0581 A[Catch: all -> 0x0718, Exception -> 0x071b, TRY_LEAVE, TryCatch #83 {Exception -> 0x071b, all -> 0x0718, blocks: (B:260:0x04c0, B:275:0x0511, B:261:0x04cb, B:266:0x04dd, B:267:0x04e8, B:270:0x04f6, B:274:0x0507, B:293:0x0563, B:294:0x057b, B:296:0x0581, B:321:0x062a, B:323:0x0630, B:324:0x063a, B:326:0x0640, B:329:0x066b, B:344:0x0712, B:349:0x071e, B:350:0x0727, B:354:0x0746, B:356:0x074a, B:357:0x0750, B:370:0x0778, B:371:0x077c, B:373:0x0782), top: B:954:0x04c0 }] */
    /* JADX WARN: Removed duplicated region for block: B:31:0x0081  */
    /* JADX WARN: Removed duplicated region for block: B:323:0x0630 A[Catch: all -> 0x0718, Exception -> 0x071b, TryCatch #83 {Exception -> 0x071b, all -> 0x0718, blocks: (B:260:0x04c0, B:275:0x0511, B:261:0x04cb, B:266:0x04dd, B:267:0x04e8, B:270:0x04f6, B:274:0x0507, B:293:0x0563, B:294:0x057b, B:296:0x0581, B:321:0x062a, B:323:0x0630, B:324:0x063a, B:326:0x0640, B:329:0x066b, B:344:0x0712, B:349:0x071e, B:350:0x0727, B:354:0x0746, B:356:0x074a, B:357:0x0750, B:370:0x0778, B:371:0x077c, B:373:0x0782), top: B:954:0x04c0 }] */
    /* JADX WARN: Removed duplicated region for block: B:375:0x0790  */
    /* JADX WARN: Removed duplicated region for block: B:379:0x079f  */
    /* JADX WARN: Removed duplicated region for block: B:571:0x0b3e A[Catch: all -> 0x0cb0, Exception -> 0x0cb5, TRY_LEAVE, TryCatch #101 {Exception -> 0x0cb5, all -> 0x0cb0, blocks: (B:569:0x0b38, B:571:0x0b3e, B:576:0x0b51), top: B:918:0x0b38 }] */
    /* JADX WARN: Removed duplicated region for block: B:648:0x0ccf  */
    /* JADX WARN: Removed duplicated region for block: B:689:0x0d75 A[Catch: all -> 0x07e4, Exception -> 0x07e7, TryCatch #112 {Exception -> 0x07e7, all -> 0x07e4, blocks: (B:389:0x07d7, B:390:0x07df, B:413:0x0828, B:419:0x0836, B:422:0x0849, B:409:0x0806, B:412:0x081f, B:687:0x0d6f, B:689:0x0d75, B:690:0x0d7f, B:693:0x0d8b, B:697:0x0da4, B:698:0x0dac, B:703:0x0dc8, B:699:0x0db1, B:702:0x0dbf, B:709:0x0dd4, B:711:0x0dda, B:717:0x0df7, B:719:0x0dfd, B:723:0x0e07, B:724:0x0e0f, B:729:0x0e2b, B:725:0x0e14, B:728:0x0e22, B:734:0x0e35, B:736:0x0e43, B:737:0x0e47, B:740:0x0e4f, B:742:0x0e55, B:745:0x0e78, B:750:0x0e91, B:752:0x0ea0, B:714:0x0dea, B:716:0x0df0), top: B:896:0x07d7 }] */
    /* JADX WARN: Removed duplicated region for block: B:695:0x0da0  */
    /* JADX WARN: Removed duplicated region for block: B:708:0x0dd2  */
    /* JADX WARN: Removed duplicated region for block: B:712:0x0de6  */
    /* JADX WARN: Removed duplicated region for block: B:721:0x0e03  */
    /* JADX WARN: Removed duplicated region for block: B:734:0x0e35 A[Catch: all -> 0x07e4, Exception -> 0x07e7, TryCatch #112 {Exception -> 0x07e7, all -> 0x07e4, blocks: (B:389:0x07d7, B:390:0x07df, B:413:0x0828, B:419:0x0836, B:422:0x0849, B:409:0x0806, B:412:0x081f, B:687:0x0d6f, B:689:0x0d75, B:690:0x0d7f, B:693:0x0d8b, B:697:0x0da4, B:698:0x0dac, B:703:0x0dc8, B:699:0x0db1, B:702:0x0dbf, B:709:0x0dd4, B:711:0x0dda, B:717:0x0df7, B:719:0x0dfd, B:723:0x0e07, B:724:0x0e0f, B:729:0x0e2b, B:725:0x0e14, B:728:0x0e22, B:734:0x0e35, B:736:0x0e43, B:737:0x0e47, B:740:0x0e4f, B:742:0x0e55, B:745:0x0e78, B:750:0x0e91, B:752:0x0ea0, B:714:0x0dea, B:716:0x0df0), top: B:896:0x07d7 }] */
    /* JADX WARN: Removed duplicated region for block: B:736:0x0e43 A[Catch: all -> 0x07e4, Exception -> 0x07e7, TryCatch #112 {Exception -> 0x07e7, all -> 0x07e4, blocks: (B:389:0x07d7, B:390:0x07df, B:413:0x0828, B:419:0x0836, B:422:0x0849, B:409:0x0806, B:412:0x081f, B:687:0x0d6f, B:689:0x0d75, B:690:0x0d7f, B:693:0x0d8b, B:697:0x0da4, B:698:0x0dac, B:703:0x0dc8, B:699:0x0db1, B:702:0x0dbf, B:709:0x0dd4, B:711:0x0dda, B:717:0x0df7, B:719:0x0dfd, B:723:0x0e07, B:724:0x0e0f, B:729:0x0e2b, B:725:0x0e14, B:728:0x0e22, B:734:0x0e35, B:736:0x0e43, B:737:0x0e47, B:740:0x0e4f, B:742:0x0e55, B:745:0x0e78, B:750:0x0e91, B:752:0x0ea0, B:714:0x0dea, B:716:0x0df0), top: B:896:0x07d7 }] */
    /* JADX WARN: Removed duplicated region for block: B:739:0x0e4e  */
    /* JADX WARN: Removed duplicated region for block: B:752:0x0ea0 A[Catch: all -> 0x07e4, Exception -> 0x07e7, TRY_LEAVE, TryCatch #112 {Exception -> 0x07e7, all -> 0x07e4, blocks: (B:389:0x07d7, B:390:0x07df, B:413:0x0828, B:419:0x0836, B:422:0x0849, B:409:0x0806, B:412:0x081f, B:687:0x0d6f, B:689:0x0d75, B:690:0x0d7f, B:693:0x0d8b, B:697:0x0da4, B:698:0x0dac, B:703:0x0dc8, B:699:0x0db1, B:702:0x0dbf, B:709:0x0dd4, B:711:0x0dda, B:717:0x0df7, B:719:0x0dfd, B:723:0x0e07, B:724:0x0e0f, B:729:0x0e2b, B:725:0x0e14, B:728:0x0e22, B:734:0x0e35, B:736:0x0e43, B:737:0x0e47, B:740:0x0e4f, B:742:0x0e55, B:745:0x0e78, B:750:0x0e91, B:752:0x0ea0, B:714:0x0dea, B:716:0x0df0), top: B:896:0x07d7 }] */
    /* JADX WARN: Removed duplicated region for block: B:756:0x0eb5  */
    /* JADX WARN: Removed duplicated region for block: B:758:0x0eba  */
    /* JADX WARN: Removed duplicated region for block: B:760:0x0ebf  */
    /* JADX WARN: Removed duplicated region for block: B:787:0x0f04  */
    /* JADX WARN: Removed duplicated region for block: B:789:0x0f09  */
    /* JADX WARN: Removed duplicated region for block: B:791:0x0f0e  */
    /* JADX WARN: Removed duplicated region for block: B:799:0x0f1c  */
    /* JADX WARN: Removed duplicated region for block: B:801:0x0f21  */
    /* JADX WARN: Removed duplicated region for block: B:803:0x0f26  */
    /* JADX WARN: Removed duplicated region for block: B:82:0x01b4  */
    /* JADX WARN: Removed duplicated region for block: B:944:0x0367 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:966:0x0323 A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:998:? A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:999:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Type inference failed for: r13v5 */
    /* JADX WARN: Type inference failed for: r13v6, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r13v7 */
    /* renamed from: markMessagesAsDeletedInternal, reason: merged with bridge method [inline-methods] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public ArrayList<Long> lambda$markMessagesAsDeleted$212(long j, ArrayList<Integer> arrayList, boolean z, int i, int i2) throws Throwable {
        Throwable th;
        Throwable th2;
        SQLiteCursor sQLiteCursorQueryFinalized;
        Throwable th3;
        SQLiteCursor sQLiteCursor;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLiteCursor sQLiteCursor2;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast2;
        SQLiteCursor sQLiteCursorQueryFinalized2;
        SQLitePreparedStatement sQLitePreparedStatement;
        Throwable th4;
        SQLiteDatabase sQLiteDatabase;
        SQLiteCursor sQLiteCursor3;
        SQLiteDatabase sQLiteDatabase2;
        SQLiteCursor sQLiteCursor4;
        ArrayList<Long> arrayList2;
        boolean z2;
        HashMap map;
        ArrayList arrayList3;
        LongSparseArray longSparseArray;
        ArrayList<String> arrayList4;
        ArrayList<Pair<Long, Integer>> arrayList5;
        int i3;
        ArrayList arrayList6;
        ArrayList arrayList7;
        ArrayList<File> arrayList8;
        LongSparseArray longSparseArray2;
        ArrayList arrayList9;
        LongSparseArray longSparseArray3;
        int i4;
        long j2;
        SQLiteCursor sQLiteCursor5;
        Throwable th5;
        SQLiteCursor sQLiteCursor6;
        HashMap map2;
        long j3;
        ArrayList arrayList10;
        ArrayList<TopicKey> arrayList11;
        long topicId;
        long j4;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast3;
        Throwable th6;
        int i5;
        int i6;
        LongSparseArray longSparseArray4;
        LongSparseArray longSparseArray5;
        String str;
        ArrayList arrayList12;
        Throwable th7;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast4;
        Throwable th8;
        SQLiteCursor sQLiteCursorQueryFinalized3;
        SQLiteCursor sQLiteCursor7;
        int size;
        int i7;
        SQLitePreparedStatement sQLitePreparedStatement2;
        SQLiteCursor sQLiteCursor8;
        Locale locale;
        ArrayList arrayList13;
        final ArrayList<Integer> arrayList14;
        Runnable runnable;
        ArrayList<Long> arrayList15;
        SQLitePreparedStatement sQLitePreparedStatement3;
        SQLiteCursor sQLiteCursor9;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast5;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast6;
        Throwable th9;
        Throwable e;
        Throwable th10;
        SQLiteCursor sQLiteCursor10;
        SQLiteCursor sQLiteCursor11;
        long jKeyAt;
        CharSequence charSequence;
        String strJoin;
        int i8;
        SQLiteDatabase sQLiteDatabase3;
        Locale locale2;
        SQLiteCursor sQLiteCursorQueryFinalized4;
        Throwable e2;
        int i9;
        ArrayList arrayList16;
        SQLiteCursor sQLiteCursor12;
        Throwable e3;
        SQLiteCursor sQLiteCursor13;
        Throwable th11;
        Throwable e4;
        Throwable th12;
        Throwable th13;
        Throwable th14;
        Throwable e5;
        LongSparseArray longSparseArray6;
        CharSequence charSequence2;
        long j5;
        Object[] objArr;
        int i10;
        int iIntValue;
        int iIntValue2;
        Integer num;
        SQLiteCursor sQLiteCursorQueryFinalized5;
        int iIntValue3;
        int iIntValue4;
        Integer num2;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast7;
        SQLiteCursor sQLiteCursorQueryFinalized6;
        int iIntValue5;
        int iIntValue6;
        int iIntValue7;
        LongSparseArray longSparseArray7;
        String str2;
        SQLiteCursor sQLiteCursor14;
        SQLiteCursor sQLiteCursor15;
        int iIntValue8;
        int iIntValue9;
        SQLiteDatabase database;
        String str3;
        Throwable th15;
        ArrayList arrayList17;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        long j6;
        Integer[] numArr;
        SQLiteDatabase sQLiteDatabase4;
        try {
        } catch (Exception e6) {
            th2 = e6;
            sQLiteCursorQueryFinalized = null;
        } catch (Throwable th16) {
            th = th16;
        }
        if (getUserConfig().getClientUserId() == j) {
            try {
                try {
                    this.database.executeFast(String.format(Locale.US, "DELETE FROM tag_message_id WHERE mid IN(%s)", TextUtils.join(",", arrayList))).stepThis().dispose();
                    arrayList2 = new ArrayList<>();
                    z2 = i != 1;
                } catch (Throwable th17) {
                    th = th17;
                }
                if (i != 5) {
                    try {
                        this.database.executeFast(String.format(Locale.US, "DELETE FROM quick_replies_messages WHERE mid IN(%s) AND topic_id = %d", TextUtils.join(",", arrayList), Integer.valueOf(i2))).stepThis().dispose();
                        arrayList15 = arrayList2;
                        sQLiteCursor9 = null;
                        sQLitePreparedStatement3 = null;
                        sQLiteDatabase4 = this.database;
                        if (sQLiteDatabase4 != null) {
                            sQLiteDatabase4.commitTransaction();
                        }
                        if (sQLiteCursor9 != null) {
                            sQLiteCursor9.dispose();
                        }
                        if (sQLitePreparedStatement3 != null) {
                            sQLitePreparedStatement3.dispose();
                        }
                        return arrayList15;
                    } catch (Throwable th18) {
                        th = th18;
                    }
                } else {
                    if (z2) {
                        String strJoin2 = TextUtils.join(",", arrayList);
                        ArrayList arrayList18 = new ArrayList();
                        try {
                            sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT uid FROM scheduled_messages_v2 WHERE mid IN(%s) AND uid = %d", strJoin2, Long.valueOf(j)), new Object[0]);
                            while (sQLiteCursorQueryFinalized2.next()) {
                                try {
                                    try {
                                        long jLongValue = sQLiteCursorQueryFinalized2.longValue(0);
                                        if (!arrayList18.contains(Long.valueOf(jLongValue))) {
                                            arrayList18.add(Long.valueOf(jLongValue));
                                        }
                                    } catch (Exception e7) {
                                        try {
                                            checkSQLException(e7);
                                        } catch (Exception e8) {
                                            th4 = e8;
                                            sQLitePreparedStatementExecuteFast2 = null;
                                            try {
                                                checkSQLException(th4);
                                                sQLiteDatabase = this.database;
                                                if (sQLiteDatabase != null) {
                                                }
                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                }
                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                }
                                            } catch (Throwable th19) {
                                                th = th19;
                                                sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                                            }
                                        }
                                    }
                                } catch (Throwable th20) {
                                    th = th20;
                                    sQLitePreparedStatement = null;
                                }
                            }
                            sQLiteCursorQueryFinalized2.dispose();
                            try {
                                this.database.executeFast(String.format(Locale.US, "DELETE FROM scheduled_messages_v2 WHERE mid IN(%s) AND uid = %d", strJoin2, Long.valueOf(j))).stepThis().dispose();
                                int size2 = arrayList18.size();
                                for (int i11 = 0; i11 < size2; i11++) {
                                    broadcastScheduledMessagesChange((Long) arrayList18.get(i11));
                                }
                                arrayList15 = arrayList2;
                                sQLiteCursor9 = null;
                                sQLitePreparedStatement3 = null;
                                sQLiteDatabase4 = this.database;
                                if (sQLiteDatabase4 != null) {
                                }
                                if (sQLiteCursor9 != null) {
                                }
                                if (sQLitePreparedStatement3 != null) {
                                }
                                return arrayList15;
                            } catch (Throwable th21) {
                                th = th21;
                            }
                        } catch (Throwable th22) {
                            th = th22;
                        }
                    } else {
                        long clientUserId = getUserConfig().getClientUserId();
                        ArrayList arrayList19 = new ArrayList(arrayList);
                        ArrayList arrayList20 = new ArrayList(arrayList);
                        LongSparseArray longSparseArray8 = new LongSparseArray();
                        LongSparseArray longSparseArray9 = new LongSparseArray();
                        HashMap map3 = new HashMap();
                        LongSparseArray longSparseArray10 = new LongSparseArray();
                        String strJoin3 = TextUtils.join(",", arrayList);
                        CharSequence charSequence3 = ",";
                        ArrayList<File> arrayList21 = new ArrayList<>();
                        ArrayList<String> arrayList22 = new ArrayList<>();
                        ArrayList<Long> arrayList23 = arrayList2;
                        ArrayList<Pair<Long, Integer>> arrayList24 = new ArrayList<>();
                        if (clientUserId == j || j == 0) {
                            map = map3;
                            arrayList3 = new ArrayList();
                        } else {
                            map = map3;
                            arrayList3 = null;
                        }
                        ArrayList arrayList25 = arrayList20;
                        if (j != 0) {
                            longSparseArray = longSparseArray9;
                            arrayList4 = arrayList22;
                            arrayList5 = arrayList24;
                            try {
                                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT uid, data, read_state, out, mention, mid FROM messages_v2 WHERE mid IN(%s) AND uid = %d", strJoin3, Long.valueOf(j)), new Object[0]);
                                i3 = 0;
                                while (sQLiteCursorQueryFinalized.next()) {
                                    ArrayList<File> arrayList26 = arrayList21;
                                    try {
                                        try {
                                            long jLongValue2 = sQLiteCursorQueryFinalized.longValue(i3);
                                            int iIntValue10 = sQLiteCursorQueryFinalized.intValue(5);
                                            arrayList19.remove(Integer.valueOf(iIntValue10));
                                            ArrayList arrayList27 = (ArrayList) longSparseArray10.get(jLongValue2);
                                            if (arrayList27 == null) {
                                                try {
                                                    arrayList27 = new ArrayList();
                                                    longSparseArray10.put(jLongValue2, arrayList27);
                                                } catch (Exception e9) {
                                                    arrayList6 = arrayList25;
                                                    th15 = e9;
                                                    arrayList7 = arrayList19;
                                                    j2 = clientUserId;
                                                    arrayList8 = arrayList26;
                                                    longSparseArray2 = longSparseArray10;
                                                    arrayList9 = arrayList3;
                                                    longSparseArray3 = longSparseArray;
                                                    i4 = 5;
                                                    try {
                                                        checkSQLException(th15);
                                                        sQLiteCursorQueryFinalized.dispose();
                                                        if (j >= 0) {
                                                        }
                                                        this.database.beginTransaction();
                                                        while (i5 < 4) {
                                                        }
                                                        deleteFromDownloadQueue(arrayList5, true);
                                                        final ArrayList<String> arrayList28 = arrayList4;
                                                        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda200
                                                            @Override // java.lang.Runnable
                                                            public final void run() {
                                                                this.f$0.lambda$markMessagesAsDeletedInternal$207(arrayList28);
                                                            }
                                                        });
                                                        getFileLoader().deleteFiles(arrayList8, 0);
                                                        i6 = 0;
                                                        while (i6 < longSparseArray8.size()) {
                                                        }
                                                        ArrayList<TopicKey> arrayList29 = arrayList11;
                                                        if (map2.isEmpty()) {
                                                        }
                                                        try {
                                                            size = longSparseArray2.size();
                                                            SQLitePreparedStatement sQLitePreparedStatement4 = null;
                                                            i7 = 0;
                                                            SQLiteCursor sQLiteCursor16 = null;
                                                            while (i7 < size) {
                                                            }
                                                            sQLitePreparedStatement2 = sQLitePreparedStatement4;
                                                            List<TopicsController.TopicUpdate> list = arrayList12;
                                                            sQLiteCursor8 = sQLiteCursor16;
                                                            LongSparseArray longSparseArray11 = longSparseArray5;
                                                            if (!longSparseArray4.isEmpty()) {
                                                            }
                                                            SQLiteDatabase sQLiteDatabase5 = this.database;
                                                            locale = Locale.US;
                                                            sQLiteDatabase5.executeFast(String.format(locale, "DELETE FROM messages_seq WHERE mid IN(%s)", str)).stepThis().dispose();
                                                            if (arrayList7.isEmpty()) {
                                                            }
                                                        } catch (Exception e10) {
                                                            th8 = e10;
                                                            sQLiteCursorQueryFinalized3 = null;
                                                            sQLitePreparedStatementExecuteFast2 = null;
                                                        } catch (Throwable th23) {
                                                            th7 = th23;
                                                            sQLitePreparedStatementExecuteFast4 = null;
                                                        }
                                                    } catch (Exception e11) {
                                                        th2 = e11;
                                                        th3 = th2;
                                                        sQLiteCursor = sQLiteCursorQueryFinalized;
                                                        sQLitePreparedStatementExecuteFast = null;
                                                        sQLiteCursor3 = sQLiteCursor;
                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                        th4 = th3;
                                                        sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                        checkSQLException(th4);
                                                        sQLiteDatabase = this.database;
                                                        if (sQLiteDatabase != null) {
                                                            sQLiteDatabase.commitTransaction();
                                                        }
                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                            sQLiteCursorQueryFinalized2.dispose();
                                                        }
                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            return null;
                                                        }
                                                        sQLitePreparedStatementExecuteFast2.dispose();
                                                        return null;
                                                    }
                                                    sQLiteDatabase2 = this.database;
                                                    if (sQLiteDatabase2 != null) {
                                                    }
                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                    }
                                                    if (sQLitePreparedStatement == null) {
                                                    }
                                                }
                                            }
                                            arrayList27.add(Integer.valueOf(iIntValue10));
                                            if (jLongValue2 != clientUserId) {
                                                try {
                                                    int iIntValue11 = sQLiteCursorQueryFinalized.intValue(2);
                                                    if (sQLiteCursorQueryFinalized.intValue(3) == 0) {
                                                        Integer[] numArr2 = (Integer[]) longSparseArray8.get(jLongValue2);
                                                        if (numArr2 == null) {
                                                            try {
                                                                try {
                                                                    longSparseArray8.put(jLongValue2, numArr);
                                                                    numArr2 = numArr;
                                                                } catch (Exception e12) {
                                                                    e = e12;
                                                                    arrayList6 = arrayList25;
                                                                    th15 = e;
                                                                    j2 = clientUserId;
                                                                    arrayList8 = arrayList26;
                                                                    arrayList9 = arrayList3;
                                                                    longSparseArray3 = longSparseArray;
                                                                    arrayList7 = arrayList17;
                                                                    i4 = 5;
                                                                    checkSQLException(th15);
                                                                    sQLiteCursorQueryFinalized.dispose();
                                                                    if (j >= 0) {
                                                                    }
                                                                    this.database.beginTransaction();
                                                                    while (i5 < 4) {
                                                                    }
                                                                    deleteFromDownloadQueue(arrayList5, true);
                                                                    final ArrayList arrayList282 = arrayList4;
                                                                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda200
                                                                        @Override // java.lang.Runnable
                                                                        public final void run() {
                                                                            this.f$0.lambda$markMessagesAsDeletedInternal$207(arrayList282);
                                                                        }
                                                                    });
                                                                    getFileLoader().deleteFiles(arrayList8, 0);
                                                                    i6 = 0;
                                                                    while (i6 < longSparseArray8.size()) {
                                                                    }
                                                                    ArrayList<TopicKey> arrayList292 = arrayList11;
                                                                    if (map2.isEmpty()) {
                                                                    }
                                                                    size = longSparseArray2.size();
                                                                    SQLitePreparedStatement sQLitePreparedStatement42 = null;
                                                                    i7 = 0;
                                                                    SQLiteCursor sQLiteCursor162 = null;
                                                                    while (i7 < size) {
                                                                    }
                                                                    sQLitePreparedStatement2 = sQLitePreparedStatement42;
                                                                    List<TopicsController.TopicUpdate> list2 = arrayList12;
                                                                    sQLiteCursor8 = sQLiteCursor162;
                                                                    LongSparseArray longSparseArray112 = longSparseArray5;
                                                                    if (!longSparseArray4.isEmpty()) {
                                                                    }
                                                                    SQLiteDatabase sQLiteDatabase52 = this.database;
                                                                    locale = Locale.US;
                                                                    sQLiteDatabase52.executeFast(String.format(locale, "DELETE FROM messages_seq WHERE mid IN(%s)", str)).stepThis().dispose();
                                                                    if (arrayList7.isEmpty()) {
                                                                    }
                                                                    sQLiteDatabase2 = this.database;
                                                                    if (sQLiteDatabase2 != null) {
                                                                    }
                                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement == null) {
                                                                    }
                                                                }
                                                                numArr = new Integer[]{0, 0};
                                                            } catch (Exception e13) {
                                                                th15 = e13;
                                                                arrayList6 = arrayList25;
                                                                j2 = clientUserId;
                                                                arrayList8 = arrayList26;
                                                                arrayList9 = arrayList3;
                                                                longSparseArray3 = longSparseArray;
                                                                arrayList7 = arrayList17;
                                                                i4 = 5;
                                                                checkSQLException(th15);
                                                                sQLiteCursorQueryFinalized.dispose();
                                                                if (j >= 0) {
                                                                }
                                                                this.database.beginTransaction();
                                                                while (i5 < 4) {
                                                                }
                                                                deleteFromDownloadQueue(arrayList5, true);
                                                                final ArrayList arrayList2822 = arrayList4;
                                                                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda200
                                                                    @Override // java.lang.Runnable
                                                                    public final void run() {
                                                                        this.f$0.lambda$markMessagesAsDeletedInternal$207(arrayList2822);
                                                                    }
                                                                });
                                                                getFileLoader().deleteFiles(arrayList8, 0);
                                                                i6 = 0;
                                                                while (i6 < longSparseArray8.size()) {
                                                                }
                                                                ArrayList<TopicKey> arrayList2922 = arrayList11;
                                                                if (map2.isEmpty()) {
                                                                }
                                                                size = longSparseArray2.size();
                                                                SQLitePreparedStatement sQLitePreparedStatement422 = null;
                                                                i7 = 0;
                                                                SQLiteCursor sQLiteCursor1622 = null;
                                                                while (i7 < size) {
                                                                }
                                                                sQLitePreparedStatement2 = sQLitePreparedStatement422;
                                                                List<TopicsController.TopicUpdate> list22 = arrayList12;
                                                                sQLiteCursor8 = sQLiteCursor1622;
                                                                LongSparseArray longSparseArray1122 = longSparseArray5;
                                                                if (!longSparseArray4.isEmpty()) {
                                                                }
                                                                SQLiteDatabase sQLiteDatabase522 = this.database;
                                                                locale = Locale.US;
                                                                sQLiteDatabase522.executeFast(String.format(locale, "DELETE FROM messages_seq WHERE mid IN(%s)", str)).stepThis().dispose();
                                                                if (arrayList7.isEmpty()) {
                                                                }
                                                                sQLiteDatabase2 = this.database;
                                                                if (sQLiteDatabase2 != null) {
                                                                }
                                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                                }
                                                                if (sQLitePreparedStatement == null) {
                                                                }
                                                            } catch (Throwable th24) {
                                                                th = th24;
                                                                th = th;
                                                                sQLiteCursor4 = sQLiteCursorQueryFinalized;
                                                                sQLitePreparedStatement = null;
                                                                sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                                sQLiteDatabase2 = this.database;
                                                                if (sQLiteDatabase2 != null) {
                                                                }
                                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                                }
                                                                if (sQLitePreparedStatement == null) {
                                                                }
                                                            }
                                                            arrayList17 = arrayList19;
                                                            longSparseArray2 = longSparseArray10;
                                                        } else {
                                                            arrayList17 = arrayList19;
                                                            longSparseArray2 = longSparseArray10;
                                                        }
                                                        if (iIntValue11 < 2) {
                                                            numArr2[1] = Integer.valueOf(numArr2[1].intValue() + 1);
                                                        }
                                                        if (iIntValue11 == 0 || iIntValue11 == 2) {
                                                            numArr2[0] = Integer.valueOf(numArr2[0].intValue() + 1);
                                                        }
                                                    }
                                                    if (!DialogObject.isEncryptedDialog(jLongValue2) || z || jLongValue2 == clientUserId) {
                                                        nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(1);
                                                        if (nativeByteBufferByteBufferValue == null) {
                                                            TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                                                            messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, clientUserId);
                                                            if (arrayList3 != null) {
                                                                arrayList3.add(messageTLdeserialize);
                                                            }
                                                            nativeByteBufferByteBufferValue.reuse();
                                                            if (DialogObject.isEncryptedDialog(jLongValue2) || z) {
                                                                arrayList6 = arrayList25;
                                                                arrayList7 = arrayList17;
                                                                long j7 = clientUserId;
                                                                j6 = jLongValue2;
                                                                arrayList8 = arrayList26;
                                                                longSparseArray3 = longSparseArray;
                                                                arrayList9 = arrayList3;
                                                                i4 = 5;
                                                                try {
                                                                    addFilesToDelete(messageTLdeserialize, arrayList26, arrayList5, arrayList4, false);
                                                                    j2 = j7;
                                                                } catch (Exception e14) {
                                                                    e = e14;
                                                                    j2 = j7;
                                                                    th15 = e;
                                                                    checkSQLException(th15);
                                                                    sQLiteCursorQueryFinalized.dispose();
                                                                    if (j >= 0) {
                                                                    }
                                                                    this.database.beginTransaction();
                                                                    while (i5 < 4) {
                                                                    }
                                                                    deleteFromDownloadQueue(arrayList5, true);
                                                                    final ArrayList arrayList28222 = arrayList4;
                                                                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda200
                                                                        @Override // java.lang.Runnable
                                                                        public final void run() {
                                                                            this.f$0.lambda$markMessagesAsDeletedInternal$207(arrayList28222);
                                                                        }
                                                                    });
                                                                    getFileLoader().deleteFiles(arrayList8, 0);
                                                                    i6 = 0;
                                                                    while (i6 < longSparseArray8.size()) {
                                                                    }
                                                                    ArrayList<TopicKey> arrayList29222 = arrayList11;
                                                                    if (map2.isEmpty()) {
                                                                    }
                                                                    size = longSparseArray2.size();
                                                                    SQLitePreparedStatement sQLitePreparedStatement4222 = null;
                                                                    i7 = 0;
                                                                    SQLiteCursor sQLiteCursor16222 = null;
                                                                    while (i7 < size) {
                                                                    }
                                                                    sQLitePreparedStatement2 = sQLitePreparedStatement4222;
                                                                    List<TopicsController.TopicUpdate> list222 = arrayList12;
                                                                    sQLiteCursor8 = sQLiteCursor16222;
                                                                    LongSparseArray longSparseArray11222 = longSparseArray5;
                                                                    if (!longSparseArray4.isEmpty()) {
                                                                    }
                                                                    SQLiteDatabase sQLiteDatabase5222 = this.database;
                                                                    locale = Locale.US;
                                                                    sQLiteDatabase5222.executeFast(String.format(locale, "DELETE FROM messages_seq WHERE mid IN(%s)", str)).stepThis().dispose();
                                                                    if (arrayList7.isEmpty()) {
                                                                    }
                                                                    sQLiteDatabase2 = this.database;
                                                                    if (sQLiteDatabase2 != null) {
                                                                    }
                                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement == null) {
                                                                    }
                                                                }
                                                            } else {
                                                                arrayList6 = arrayList25;
                                                                j6 = jLongValue2;
                                                                arrayList8 = arrayList26;
                                                                arrayList9 = arrayList3;
                                                                longSparseArray3 = longSparseArray;
                                                                arrayList7 = arrayList17;
                                                                i4 = 5;
                                                                j2 = clientUserId;
                                                            }
                                                            if (j6 == j2) {
                                                                try {
                                                                    long savedDialogId = MessageObject.getSavedDialogId(j2, messageTLdeserialize);
                                                                    if (savedDialogId != 0) {
                                                                        ArrayList arrayList30 = (ArrayList) longSparseArray3.get(savedDialogId);
                                                                        if (arrayList30 == null) {
                                                                            arrayList30 = new ArrayList();
                                                                            longSparseArray3.put(savedDialogId, arrayList30);
                                                                        }
                                                                        arrayList30.add(Integer.valueOf(iIntValue10));
                                                                    }
                                                                } catch (Exception e15) {
                                                                    e = e15;
                                                                    th15 = e;
                                                                    checkSQLException(th15);
                                                                    sQLiteCursorQueryFinalized.dispose();
                                                                    if (j >= 0) {
                                                                    }
                                                                    this.database.beginTransaction();
                                                                    while (i5 < 4) {
                                                                    }
                                                                    deleteFromDownloadQueue(arrayList5, true);
                                                                    final ArrayList arrayList282222 = arrayList4;
                                                                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda200
                                                                        @Override // java.lang.Runnable
                                                                        public final void run() {
                                                                            this.f$0.lambda$markMessagesAsDeletedInternal$207(arrayList282222);
                                                                        }
                                                                    });
                                                                    getFileLoader().deleteFiles(arrayList8, 0);
                                                                    i6 = 0;
                                                                    while (i6 < longSparseArray8.size()) {
                                                                    }
                                                                    ArrayList<TopicKey> arrayList292222 = arrayList11;
                                                                    if (map2.isEmpty()) {
                                                                    }
                                                                    size = longSparseArray2.size();
                                                                    SQLitePreparedStatement sQLitePreparedStatement42222 = null;
                                                                    i7 = 0;
                                                                    SQLiteCursor sQLiteCursor162222 = null;
                                                                    while (i7 < size) {
                                                                    }
                                                                    sQLitePreparedStatement2 = sQLitePreparedStatement42222;
                                                                    List<TopicsController.TopicUpdate> list2222 = arrayList12;
                                                                    sQLiteCursor8 = sQLiteCursor162222;
                                                                    LongSparseArray longSparseArray112222 = longSparseArray5;
                                                                    if (!longSparseArray4.isEmpty()) {
                                                                    }
                                                                    SQLiteDatabase sQLiteDatabase52222 = this.database;
                                                                    locale = Locale.US;
                                                                    sQLiteDatabase52222.executeFast(String.format(locale, "DELETE FROM messages_seq WHERE mid IN(%s)", str)).stepThis().dispose();
                                                                    if (arrayList7.isEmpty()) {
                                                                    }
                                                                    sQLiteDatabase2 = this.database;
                                                                    if (sQLiteDatabase2 != null) {
                                                                    }
                                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement == null) {
                                                                    }
                                                                }
                                                            }
                                                            clientUserId = j2;
                                                            longSparseArray = longSparseArray3;
                                                            arrayList3 = arrayList9;
                                                            arrayList19 = arrayList7;
                                                            longSparseArray10 = longSparseArray2;
                                                            i3 = 0;
                                                            arrayList21 = arrayList8;
                                                            arrayList25 = arrayList6;
                                                        } else {
                                                            arrayList21 = arrayList26;
                                                            arrayList3 = arrayList3;
                                                            arrayList19 = arrayList17;
                                                            longSparseArray10 = longSparseArray2;
                                                        }
                                                    } else {
                                                        arrayList21 = arrayList26;
                                                        arrayList19 = arrayList17;
                                                        longSparseArray10 = longSparseArray2;
                                                    }
                                                    i3 = 0;
                                                    while (sQLiteCursorQueryFinalized.next()) {
                                                        try {
                                                            try {
                                                            } catch (Throwable th25) {
                                                                th = th25;
                                                            }
                                                        } catch (Exception e16) {
                                                            e = e16;
                                                            arrayList6 = arrayList25;
                                                            arrayList7 = arrayList19;
                                                            arrayList8 = arrayList21;
                                                            longSparseArray2 = longSparseArray10;
                                                            arrayList9 = arrayList3;
                                                            longSparseArray3 = longSparseArray;
                                                            i4 = 5;
                                                            j2 = clientUserId;
                                                        }
                                                    }
                                                } catch (Exception e17) {
                                                    e = e17;
                                                    arrayList17 = arrayList19;
                                                    longSparseArray2 = longSparseArray10;
                                                }
                                            }
                                            if (DialogObject.isEncryptedDialog(jLongValue2)) {
                                            }
                                            nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(1);
                                            if (nativeByteBufferByteBufferValue == null) {
                                            }
                                        } catch (Exception e18) {
                                            e = e18;
                                            arrayList6 = arrayList25;
                                            j2 = clientUserId;
                                            arrayList8 = arrayList26;
                                            arrayList9 = arrayList3;
                                            longSparseArray3 = longSparseArray;
                                            arrayList7 = arrayList17;
                                            i4 = 5;
                                            th15 = e;
                                            checkSQLException(th15);
                                            sQLiteCursorQueryFinalized.dispose();
                                            if (j >= 0) {
                                            }
                                            this.database.beginTransaction();
                                            while (i5 < 4) {
                                            }
                                            deleteFromDownloadQueue(arrayList5, true);
                                            final ArrayList arrayList2822222 = arrayList4;
                                            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda200
                                                @Override // java.lang.Runnable
                                                public final void run() {
                                                    this.f$0.lambda$markMessagesAsDeletedInternal$207(arrayList2822222);
                                                }
                                            });
                                            getFileLoader().deleteFiles(arrayList8, 0);
                                            i6 = 0;
                                            while (i6 < longSparseArray8.size()) {
                                            }
                                            ArrayList<TopicKey> arrayList2922222 = arrayList11;
                                            if (map2.isEmpty()) {
                                            }
                                            size = longSparseArray2.size();
                                            SQLitePreparedStatement sQLitePreparedStatement422222 = null;
                                            i7 = 0;
                                            SQLiteCursor sQLiteCursor1622222 = null;
                                            while (i7 < size) {
                                            }
                                            sQLitePreparedStatement2 = sQLitePreparedStatement422222;
                                            List<TopicsController.TopicUpdate> list22222 = arrayList12;
                                            sQLiteCursor8 = sQLiteCursor1622222;
                                            LongSparseArray longSparseArray1122222 = longSparseArray5;
                                            if (!longSparseArray4.isEmpty()) {
                                            }
                                            SQLiteDatabase sQLiteDatabase522222 = this.database;
                                            locale = Locale.US;
                                            sQLiteDatabase522222.executeFast(String.format(locale, "DELETE FROM messages_seq WHERE mid IN(%s)", str)).stepThis().dispose();
                                            if (arrayList7.isEmpty()) {
                                            }
                                            sQLiteDatabase2 = this.database;
                                            if (sQLiteDatabase2 != null) {
                                            }
                                            if (sQLiteCursorQueryFinalized2 != null) {
                                            }
                                            if (sQLitePreparedStatement == null) {
                                            }
                                        }
                                        arrayList17 = arrayList19;
                                        longSparseArray2 = longSparseArray10;
                                    } catch (Exception e19) {
                                        e = e19;
                                        arrayList6 = arrayList25;
                                        arrayList7 = arrayList19;
                                        j2 = clientUserId;
                                        arrayList8 = arrayList26;
                                        longSparseArray2 = longSparseArray10;
                                        arrayList9 = arrayList3;
                                        longSparseArray3 = longSparseArray;
                                    }
                                }
                                arrayList6 = arrayList25;
                                arrayList7 = arrayList19;
                                arrayList8 = arrayList21;
                                longSparseArray2 = longSparseArray10;
                                arrayList9 = arrayList3;
                                longSparseArray3 = longSparseArray;
                                i4 = 5;
                                j2 = clientUserId;
                                sQLiteCursorQueryFinalized.dispose();
                                if (j >= 0) {
                                    try {
                                        try {
                                            ?? r13 = 0;
                                            SQLiteCursor sQLiteCursorQueryFinalized7 = this.database.queryFinalized(String.format(Locale.US, "SELECT uid, data, read_state, out, mention, mid FROM messages_topics WHERE mid IN(%s) AND uid = %d", strJoin3, Long.valueOf(j)), new Object[0]);
                                            ArrayList<TopicKey> arrayList31 = null;
                                            while (sQLiteCursorQueryFinalized7.next()) {
                                                try {
                                                    try {
                                                        long jLongValue3 = sQLiteCursorQueryFinalized7.longValue(r13);
                                                        ArrayList arrayList32 = arrayList6;
                                                        try {
                                                            arrayList32.remove(Integer.valueOf(sQLiteCursorQueryFinalized7.intValue(i4)));
                                                            NativeByteBuffer nativeByteBufferByteBufferValue2 = sQLiteCursorQueryFinalized7.byteBufferValue(1);
                                                            if (nativeByteBufferByteBufferValue2 != 0) {
                                                                TLRPC.Message messageTLdeserialize2 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue2, nativeByteBufferByteBufferValue2.readInt32(r13), r13);
                                                                try {
                                                                    messageTLdeserialize2.readAttachPath(nativeByteBufferByteBufferValue2, getUserConfig().clientUserId);
                                                                    nativeByteBufferByteBufferValue2.reuse();
                                                                    arrayList10 = arrayList32;
                                                                    j3 = j2;
                                                                    try {
                                                                        addFilesToDelete(messageTLdeserialize2, arrayList8, arrayList5, arrayList4, false);
                                                                        if (messageTLdeserialize2.action instanceof TLRPC.TL_messageActionTopicCreate) {
                                                                            ArrayList<TopicKey> arrayList33 = arrayList31 == null ? new ArrayList<>() : arrayList31;
                                                                            try {
                                                                                j4 = jLongValue3;
                                                                                arrayList33.add(TopicKey.of(j4, messageTLdeserialize2.id));
                                                                                arrayList31 = arrayList33;
                                                                            } catch (Exception e20) {
                                                                                e = e20;
                                                                                map2 = map;
                                                                                arrayList31 = arrayList33;
                                                                                try {
                                                                                    checkSQLException(e);
                                                                                    sQLiteCursorQueryFinalized7.dispose();
                                                                                    arrayList11 = arrayList31;
                                                                                    this.database.beginTransaction();
                                                                                    while (i5 < 4) {
                                                                                    }
                                                                                    deleteFromDownloadQueue(arrayList5, true);
                                                                                    final ArrayList arrayList28222222 = arrayList4;
                                                                                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda200
                                                                                        @Override // java.lang.Runnable
                                                                                        public final void run() {
                                                                                            this.f$0.lambda$markMessagesAsDeletedInternal$207(arrayList28222222);
                                                                                        }
                                                                                    });
                                                                                    getFileLoader().deleteFiles(arrayList8, 0);
                                                                                    i6 = 0;
                                                                                    while (i6 < longSparseArray8.size()) {
                                                                                    }
                                                                                    ArrayList<TopicKey> arrayList29222222 = arrayList11;
                                                                                    if (map2.isEmpty()) {
                                                                                    }
                                                                                    size = longSparseArray2.size();
                                                                                    SQLitePreparedStatement sQLitePreparedStatement4222222 = null;
                                                                                    i7 = 0;
                                                                                    SQLiteCursor sQLiteCursor16222222 = null;
                                                                                    while (i7 < size) {
                                                                                    }
                                                                                    sQLitePreparedStatement2 = sQLitePreparedStatement4222222;
                                                                                    List<TopicsController.TopicUpdate> list222222 = arrayList12;
                                                                                    sQLiteCursor8 = sQLiteCursor16222222;
                                                                                    LongSparseArray longSparseArray11222222 = longSparseArray5;
                                                                                    if (!longSparseArray4.isEmpty()) {
                                                                                    }
                                                                                    SQLiteDatabase sQLiteDatabase5222222 = this.database;
                                                                                    locale = Locale.US;
                                                                                    sQLiteDatabase5222222.executeFast(String.format(locale, "DELETE FROM messages_seq WHERE mid IN(%s)", str)).stepThis().dispose();
                                                                                    if (arrayList7.isEmpty()) {
                                                                                    }
                                                                                } catch (Exception e21) {
                                                                                    th5 = e21;
                                                                                    sQLiteCursor6 = sQLiteCursorQueryFinalized7;
                                                                                    th3 = th5;
                                                                                    sQLiteCursor = sQLiteCursor6;
                                                                                    sQLitePreparedStatementExecuteFast = null;
                                                                                    sQLiteCursor3 = sQLiteCursor;
                                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                                                    th4 = th3;
                                                                                    sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                                                    checkSQLException(th4);
                                                                                    sQLiteDatabase = this.database;
                                                                                    if (sQLiteDatabase != null) {
                                                                                    }
                                                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                    }
                                                                                }
                                                                                sQLiteDatabase2 = this.database;
                                                                                if (sQLiteDatabase2 != null) {
                                                                                }
                                                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement == null) {
                                                                                }
                                                                            }
                                                                        } else {
                                                                            j4 = jLongValue3;
                                                                        }
                                                                        topicId = MessageObject.getTopicId(this.currentAccount, messageTLdeserialize2, isForum(j4), isMonoForum(j4));
                                                                    } catch (Exception e22) {
                                                                        e = e22;
                                                                        map2 = map;
                                                                        checkSQLException(e);
                                                                        sQLiteCursorQueryFinalized7.dispose();
                                                                        arrayList11 = arrayList31;
                                                                        this.database.beginTransaction();
                                                                        while (i5 < 4) {
                                                                        }
                                                                        deleteFromDownloadQueue(arrayList5, true);
                                                                        final ArrayList arrayList282222222 = arrayList4;
                                                                        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda200
                                                                            @Override // java.lang.Runnable
                                                                            public final void run() {
                                                                                this.f$0.lambda$markMessagesAsDeletedInternal$207(arrayList282222222);
                                                                            }
                                                                        });
                                                                        getFileLoader().deleteFiles(arrayList8, 0);
                                                                        i6 = 0;
                                                                        while (i6 < longSparseArray8.size()) {
                                                                        }
                                                                        ArrayList<TopicKey> arrayList292222222 = arrayList11;
                                                                        if (map2.isEmpty()) {
                                                                        }
                                                                        size = longSparseArray2.size();
                                                                        SQLitePreparedStatement sQLitePreparedStatement42222222 = null;
                                                                        i7 = 0;
                                                                        SQLiteCursor sQLiteCursor162222222 = null;
                                                                        while (i7 < size) {
                                                                        }
                                                                        sQLitePreparedStatement2 = sQLitePreparedStatement42222222;
                                                                        List<TopicsController.TopicUpdate> list2222222 = arrayList12;
                                                                        sQLiteCursor8 = sQLiteCursor162222222;
                                                                        LongSparseArray longSparseArray112222222 = longSparseArray5;
                                                                        if (!longSparseArray4.isEmpty()) {
                                                                        }
                                                                        SQLiteDatabase sQLiteDatabase52222222 = this.database;
                                                                        locale = Locale.US;
                                                                        sQLiteDatabase52222222.executeFast(String.format(locale, "DELETE FROM messages_seq WHERE mid IN(%s)", str)).stepThis().dispose();
                                                                        if (arrayList7.isEmpty()) {
                                                                        }
                                                                        sQLiteDatabase2 = this.database;
                                                                        if (sQLiteDatabase2 != null) {
                                                                        }
                                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement == null) {
                                                                        }
                                                                    }
                                                                } catch (Exception e23) {
                                                                    e = e23;
                                                                    arrayList10 = arrayList32;
                                                                    j3 = j2;
                                                                    map2 = map;
                                                                    checkSQLException(e);
                                                                    sQLiteCursorQueryFinalized7.dispose();
                                                                    arrayList11 = arrayList31;
                                                                    this.database.beginTransaction();
                                                                    while (i5 < 4) {
                                                                    }
                                                                    deleteFromDownloadQueue(arrayList5, true);
                                                                    final ArrayList arrayList2822222222 = arrayList4;
                                                                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda200
                                                                        @Override // java.lang.Runnable
                                                                        public final void run() {
                                                                            this.f$0.lambda$markMessagesAsDeletedInternal$207(arrayList2822222222);
                                                                        }
                                                                    });
                                                                    getFileLoader().deleteFiles(arrayList8, 0);
                                                                    i6 = 0;
                                                                    while (i6 < longSparseArray8.size()) {
                                                                    }
                                                                    ArrayList<TopicKey> arrayList2922222222 = arrayList11;
                                                                    if (map2.isEmpty()) {
                                                                    }
                                                                    size = longSparseArray2.size();
                                                                    SQLitePreparedStatement sQLitePreparedStatement422222222 = null;
                                                                    i7 = 0;
                                                                    SQLiteCursor sQLiteCursor1622222222 = null;
                                                                    while (i7 < size) {
                                                                    }
                                                                    sQLitePreparedStatement2 = sQLitePreparedStatement422222222;
                                                                    List<TopicsController.TopicUpdate> list22222222 = arrayList12;
                                                                    sQLiteCursor8 = sQLiteCursor1622222222;
                                                                    LongSparseArray longSparseArray1122222222 = longSparseArray5;
                                                                    if (!longSparseArray4.isEmpty()) {
                                                                    }
                                                                    SQLiteDatabase sQLiteDatabase522222222 = this.database;
                                                                    locale = Locale.US;
                                                                    sQLiteDatabase522222222.executeFast(String.format(locale, "DELETE FROM messages_seq WHERE mid IN(%s)", str)).stepThis().dispose();
                                                                    if (arrayList7.isEmpty()) {
                                                                    }
                                                                    sQLiteDatabase2 = this.database;
                                                                    if (sQLiteDatabase2 != null) {
                                                                    }
                                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement == null) {
                                                                    }
                                                                }
                                                            } else {
                                                                arrayList10 = arrayList32;
                                                                j3 = j2;
                                                                topicId = 0;
                                                            }
                                                            if (topicId != 0) {
                                                                TopicKey topicKeyOf = TopicKey.of(j, topicId);
                                                                int iIntValue12 = sQLiteCursorQueryFinalized7.intValue(2);
                                                                map2 = map;
                                                                try {
                                                                    int[] iArr = (int[]) map2.get(topicKeyOf);
                                                                    if (iArr == null) {
                                                                        iArr = new int[3];
                                                                        map2.put(topicKeyOf, iArr);
                                                                    }
                                                                    iArr[2] = iArr[2] + 1;
                                                                    if (sQLiteCursorQueryFinalized7.intValue(3) == 0) {
                                                                        if (iIntValue12 < 2) {
                                                                            iArr[1] = iArr[1] + 1;
                                                                        }
                                                                        if (iIntValue12 == 0 || iIntValue12 == 2) {
                                                                            iArr[0] = iArr[0] + 1;
                                                                        }
                                                                    }
                                                                } catch (Exception e24) {
                                                                    e = e24;
                                                                    checkSQLException(e);
                                                                    sQLiteCursorQueryFinalized7.dispose();
                                                                    arrayList11 = arrayList31;
                                                                    this.database.beginTransaction();
                                                                    while (i5 < 4) {
                                                                    }
                                                                    deleteFromDownloadQueue(arrayList5, true);
                                                                    final ArrayList arrayList28222222222 = arrayList4;
                                                                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda200
                                                                        @Override // java.lang.Runnable
                                                                        public final void run() {
                                                                            this.f$0.lambda$markMessagesAsDeletedInternal$207(arrayList28222222222);
                                                                        }
                                                                    });
                                                                    getFileLoader().deleteFiles(arrayList8, 0);
                                                                    i6 = 0;
                                                                    while (i6 < longSparseArray8.size()) {
                                                                    }
                                                                    ArrayList<TopicKey> arrayList29222222222 = arrayList11;
                                                                    if (map2.isEmpty()) {
                                                                    }
                                                                    size = longSparseArray2.size();
                                                                    SQLitePreparedStatement sQLitePreparedStatement4222222222 = null;
                                                                    i7 = 0;
                                                                    SQLiteCursor sQLiteCursor16222222222 = null;
                                                                    while (i7 < size) {
                                                                    }
                                                                    sQLitePreparedStatement2 = sQLitePreparedStatement4222222222;
                                                                    List<TopicsController.TopicUpdate> list222222222 = arrayList12;
                                                                    sQLiteCursor8 = sQLiteCursor16222222222;
                                                                    LongSparseArray longSparseArray11222222222 = longSparseArray5;
                                                                    if (!longSparseArray4.isEmpty()) {
                                                                    }
                                                                    SQLiteDatabase sQLiteDatabase5222222222 = this.database;
                                                                    locale = Locale.US;
                                                                    sQLiteDatabase5222222222.executeFast(String.format(locale, "DELETE FROM messages_seq WHERE mid IN(%s)", str)).stepThis().dispose();
                                                                    if (arrayList7.isEmpty()) {
                                                                    }
                                                                    sQLiteDatabase2 = this.database;
                                                                    if (sQLiteDatabase2 != null) {
                                                                    }
                                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatement == null) {
                                                                    }
                                                                }
                                                            } else {
                                                                map2 = map;
                                                            }
                                                            map = map2;
                                                            arrayList6 = arrayList10;
                                                            j2 = j3;
                                                            r13 = 0;
                                                            i4 = 5;
                                                        } catch (Exception e25) {
                                                            e = e25;
                                                            arrayList10 = arrayList32;
                                                        }
                                                    } catch (Exception e26) {
                                                        e = e26;
                                                        map2 = map;
                                                        j3 = j2;
                                                        arrayList10 = arrayList6;
                                                    }
                                                } catch (Throwable th26) {
                                                    th = th26;
                                                    sQLiteCursor5 = sQLiteCursorQueryFinalized7;
                                                    sQLiteCursor4 = sQLiteCursor5;
                                                    sQLitePreparedStatement = null;
                                                    sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                    sQLiteDatabase2 = this.database;
                                                    if (sQLiteDatabase2 != null) {
                                                    }
                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                    }
                                                    if (sQLitePreparedStatement == null) {
                                                    }
                                                }
                                            }
                                            map2 = map;
                                            j3 = j2;
                                            arrayList10 = arrayList6;
                                            sQLiteCursorQueryFinalized7.dispose();
                                            arrayList11 = arrayList31;
                                        } catch (Exception e27) {
                                            e = e27;
                                            th3 = e;
                                            sQLitePreparedStatementExecuteFast = null;
                                            sQLiteCursor3 = null;
                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                            th4 = th3;
                                            sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                            checkSQLException(th4);
                                            sQLiteDatabase = this.database;
                                            if (sQLiteDatabase != null) {
                                            }
                                            if (sQLiteCursorQueryFinalized2 != null) {
                                            }
                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                            }
                                        } catch (Throwable th27) {
                                            th = th27;
                                            th = th;
                                            sQLitePreparedStatement = null;
                                            sQLiteCursor4 = null;
                                            sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                            sQLiteDatabase2 = this.database;
                                            if (sQLiteDatabase2 != null) {
                                            }
                                            if (sQLiteCursorQueryFinalized2 != null) {
                                            }
                                            if (sQLitePreparedStatement == null) {
                                            }
                                        }
                                    } catch (Exception e28) {
                                        th5 = e28;
                                        sQLiteCursor6 = null;
                                    } catch (Throwable th28) {
                                        th = th28;
                                        sQLiteCursor5 = null;
                                    }
                                } else {
                                    map2 = map;
                                    j3 = j2;
                                    arrayList10 = arrayList6;
                                    arrayList11 = null;
                                }
                                try {
                                    this.database.beginTransaction();
                                    for (i5 = 0; i5 < 4; i5++) {
                                        try {
                                            if (i5 == 0) {
                                                if (j != 0) {
                                                    try {
                                                        database = getMessagesStorage().getDatabase();
                                                        str3 = "UPDATE messages_v2 SET replydata = ? WHERE reply_to_message_id IN(?) AND uid = ?";
                                                    } catch (Exception e29) {
                                                        e = e29;
                                                        th3 = e;
                                                        sQLitePreparedStatementExecuteFast = null;
                                                        sQLiteCursor3 = null;
                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                        th4 = th3;
                                                        sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                        checkSQLException(th4);
                                                        sQLiteDatabase = this.database;
                                                        if (sQLiteDatabase != null) {
                                                        }
                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                        }
                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                        }
                                                    } catch (Throwable th29) {
                                                        th = th29;
                                                        th = th;
                                                        sQLitePreparedStatement = null;
                                                        sQLiteCursor4 = null;
                                                        sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                        sQLiteDatabase2 = this.database;
                                                        if (sQLiteDatabase2 != null) {
                                                        }
                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                        }
                                                        if (sQLitePreparedStatement == null) {
                                                        }
                                                    }
                                                } else {
                                                    database = getMessagesStorage().getDatabase();
                                                    str3 = "UPDATE messages_v2 SET replydata = ? WHERE reply_to_message_id IN(?) AND is_channel = 0";
                                                }
                                            } else if (i5 == 1) {
                                                if (j != 0) {
                                                    database = getMessagesStorage().getDatabase();
                                                    str3 = "UPDATE scheduled_messages_v2 SET replydata = ? WHERE reply_to_message_id IN(?) AND uid = ?";
                                                } else {
                                                    database = getMessagesStorage().getDatabase();
                                                    str3 = "UPDATE scheduled_messages_v2 SET replydata = ? WHERE reply_to_message_id IN(?)";
                                                }
                                            } else if (i5 == 2) {
                                                database = getMessagesStorage().getDatabase();
                                                str3 = "UPDATE quick_replies_messages SET replydata = ? WHERE reply_to_message_id IN(?)";
                                            } else {
                                                if (j != 0) {
                                                    database = getMessagesStorage().getDatabase();
                                                    str3 = "UPDATE messages_topics SET replydata = ? WHERE reply_to_message_id IN(?) AND uid = ?";
                                                }
                                            }
                                            TLRPC.TL_messageEmpty tL_messageEmpty = new TLRPC.TL_messageEmpty();
                                            NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(tL_messageEmpty.getObjectSize());
                                            tL_messageEmpty.serializeToStream(nativeByteBuffer);
                                            sQLitePreparedStatementExecuteFast3.requery();
                                            sQLitePreparedStatementExecuteFast3.bindByteBuffer(1, nativeByteBuffer);
                                            sQLitePreparedStatementExecuteFast3.bindString(2, strJoin3);
                                            if (j != 0 && i5 != 2) {
                                                sQLitePreparedStatementExecuteFast3.bindLong(3, j);
                                            }
                                            sQLitePreparedStatementExecuteFast3.step();
                                            sQLitePreparedStatementExecuteFast3.dispose();
                                            this.database.commitTransaction();
                                            nativeByteBuffer.reuse();
                                        } catch (Exception e30) {
                                            th6 = e30;
                                            th3 = th6;
                                            sQLitePreparedStatementExecuteFast = sQLitePreparedStatementExecuteFast3;
                                            sQLiteCursor3 = null;
                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                            th4 = th3;
                                            sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                            checkSQLException(th4);
                                            sQLiteDatabase = this.database;
                                            if (sQLiteDatabase != null) {
                                            }
                                            if (sQLiteCursorQueryFinalized2 != null) {
                                            }
                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                            }
                                        } catch (Throwable th30) {
                                            th = th30;
                                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast3;
                                            sQLiteCursor4 = null;
                                            sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                            sQLiteDatabase2 = this.database;
                                            if (sQLiteDatabase2 != null) {
                                            }
                                            if (sQLiteCursorQueryFinalized2 != null) {
                                            }
                                            if (sQLitePreparedStatement == null) {
                                            }
                                        }
                                        sQLitePreparedStatementExecuteFast3 = database.executeFast(str3);
                                    }
                                    deleteFromDownloadQueue(arrayList5, true);
                                    final ArrayList arrayList282222222222 = arrayList4;
                                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda200
                                        @Override // java.lang.Runnable
                                        public final void run() {
                                            this.f$0.lambda$markMessagesAsDeletedInternal$207(arrayList282222222222);
                                        }
                                    });
                                    getFileLoader().deleteFiles(arrayList8, 0);
                                    i6 = 0;
                                    while (i6 < longSparseArray8.size()) {
                                        long jKeyAt2 = longSparseArray8.keyAt(i6);
                                        Integer[] numArr3 = (Integer[]) longSparseArray8.valueAt(i6);
                                        ArrayList<TopicKey> arrayList34 = arrayList11;
                                        sQLiteCursorQueryFinalized6 = this.database.queryFinalized("SELECT unread_count, unread_count_i FROM dialogs WHERE did = " + jKeyAt2, new Object[0]);
                                        try {
                                            if (sQLiteCursorQueryFinalized6.next()) {
                                                iIntValue8 = sQLiteCursorQueryFinalized6.intValue(0);
                                                iIntValue9 = sQLiteCursorQueryFinalized6.intValue(1);
                                            } else {
                                                iIntValue8 = 0;
                                                iIntValue9 = 0;
                                            }
                                            sQLiteCursorQueryFinalized6.dispose();
                                        } catch (Exception e31) {
                                            sQLiteCursor15 = sQLiteCursorQueryFinalized6;
                                            th5 = e31;
                                            sQLiteCursor6 = sQLiteCursor15;
                                            th3 = th5;
                                            sQLiteCursor = sQLiteCursor6;
                                            sQLitePreparedStatementExecuteFast = null;
                                            sQLiteCursor3 = sQLiteCursor;
                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                            th4 = th3;
                                            sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                            checkSQLException(th4);
                                            sQLiteDatabase = this.database;
                                            if (sQLiteDatabase != null) {
                                            }
                                            if (sQLiteCursorQueryFinalized2 != null) {
                                            }
                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                            }
                                        } catch (Throwable th31) {
                                            sQLiteCursor14 = sQLiteCursorQueryFinalized6;
                                            th = th31;
                                            sQLiteCursor4 = sQLiteCursor14;
                                            sQLitePreparedStatement = null;
                                            sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                            sQLiteDatabase2 = this.database;
                                            if (sQLiteDatabase2 != null) {
                                            }
                                            if (sQLiteCursorQueryFinalized2 != null) {
                                            }
                                            if (sQLitePreparedStatement == null) {
                                            }
                                        }
                                        try {
                                            ArrayList<Long> arrayList35 = arrayList23;
                                            arrayList35.add(Long.valueOf(jKeyAt2));
                                            arrayList23 = arrayList35;
                                            sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET unread_count = ?, unread_count_i = ? WHERE did = ?");
                                            try {
                                                sQLitePreparedStatementExecuteFast.requery();
                                                sQLitePreparedStatementExecuteFast.bindInteger(1, Math.max(0, iIntValue8 - numArr3[0].intValue()));
                                                sQLitePreparedStatementExecuteFast.bindInteger(2, Math.max(0, iIntValue9 - numArr3[1].intValue()));
                                                sQLitePreparedStatementExecuteFast.bindLong(3, jKeyAt2);
                                                sQLitePreparedStatementExecuteFast.step();
                                                sQLitePreparedStatementExecuteFast.dispose();
                                                i6++;
                                                arrayList11 = arrayList34;
                                            } catch (Exception e32) {
                                                th3 = e32;
                                                sQLiteCursor3 = null;
                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                th4 = th3;
                                                sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                checkSQLException(th4);
                                                sQLiteDatabase = this.database;
                                                if (sQLiteDatabase != null) {
                                                }
                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                }
                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                }
                                            } catch (Throwable th32) {
                                                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                                th = th32;
                                                sQLiteCursor4 = null;
                                                sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                sQLiteDatabase2 = this.database;
                                                if (sQLiteDatabase2 != null) {
                                                }
                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                }
                                                if (sQLitePreparedStatement == null) {
                                                }
                                            }
                                        } catch (Exception e33) {
                                            th5 = e33;
                                            sQLiteCursor15 = null;
                                            sQLiteCursor6 = sQLiteCursor15;
                                            th3 = th5;
                                            sQLiteCursor = sQLiteCursor6;
                                            sQLitePreparedStatementExecuteFast = null;
                                            sQLiteCursor3 = sQLiteCursor;
                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                            th4 = th3;
                                            sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                            checkSQLException(th4);
                                            sQLiteDatabase = this.database;
                                            if (sQLiteDatabase != null) {
                                            }
                                            if (sQLiteCursorQueryFinalized2 != null) {
                                            }
                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                            }
                                        } catch (Throwable th33) {
                                            th = th33;
                                            sQLiteCursor14 = null;
                                            sQLiteCursor4 = sQLiteCursor14;
                                            sQLitePreparedStatement = null;
                                            sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                            sQLiteDatabase2 = this.database;
                                            if (sQLiteDatabase2 != null) {
                                            }
                                            if (sQLiteCursorQueryFinalized2 != null) {
                                            }
                                            if (sQLitePreparedStatement == null) {
                                            }
                                        }
                                    }
                                    ArrayList<TopicKey> arrayList292222222222 = arrayList11;
                                    if (map2.isEmpty()) {
                                        Iterator it = map2.keySet().iterator();
                                        HashSet hashSet = null;
                                        arrayList12 = null;
                                        while (it.hasNext()) {
                                            TopicKey topicKey = (TopicKey) it.next();
                                            boolean zIsMonoForum = isMonoForum(topicKey.dialogId);
                                            LongSparseArray longSparseArray12 = longSparseArray3;
                                            Iterator it2 = it;
                                            try {
                                                sQLiteCursorQueryFinalized6 = this.database.queryFinalized(String.format(Locale.US, "SELECT unread_count, unread_mentions, total_messages_count FROM topics WHERE did = %d AND topic_id = %d", Long.valueOf(topicKey.dialogId), Long.valueOf(topicKey.topicId)), new Object[0]);
                                                if (sQLiteCursorQueryFinalized6.next()) {
                                                    iIntValue5 = sQLiteCursorQueryFinalized6.intValue(0);
                                                    iIntValue6 = sQLiteCursorQueryFinalized6.intValue(1);
                                                    iIntValue7 = sQLiteCursorQueryFinalized6.intValue(2);
                                                } else {
                                                    iIntValue5 = 0;
                                                    iIntValue6 = 0;
                                                    iIntValue7 = 0;
                                                }
                                                sQLiteCursorQueryFinalized6.dispose();
                                                int[] iArr2 = (int[]) map2.get(topicKey);
                                                int iMax = Math.max(0, iIntValue5 - iArr2[0]);
                                                int iMax2 = Math.max(0, iIntValue6 - iArr2[1]);
                                                int iMax3 = Math.max(0, iIntValue7 - iArr2[2]);
                                                if (!BuildVars.DEBUG_PRIVATE_VERSION || iMax2 <= 0) {
                                                    longSparseArray7 = longSparseArray8;
                                                    str2 = strJoin3;
                                                } else {
                                                    StringBuilder sb = new StringBuilder();
                                                    sb.append("(markMessagesAsDeletedInternal) new unread mentions ");
                                                    sb.append(iMax2);
                                                    sb.append(" for dialog_id=");
                                                    longSparseArray7 = longSparseArray8;
                                                    str2 = strJoin3;
                                                    sb.append(topicKey.dialogId);
                                                    sb.append(" topic_id=");
                                                    sb.append(topicKey.topicId);
                                                    FileLog.d(sb.toString());
                                                }
                                                SQLitePreparedStatement sQLitePreparedStatementExecuteFast8 = this.database.executeFast("UPDATE topics SET unread_count = ?, unread_mentions = ?, total_messages_count = ? WHERE did = ? AND topic_id = ?");
                                                try {
                                                    sQLitePreparedStatementExecuteFast8.requery();
                                                    sQLitePreparedStatementExecuteFast8.bindInteger(1, iMax);
                                                    sQLitePreparedStatementExecuteFast8.bindInteger(2, iMax2);
                                                    sQLitePreparedStatementExecuteFast8.bindLong(3, iMax3);
                                                    sQLitePreparedStatementExecuteFast8.bindLong(4, topicKey.dialogId);
                                                    sQLitePreparedStatementExecuteFast8.bindLong(5, topicKey.topicId);
                                                    sQLitePreparedStatementExecuteFast8.step();
                                                    sQLitePreparedStatementExecuteFast8.dispose();
                                                    if (iMax == 0) {
                                                        if (hashSet == null) {
                                                            hashSet = new HashSet();
                                                        }
                                                        hashSet.add(Long.valueOf(topicKey.dialogId));
                                                    }
                                                    TopicsController.TopicUpdate topicUpdate = new TopicsController.TopicUpdate();
                                                    topicUpdate.dialogId = topicKey.dialogId;
                                                    topicUpdate.topicId = topicKey.topicId;
                                                    topicUpdate.unreadCount = iMax;
                                                    topicUpdate.totalMessagesCount = iMax3;
                                                    topicUpdate.onlyCounters = true;
                                                    if (iIntValue7 - iArr2[2] <= 0 && iIntValue7 > 0 && zIsMonoForum) {
                                                        topicUpdate.checkForDelete = true;
                                                    }
                                                    if (arrayList12 == null) {
                                                        arrayList12 = new ArrayList();
                                                    }
                                                    arrayList12.add(topicUpdate);
                                                    it = it2;
                                                    longSparseArray8 = longSparseArray7;
                                                    longSparseArray3 = longSparseArray12;
                                                    strJoin3 = str2;
                                                } catch (Exception e34) {
                                                    th3 = e34;
                                                    sQLitePreparedStatementExecuteFast = sQLitePreparedStatementExecuteFast8;
                                                    sQLiteCursor3 = null;
                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                    th4 = th3;
                                                    sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                    checkSQLException(th4);
                                                    sQLiteDatabase = this.database;
                                                    if (sQLiteDatabase != null) {
                                                    }
                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                    }
                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                    }
                                                } catch (Throwable th34) {
                                                    th = th34;
                                                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast8;
                                                    sQLiteCursor4 = null;
                                                    sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                    sQLiteDatabase2 = this.database;
                                                    if (sQLiteDatabase2 != null) {
                                                    }
                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                    }
                                                    if (sQLitePreparedStatement == null) {
                                                    }
                                                }
                                            } catch (Exception e35) {
                                                e = e35;
                                                th3 = e;
                                                sQLitePreparedStatementExecuteFast = null;
                                                sQLiteCursor3 = null;
                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                th4 = th3;
                                                sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                checkSQLException(th4);
                                                sQLiteDatabase = this.database;
                                                if (sQLiteDatabase != null) {
                                                }
                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                }
                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                }
                                            } catch (Throwable th35) {
                                                th = th35;
                                                th = th;
                                                sQLitePreparedStatement = null;
                                                sQLiteCursor4 = null;
                                                sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                sQLiteDatabase2 = this.database;
                                                if (sQLiteDatabase2 != null) {
                                                }
                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                }
                                                if (sQLitePreparedStatement == null) {
                                                }
                                            }
                                        }
                                        longSparseArray4 = longSparseArray3;
                                        longSparseArray5 = longSparseArray8;
                                        str = strJoin3;
                                        if (hashSet != null) {
                                            Iterator it3 = hashSet.iterator();
                                            while (it3.hasNext()) {
                                                resetForumBadgeIfNeed(((Long) it3.next()).longValue());
                                            }
                                        }
                                    } else {
                                        longSparseArray4 = longSparseArray3;
                                        longSparseArray5 = longSparseArray8;
                                        str = strJoin3;
                                        arrayList12 = null;
                                    }
                                    size = longSparseArray2.size();
                                    SQLitePreparedStatement sQLitePreparedStatement42222222222 = null;
                                    i7 = 0;
                                    SQLiteCursor sQLiteCursor162222222222 = null;
                                    while (i7 < size) {
                                        LongSparseArray longSparseArray13 = longSparseArray2;
                                        try {
                                            jKeyAt = longSparseArray13.keyAt(i7);
                                            charSequence = charSequence3;
                                            strJoin = TextUtils.join(charSequence, (ArrayList) longSparseArray13.valueAt(i7));
                                            if (DialogObject.isEncryptedDialog(jKeyAt)) {
                                                i8 = size;
                                                sQLitePreparedStatement2 = sQLitePreparedStatement42222222222;
                                                sQLiteCursor8 = sQLiteCursor162222222222;
                                            } else {
                                                if (DialogObject.isChatDialog(jKeyAt)) {
                                                    i8 = size;
                                                    sQLitePreparedStatement2 = sQLitePreparedStatement42222222222;
                                                    try {
                                                        sQLiteCursor8 = sQLiteCursor162222222222;
                                                        try {
                                                        } catch (Exception e36) {
                                                            e = e36;
                                                            th10 = e;
                                                            sQLiteCursor11 = sQLiteCursor8;
                                                            th3 = th10;
                                                            sQLitePreparedStatementExecuteFast = sQLitePreparedStatement2;
                                                            sQLiteCursor3 = sQLiteCursor11;
                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                            th4 = th3;
                                                            sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                            checkSQLException(th4);
                                                            sQLiteDatabase = this.database;
                                                            if (sQLiteDatabase != null) {
                                                            }
                                                            if (sQLiteCursorQueryFinalized2 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            }
                                                        } catch (Throwable th36) {
                                                            th = th36;
                                                            th = th;
                                                            sQLiteCursor10 = sQLiteCursor8;
                                                            sQLiteCursor4 = sQLiteCursor10;
                                                            sQLitePreparedStatement = sQLitePreparedStatement2;
                                                            sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                            sQLiteDatabase2 = this.database;
                                                            if (sQLiteDatabase2 != null) {
                                                            }
                                                            if (sQLiteCursorQueryFinalized2 != null) {
                                                            }
                                                            if (sQLitePreparedStatement == null) {
                                                            }
                                                        }
                                                        try {
                                                            sQLitePreparedStatementExecuteFast7 = this.database.executeFast(String.format(Locale.US, "UPDATE chat_settings_v2 SET pinned = 0 WHERE uid = %d AND pinned IN (%s)", Long.valueOf(-jKeyAt), strJoin));
                                                            sQLitePreparedStatementExecuteFast7.stepThis().dispose();
                                                        } catch (Exception e37) {
                                                            e = e37;
                                                            th10 = e;
                                                            sQLiteCursor11 = sQLiteCursor8;
                                                            th3 = th10;
                                                            sQLitePreparedStatementExecuteFast = sQLitePreparedStatement2;
                                                            sQLiteCursor3 = sQLiteCursor11;
                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                            th4 = th3;
                                                            sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                            checkSQLException(th4);
                                                            sQLiteDatabase = this.database;
                                                            if (sQLiteDatabase != null) {
                                                            }
                                                            if (sQLiteCursorQueryFinalized2 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            }
                                                        } catch (Throwable th37) {
                                                            th9 = th37;
                                                            th = th9;
                                                            sQLiteCursor10 = sQLiteCursor8;
                                                            sQLiteCursor4 = sQLiteCursor10;
                                                            sQLitePreparedStatement = sQLitePreparedStatement2;
                                                            sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                            sQLiteDatabase2 = this.database;
                                                            if (sQLiteDatabase2 != null) {
                                                            }
                                                            if (sQLiteCursorQueryFinalized2 != null) {
                                                            }
                                                            if (sQLitePreparedStatement == null) {
                                                            }
                                                        }
                                                    } catch (Exception e38) {
                                                        e = e38;
                                                        sQLiteCursor8 = sQLiteCursor162222222222;
                                                        th10 = e;
                                                        sQLiteCursor11 = sQLiteCursor8;
                                                        th3 = th10;
                                                        sQLitePreparedStatementExecuteFast = sQLitePreparedStatement2;
                                                        sQLiteCursor3 = sQLiteCursor11;
                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                        th4 = th3;
                                                        sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                        checkSQLException(th4);
                                                        sQLiteDatabase = this.database;
                                                        if (sQLiteDatabase != null) {
                                                        }
                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                        }
                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                        }
                                                    } catch (Throwable th38) {
                                                        th9 = th38;
                                                        sQLiteCursor8 = sQLiteCursor162222222222;
                                                        th = th9;
                                                        sQLiteCursor10 = sQLiteCursor8;
                                                        sQLiteCursor4 = sQLiteCursor10;
                                                        sQLitePreparedStatement = sQLitePreparedStatement2;
                                                        sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                        sQLiteDatabase2 = this.database;
                                                        if (sQLiteDatabase2 != null) {
                                                        }
                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                        }
                                                        if (sQLitePreparedStatement == null) {
                                                        }
                                                    }
                                                } else {
                                                    i8 = size;
                                                    sQLitePreparedStatement2 = sQLitePreparedStatement42222222222;
                                                    sQLiteCursor8 = sQLiteCursor162222222222;
                                                    try {
                                                        sQLitePreparedStatementExecuteFast7 = this.database.executeFast(String.format(Locale.US, "UPDATE user_settings SET pinned = 0 WHERE uid = %d AND pinned IN (%s)", Long.valueOf(jKeyAt), strJoin));
                                                        sQLitePreparedStatementExecuteFast7.stepThis().dispose();
                                                    } catch (Exception e39) {
                                                        e = e39;
                                                        th10 = e;
                                                        sQLiteCursor11 = sQLiteCursor8;
                                                        th3 = th10;
                                                        sQLitePreparedStatementExecuteFast = sQLitePreparedStatement2;
                                                        sQLiteCursor3 = sQLiteCursor11;
                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                        th4 = th3;
                                                        sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                        checkSQLException(th4);
                                                        sQLiteDatabase = this.database;
                                                        if (sQLiteDatabase != null) {
                                                        }
                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                        }
                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                        }
                                                    } catch (Throwable th39) {
                                                        th = th39;
                                                        th = th;
                                                        sQLiteCursor10 = sQLiteCursor8;
                                                        sQLiteCursor4 = sQLiteCursor10;
                                                        sQLitePreparedStatement = sQLitePreparedStatement2;
                                                        sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                        sQLiteDatabase2 = this.database;
                                                        if (sQLiteDatabase2 != null) {
                                                        }
                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                        }
                                                        if (sQLitePreparedStatement == null) {
                                                        }
                                                    }
                                                }
                                                sQLiteCursorQueryFinalized2 = sQLiteCursor2;
                                                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                                            }
                                            sQLiteDatabase3 = this.database;
                                            locale2 = Locale.US;
                                        } catch (Exception e40) {
                                            e = e40;
                                            sQLitePreparedStatement2 = sQLitePreparedStatement42222222222;
                                        } catch (Throwable th40) {
                                            th9 = th40;
                                            sQLitePreparedStatement2 = sQLitePreparedStatement42222222222;
                                        }
                                        try {
                                            sQLiteDatabase3.executeFast(String.format(locale2, "DELETE FROM chat_pinned_v2 WHERE uid = %d AND mid IN(%s)", Long.valueOf(jKeyAt), strJoin)).stepThis().dispose();
                                            SQLiteCursor sQLiteCursorQueryFinalized8 = this.database.queryFinalized("SELECT changes()", new Object[0]);
                                            try {
                                                int iIntValue13 = sQLiteCursorQueryFinalized8.next() ? sQLiteCursorQueryFinalized8.intValue(0) : 0;
                                                sQLiteCursorQueryFinalized8.dispose();
                                                if (iIntValue13 > 0) {
                                                    try {
                                                        try {
                                                            sQLiteCursorQueryFinalized4 = this.database.queryFinalized(String.format(locale2, "SELECT count FROM chat_pinned_count WHERE uid = %d", Long.valueOf(jKeyAt)), new Object[0]);
                                                            if (sQLiteCursorQueryFinalized4.next()) {
                                                                int iIntValue14 = sQLiteCursorQueryFinalized4.intValue(0);
                                                                sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE chat_pinned_count SET count = ? WHERE uid = ?");
                                                                try {
                                                                    sQLitePreparedStatementExecuteFast2.requery();
                                                                    sQLitePreparedStatementExecuteFast2.bindInteger(1, Math.max(0, iIntValue14 - iIntValue13));
                                                                    sQLitePreparedStatementExecuteFast2.bindLong(2, jKeyAt);
                                                                    sQLitePreparedStatementExecuteFast2.step();
                                                                    sQLitePreparedStatementExecuteFast2.dispose();
                                                                } catch (Exception e41) {
                                                                    e2 = e41;
                                                                    th3 = e2;
                                                                    sQLiteCursor3 = sQLiteCursorQueryFinalized4;
                                                                    sQLitePreparedStatementExecuteFast = sQLitePreparedStatementExecuteFast2;
                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                                    th4 = th3;
                                                                    sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                                    checkSQLException(th4);
                                                                    sQLiteDatabase = this.database;
                                                                    if (sQLiteDatabase != null) {
                                                                    }
                                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                                    }
                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                    }
                                                                } catch (Throwable th41) {
                                                                    sQLiteCursor4 = sQLiteCursorQueryFinalized4;
                                                                    th = th41;
                                                                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                                                                }
                                                            } else {
                                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatement2;
                                                            }
                                                        } catch (Exception e42) {
                                                            th10 = e42;
                                                            sQLiteCursor11 = null;
                                                            th3 = th10;
                                                            sQLitePreparedStatementExecuteFast = sQLitePreparedStatement2;
                                                            sQLiteCursor3 = sQLiteCursor11;
                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                            th4 = th3;
                                                            sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                            checkSQLException(th4);
                                                            sQLiteDatabase = this.database;
                                                            if (sQLiteDatabase != null) {
                                                            }
                                                            if (sQLiteCursorQueryFinalized2 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            }
                                                        } catch (Throwable th42) {
                                                            th = th42;
                                                            sQLiteCursor10 = null;
                                                            sQLiteCursor4 = sQLiteCursor10;
                                                            sQLitePreparedStatement = sQLitePreparedStatement2;
                                                            sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                            sQLiteDatabase2 = this.database;
                                                            if (sQLiteDatabase2 != null) {
                                                            }
                                                            if (sQLiteCursorQueryFinalized2 != null) {
                                                            }
                                                            if (sQLitePreparedStatement == null) {
                                                            }
                                                        }
                                                        try {
                                                            sQLiteCursorQueryFinalized4.dispose();
                                                        } catch (Exception e43) {
                                                            e2 = e43;
                                                            th3 = e2;
                                                            sQLiteCursor3 = sQLiteCursorQueryFinalized4;
                                                            sQLitePreparedStatementExecuteFast = sQLitePreparedStatementExecuteFast2;
                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                            th4 = th3;
                                                            sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                            checkSQLException(th4);
                                                            sQLiteDatabase = this.database;
                                                            if (sQLiteDatabase != null) {
                                                            }
                                                            if (sQLiteCursorQueryFinalized2 != null) {
                                                            }
                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                            }
                                                        } catch (Throwable th43) {
                                                            sQLiteCursor4 = sQLiteCursorQueryFinalized4;
                                                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                                                            th = th43;
                                                        }
                                                    } catch (Exception e44) {
                                                        th10 = e44;
                                                    } catch (Throwable th44) {
                                                        th = th44;
                                                    }
                                                } else {
                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatement2;
                                                }
                                                try {
                                                    try {
                                                        try {
                                                            this.database.executeFast(String.format(locale2, "DELETE FROM messages_v2 WHERE mid IN(%s) AND uid = %d", str, Long.valueOf(jKeyAt))).stepThis().dispose();
                                                            try {
                                                                this.database.executeFast(String.format(locale2, "DELETE FROM messages_topics WHERE mid IN(%s) AND uid = %d", str, Long.valueOf(jKeyAt))).stepThis().dispose();
                                                                try {
                                                                    this.database.executeFast(String.format(locale2, "DELETE FROM polls_v2 WHERE mid IN(%s) AND uid = %d", str, Long.valueOf(jKeyAt))).stepThis().dispose();
                                                                    try {
                                                                        this.database.executeFast(String.format(locale2, "DELETE FROM bot_keyboard WHERE mid IN(%s) AND uid = %d", str, Long.valueOf(jKeyAt))).stepThis().dispose();
                                                                        try {
                                                                            this.database.executeFast(String.format(locale2, "DELETE FROM bot_keyboard_topics WHERE mid IN(%s) AND uid = %d", str, Long.valueOf(jKeyAt))).stepThis().dispose();
                                                                        } catch (Throwable th45) {
                                                                            th = th45;
                                                                        }
                                                                    } catch (Throwable th46) {
                                                                        th = th46;
                                                                    }
                                                                } catch (Throwable th47) {
                                                                    th = th47;
                                                                }
                                                            } catch (Throwable th48) {
                                                                th = th48;
                                                            }
                                                        } catch (Throwable th49) {
                                                            th = th49;
                                                        }
                                                    } catch (Throwable th50) {
                                                        th = th50;
                                                    }
                                                } catch (Exception e45) {
                                                    th4 = e45;
                                                    sQLiteCursorQueryFinalized2 = null;
                                                }
                                                try {
                                                    try {
                                                        try {
                                                            try {
                                                                if (arrayList7.isEmpty()) {
                                                                    try {
                                                                        int i12 = 0;
                                                                        sQLiteCursorQueryFinalized3 = this.database.queryFinalized(String.format(locale2, "SELECT uid, type FROM media_v4 WHERE mid IN(%s) AND uid = %d", str, Long.valueOf(jKeyAt)), new Object[0]);
                                                                        SparseArray sparseArray = null;
                                                                        while (true) {
                                                                            try {
                                                                                longSparseArray2 = longSparseArray13;
                                                                                if (!sQLiteCursorQueryFinalized3.next()) {
                                                                                    break;
                                                                                }
                                                                                long jLongValue4 = sQLiteCursorQueryFinalized3.longValue(i12);
                                                                                int iIntValue15 = sQLiteCursorQueryFinalized3.intValue(1);
                                                                                if (sparseArray == null) {
                                                                                    sparseArray = new SparseArray();
                                                                                }
                                                                                LongSparseArray longSparseArray14 = (LongSparseArray) sparseArray.get(iIntValue15);
                                                                                if (longSparseArray14 == null) {
                                                                                    longSparseArray14 = new LongSparseArray();
                                                                                    num2 = 0;
                                                                                    sparseArray.put(iIntValue15, longSparseArray14);
                                                                                } else {
                                                                                    num2 = (Integer) longSparseArray14.get(jLongValue4);
                                                                                }
                                                                                if (num2 == null) {
                                                                                    num2 = 0;
                                                                                }
                                                                                longSparseArray14.put(jLongValue4, Integer.valueOf(num2.intValue() + 1));
                                                                                longSparseArray13 = longSparseArray2;
                                                                                i12 = 0;
                                                                            } catch (Exception e46) {
                                                                                e3 = e46;
                                                                                th8 = e3;
                                                                                sQLiteCursorQueryFinalized2 = sQLiteCursorQueryFinalized3;
                                                                                th4 = th8;
                                                                                checkSQLException(th4);
                                                                                sQLiteDatabase = this.database;
                                                                                if (sQLiteDatabase != null) {
                                                                                }
                                                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                }
                                                                            } catch (Throwable th51) {
                                                                                th7 = th51;
                                                                                sQLiteCursor7 = sQLiteCursorQueryFinalized3;
                                                                                sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatementExecuteFast2;
                                                                                sQLiteCursorQueryFinalized2 = sQLiteCursor7;
                                                                                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast4;
                                                                                th = th7;
                                                                                sQLiteDatabase2 = this.database;
                                                                                if (sQLiteDatabase2 != null) {
                                                                                }
                                                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                                                }
                                                                                if (sQLitePreparedStatement == null) {
                                                                                }
                                                                            }
                                                                        }
                                                                        sQLiteCursorQueryFinalized3.dispose();
                                                                        if (sparseArray != null) {
                                                                            try {
                                                                                sQLitePreparedStatementExecuteFast4 = this.database.executeFast("REPLACE INTO media_counts_v2 VALUES(?, ?, ?, ?)");
                                                                                try {
                                                                                    int size3 = sparseArray.size();
                                                                                    sQLiteCursor12 = null;
                                                                                    int i13 = 0;
                                                                                    while (i13 < size3) {
                                                                                        try {
                                                                                            int iKeyAt = sparseArray.keyAt(i13);
                                                                                            LongSparseArray longSparseArray15 = (LongSparseArray) sparseArray.valueAt(i13);
                                                                                            int size4 = longSparseArray15.size();
                                                                                            SparseArray sparseArray2 = sparseArray;
                                                                                            int i14 = 0;
                                                                                            while (i14 < size4) {
                                                                                                int i15 = size3;
                                                                                                sQLiteCursor13 = sQLiteCursor12;
                                                                                                try {
                                                                                                    long jKeyAt3 = longSparseArray15.keyAt(i14);
                                                                                                    CharSequence charSequence4 = charSequence;
                                                                                                    int i16 = size4;
                                                                                                    ArrayList arrayList36 = arrayList12;
                                                                                                    int i17 = i7;
                                                                                                    LongSparseArray longSparseArray16 = longSparseArray5;
                                                                                                    try {
                                                                                                        sQLiteCursorQueryFinalized5 = this.database.queryFinalized(String.format(Locale.US, "SELECT count, old FROM media_counts_v2 WHERE uid = %d AND type = %d LIMIT 1", Long.valueOf(jKeyAt3), Integer.valueOf(iKeyAt)), new Object[0]);
                                                                                                    } catch (Exception e47) {
                                                                                                        e5 = e47;
                                                                                                        th14 = e5;
                                                                                                        sQLiteCursor12 = sQLiteCursor13;
                                                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast4;
                                                                                                        th4 = th14;
                                                                                                        sQLiteCursorQueryFinalized2 = sQLiteCursor12;
                                                                                                        checkSQLException(th4);
                                                                                                        sQLiteDatabase = this.database;
                                                                                                        if (sQLiteDatabase != null) {
                                                                                                        }
                                                                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                        }
                                                                                                    } catch (Throwable th52) {
                                                                                                        th13 = th52;
                                                                                                        th12 = th13;
                                                                                                        sQLiteCursor12 = sQLiteCursor13;
                                                                                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast4;
                                                                                                        th = th12;
                                                                                                        sQLiteCursorQueryFinalized2 = sQLiteCursor12;
                                                                                                        sQLiteDatabase2 = this.database;
                                                                                                        if (sQLiteDatabase2 != null) {
                                                                                                        }
                                                                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatement == null) {
                                                                                                        }
                                                                                                    }
                                                                                                    try {
                                                                                                        if (sQLiteCursorQueryFinalized5.next()) {
                                                                                                            iIntValue3 = sQLiteCursorQueryFinalized5.intValue(0);
                                                                                                            iIntValue4 = sQLiteCursorQueryFinalized5.intValue(1);
                                                                                                        } else {
                                                                                                            iIntValue3 = -1;
                                                                                                            iIntValue4 = 0;
                                                                                                        }
                                                                                                        sQLiteCursorQueryFinalized5.dispose();
                                                                                                        if (iIntValue3 != -1) {
                                                                                                            sQLitePreparedStatementExecuteFast4.requery();
                                                                                                            int iMax4 = Math.max(0, iIntValue3 - ((Integer) longSparseArray15.valueAt(i14)).intValue());
                                                                                                            sQLitePreparedStatementExecuteFast4.bindLong(1, jKeyAt3);
                                                                                                            sQLitePreparedStatementExecuteFast4.bindInteger(2, iKeyAt);
                                                                                                            sQLitePreparedStatementExecuteFast4.bindInteger(3, iMax4);
                                                                                                            sQLitePreparedStatementExecuteFast4.bindInteger(4, iIntValue4);
                                                                                                            sQLitePreparedStatementExecuteFast4.step();
                                                                                                        }
                                                                                                        i14++;
                                                                                                        sQLiteCursor12 = sQLiteCursorQueryFinalized5;
                                                                                                        size3 = i15;
                                                                                                        charSequence = charSequence4;
                                                                                                        size4 = i16;
                                                                                                        arrayList12 = arrayList36;
                                                                                                        longSparseArray5 = longSparseArray16;
                                                                                                        i7 = i17;
                                                                                                    } catch (Exception e48) {
                                                                                                        th8 = e48;
                                                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast4;
                                                                                                        sQLiteCursorQueryFinalized3 = sQLiteCursorQueryFinalized5;
                                                                                                        sQLiteCursorQueryFinalized2 = sQLiteCursorQueryFinalized3;
                                                                                                        th4 = th8;
                                                                                                        checkSQLException(th4);
                                                                                                        sQLiteDatabase = this.database;
                                                                                                        if (sQLiteDatabase != null) {
                                                                                                        }
                                                                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                        }
                                                                                                    } catch (Throwable th53) {
                                                                                                        th7 = th53;
                                                                                                        sQLiteCursor7 = sQLiteCursorQueryFinalized5;
                                                                                                        sQLiteCursorQueryFinalized2 = sQLiteCursor7;
                                                                                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast4;
                                                                                                        th = th7;
                                                                                                        sQLiteDatabase2 = this.database;
                                                                                                        if (sQLiteDatabase2 != null) {
                                                                                                        }
                                                                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatement == null) {
                                                                                                        }
                                                                                                    }
                                                                                                } catch (Exception e49) {
                                                                                                    e4 = e49;
                                                                                                    th8 = e4;
                                                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast4;
                                                                                                    sQLiteCursorQueryFinalized3 = sQLiteCursor13;
                                                                                                    sQLiteCursorQueryFinalized2 = sQLiteCursorQueryFinalized3;
                                                                                                    th4 = th8;
                                                                                                    checkSQLException(th4);
                                                                                                    sQLiteDatabase = this.database;
                                                                                                    if (sQLiteDatabase != null) {
                                                                                                    }
                                                                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                    }
                                                                                                } catch (Throwable th54) {
                                                                                                    th11 = th54;
                                                                                                    th7 = th11;
                                                                                                    sQLiteCursor7 = sQLiteCursor13;
                                                                                                    sQLiteCursorQueryFinalized2 = sQLiteCursor7;
                                                                                                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast4;
                                                                                                    th = th7;
                                                                                                    sQLiteDatabase2 = this.database;
                                                                                                    if (sQLiteDatabase2 != null) {
                                                                                                    }
                                                                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                                                                    }
                                                                                                    if (sQLitePreparedStatement == null) {
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                            i13++;
                                                                                            sparseArray = sparseArray2;
                                                                                        } catch (Exception e50) {
                                                                                            th8 = e50;
                                                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast4;
                                                                                            sQLiteCursorQueryFinalized3 = sQLiteCursor12;
                                                                                            sQLiteCursorQueryFinalized2 = sQLiteCursorQueryFinalized3;
                                                                                            th4 = th8;
                                                                                            checkSQLException(th4);
                                                                                            sQLiteDatabase = this.database;
                                                                                            if (sQLiteDatabase != null) {
                                                                                            }
                                                                                            if (sQLiteCursorQueryFinalized2 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                            }
                                                                                        } catch (Throwable th55) {
                                                                                            th7 = th55;
                                                                                            sQLiteCursor7 = sQLiteCursor12;
                                                                                        }
                                                                                    }
                                                                                    i9 = i7;
                                                                                    arrayList16 = arrayList12;
                                                                                    charSequence2 = charSequence;
                                                                                    longSparseArray6 = longSparseArray5;
                                                                                    sQLitePreparedStatementExecuteFast4.dispose();
                                                                                    sQLitePreparedStatementExecuteFast2 = null;
                                                                                    if (arrayList10.isEmpty()) {
                                                                                        j5 = jKeyAt;
                                                                                        sQLiteCursor162222222222 = sQLiteCursor12;
                                                                                        sQLitePreparedStatement42222222222 = sQLitePreparedStatementExecuteFast2;
                                                                                    } else {
                                                                                        SQLiteDatabase sQLiteDatabase6 = this.database;
                                                                                        Locale locale3 = Locale.US;
                                                                                        Long lValueOf = Long.valueOf(jKeyAt);
                                                                                        try {
                                                                                            objArr = new Object[2];
                                                                                            i10 = 0;
                                                                                        } catch (Exception e51) {
                                                                                            th14 = e51;
                                                                                        } catch (Throwable th56) {
                                                                                            th12 = th56;
                                                                                        }
                                                                                        try {
                                                                                            objArr[0] = str;
                                                                                            objArr[1] = lValueOf;
                                                                                            SQLiteCursor sQLiteCursorQueryFinalized9 = sQLiteDatabase6.queryFinalized(String.format(locale3, "SELECT uid, topic_id, type FROM media_topics WHERE mid IN(%s) AND uid = %d", objArr), new Object[0]);
                                                                                            SparseArray sparseArray3 = null;
                                                                                            while (sQLiteCursorQueryFinalized9.next()) {
                                                                                                long jLongValue5 = sQLiteCursorQueryFinalized9.longValue(i10);
                                                                                                int iIntValue16 = sQLiteCursorQueryFinalized9.intValue(1);
                                                                                                int iIntValue17 = sQLiteCursorQueryFinalized9.intValue(2);
                                                                                                TopicKey topicKeyOf2 = TopicKey.of(jLongValue5, iIntValue16);
                                                                                                if (sparseArray3 == null) {
                                                                                                    sparseArray3 = new SparseArray();
                                                                                                }
                                                                                                HashMap map4 = (HashMap) sparseArray3.get(iIntValue17);
                                                                                                if (map4 == null) {
                                                                                                    map4 = new HashMap();
                                                                                                    num = 0;
                                                                                                    sparseArray3.put(iIntValue17, map4);
                                                                                                } else {
                                                                                                    num = (Integer) map4.get(topicKeyOf2);
                                                                                                }
                                                                                                if (num == null) {
                                                                                                    num = 0;
                                                                                                }
                                                                                                map4.put(topicKeyOf2, Integer.valueOf(num.intValue() + 1));
                                                                                                i10 = 0;
                                                                                            }
                                                                                            sQLiteCursorQueryFinalized9.dispose();
                                                                                            if (sparseArray3 != null) {
                                                                                                sQLitePreparedStatementExecuteFast4 = this.database.executeFast("REPLACE INTO media_counts_topics VALUES(?, ?, ?, ?, ?)");
                                                                                                int size5 = sparseArray3.size();
                                                                                                SQLiteCursor sQLiteCursorQueryFinalized10 = null;
                                                                                                int i18 = 0;
                                                                                                while (i18 < size5) {
                                                                                                    try {
                                                                                                        int iKeyAt2 = sparseArray3.keyAt(i18);
                                                                                                        HashMap map5 = (HashMap) sparseArray3.valueAt(i18);
                                                                                                        Iterator it4 = map5.keySet().iterator();
                                                                                                        while (it4.hasNext()) {
                                                                                                            try {
                                                                                                                TopicKey topicKey2 = (TopicKey) it4.next();
                                                                                                                SparseArray sparseArray4 = sparseArray3;
                                                                                                                int i19 = size5;
                                                                                                                sQLiteCursor13 = sQLiteCursorQueryFinalized10;
                                                                                                                long j8 = jKeyAt;
                                                                                                                Iterator it5 = it4;
                                                                                                                try {
                                                                                                                    sQLiteCursorQueryFinalized10 = this.database.queryFinalized(String.format(Locale.US, "SELECT count, old FROM media_counts_topics WHERE uid = %d AND topic_id = %d AND type = %d LIMIT 1", Long.valueOf(topicKey2.dialogId), Long.valueOf(topicKey2.topicId), Integer.valueOf(iKeyAt2)), new Object[0]);
                                                                                                                    if (sQLiteCursorQueryFinalized10.next()) {
                                                                                                                        iIntValue2 = sQLiteCursorQueryFinalized10.intValue(0);
                                                                                                                        iIntValue = sQLiteCursorQueryFinalized10.intValue(1);
                                                                                                                    } else {
                                                                                                                        iIntValue = 0;
                                                                                                                        iIntValue2 = -1;
                                                                                                                    }
                                                                                                                    sQLiteCursorQueryFinalized10.dispose();
                                                                                                                    if (iIntValue2 != -1) {
                                                                                                                        sQLitePreparedStatementExecuteFast4.requery();
                                                                                                                        int iMax5 = Math.max(0, iIntValue2 - ((Integer) map5.get(topicKey2)).intValue());
                                                                                                                        sQLitePreparedStatementExecuteFast4.bindLong(1, topicKey2.dialogId);
                                                                                                                        sQLitePreparedStatementExecuteFast4.bindLong(2, topicKey2.topicId);
                                                                                                                        sQLitePreparedStatementExecuteFast4.bindInteger(3, iKeyAt2);
                                                                                                                        sQLitePreparedStatementExecuteFast4.bindInteger(4, iMax5);
                                                                                                                        sQLitePreparedStatementExecuteFast4.bindInteger(5, iIntValue);
                                                                                                                        sQLitePreparedStatementExecuteFast4.step();
                                                                                                                    }
                                                                                                                    sparseArray3 = sparseArray4;
                                                                                                                    size5 = i19;
                                                                                                                    it4 = it5;
                                                                                                                    jKeyAt = j8;
                                                                                                                } catch (Exception e52) {
                                                                                                                    e5 = e52;
                                                                                                                    th14 = e5;
                                                                                                                    sQLiteCursor12 = sQLiteCursor13;
                                                                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast4;
                                                                                                                    th4 = th14;
                                                                                                                    sQLiteCursorQueryFinalized2 = sQLiteCursor12;
                                                                                                                    checkSQLException(th4);
                                                                                                                    sQLiteDatabase = this.database;
                                                                                                                    if (sQLiteDatabase != null) {
                                                                                                                    }
                                                                                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                                                                                    }
                                                                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                                    }
                                                                                                                } catch (Throwable th57) {
                                                                                                                    th13 = th57;
                                                                                                                    th12 = th13;
                                                                                                                    sQLiteCursor12 = sQLiteCursor13;
                                                                                                                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast4;
                                                                                                                    th = th12;
                                                                                                                    sQLiteCursorQueryFinalized2 = sQLiteCursor12;
                                                                                                                    sQLiteDatabase2 = this.database;
                                                                                                                    if (sQLiteDatabase2 != null) {
                                                                                                                    }
                                                                                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                                                                                    }
                                                                                                                    if (sQLitePreparedStatement == null) {
                                                                                                                    }
                                                                                                                }
                                                                                                            } catch (Exception e53) {
                                                                                                                e4 = e53;
                                                                                                                sQLiteCursor13 = sQLiteCursorQueryFinalized10;
                                                                                                                th8 = e4;
                                                                                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast4;
                                                                                                                sQLiteCursorQueryFinalized3 = sQLiteCursor13;
                                                                                                                sQLiteCursorQueryFinalized2 = sQLiteCursorQueryFinalized3;
                                                                                                                th4 = th8;
                                                                                                                checkSQLException(th4);
                                                                                                                sQLiteDatabase = this.database;
                                                                                                                if (sQLiteDatabase != null) {
                                                                                                                }
                                                                                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                                }
                                                                                                            } catch (Throwable th58) {
                                                                                                                th11 = th58;
                                                                                                                sQLiteCursor13 = sQLiteCursorQueryFinalized10;
                                                                                                                th7 = th11;
                                                                                                                sQLiteCursor7 = sQLiteCursor13;
                                                                                                                sQLiteCursorQueryFinalized2 = sQLiteCursor7;
                                                                                                                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast4;
                                                                                                                th = th7;
                                                                                                                sQLiteDatabase2 = this.database;
                                                                                                                if (sQLiteDatabase2 != null) {
                                                                                                                }
                                                                                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                                                                                }
                                                                                                                if (sQLitePreparedStatement == null) {
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                        i18++;
                                                                                                        sparseArray3 = sparseArray3;
                                                                                                        size5 = size5;
                                                                                                        jKeyAt = jKeyAt;
                                                                                                    } catch (Exception e54) {
                                                                                                        th8 = e54;
                                                                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast4;
                                                                                                        sQLiteCursorQueryFinalized3 = sQLiteCursorQueryFinalized10;
                                                                                                        sQLiteCursorQueryFinalized2 = sQLiteCursorQueryFinalized3;
                                                                                                        th4 = th8;
                                                                                                        checkSQLException(th4);
                                                                                                        sQLiteDatabase = this.database;
                                                                                                        if (sQLiteDatabase != null) {
                                                                                                        }
                                                                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                                        }
                                                                                                    } catch (Throwable th59) {
                                                                                                        th7 = th59;
                                                                                                        sQLiteCursor7 = sQLiteCursorQueryFinalized10;
                                                                                                        sQLiteCursorQueryFinalized2 = sQLiteCursor7;
                                                                                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast4;
                                                                                                        th = th7;
                                                                                                        sQLiteDatabase2 = this.database;
                                                                                                        if (sQLiteDatabase2 != null) {
                                                                                                        }
                                                                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                                                                        }
                                                                                                        if (sQLitePreparedStatement == null) {
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                                j5 = jKeyAt;
                                                                                                sQLitePreparedStatementExecuteFast4.dispose();
                                                                                                sQLiteCursor162222222222 = sQLiteCursorQueryFinalized10;
                                                                                                sQLitePreparedStatement42222222222 = null;
                                                                                            } else {
                                                                                                j5 = jKeyAt;
                                                                                                sQLitePreparedStatement42222222222 = sQLitePreparedStatementExecuteFast2;
                                                                                                sQLiteCursor162222222222 = null;
                                                                                            }
                                                                                        } catch (Exception e55) {
                                                                                            th14 = e55;
                                                                                            sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatementExecuteFast2;
                                                                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast4;
                                                                                            th4 = th14;
                                                                                            sQLiteCursorQueryFinalized2 = sQLiteCursor12;
                                                                                            checkSQLException(th4);
                                                                                            sQLiteDatabase = this.database;
                                                                                            if (sQLiteDatabase != null) {
                                                                                            }
                                                                                            if (sQLiteCursorQueryFinalized2 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                            }
                                                                                        } catch (Throwable th60) {
                                                                                            th12 = th60;
                                                                                            sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatementExecuteFast2;
                                                                                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast4;
                                                                                            th = th12;
                                                                                            sQLiteCursorQueryFinalized2 = sQLiteCursor12;
                                                                                            sQLiteDatabase2 = this.database;
                                                                                            if (sQLiteDatabase2 != null) {
                                                                                            }
                                                                                            if (sQLiteCursorQueryFinalized2 != null) {
                                                                                            }
                                                                                            if (sQLitePreparedStatement == null) {
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                    SQLiteDatabase sQLiteDatabase7 = this.database;
                                                                                    Locale locale4 = Locale.US;
                                                                                    sQLiteDatabase7.executeFast(String.format(locale4, "DELETE FROM media_v4 WHERE mid IN(%s) AND uid = %d", str, Long.valueOf(j5))).stepThis().dispose();
                                                                                    this.database.executeFast(String.format(locale4, "DELETE FROM media_topics WHERE mid IN(%s) AND uid = %d", str, Long.valueOf(j5))).stepThis().dispose();
                                                                                    i7 = i9 + 1;
                                                                                    size = i8;
                                                                                    charSequence3 = charSequence2;
                                                                                    arrayList12 = arrayList16;
                                                                                    longSparseArray5 = longSparseArray6;
                                                                                } catch (Exception e56) {
                                                                                    th8 = e56;
                                                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast4;
                                                                                    sQLiteCursorQueryFinalized3 = null;
                                                                                    sQLiteCursorQueryFinalized2 = sQLiteCursorQueryFinalized3;
                                                                                    th4 = th8;
                                                                                    checkSQLException(th4);
                                                                                    sQLiteDatabase = this.database;
                                                                                    if (sQLiteDatabase != null) {
                                                                                    }
                                                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                                    }
                                                                                } catch (Throwable th61) {
                                                                                    th7 = th61;
                                                                                    sQLiteCursor7 = null;
                                                                                    sQLiteCursorQueryFinalized2 = sQLiteCursor7;
                                                                                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast4;
                                                                                    th = th7;
                                                                                    sQLiteDatabase2 = this.database;
                                                                                    if (sQLiteDatabase2 != null) {
                                                                                    }
                                                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                                                    }
                                                                                    if (sQLitePreparedStatement == null) {
                                                                                    }
                                                                                }
                                                                            } catch (Exception e57) {
                                                                                th8 = e57;
                                                                            } catch (Throwable th62) {
                                                                                th7 = th62;
                                                                                sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatementExecuteFast2;
                                                                            }
                                                                        } else {
                                                                            i9 = i7;
                                                                            arrayList16 = arrayList12;
                                                                        }
                                                                    } catch (Throwable th63) {
                                                                        th = th63;
                                                                        th = th;
                                                                        sQLiteCursor2 = null;
                                                                        sQLiteCursorQueryFinalized2 = sQLiteCursor2;
                                                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                                                                        sQLiteDatabase2 = this.database;
                                                                        if (sQLiteDatabase2 != null) {
                                                                        }
                                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                                        }
                                                                        if (sQLitePreparedStatement == null) {
                                                                        }
                                                                    }
                                                                } else {
                                                                    i9 = i7;
                                                                    arrayList16 = arrayList12;
                                                                    longSparseArray2 = longSparseArray13;
                                                                }
                                                                this.database.executeFast(String.format(locale4, "DELETE FROM media_topics WHERE mid IN(%s) AND uid = %d", str, Long.valueOf(j5))).stepThis().dispose();
                                                                i7 = i9 + 1;
                                                                size = i8;
                                                                charSequence3 = charSequence2;
                                                                arrayList12 = arrayList16;
                                                                longSparseArray5 = longSparseArray6;
                                                            } catch (Exception e58) {
                                                                e = e58;
                                                                sQLiteCursor12 = sQLiteCursor162222222222;
                                                                SQLitePreparedStatement sQLitePreparedStatement5 = sQLitePreparedStatement42222222222;
                                                                th14 = e;
                                                                sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatement5;
                                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast4;
                                                                th4 = th14;
                                                                sQLiteCursorQueryFinalized2 = sQLiteCursor12;
                                                                checkSQLException(th4);
                                                                sQLiteDatabase = this.database;
                                                                if (sQLiteDatabase != null) {
                                                                }
                                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                                }
                                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                }
                                                            } catch (Throwable th64) {
                                                                th = th64;
                                                                sQLiteCursor12 = sQLiteCursor162222222222;
                                                                SQLitePreparedStatement sQLitePreparedStatement6 = sQLitePreparedStatement42222222222;
                                                                th12 = th;
                                                                sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatement6;
                                                                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast4;
                                                                th = th12;
                                                                sQLiteCursorQueryFinalized2 = sQLiteCursor12;
                                                                sQLiteDatabase2 = this.database;
                                                                if (sQLiteDatabase2 != null) {
                                                                }
                                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                                }
                                                                if (sQLitePreparedStatement == null) {
                                                                }
                                                            }
                                                            sQLiteDatabase7.executeFast(String.format(locale4, "DELETE FROM media_v4 WHERE mid IN(%s) AND uid = %d", str, Long.valueOf(j5))).stepThis().dispose();
                                                        } catch (Exception e59) {
                                                            e = e59;
                                                        } catch (Throwable th65) {
                                                            th = th65;
                                                        }
                                                        SQLiteDatabase sQLiteDatabase72 = this.database;
                                                        Locale locale42 = Locale.US;
                                                    } catch (Exception e60) {
                                                        e3 = e60;
                                                        sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatement42222222222;
                                                        sQLiteCursorQueryFinalized3 = sQLiteCursor162222222222;
                                                        th8 = e3;
                                                        sQLiteCursorQueryFinalized2 = sQLiteCursorQueryFinalized3;
                                                        th4 = th8;
                                                        checkSQLException(th4);
                                                        sQLiteDatabase = this.database;
                                                        if (sQLiteDatabase != null) {
                                                        }
                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                        }
                                                        if (sQLitePreparedStatementExecuteFast2 != null) {
                                                        }
                                                    } catch (Throwable th66) {
                                                        sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatement42222222222;
                                                        sQLiteCursor7 = sQLiteCursor162222222222;
                                                        th7 = th66;
                                                        sQLiteCursorQueryFinalized2 = sQLiteCursor7;
                                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast4;
                                                        th = th7;
                                                        sQLiteDatabase2 = this.database;
                                                        if (sQLiteDatabase2 != null) {
                                                        }
                                                        if (sQLiteCursorQueryFinalized2 != null) {
                                                        }
                                                        if (sQLitePreparedStatement == null) {
                                                        }
                                                    }
                                                    if (arrayList10.isEmpty()) {
                                                    }
                                                } catch (Exception e61) {
                                                    th8 = e61;
                                                    sQLiteCursorQueryFinalized3 = sQLiteCursor12;
                                                    sQLiteCursorQueryFinalized2 = sQLiteCursorQueryFinalized3;
                                                    th4 = th8;
                                                    checkSQLException(th4);
                                                    sQLiteDatabase = this.database;
                                                    if (sQLiteDatabase != null) {
                                                    }
                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                    }
                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                    }
                                                } catch (Throwable th67) {
                                                    th7 = th67;
                                                    sQLiteCursor7 = sQLiteCursor12;
                                                    sQLitePreparedStatementExecuteFast4 = sQLitePreparedStatementExecuteFast2;
                                                    sQLiteCursorQueryFinalized2 = sQLiteCursor7;
                                                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast4;
                                                    th = th7;
                                                    sQLiteDatabase2 = this.database;
                                                    if (sQLiteDatabase2 != null) {
                                                    }
                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                    }
                                                    if (sQLitePreparedStatement == null) {
                                                    }
                                                }
                                                charSequence2 = charSequence;
                                                longSparseArray6 = longSparseArray5;
                                                sQLiteCursor12 = null;
                                            } catch (Exception e62) {
                                                sQLiteCursor11 = sQLiteCursorQueryFinalized8;
                                                th10 = e62;
                                            } catch (Throwable th68) {
                                                sQLiteCursor10 = sQLiteCursorQueryFinalized8;
                                                th = th68;
                                            }
                                        } catch (Exception e63) {
                                            e = e63;
                                            th10 = e;
                                            sQLiteCursor11 = sQLiteCursor8;
                                            th3 = th10;
                                            sQLitePreparedStatementExecuteFast = sQLitePreparedStatement2;
                                            sQLiteCursor3 = sQLiteCursor11;
                                            sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                            th4 = th3;
                                            sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                            checkSQLException(th4);
                                            sQLiteDatabase = this.database;
                                            if (sQLiteDatabase != null) {
                                            }
                                            if (sQLiteCursorQueryFinalized2 != null) {
                                            }
                                            if (sQLitePreparedStatementExecuteFast2 != null) {
                                            }
                                        } catch (Throwable th69) {
                                            th = th69;
                                            th = th;
                                            sQLiteCursor10 = sQLiteCursor8;
                                            sQLiteCursor4 = sQLiteCursor10;
                                            sQLitePreparedStatement = sQLitePreparedStatement2;
                                            sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                            sQLiteDatabase2 = this.database;
                                            if (sQLiteDatabase2 != null) {
                                            }
                                            if (sQLiteCursorQueryFinalized2 != null) {
                                            }
                                            if (sQLitePreparedStatement == null) {
                                            }
                                        }
                                    }
                                    sQLitePreparedStatement2 = sQLitePreparedStatement42222222222;
                                    List<TopicsController.TopicUpdate> list2222222222 = arrayList12;
                                    sQLiteCursor8 = sQLiteCursor162222222222;
                                    LongSparseArray longSparseArray112222222222 = longSparseArray5;
                                    if (!longSparseArray4.isEmpty()) {
                                        final LongSparseArray longSparseArray17 = longSparseArray4;
                                        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda201
                                            @Override // java.lang.Runnable
                                            public final void run() {
                                                this.f$0.lambda$markMessagesAsDeletedInternal$208(longSparseArray17);
                                            }
                                        });
                                    }
                                    SQLiteDatabase sQLiteDatabase52222222222 = this.database;
                                    locale = Locale.US;
                                    try {
                                        sQLiteDatabase52222222222.executeFast(String.format(locale, "DELETE FROM messages_seq WHERE mid IN(%s)", str)).stepThis().dispose();
                                        if (arrayList7.isEmpty()) {
                                            if (arrayList9 != null || arrayList9.isEmpty()) {
                                                arrayList13 = arrayList9;
                                                if (arrayList13 != null || !arrayList13.isEmpty()) {
                                                    arrayList14 = arrayList;
                                                    if (!arrayList10.isEmpty()) {
                                                        if (j == 0) {
                                                            sQLitePreparedStatementExecuteFast5 = this.database.executeFast("UPDATE media_counts_topics SET old = 1 WHERE 1");
                                                        } else {
                                                            try {
                                                                sQLitePreparedStatementExecuteFast5 = this.database.executeFast(String.format(locale, "UPDATE media_counts_topics SET old = 1 WHERE uid = %d", Long.valueOf(j)));
                                                            } catch (Exception e64) {
                                                                e = e64;
                                                                th10 = e;
                                                                sQLiteCursor11 = sQLiteCursor8;
                                                                th3 = th10;
                                                                sQLitePreparedStatementExecuteFast = sQLitePreparedStatement2;
                                                                sQLiteCursor3 = sQLiteCursor11;
                                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                                th4 = th3;
                                                                sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                                checkSQLException(th4);
                                                                sQLiteDatabase = this.database;
                                                                if (sQLiteDatabase != null) {
                                                                }
                                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                                }
                                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                }
                                                            } catch (Throwable th70) {
                                                                th = th70;
                                                                th = th;
                                                                sQLiteCursor10 = sQLiteCursor8;
                                                                sQLiteCursor4 = sQLiteCursor10;
                                                                sQLitePreparedStatement = sQLitePreparedStatement2;
                                                                sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                                sQLiteDatabase2 = this.database;
                                                                if (sQLiteDatabase2 != null) {
                                                                }
                                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                                }
                                                                if (sQLitePreparedStatement == null) {
                                                                }
                                                            }
                                                        }
                                                        sQLitePreparedStatementExecuteFast5.stepThis().dispose();
                                                        getMediaDataController().clearBotKeyboard(null, arrayList14);
                                                        if (longSparseArray112222222222.size() != 0) {
                                                        }
                                                        arrayList15 = arrayList23;
                                                        updateWidgets(arrayList15);
                                                        if (arrayList292222222222 != null) {
                                                        }
                                                        if (list2222222222 != null) {
                                                        }
                                                        sQLitePreparedStatement3 = sQLitePreparedStatement2;
                                                        sQLiteCursor9 = sQLiteCursor8;
                                                        sQLiteDatabase4 = this.database;
                                                        if (sQLiteDatabase4 != null) {
                                                        }
                                                        if (sQLiteCursor9 != null) {
                                                        }
                                                        if (sQLitePreparedStatement3 != null) {
                                                        }
                                                        return arrayList15;
                                                    }
                                                    getMediaDataController().clearBotKeyboard(null, arrayList14);
                                                    if (longSparseArray112222222222.size() != 0) {
                                                        resetAllUnreadCounters(false);
                                                    }
                                                    arrayList15 = arrayList23;
                                                    updateWidgets(arrayList15);
                                                    if (arrayList292222222222 != null) {
                                                        int i20 = 0;
                                                        while (i20 < arrayList292222222222.size()) {
                                                            ArrayList<TopicKey> arrayList37 = arrayList292222222222;
                                                            TopicKey topicKey3 = arrayList37.get(i20);
                                                            try {
                                                                this.database.executeFast(String.format(Locale.US, "DELETE FROM topics WHERE did = %d AND topic_id = %d", Long.valueOf(topicKey3.dialogId), Long.valueOf(topicKey3.topicId))).stepThis().dispose();
                                                                i20++;
                                                                arrayList292222222222 = arrayList37;
                                                            } catch (Exception e65) {
                                                                e = e65;
                                                                th10 = e;
                                                                sQLiteCursor11 = sQLiteCursor8;
                                                                th3 = th10;
                                                                sQLitePreparedStatementExecuteFast = sQLitePreparedStatement2;
                                                                sQLiteCursor3 = sQLiteCursor11;
                                                                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                                th4 = th3;
                                                                sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                                checkSQLException(th4);
                                                                sQLiteDatabase = this.database;
                                                                if (sQLiteDatabase != null) {
                                                                }
                                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                                }
                                                                if (sQLitePreparedStatementExecuteFast2 != null) {
                                                                }
                                                            } catch (Throwable th71) {
                                                                th = th71;
                                                                th = th;
                                                                sQLiteCursor10 = sQLiteCursor8;
                                                                sQLiteCursor4 = sQLiteCursor10;
                                                                sQLitePreparedStatement = sQLitePreparedStatement2;
                                                                sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                                sQLiteDatabase2 = this.database;
                                                                if (sQLiteDatabase2 != null) {
                                                                }
                                                                if (sQLiteCursorQueryFinalized2 != null) {
                                                                }
                                                                if (sQLitePreparedStatement == null) {
                                                                }
                                                            }
                                                        }
                                                        getMessagesController().getTopicsController().onTopicsDeletedServerSide(arrayList292222222222);
                                                    }
                                                    if (list2222222222 != null) {
                                                        getMessagesController().getTopicsController().processUpdate(list2222222222);
                                                    }
                                                    sQLitePreparedStatement3 = sQLitePreparedStatement2;
                                                    sQLiteCursor9 = sQLiteCursor8;
                                                    sQLiteDatabase4 = this.database;
                                                    if (sQLiteDatabase4 != null) {
                                                    }
                                                    if (sQLiteCursor9 != null) {
                                                    }
                                                    if (sQLitePreparedStatement3 != null) {
                                                    }
                                                    return arrayList15;
                                                }
                                                arrayList14 = arrayList;
                                                runnable = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda203
                                                    @Override // java.lang.Runnable
                                                    public final void run() {
                                                        this.f$0.lambda$markMessagesAsDeletedInternal$210(arrayList14);
                                                    }
                                                };
                                            } else {
                                                final ArrayList arrayList38 = arrayList9;
                                                final long j9 = j3;
                                                runnable = new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda202
                                                    @Override // java.lang.Runnable
                                                    public final void run() {
                                                        this.f$0.lambda$markMessagesAsDeletedInternal$209(arrayList38, j9);
                                                    }
                                                };
                                                arrayList14 = arrayList;
                                            }
                                            AndroidUtilities.runOnUIThread(runnable);
                                            if (!arrayList10.isEmpty()) {
                                            }
                                        } else {
                                            if (j == 0) {
                                                sQLitePreparedStatementExecuteFast6 = this.database.executeFast("UPDATE media_counts_v2 SET old = 1 WHERE 1");
                                            } else {
                                                try {
                                                    sQLitePreparedStatementExecuteFast6 = this.database.executeFast(String.format(locale, "UPDATE media_counts_v2 SET old = 1 WHERE uid = %d", Long.valueOf(j)));
                                                } catch (Exception e66) {
                                                    e = e66;
                                                    th10 = e;
                                                    sQLiteCursor11 = sQLiteCursor8;
                                                    th3 = th10;
                                                    sQLitePreparedStatementExecuteFast = sQLitePreparedStatement2;
                                                    sQLiteCursor3 = sQLiteCursor11;
                                                    sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                                                    th4 = th3;
                                                    sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                                                    checkSQLException(th4);
                                                    sQLiteDatabase = this.database;
                                                    if (sQLiteDatabase != null) {
                                                    }
                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                    }
                                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                                    }
                                                } catch (Throwable th72) {
                                                    th = th72;
                                                    th = th;
                                                    sQLiteCursor10 = sQLiteCursor8;
                                                    sQLiteCursor4 = sQLiteCursor10;
                                                    sQLitePreparedStatement = sQLitePreparedStatement2;
                                                    sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                                                    sQLiteDatabase2 = this.database;
                                                    if (sQLiteDatabase2 != null) {
                                                    }
                                                    if (sQLiteCursorQueryFinalized2 != null) {
                                                    }
                                                    if (sQLitePreparedStatement == null) {
                                                    }
                                                }
                                            }
                                            sQLitePreparedStatementExecuteFast6.stepThis().dispose();
                                            if (arrayList9 != null) {
                                                arrayList13 = arrayList9;
                                                if (arrayList13 != null) {
                                                }
                                                arrayList14 = arrayList;
                                                if (!arrayList10.isEmpty()) {
                                                }
                                            }
                                        }
                                    } catch (Exception e67) {
                                        e = e67;
                                    } catch (Throwable th73) {
                                        th = th73;
                                    }
                                } catch (Exception e68) {
                                    th6 = e68;
                                    sQLitePreparedStatementExecuteFast3 = null;
                                } catch (Throwable th74) {
                                    th = th74;
                                    sQLitePreparedStatementExecuteFast3 = null;
                                }
                            } catch (Throwable th75) {
                                th = th75;
                            }
                        } else {
                            longSparseArray = longSparseArray9;
                            arrayList4 = arrayList22;
                            arrayList5 = arrayList24;
                            try {
                                i3 = 0;
                                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT uid, data, read_state, out, mention, mid FROM messages_v2 WHERE mid IN(%s) AND is_channel = 0", strJoin3), new Object[0]);
                                while (sQLiteCursorQueryFinalized.next()) {
                                }
                                arrayList6 = arrayList25;
                                arrayList7 = arrayList19;
                                arrayList8 = arrayList21;
                                longSparseArray2 = longSparseArray10;
                                arrayList9 = arrayList3;
                                longSparseArray3 = longSparseArray;
                                i4 = 5;
                                j2 = clientUserId;
                                sQLiteCursorQueryFinalized.dispose();
                                if (j >= 0) {
                                }
                                this.database.beginTransaction();
                                while (i5 < 4) {
                                }
                                deleteFromDownloadQueue(arrayList5, true);
                                final ArrayList arrayList2822222222222 = arrayList4;
                                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda200
                                    @Override // java.lang.Runnable
                                    public final void run() {
                                        this.f$0.lambda$markMessagesAsDeletedInternal$207(arrayList2822222222222);
                                    }
                                });
                                getFileLoader().deleteFiles(arrayList8, 0);
                                i6 = 0;
                                while (i6 < longSparseArray8.size()) {
                                }
                                ArrayList<TopicKey> arrayList2922222222222 = arrayList11;
                                if (map2.isEmpty()) {
                                }
                                size = longSparseArray2.size();
                                SQLitePreparedStatement sQLitePreparedStatement422222222222 = null;
                                i7 = 0;
                                SQLiteCursor sQLiteCursor1622222222222 = null;
                                while (i7 < size) {
                                }
                                sQLitePreparedStatement2 = sQLitePreparedStatement422222222222;
                                List<TopicsController.TopicUpdate> list22222222222 = arrayList12;
                                sQLiteCursor8 = sQLiteCursor1622222222222;
                                LongSparseArray longSparseArray1122222222222 = longSparseArray5;
                                if (!longSparseArray4.isEmpty()) {
                                }
                                SQLiteDatabase sQLiteDatabase522222222222 = this.database;
                                locale = Locale.US;
                                sQLiteDatabase522222222222.executeFast(String.format(locale, "DELETE FROM messages_seq WHERE mid IN(%s)", str)).stepThis().dispose();
                                if (arrayList7.isEmpty()) {
                                }
                            } catch (Throwable th76) {
                                th = th76;
                            }
                        }
                        th = th;
                        sQLiteCursorQueryFinalized = null;
                    }
                    sQLitePreparedStatement = null;
                    sQLiteCursorQueryFinalized2 = sQLiteCursor4;
                }
            } catch (Exception e69) {
                e = e69;
                th3 = e;
                sQLitePreparedStatementExecuteFast = null;
                sQLiteCursor3 = null;
                sQLitePreparedStatementExecuteFast2 = sQLitePreparedStatementExecuteFast;
                th4 = th3;
                sQLiteCursorQueryFinalized2 = sQLiteCursor3;
                checkSQLException(th4);
                sQLiteDatabase = this.database;
                if (sQLiteDatabase != null) {
                }
                if (sQLiteCursorQueryFinalized2 != null) {
                }
                if (sQLitePreparedStatementExecuteFast2 != null) {
                }
            }
            sQLiteCursor4 = sQLiteCursorQueryFinalized;
            sQLitePreparedStatement = null;
            sQLiteCursorQueryFinalized2 = sQLiteCursor4;
        } else {
            arrayList2 = new ArrayList<>();
            if (i != 1) {
            }
            if (i != 5) {
            }
            sQLiteCursor4 = sQLiteCursorQueryFinalized;
            sQLitePreparedStatement = null;
            sQLiteCursorQueryFinalized2 = sQLiteCursor4;
        }
        sQLiteDatabase2 = this.database;
        if (sQLiteDatabase2 != null) {
            sQLiteDatabase2.commitTransaction();
        }
        if (sQLiteCursorQueryFinalized2 != null) {
            sQLiteCursorQueryFinalized2.dispose();
        }
        if (sQLitePreparedStatement == null) {
            throw th;
        }
        sQLitePreparedStatement.dispose();
        throw th;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:24:0x0071  */
    /* JADX WARN: Removed duplicated region for block: B:46:0x00e9  */
    /* JADX WARN: Removed duplicated region for block: B:67:? A[RETURN, SYNTHETIC] */
    /* renamed from: markMessagesAsReadInternal, reason: merged with bridge method [inline-methods] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public void lambda$markMessagesAsRead$202(LongSparseIntArray longSparseIntArray, LongSparseIntArray longSparseIntArray2, SparseIntArray sparseIntArray) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement;
        try {
            if (isEmpty(longSparseIntArray)) {
                if (!isEmpty(longSparseIntArray2)) {
                }
                if (sparseIntArray != null) {
                    return;
                } else {
                    return;
                }
            }
            SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("DELETE FROM unread_push_messages WHERE uid = ? AND mid <= ?");
            for (int i = 0; i < longSparseIntArray.size(); i++) {
                try {
                    long jKeyAt = longSparseIntArray.keyAt(i);
                    int i2 = longSparseIntArray.get(jKeyAt);
                    this.database.executeFast(String.format(Locale.US, "UPDATE messages_v2 SET read_state = read_state | 1 WHERE uid = %d AND mid > 0 AND mid <= %d AND read_state IN(0,2) AND out = 0", Long.valueOf(jKeyAt), Integer.valueOf(i2))).stepThis().dispose();
                    sQLitePreparedStatementExecuteFast.requery();
                    sQLitePreparedStatementExecuteFast.bindLong(1, jKeyAt);
                    sQLitePreparedStatementExecuteFast.bindInteger(2, i2);
                    sQLitePreparedStatementExecuteFast.step();
                } catch (Exception e) {
                    e = e;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                    try {
                        checkSQLException(e);
                        if (sQLitePreparedStatement == null) {
                        }
                    } catch (Throwable th) {
                        th = th;
                    }
                } catch (Throwable th2) {
                    th = th2;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                }
            }
            sQLitePreparedStatementExecuteFast.dispose();
            if (!isEmpty(longSparseIntArray2)) {
                for (int i3 = 0; i3 < longSparseIntArray2.size(); i3++) {
                    long jKeyAt2 = longSparseIntArray2.keyAt(i3);
                    this.database.executeFast(String.format(Locale.US, "UPDATE messages_v2 SET read_state = read_state | 1 WHERE uid = %d AND mid > 0 AND mid <= %d AND read_state IN(0,2) AND out = 1", Long.valueOf(jKeyAt2), Integer.valueOf(longSparseIntArray2.get(jKeyAt2)))).stepThis().dispose();
                }
            }
            if (sparseIntArray != null || isEmpty(sparseIntArray)) {
                return;
            }
            for (int i4 = 0; i4 < sparseIntArray.size(); i4++) {
                long jMakeEncryptedDialogId = DialogObject.makeEncryptedDialogId(sparseIntArray.keyAt(i4));
                int iValueAt = sparseIntArray.valueAt(i4);
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE messages_v2 SET read_state = read_state | 1 WHERE uid = ? AND date <= ? AND read_state IN(0,2) AND out = 1");
                try {
                    sQLitePreparedStatementExecuteFast2.requery();
                    sQLitePreparedStatementExecuteFast2.bindLong(1, jMakeEncryptedDialogId);
                    sQLitePreparedStatementExecuteFast2.bindInteger(2, iValueAt);
                    sQLitePreparedStatementExecuteFast2.step();
                    sQLitePreparedStatementExecuteFast2.dispose();
                } catch (Exception e2) {
                    e = e2;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                    checkSQLException(e);
                    if (sQLitePreparedStatement == null) {
                        sQLitePreparedStatement.dispose();
                        return;
                    }
                    return;
                } catch (Throwable th3) {
                    th = th3;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                }
            }
            return;
        } catch (Exception e3) {
            e = e3;
            sQLitePreparedStatement = null;
        } catch (Throwable th4) {
            th = th4;
            sQLitePreparedStatement = null;
        }
        if (sQLitePreparedStatement != null) {
            sQLitePreparedStatement.dispose();
        }
        throw th;
    }

    private void markMessagesContentAsReadInternal(long j, ArrayList<Integer> arrayList, int i) throws Throwable {
        SQLiteCursor sQLiteCursor = null;
        ArrayList<Integer> arrayList2 = null;
        sQLiteCursor = null;
        try {
            try {
                String strJoin = TextUtils.join(",", arrayList);
                SQLiteDatabase sQLiteDatabase = this.database;
                Locale locale = Locale.US;
                sQLiteDatabase.executeFast(String.format(locale, "UPDATE messages_v2 SET read_state = read_state | 2 WHERE mid IN (%s) AND uid = %d", strJoin, Long.valueOf(j))).stepThis().dispose();
                if (i != 0) {
                    SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(locale, "SELECT mid, ttl FROM messages_v2 WHERE mid IN (%s) AND uid = %d AND ttl > 0", strJoin, Long.valueOf(j)), new Object[0]);
                    while (sQLiteCursorQueryFinalized.next()) {
                        try {
                            if (arrayList2 == null) {
                                arrayList2 = new ArrayList<>();
                            }
                            arrayList2.add(Integer.valueOf(sQLiteCursorQueryFinalized.intValue(0)));
                        } catch (Exception e) {
                            e = e;
                            sQLiteCursor = sQLiteCursorQueryFinalized;
                            checkSQLException(e);
                            if (sQLiteCursor != null) {
                                sQLiteCursor.dispose();
                                return;
                            }
                            return;
                        } catch (Throwable th) {
                            th = th;
                            sQLiteCursor = sQLiteCursorQueryFinalized;
                            if (sQLiteCursor != null) {
                                sQLiteCursor.dispose();
                            }
                            throw th;
                        }
                    }
                    if (arrayList2 != null) {
                        emptyMessagesMedia(j, arrayList2);
                    }
                    sQLiteCursorQueryFinalized.dispose();
                }
            } catch (Exception e2) {
                e = e2;
            }
        } catch (Throwable th2) {
            th = th2;
        }
    }

    private void onReactionsUpdate(final long j, final TLRPC.TL_messageReactions tL_messageReactions, final TLRPC.TL_messageReactions tL_messageReactions2) {
        ArrayList arrayList;
        if (tL_messageReactions == null || (arrayList = tL_messageReactions.results) == null) {
            return;
        }
        if (arrayList.isEmpty() && tL_messageReactions2 != null && tL_messageReactions2.results.isEmpty()) {
            return;
        }
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda112
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$onReactionsUpdate$101(tL_messageReactions, tL_messageReactions2, j);
            }
        });
    }

    private void onReactionsUpdate(final ArrayList<SavedReactionsUpdate> arrayList) {
        if (arrayList == null || arrayList.isEmpty()) {
            return;
        }
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda2
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$onReactionsUpdate$100(arrayList);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: processLoadedFilterPeersInternal, reason: merged with bridge method [inline-methods] */
    public void lambda$processLoadedFilterPeers$68(TLRPC.messages_Dialogs messages_dialogs, TLRPC.messages_Dialogs messages_dialogs2, ArrayList<TLRPC.User> arrayList, ArrayList<TLRPC.Chat> arrayList2, ArrayList<MessagesController.DialogFilter> arrayList3, SparseArray<MessagesController.DialogFilter> sparseArray, ArrayList<Integer> arrayList4, HashMap<Integer, HashSet<Long>> map, HashSet<Integer> hashSet, Runnable runnable) throws Throwable {
        putUsersAndChats(arrayList, arrayList2, true, false);
        int size = sparseArray.size();
        int i = 0;
        boolean z = false;
        while (i < size) {
            lambda$deleteDialogFilter$69(sparseArray.valueAt(i));
            i++;
            z = true;
        }
        Iterator<Integer> it = hashSet.iterator();
        while (it.hasNext()) {
            MessagesController.DialogFilter dialogFilter = this.dialogFiltersMap.get(it.next().intValue());
            if (dialogFilter != null) {
                dialogFilter.pendingUnreadCount = -1;
            }
        }
        for (Map.Entry<Integer, HashSet<Long>> entry : map.entrySet()) {
            MessagesController.DialogFilter dialogFilter2 = this.dialogFiltersMap.get(entry.getKey().intValue());
            if (dialogFilter2 != null) {
                Iterator<Long> it2 = entry.getValue().iterator();
                while (it2.hasNext()) {
                    dialogFilter2.pinnedDialogs.delete(it2.next().longValue());
                }
                z = true;
            }
        }
        int size2 = arrayList3.size();
        int i2 = 0;
        while (i2 < size2) {
            saveDialogFilterInternal(arrayList3.get(i2), false, true);
            i2++;
            z = true;
        }
        int size3 = this.dialogFilters.size();
        boolean z2 = false;
        for (int i3 = 0; i3 < size3; i3++) {
            MessagesController.DialogFilter dialogFilter3 = this.dialogFilters.get(i3);
            int iIndexOf = arrayList4.indexOf(Integer.valueOf(dialogFilter3.id));
            if (dialogFilter3.order != iIndexOf) {
                dialogFilter3.order = iIndexOf;
                z2 = true;
                z = true;
            }
        }
        if (z2) {
            Collections.sort(this.dialogFilters, new Comparator() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda104
                @Override // java.util.Comparator
                public final int compare(Object obj, Object obj2) {
                    return MessagesStorage.lambda$processLoadedFilterPeersInternal$67((MessagesController.DialogFilter) obj, (MessagesController.DialogFilter) obj2);
                }
            });
            saveDialogFiltersOrderInternal();
        }
        int i4 = z ? 1 : 2;
        calcUnreadCounters(true);
        getMessagesController().processLoadedDialogFilters(new ArrayList<>(this.dialogFilters), messages_dialogs, messages_dialogs2, arrayList, arrayList2, null, i4, runnable);
    }

    private void putChatsInternal(List<TLRPC.Chat> list) {
        int i;
        if (list == null || list.isEmpty()) {
            return;
        }
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO chats VALUES(?, ?, ?)");
        for (int i2 = 0; i2 < list.size(); i2++) {
            TLRPC.Chat chat = list.get(i2);
            if (chat.min) {
                SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data FROM chats WHERE uid = %d", Long.valueOf(chat.id)), new Object[0]);
                if (sQLiteCursorQueryFinalized.next()) {
                    try {
                        NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                        if (nativeByteBufferByteBufferValue != null) {
                            TLRPC.Chat chatTLdeserialize = TLRPC.Chat.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            nativeByteBufferByteBufferValue.reuse();
                            if (chatTLdeserialize != null) {
                                chatTLdeserialize.title = chat.title;
                                chatTLdeserialize.photo = chat.photo;
                                chatTLdeserialize.broadcast = chat.broadcast;
                                chatTLdeserialize.verified = chat.verified;
                                chatTLdeserialize.megagroup = chat.megagroup;
                                chatTLdeserialize.call_not_empty = chat.call_not_empty;
                                chatTLdeserialize.call_active = chat.call_active;
                                chatTLdeserialize.monoforum = chat.monoforum;
                                chatTLdeserialize.broadcast_messages_allowed = chat.broadcast_messages_allowed;
                                if ((chat.flags2 & 262144) != 0) {
                                    chatTLdeserialize.linked_monoforum_id = chat.linked_monoforum_id;
                                    chatTLdeserialize.flags2 |= 262144;
                                }
                                TLRPC.TL_chatBannedRights tL_chatBannedRights = chat.default_banned_rights;
                                if (tL_chatBannedRights != null) {
                                    chatTLdeserialize.default_banned_rights = tL_chatBannedRights;
                                    chatTLdeserialize.flags |= 262144;
                                }
                                TLRPC.TL_chatAdminRights tL_chatAdminRights = chat.admin_rights;
                                if (tL_chatAdminRights != null) {
                                    chatTLdeserialize.admin_rights = tL_chatAdminRights;
                                    chatTLdeserialize.flags |= LiteMode.FLAG_ANIMATED_EMOJI_KEYBOARD_NOT_PREMIUM;
                                }
                                TLRPC.TL_chatBannedRights tL_chatBannedRights2 = chat.banned_rights;
                                if (tL_chatBannedRights2 != null) {
                                    chatTLdeserialize.banned_rights = tL_chatBannedRights2;
                                    chatTLdeserialize.flags |= LiteMode.FLAG_CHAT_SCALE;
                                }
                                String str = chat.username;
                                if (str != null) {
                                    chatTLdeserialize.username = str;
                                    i = chatTLdeserialize.flags | 64;
                                } else {
                                    chatTLdeserialize.username = null;
                                    i = chatTLdeserialize.flags & (-65);
                                }
                                chatTLdeserialize.flags = i;
                                int i3 = chat.participants_count;
                                if (i3 > 0) {
                                    chatTLdeserialize.participants_count = i3;
                                }
                                chat = chatTLdeserialize;
                            }
                        }
                    } catch (Exception e) {
                        FileLog.e(e);
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
            }
            sQLitePreparedStatementExecuteFast.requery();
            chat.flags |= 131072;
            NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(chat.getObjectSize());
            chat.serializeToStream(nativeByteBuffer);
            sQLitePreparedStatementExecuteFast.bindLong(1, chat.id);
            String str2 = chat.title;
            sQLitePreparedStatementExecuteFast.bindString(2, str2 != null ? str2.toLowerCase() : "");
            sQLitePreparedStatementExecuteFast.bindByteBuffer(3, nativeByteBuffer);
            sQLitePreparedStatementExecuteFast.step();
            nativeByteBuffer.reuse();
            this.dialogIsForum.put(-chat.id, chat.forum ? 1 : 0);
            this.dialogIsMonoForum.put(-chat.id, chat.monoforum ? 1 : 0);
        }
        sQLitePreparedStatementExecuteFast.dispose();
    }

    /*  JADX ERROR: Type inference failed
        jadx.core.utils.exceptions.JadxOverflowException: Type inference error: updates count limit reached
        	at jadx.core.utils.ErrorsCounter.addError(ErrorsCounter.java:59)
        	at jadx.core.utils.ErrorsCounter.error(ErrorsCounter.java:31)
        	at jadx.core.dex.attributes.nodes.NotificationAttrNode.addError(NotificationAttrNode.java:19)
        	at jadx.core.dex.visitors.typeinference.TypeInferenceVisitor.visit(TypeInferenceVisitor.java:77)
        */
    private void putDialogsInternal(org.telegram.tgnet.TLRPC.messages_Dialogs r37, int r38) {
        /*
            Method dump skipped, instructions count: 1939
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.messenger.MessagesStorage.putDialogsInternal(org.telegram.tgnet.TLRPC$messages_Dialogs, int):void");
    }

    /*  JADX ERROR: Type inference failed
        jadx.core.utils.exceptions.JadxOverflowException: Type inference error: updates count limit reached
        	at jadx.core.utils.ErrorsCounter.addError(ErrorsCounter.java:59)
        	at jadx.core.utils.ErrorsCounter.error(ErrorsCounter.java:31)
        	at jadx.core.dex.attributes.nodes.NotificationAttrNode.addError(NotificationAttrNode.java:19)
        	at jadx.core.dex.visitors.typeinference.TypeInferenceVisitor.visit(TypeInferenceVisitor.java:77)
        */
    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: putMessagesInternal, reason: merged with bridge method [inline-methods] */
    public void lambda$putMessages$194(java.util.ArrayList<org.telegram.tgnet.TLRPC.Message> r60, boolean r61, boolean r62, int r63, boolean r64, int r65, long r66) {
        /*
            Method dump skipped, instructions count: 8960
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.messenger.MessagesStorage.lambda$putMessages$194(java.util.ArrayList, boolean, boolean, int, boolean, int, long):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: putUsersAndChatsInternal, reason: merged with bridge method [inline-methods] */
    public void lambda$putUsersAndChats$175(List<TLRPC.User> list, List<TLRPC.Chat> list2, boolean z) {
        SQLiteDatabase sQLiteDatabase;
        if (z) {
            try {
                try {
                    this.database.beginTransaction();
                } catch (Exception e) {
                    checkSQLException(e);
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase == null) {
                        return;
                    }
                }
            } catch (Throwable th) {
                SQLiteDatabase sQLiteDatabase2 = this.database;
                if (sQLiteDatabase2 != null) {
                    sQLiteDatabase2.commitTransaction();
                }
                throw th;
            }
        }
        putUsersInternal(list);
        putChatsInternal(list2);
        sQLiteDatabase = this.database;
        if (sQLiteDatabase == null) {
            return;
        }
        sQLiteDatabase.commitTransaction();
    }

    private void putUsersInternal(List<TLRPC.User> list) {
        int i;
        int i2;
        int i3;
        if (list == null || list.isEmpty()) {
            return;
        }
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO users VALUES(?, ?, ?, ?)");
        for (int i4 = 0; i4 < list.size(); i4++) {
            TLRPC.User user = list.get(i4);
            if (user != null) {
                if (user.min) {
                    SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data FROM users WHERE uid = %d", Long.valueOf(user.id)), new Object[0]);
                    if (sQLiteCursorQueryFinalized.next()) {
                        try {
                            NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                            if (nativeByteBufferByteBufferValue != null) {
                                TLRPC.User userTLdeserialize = TLRPC.User.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                                nativeByteBufferByteBufferValue.reuse();
                                if (userTLdeserialize != null) {
                                    String str = user.username;
                                    if (str != null) {
                                        userTLdeserialize.username = str;
                                        i2 = userTLdeserialize.flags | 8;
                                    } else {
                                        userTLdeserialize.username = null;
                                        i2 = userTLdeserialize.flags & (-9);
                                    }
                                    userTLdeserialize.flags = i2;
                                    if (user.apply_min_photo) {
                                        TLRPC.UserProfilePhoto userProfilePhoto = user.photo;
                                        if (userProfilePhoto != null) {
                                            userTLdeserialize.photo = userProfilePhoto;
                                            i3 = i2 | 32;
                                        } else {
                                            userTLdeserialize.photo = null;
                                            i3 = i2 & (-33);
                                        }
                                        userTLdeserialize.flags = i3;
                                    }
                                    user = userTLdeserialize;
                                }
                            }
                        } catch (Exception e) {
                            checkSQLException(e);
                        }
                    }
                    sQLiteCursorQueryFinalized.dispose();
                }
                sQLitePreparedStatementExecuteFast.requery();
                NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(user.getObjectSize());
                user.serializeToStream(nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.bindLong(1, user.id);
                sQLitePreparedStatementExecuteFast.bindString(2, formatUserSearchName(user));
                TLRPC.UserStatus userStatus = user.status;
                if (userStatus != null) {
                    if (userStatus instanceof TLRPC.TL_userStatusRecently) {
                        i = userStatus.by_me ? -1000 : -100;
                    } else if (userStatus instanceof TLRPC.TL_userStatusLastWeek) {
                        i = userStatus.by_me ? -1001 : -101;
                    } else {
                        if (userStatus instanceof TLRPC.TL_userStatusLastMonth) {
                            i = userStatus.by_me ? -1002 : -102;
                        }
                        sQLitePreparedStatementExecuteFast.bindInteger(3, userStatus.expires);
                    }
                    userStatus.expires = i;
                    sQLitePreparedStatementExecuteFast.bindInteger(3, userStatus.expires);
                } else {
                    sQLitePreparedStatementExecuteFast.bindInteger(3, 0);
                }
                sQLitePreparedStatementExecuteFast.bindByteBuffer(4, nativeByteBuffer);
                sQLitePreparedStatementExecuteFast.step();
                nativeByteBuffer.reuse();
            }
        }
        sQLitePreparedStatementExecuteFast.dispose();
    }

    private boolean recoverDatabase() throws Exception {
        this.database.close();
        boolean zRecoverDatabase = DatabaseMigrationHelper.recoverDatabase(this.cacheFile, this.walCacheFile, this.shmCacheFile, this.currentAccount);
        FileLog.e("Database restored = " + zRecoverDatabase);
        if (zRecoverDatabase) {
            try {
                SQLiteDatabase sQLiteDatabase = new SQLiteDatabase(this.cacheFile.getPath());
                this.database = sQLiteDatabase;
                sQLiteDatabase.executeFast("PRAGMA secure_delete = ON").stepThis().dispose();
                this.database.executeFast("PRAGMA temp_store = MEMORY").stepThis().dispose();
                this.database.executeFast("PRAGMA journal_mode = WAL").stepThis().dispose();
                this.database.executeFast("PRAGMA journal_size_limit = 10485760").stepThis().dispose();
            } catch (SQLiteException e) {
                FileLog.e(new Exception(e));
                zRecoverDatabase = false;
            }
        }
        if (!zRecoverDatabase) {
            cleanupInternal(true);
            openDatabase(1);
            zRecoverDatabase = this.databaseCreated;
            FileLog.e("Try create new database = " + zRecoverDatabase);
        }
        if (zRecoverDatabase) {
            reset();
        }
        return zRecoverDatabase;
    }

    private void resetForumBadgeIfNeed(long j) {
        LongSparseIntArray longSparseIntArray;
        SQLiteCursor sQLiteCursor = null;
        try {
            SQLiteDatabase sQLiteDatabase = this.database;
            Locale locale = Locale.ENGLISH;
            SQLiteCursor sQLiteCursorQueryFinalized = sQLiteDatabase.queryFinalized(String.format(locale, "SELECT topic_id FROM topics WHERE did = %d AND unread_count > 0", Long.valueOf(j)), new Object[0]);
            try {
                if (sQLiteCursorQueryFinalized.next()) {
                    longSparseIntArray = null;
                } else {
                    longSparseIntArray = new LongSparseIntArray();
                    longSparseIntArray.put(j, 0);
                }
                sQLiteCursorQueryFinalized.dispose();
                if (longSparseIntArray != null) {
                    this.database.executeFast(String.format(locale, "UPDATE dialogs SET unread_count = 0, unread_count_i = 0 WHERE did = %d", Long.valueOf(j))).stepThis().dispose();
                }
                updateFiltersReadCounter(longSparseIntArray, null, true);
                getMessagesController().processDialogsUpdateRead(longSparseIntArray, null);
            } catch (Throwable th) {
                th = th;
                sQLiteCursor = sQLiteCursorQueryFinalized;
                try {
                    checkSQLException(th);
                } finally {
                    if (sQLiteCursor != null) {
                        sQLiteCursor.dispose();
                    }
                }
            }
        } catch (Throwable th2) {
            th = th2;
        }
    }

    private void saveDialogFilterInternal(MessagesController.DialogFilter dialogFilter, boolean z, boolean z2) throws Throwable {
        int i;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                if (!this.dialogFilters.contains(dialogFilter)) {
                    if (!z) {
                        this.dialogFilters.add(dialogFilter);
                    } else if (this.dialogFilters.get(0).isDefault()) {
                        this.dialogFilters.add(1, dialogFilter);
                    } else {
                        this.dialogFilters.add(0, dialogFilter);
                    }
                    this.dialogFiltersMap.put(dialogFilter.id, dialogFilter);
                }
                sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO dialog_filter VALUES(?, ?, ?, ?, ?, ?, ?, ?)");
            } catch (Throwable th) {
                th = th;
            }
        } catch (Exception e) {
            e = e;
        }
        try {
            sQLitePreparedStatementExecuteFast.bindInteger(1, dialogFilter.id);
            sQLitePreparedStatementExecuteFast.bindInteger(2, dialogFilter.order);
            sQLitePreparedStatementExecuteFast.bindInteger(3, dialogFilter.unreadCount);
            sQLitePreparedStatementExecuteFast.bindInteger(4, dialogFilter.flags);
            sQLitePreparedStatementExecuteFast.bindString(5, dialogFilter.id == 0 ? "ALL_CHATS" : dialogFilter.name);
            sQLitePreparedStatementExecuteFast.bindInteger(6, dialogFilter.color);
            Vector vector = new Vector(new MessagesStorage$$ExternalSyntheticLambda40());
            vector.objects.addAll(dialogFilter.entities);
            NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(vector.getObjectSize());
            vector.serializeToStream(nativeByteBuffer);
            sQLitePreparedStatementExecuteFast.bindByteBuffer(7, nativeByteBuffer);
            sQLitePreparedStatementExecuteFast.bindInteger(8, dialogFilter.title_noanimate ? 1 : 0);
            sQLitePreparedStatementExecuteFast.step();
            sQLitePreparedStatementExecuteFast.dispose();
            nativeByteBuffer.reuse();
            if (z2) {
                this.database.executeFast("DELETE FROM dialog_filter_ep WHERE id = " + dialogFilter.id).stepThis().dispose();
                this.database.executeFast("DELETE FROM dialog_filter_pin_v2 WHERE id = " + dialogFilter.id).stepThis().dispose();
                this.database.beginTransaction();
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("REPLACE INTO dialog_filter_pin_v2 VALUES(?, ?, ?)");
                int size = dialogFilter.alwaysShow.size();
                for (int i2 = 0; i2 < size; i2++) {
                    long jLongValue = dialogFilter.alwaysShow.get(i2).longValue();
                    sQLitePreparedStatementExecuteFast2.requery();
                    sQLitePreparedStatementExecuteFast2.bindInteger(1, dialogFilter.id);
                    sQLitePreparedStatementExecuteFast2.bindLong(2, jLongValue);
                    sQLitePreparedStatementExecuteFast2.bindInteger(3, dialogFilter.pinnedDialogs.get(jLongValue, Integer.MIN_VALUE));
                    sQLitePreparedStatementExecuteFast2.step();
                }
                int size2 = dialogFilter.pinnedDialogs.size();
                for (int i3 = 0; i3 < size2; i3++) {
                    long jKeyAt = dialogFilter.pinnedDialogs.keyAt(i3);
                    if (DialogObject.isEncryptedDialog(jKeyAt)) {
                        sQLitePreparedStatementExecuteFast2.requery();
                        sQLitePreparedStatementExecuteFast2.bindInteger(1, dialogFilter.id);
                        sQLitePreparedStatementExecuteFast2.bindLong(2, jKeyAt);
                        sQLitePreparedStatementExecuteFast2.bindInteger(3, dialogFilter.pinnedDialogs.valueAt(i3));
                        sQLitePreparedStatementExecuteFast2.step();
                    }
                }
                sQLitePreparedStatementExecuteFast2.dispose();
                sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO dialog_filter_ep VALUES(?, ?)");
                int size3 = dialogFilter.neverShow.size();
                for (i = 0; i < size3; i++) {
                    sQLitePreparedStatementExecuteFast.requery();
                    sQLitePreparedStatementExecuteFast.bindInteger(1, dialogFilter.id);
                    sQLitePreparedStatementExecuteFast.bindLong(2, dialogFilter.neverShow.get(i).longValue());
                    sQLitePreparedStatementExecuteFast.step();
                }
                sQLitePreparedStatementExecuteFast.dispose();
                this.database.commitTransaction();
            }
            SQLiteDatabase sQLiteDatabase = this.database;
            if (sQLiteDatabase != null) {
                sQLiteDatabase.commitTransaction();
            }
        } catch (Exception e2) {
            e = e2;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            checkSQLException(e);
            SQLiteDatabase sQLiteDatabase2 = this.database;
            if (sQLiteDatabase2 != null) {
                sQLiteDatabase2.commitTransaction();
            }
            if (sQLitePreparedStatement != null) {
                sQLitePreparedStatement.dispose();
            }
        } catch (Throwable th2) {
            th = th2;
            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
            SQLiteDatabase sQLiteDatabase3 = this.database;
            if (sQLiteDatabase3 != null) {
                sQLiteDatabase3.commitTransaction();
            }
            if (sQLitePreparedStatement != null) {
                sQLitePreparedStatement.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: saveDiffParamsInternal, reason: merged with bridge method [inline-methods] */
    public void lambda$saveDiffParams$35(int i, int i2, int i3, int i4) {
        try {
            if (this.lastSavedSeq == i && this.lastSavedPts == i2 && this.lastSavedDate == i3 && this.lastQtsValue == i4) {
                return;
            }
            SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE params SET seq = ?, pts = ?, date = ?, qts = ? WHERE id = 1");
            sQLitePreparedStatementExecuteFast.bindInteger(1, i);
            sQLitePreparedStatementExecuteFast.bindInteger(2, i2);
            sQLitePreparedStatementExecuteFast.bindInteger(3, i3);
            sQLitePreparedStatementExecuteFast.bindInteger(4, i4);
            sQLitePreparedStatementExecuteFast.step();
            sQLitePreparedStatementExecuteFast.dispose();
            this.lastSavedSeq = i;
            this.lastSavedPts = i2;
            this.lastSavedDate = i3;
            this.lastSavedQts = i4;
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:67:0x0283  */
    /* JADX WARN: Removed duplicated region for block: B:72:0x028f  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    private void saveTopicsInternal(long j, List<TLRPC.TL_forumTopic> list, boolean z, boolean z2, int i) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLitePreparedStatement sQLitePreparedStatement2;
        int i2;
        HashMap map;
        long j2 = j;
        List<TLRPC.TL_forumTopic> list2 = list;
        int i3 = 2;
        int i4 = 1;
        SQLitePreparedStatement sQLitePreparedStatement3 = null;
        try {
            try {
                HashSet hashSet = new HashSet();
                HashMap map2 = new HashMap();
                for (int i5 = 0; i5 < list.size(); i5++) {
                    TLRPC.TL_forumTopic tL_forumTopic = list2.get(i5);
                    SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT did, pinned FROM topics WHERE did = " + j2 + " AND topic_id = " + tL_forumTopic.id, new Object[0]);
                    boolean next = sQLiteCursorQueryFinalized.next();
                    if (next) {
                        map2.put(Integer.valueOf(i5), Integer.valueOf(sQLiteCursorQueryFinalized.intValue(2)));
                    }
                    sQLiteCursorQueryFinalized.dispose();
                    if (next) {
                        hashSet.add(Integer.valueOf(i5));
                    }
                }
                if (z) {
                    this.database.executeFast("DELETE FROM topics WHERE did = " + j2).stepThis().dispose();
                }
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("REPLACE INTO topics VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
                if (z2) {
                    try {
                        this.database.beginTransaction();
                    } catch (Exception e) {
                        e = e;
                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast;
                        checkSQLException(e);
                        if (sQLitePreparedStatement3 != null) {
                        }
                        this.database.commitTransaction();
                    } catch (Throwable th) {
                        th = th;
                        sQLitePreparedStatement3 = sQLitePreparedStatementExecuteFast;
                        if (sQLitePreparedStatement3 != null) {
                        }
                        this.database.commitTransaction();
                        throw th;
                    }
                }
                int i6 = 0;
                while (i6 < list.size()) {
                    try {
                        TLRPC.TL_forumTopic tL_forumTopic2 = list2.get(i6);
                        long peerDialogId = isMonoForum(j) ? DialogObject.getPeerDialogId(tL_forumTopic2.from_id) : tL_forumTopic2.id;
                        boolean zContains = hashSet.contains(Integer.valueOf(i6));
                        sQLitePreparedStatementExecuteFast.requery();
                        sQLitePreparedStatementExecuteFast.bindLong(i4, j2);
                        sQLitePreparedStatementExecuteFast.bindLong(i3, peerDialogId);
                        NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(tL_forumTopic2.getObjectSize());
                        tL_forumTopic2.serializeToStream(nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast.bindByteBuffer(3, nativeByteBuffer);
                        sQLitePreparedStatementExecuteFast.bindInteger(4, tL_forumTopic2.top_message);
                        NativeByteBuffer nativeByteBuffer2 = new NativeByteBuffer(tL_forumTopic2.topicStartMessage.getObjectSize());
                        tL_forumTopic2.topicStartMessage.serializeToStream(nativeByteBuffer2);
                        sQLitePreparedStatementExecuteFast.bindByteBuffer(5, nativeByteBuffer2);
                        sQLitePreparedStatementExecuteFast.bindInteger(6, tL_forumTopic2.unread_count);
                        sQLitePreparedStatementExecuteFast.bindInteger(7, tL_forumTopic2.read_inbox_max_id);
                        sQLitePreparedStatementExecuteFast.bindInteger(8, tL_forumTopic2.unread_mentions_count);
                        sQLitePreparedStatementExecuteFast.bindInteger(9, tL_forumTopic2.unread_reactions_count);
                        sQLitePreparedStatementExecuteFast.bindInteger(10, tL_forumTopic2.read_outbox_max_id);
                        sQLitePreparedStatementExecuteFast.bindInteger(11, (tL_forumTopic2.isShort && map2.containsKey(Integer.valueOf(i6))) ? ((Integer) map2.get(Integer.valueOf(i6))).intValue() : tL_forumTopic2.pinned ? tL_forumTopic2.pinnedOrder + 1 : 0);
                        sQLitePreparedStatementExecuteFast.bindInteger(12, tL_forumTopic2.totalMessagesCount);
                        sQLitePreparedStatementExecuteFast.bindInteger(13, tL_forumTopic2.hidden ? 1 : 0);
                        sQLitePreparedStatementExecuteFast.bindInteger(14, i);
                        sQLitePreparedStatementExecuteFast.bindInteger(15, tL_forumTopic2.nopaid_messages_exception ? 1 : 0);
                        sQLitePreparedStatementExecuteFast.step();
                        nativeByteBuffer2.reuse();
                        nativeByteBuffer.reuse();
                        if (zContains) {
                            int i7 = tL_forumTopic2.top_message;
                            i2 = i6;
                            map = map2;
                            sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast;
                            try {
                                closeHolesInTable("messages_holes_topics", j, i7, i7, peerDialogId);
                                int i8 = tL_forumTopic2.top_message;
                                closeHolesInMedia(j, i8, i8, -1, 0L);
                            } catch (Exception e2) {
                                e = e2;
                                sQLitePreparedStatement3 = sQLitePreparedStatement2;
                                checkSQLException(e);
                                if (sQLitePreparedStatement3 != null) {
                                    sQLitePreparedStatement = sQLitePreparedStatement3;
                                    sQLitePreparedStatement.dispose();
                                }
                                this.database.commitTransaction();
                            } catch (Throwable th2) {
                                th = th2;
                                sQLitePreparedStatement3 = sQLitePreparedStatement2;
                                if (sQLitePreparedStatement3 != null) {
                                    sQLitePreparedStatement3.dispose();
                                }
                                this.database.commitTransaction();
                                throw th;
                            }
                        } else {
                            i2 = i6;
                            map = map2;
                            sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast;
                            SQLiteDatabase sQLiteDatabase = this.database;
                            Locale locale = Locale.ENGLISH;
                            sQLiteDatabase.executeFast(String.format(locale, "DELETE FROM messages_holes_topics WHERE uid = %d AND topic_id = %d", Long.valueOf(j), Long.valueOf(peerDialogId))).stepThis().dispose();
                            this.database.executeFast(String.format(locale, "DELETE FROM media_holes_topics WHERE uid = %d AND topic_id = %d", Long.valueOf(j), Long.valueOf(peerDialogId))).stepThis().dispose();
                            this.database.executeFast(String.format(locale, "DELETE FROM messages_topics WHERE uid = %d AND topic_id = %d", Long.valueOf(j), Long.valueOf(peerDialogId))).stepThis().dispose();
                            this.database.executeFast(String.format(locale, "DELETE FROM media_topics WHERE uid = %d AND topic_id = %d", Long.valueOf(j), Long.valueOf(peerDialogId))).stepThis().dispose();
                            SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("REPLACE INTO messages_holes_topics VALUES(?, ?, ?, ?)");
                            createFirstHoles(j, sQLitePreparedStatementExecuteFast2, this.database.executeFast("REPLACE INTO media_holes_topics VALUES(?, ?, ?, ?, ?)"), tL_forumTopic2.top_message, peerDialogId);
                            sQLitePreparedStatementExecuteFast2.dispose();
                            sQLitePreparedStatementExecuteFast2.dispose();
                        }
                        i6 = i2 + 1;
                        j2 = j;
                        map2 = map;
                        sQLitePreparedStatementExecuteFast = sQLitePreparedStatement2;
                        i3 = 2;
                        i4 = 1;
                        list2 = list;
                    } catch (Exception e3) {
                        e = e3;
                        sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast;
                    } catch (Throwable th3) {
                        th = th3;
                        sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast;
                    }
                }
                sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast;
                resetAllUnreadCounters(false);
            } catch (Exception e4) {
                e = e4;
            }
            if (sQLitePreparedStatement2 != null) {
                sQLitePreparedStatement = sQLitePreparedStatement2;
                sQLitePreparedStatement.dispose();
            }
            this.database.commitTransaction();
        } catch (Throwable th4) {
            th = th4;
        }
    }

    private ArrayList<Long> toPeerIds(ArrayList<TLRPC.InputPeer> arrayList) {
        ArrayList<Long> arrayList2 = new ArrayList<>();
        if (arrayList == null) {
            return arrayList2;
        }
        int size = arrayList.size();
        for (int i = 0; i < size; i++) {
            TLRPC.InputPeer inputPeer = arrayList.get(i);
            if (inputPeer != null) {
                long j = inputPeer.user_id;
                if (j == 0) {
                    long j2 = inputPeer.chat_id;
                    if (j2 == 0) {
                        j2 = inputPeer.channel_id;
                    }
                    j = -j2;
                }
                arrayList2.add(Long.valueOf(j));
            }
        }
        return arrayList2;
    }

    private void updateDbToLastVersion(int i) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda34
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$updateDbToLastVersion$3();
            }
        });
        FileLog.d("MessagesStorage start db migration from " + i + " to " + LAST_DB_VERSION);
        int iMigrate = DatabaseMigrationHelper.migrate(this, i);
        StringBuilder sb = new StringBuilder();
        sb.append("MessagesStorage db migration finished to varsion ");
        sb.append(iMigrate);
        FileLog.d(sb.toString());
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda35
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$updateDbToLastVersion$4();
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:211:0x0424  */
    /* JADX WARN: Removed duplicated region for block: B:213:0x0429  */
    /* JADX WARN: Removed duplicated region for block: B:215:0x042e  */
    /* JADX WARN: Removed duplicated region for block: B:221:0x0438  */
    /* JADX WARN: Removed duplicated region for block: B:223:0x043d  */
    /* JADX WARN: Removed duplicated region for block: B:225:0x0442  */
    /* JADX WARN: Removed duplicated region for block: B:272:? A[RETURN, SYNTHETIC] */
    /* renamed from: updateDialogsWithDeletedMessagesInternal, reason: merged with bridge method [inline-methods] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public void lambda$updateDialogsWithDeletedMessages$211(long j, long j2, ArrayList<Integer> arrayList, ArrayList<Long> arrayList2) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLiteCursor sQLiteCursorQueryFinalized;
        SQLitePreparedStatement sQLitePreparedStatement2;
        SQLiteDatabase sQLiteDatabase;
        SQLiteDatabase sQLiteDatabase2;
        SQLiteCursor sQLiteCursorQueryFinalized2;
        TLRPC.TL_messages_dialogs tL_messages_dialogs;
        String str;
        TLRPC.Dialog dialog;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        TLRPC.TL_dialog tL_dialog;
        String str2;
        Long lValueOf;
        ArrayList<Long> arrayList3;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        long j3 = j2;
        try {
            ArrayList arrayList4 = new ArrayList();
            String str3 = ",";
            if (arrayList.isEmpty()) {
                arrayList4.add(Long.valueOf(-j3));
            } else {
                try {
                    try {
                        if (j3 != 0) {
                            arrayList4.add(Long.valueOf(-j3));
                            sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET (last_mid, last_mid_group) = (SELECT mid, group_id FROM messages_v2 WHERE uid = ? AND date = (SELECT MAX(date) FROM messages_v2 WHERE uid = ?)) WHERE did = ?");
                        } else {
                            if (j == 0) {
                                try {
                                    sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT did FROM dialogs WHERE last_mid IN(%s) AND flags = 0", TextUtils.join(",", arrayList)), new Object[0]);
                                    while (sQLiteCursorQueryFinalized.next()) {
                                        try {
                                            arrayList4.add(Long.valueOf(sQLiteCursorQueryFinalized.longValue(0)));
                                        } catch (Exception e) {
                                            e = e;
                                            sQLitePreparedStatement = null;
                                            try {
                                                checkSQLException(e);
                                                sQLiteDatabase2 = this.database;
                                                if (sQLiteDatabase2 != null) {
                                                }
                                                if (sQLiteCursorQueryFinalized != null) {
                                                }
                                                if (sQLitePreparedStatement != null) {
                                                }
                                            } catch (Throwable th) {
                                                th = th;
                                                sQLitePreparedStatement2 = sQLitePreparedStatement;
                                                sQLiteDatabase = this.database;
                                                if (sQLiteDatabase != null) {
                                                }
                                                if (sQLiteCursorQueryFinalized != null) {
                                                }
                                                if (sQLitePreparedStatement2 != null) {
                                                }
                                                throw th;
                                            }
                                        } catch (Throwable th2) {
                                            th = th2;
                                            sQLitePreparedStatement = null;
                                            sQLitePreparedStatement2 = sQLitePreparedStatement;
                                            sQLiteDatabase = this.database;
                                            if (sQLiteDatabase != null) {
                                            }
                                            if (sQLiteCursorQueryFinalized != null) {
                                            }
                                            if (sQLitePreparedStatement2 != null) {
                                            }
                                            throw th;
                                        }
                                    }
                                    sQLiteCursorQueryFinalized.dispose();
                                } catch (Throwable th3) {
                                    th = th3;
                                    sQLiteCursorQueryFinalized = null;
                                    sQLitePreparedStatement2 = null;
                                    sQLiteDatabase = this.database;
                                    if (sQLiteDatabase != null) {
                                    }
                                    if (sQLiteCursorQueryFinalized != null) {
                                    }
                                    if (sQLitePreparedStatement2 != null) {
                                    }
                                    throw th;
                                }
                            } else {
                                arrayList4.add(Long.valueOf(j));
                            }
                            sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET (last_mid, last_mid_group) = (SELECT mid, group_id FROM messages_v2 WHERE uid = ? AND date = (SELECT MAX(date) FROM messages_v2 WHERE uid = ? AND date != 0)) WHERE did = ?");
                        }
                        try {
                            this.database.beginTransaction();
                            for (int i = 0; i < arrayList4.size(); i++) {
                                long jLongValue = ((Long) arrayList4.get(i)).longValue();
                                sQLitePreparedStatementExecuteFast.requery();
                                sQLitePreparedStatementExecuteFast.bindLong(1, jLongValue);
                                sQLitePreparedStatementExecuteFast.bindLong(2, jLongValue);
                                sQLitePreparedStatementExecuteFast.bindLong(3, jLongValue);
                                sQLitePreparedStatementExecuteFast.step();
                            }
                            sQLitePreparedStatementExecuteFast.dispose();
                        } catch (Exception e2) {
                            e = e2;
                        } catch (Throwable th4) {
                            th = th4;
                        }
                    } catch (Exception e3) {
                        e = e3;
                        sQLiteCursorQueryFinalized = null;
                    }
                } catch (Throwable th5) {
                    th = th5;
                    sQLiteCursorQueryFinalized = null;
                }
                try {
                    this.database.commitTransaction();
                } catch (Exception e4) {
                    e = e4;
                    sQLitePreparedStatementExecuteFast = null;
                    sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                    sQLiteCursorQueryFinalized = null;
                    checkSQLException(e);
                    sQLiteDatabase2 = this.database;
                    if (sQLiteDatabase2 != null) {
                    }
                    if (sQLiteCursorQueryFinalized != null) {
                    }
                    if (sQLitePreparedStatement != null) {
                    }
                } catch (Throwable th6) {
                    th = th6;
                    sQLitePreparedStatementExecuteFast = null;
                    sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast;
                    sQLiteCursorQueryFinalized = null;
                    sQLiteDatabase = this.database;
                    if (sQLiteDatabase != null) {
                    }
                    if (sQLiteCursorQueryFinalized != null) {
                    }
                    if (sQLitePreparedStatement2 != null) {
                    }
                    throw th;
                }
            }
            if (arrayList2 != null) {
                for (int i2 = 0; i2 < arrayList2.size(); i2++) {
                    try {
                        Long l = arrayList2.get(i2);
                        if (!arrayList4.contains(l)) {
                            arrayList4.add(l);
                        }
                    } catch (Exception e5) {
                        e = e5;
                        sQLiteCursorQueryFinalized2 = null;
                        sQLitePreparedStatement = null;
                        sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                        checkSQLException(e);
                        sQLiteDatabase2 = this.database;
                        if (sQLiteDatabase2 != null) {
                        }
                        if (sQLiteCursorQueryFinalized != null) {
                        }
                        if (sQLitePreparedStatement != null) {
                        }
                    }
                }
            }
            try {
                String strJoin = TextUtils.join(",", arrayList4);
                TLRPC.TL_messages_dialogs tL_messages_dialogs2 = new TLRPC.TL_messages_dialogs();
                ArrayList<TLRPC.EncryptedChat> arrayList5 = new ArrayList<>();
                ArrayList<Long> arrayList6 = new ArrayList<>();
                ArrayList<Long> arrayList7 = new ArrayList<>();
                ArrayList arrayList8 = new ArrayList();
                LongSparseArray longSparseArray = new LongSparseArray();
                int i3 = 0;
                sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT d.did, d.last_mid, d.unread_count, d.date, m.data, m.read_state, m.mid, m.send_state, m.date, d.pts, d.inbox_max, d.outbox_max, d.pinned, d.unread_count_i, d.flags, d.folder_id, d.data, d.unread_reactions, d.last_mid_group, d.ttl_period FROM dialogs as d LEFT JOIN messages_v2 as m ON d.last_mid = m.mid AND d.did = m.uid AND d.last_mid_group IS NULL WHERE d.did IN(%s)", strJoin), new Object[0]);
                while (sQLiteCursorQueryFinalized2.next()) {
                    try {
                        try {
                            TLRPC.TL_messages_dialogs tL_messages_dialogs3 = tL_messages_dialogs2;
                            try {
                                long jLongValue2 = sQLiteCursorQueryFinalized2.longValue(i3);
                                if (DialogObject.isFolderDialogId(jLongValue2)) {
                                    TLRPC.TL_dialogFolder tL_dialogFolder = new TLRPC.TL_dialogFolder();
                                    tL_dialog = tL_dialogFolder;
                                    if (!sQLiteCursorQueryFinalized2.isNull(16)) {
                                        NativeByteBuffer nativeByteBufferByteBufferValue2 = sQLiteCursorQueryFinalized2.byteBufferValue(16);
                                        if (nativeByteBufferByteBufferValue2 != null) {
                                            tL_dialogFolder.folder = TLRPC.TL_folder.TLdeserialize(nativeByteBufferByteBufferValue2, nativeByteBufferByteBufferValue2.readInt32(false), false);
                                            nativeByteBufferByteBufferValue2.reuse();
                                            tL_dialog = tL_dialogFolder;
                                        } else {
                                            TLRPC.TL_folder tL_folder = new TLRPC.TL_folder();
                                            tL_dialogFolder.folder = tL_folder;
                                            tL_folder.id = sQLiteCursorQueryFinalized2.intValue(15);
                                            tL_dialog = tL_dialogFolder;
                                        }
                                    }
                                } else {
                                    tL_dialog = new TLRPC.TL_dialog();
                                }
                                tL_dialog.id = jLongValue2;
                                tL_dialog.top_message = sQLiteCursorQueryFinalized2.intValue(1);
                                tL_dialog.read_inbox_max_id = sQLiteCursorQueryFinalized2.intValue(10);
                                tL_dialog.read_outbox_max_id = sQLiteCursorQueryFinalized2.intValue(11);
                                tL_dialog.unread_count = sQLiteCursorQueryFinalized2.intValue(2);
                                tL_dialog.unread_mentions_count = sQLiteCursorQueryFinalized2.intValue(13);
                                tL_dialog.last_message_date = sQLiteCursorQueryFinalized2.intValue(3);
                                tL_dialog.pts = sQLiteCursorQueryFinalized2.intValue(9);
                                tL_dialog.flags = j3 == 0 ? 0 : 1;
                                int iIntValue = sQLiteCursorQueryFinalized2.intValue(12);
                                tL_dialog.pinnedNum = iIntValue;
                                tL_dialog.pinned = iIntValue != 0;
                                int iIntValue2 = sQLiteCursorQueryFinalized2.intValue(14);
                                tL_dialog.unread_mark = (iIntValue2 & 1) != 0;
                                tL_dialog.view_forum_as_messages = (iIntValue2 & 64) != 0;
                                tL_dialog.folder_id = sQLiteCursorQueryFinalized2.intValue(15);
                                tL_dialog.unread_reactions_count = sQLiteCursorQueryFinalized2.intValue(17);
                                long jLongValue3 = sQLiteCursorQueryFinalized2.longValue(18);
                                if (jLongValue3 != 0) {
                                    longSparseArray.put(jLongValue2, Long.valueOf(jLongValue3));
                                }
                                tL_dialog.ttl_period = sQLiteCursorQueryFinalized2.intValue(19);
                                tL_messages_dialogs3.dialogs.add(tL_dialog);
                                NativeByteBuffer nativeByteBufferByteBufferValue3 = sQLiteCursorQueryFinalized2.byteBufferValue(4);
                                if (nativeByteBufferByteBufferValue3 != null) {
                                    TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue3, nativeByteBufferByteBufferValue3.readInt32(false), false);
                                    str2 = str3;
                                    messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue3, getUserConfig().clientUserId);
                                    nativeByteBufferByteBufferValue3.reuse();
                                    MessageObject.setUnreadFlags(messageTLdeserialize, sQLiteCursorQueryFinalized2.intValue(5));
                                    messageTLdeserialize.id = sQLiteCursorQueryFinalized2.intValue(6);
                                    messageTLdeserialize.send_state = sQLiteCursorQueryFinalized2.intValue(7);
                                    int iIntValue3 = sQLiteCursorQueryFinalized2.intValue(8);
                                    if (iIntValue3 != 0) {
                                        tL_dialog.last_message_date = iIntValue3;
                                    }
                                    messageTLdeserialize.dialog_id = tL_dialog.id;
                                    tL_messages_dialogs3.messages.add(messageTLdeserialize);
                                    addUsersAndChatsFromMessage(messageTLdeserialize, arrayList6, arrayList7, null);
                                } else {
                                    str2 = str3;
                                }
                                if (!DialogObject.isEncryptedDialog(jLongValue2) && tL_dialog.read_inbox_max_id > tL_dialog.top_message) {
                                    tL_dialog.read_inbox_max_id = 0;
                                }
                                if (DialogObject.isEncryptedDialog(jLongValue2)) {
                                    int encryptedChatId = DialogObject.getEncryptedChatId(jLongValue2);
                                    if (!arrayList8.contains(Integer.valueOf(encryptedChatId))) {
                                        arrayList8.add(Integer.valueOf(encryptedChatId));
                                    }
                                } else if (!DialogObject.isUserDialog(jLongValue2)) {
                                    long j4 = -jLongValue2;
                                    if (!arrayList7.contains(Long.valueOf(j4))) {
                                        lValueOf = Long.valueOf(j4);
                                        arrayList3 = arrayList7;
                                        arrayList3.add(lValueOf);
                                    }
                                } else if (!arrayList6.contains(Long.valueOf(jLongValue2))) {
                                    lValueOf = Long.valueOf(jLongValue2);
                                    arrayList3 = arrayList6;
                                    arrayList3.add(lValueOf);
                                }
                                j3 = j2;
                                tL_messages_dialogs2 = tL_messages_dialogs3;
                                str3 = str2;
                                i3 = 0;
                            } catch (Throwable th7) {
                                th = th7;
                                sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                                sQLitePreparedStatement2 = null;
                                sQLiteDatabase = this.database;
                                if (sQLiteDatabase != null) {
                                    sQLiteDatabase.commitTransaction();
                                }
                                if (sQLiteCursorQueryFinalized != null) {
                                    sQLiteCursorQueryFinalized.dispose();
                                }
                                if (sQLitePreparedStatement2 != null) {
                                    sQLitePreparedStatement2.dispose();
                                }
                                throw th;
                            }
                        } catch (Exception e6) {
                            e = e6;
                            sQLitePreparedStatement = null;
                            sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                            checkSQLException(e);
                            sQLiteDatabase2 = this.database;
                            if (sQLiteDatabase2 != null) {
                                sQLiteDatabase2.commitTransaction();
                            }
                            if (sQLiteCursorQueryFinalized != null) {
                                sQLiteCursorQueryFinalized.dispose();
                            }
                            if (sQLitePreparedStatement != null) {
                                sQLitePreparedStatement.dispose();
                                return;
                            }
                            return;
                        }
                    } catch (Throwable th8) {
                        th = th8;
                        sQLitePreparedStatement = null;
                    }
                }
                TLRPC.TL_messages_dialogs tL_messages_dialogs4 = tL_messages_dialogs2;
                String str4 = str3;
                sQLiteCursorQueryFinalized2.dispose();
                if (longSparseArray.isEmpty()) {
                    tL_messages_dialogs = tL_messages_dialogs4;
                    sQLitePreparedStatement = null;
                    sQLiteCursorQueryFinalized2 = null;
                } else {
                    StringBuilder sb = new StringBuilder();
                    int i4 = 0;
                    while (i4 < longSparseArray.size()) {
                        sb.append("uid = ");
                        sb.append(longSparseArray.keyAt(i4));
                        sb.append(" AND group_id = ");
                        sb.append(longSparseArray.valueAt(i4));
                        i4++;
                        TLRPC.TL_messages_dialogs tL_messages_dialogs5 = tL_messages_dialogs4;
                        if (i4 < longSparseArray.size()) {
                            sb.append(" OR ");
                        }
                        tL_messages_dialogs4 = tL_messages_dialogs5;
                    }
                    tL_messages_dialogs = tL_messages_dialogs4;
                    int i5 = 0;
                    sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT uid, data, read_state, mid, send_state, date, group_id FROM messages_v2 WHERE %s", sb), new Object[0]);
                    while (sQLiteCursorQueryFinalized2.next()) {
                        long jLongValue4 = sQLiteCursorQueryFinalized2.longValue(i5);
                        int i6 = 0;
                        while (true) {
                            if (i6 >= tL_messages_dialogs.dialogs.size()) {
                                dialog = null;
                                break;
                            }
                            dialog = (TLRPC.Dialog) tL_messages_dialogs.dialogs.get(i6);
                            if (dialog != null && dialog.id == jLongValue4) {
                                break;
                            } else {
                                i6++;
                            }
                        }
                        if (dialog != null && (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized2.byteBufferValue(1)) != null) {
                            TLRPC.Message messageTLdeserialize2 = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            messageTLdeserialize2.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                            nativeByteBufferByteBufferValue.reuse();
                            MessageObject.setUnreadFlags(messageTLdeserialize2, sQLiteCursorQueryFinalized2.intValue(2));
                            messageTLdeserialize2.id = sQLiteCursorQueryFinalized2.intValue(3);
                            messageTLdeserialize2.send_state = sQLiteCursorQueryFinalized2.intValue(4);
                            int iIntValue4 = sQLiteCursorQueryFinalized2.intValue(5);
                            if (iIntValue4 != 0) {
                                dialog.last_message_date = iIntValue4;
                            }
                            messageTLdeserialize2.dialog_id = dialog.id;
                            tL_messages_dialogs.messages.add(messageTLdeserialize2);
                            sQLitePreparedStatement = null;
                            try {
                                addUsersAndChatsFromMessage(messageTLdeserialize2, arrayList6, arrayList7, null);
                            } catch (Exception e7) {
                                e = e7;
                                sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                                checkSQLException(e);
                                sQLiteDatabase2 = this.database;
                                if (sQLiteDatabase2 != null) {
                                }
                                if (sQLiteCursorQueryFinalized != null) {
                                }
                                if (sQLitePreparedStatement != null) {
                                }
                            } catch (Throwable th9) {
                                th = th9;
                                sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized2;
                                sQLitePreparedStatement2 = sQLitePreparedStatement;
                                sQLiteDatabase = this.database;
                                if (sQLiteDatabase != null) {
                                }
                                if (sQLiteCursorQueryFinalized != null) {
                                }
                                if (sQLitePreparedStatement2 != null) {
                                }
                                throw th;
                            }
                        }
                        i5 = 0;
                    }
                    sQLitePreparedStatement = null;
                    sQLiteCursorQueryFinalized2.dispose();
                }
                if (arrayList8.isEmpty()) {
                    str = str4;
                } else {
                    str = str4;
                    getEncryptedChatsInternal(TextUtils.join(str, arrayList8), arrayList5, arrayList6);
                }
                if (!arrayList7.isEmpty()) {
                    getChatsInternal(TextUtils.join(str, arrayList7), tL_messages_dialogs.chats);
                }
                if (!arrayList6.isEmpty()) {
                    getUsersInternal(arrayList6, tL_messages_dialogs.users);
                }
                getMessagesController().getTopicsController().updateTopicsWithDeletedMessages(j, arrayList);
                if (!tL_messages_dialogs.dialogs.isEmpty() || !arrayList5.isEmpty()) {
                    getMessagesController().processDialogsUpdate(tL_messages_dialogs, arrayList5, true);
                }
                SQLiteDatabase sQLiteDatabase3 = this.database;
                if (sQLiteDatabase3 != null) {
                    sQLiteDatabase3.commitTransaction();
                }
                if (sQLiteCursorQueryFinalized2 != null) {
                    sQLiteCursorQueryFinalized2.dispose();
                }
            } catch (Exception e8) {
                e = e8;
                sQLitePreparedStatement = null;
                sQLiteCursorQueryFinalized2 = null;
            } catch (Throwable th10) {
                th = th10;
                sQLiteCursorQueryFinalized = null;
                sQLitePreparedStatement2 = null;
                sQLiteDatabase = this.database;
                if (sQLiteDatabase != null) {
                }
                if (sQLiteCursorQueryFinalized != null) {
                }
                if (sQLitePreparedStatement2 != null) {
                }
                throw th;
            }
        } catch (Exception e9) {
            e = e9;
            sQLitePreparedStatement = null;
            sQLiteCursorQueryFinalized = null;
        } catch (Throwable th11) {
            th = th11;
            sQLitePreparedStatement = null;
            sQLiteCursorQueryFinalized = null;
        }
    }

    private void updateDialogsWithReadMessagesInternal(ArrayList<Integer> arrayList, LongSparseIntArray longSparseIntArray, LongSparseIntArray longSparseIntArray2, LongSparseArray longSparseArray, LongSparseIntArray longSparseIntArray3) {
        LongSparseIntArray longSparseIntArray4;
        ArrayList<Long> arrayList2;
        ArrayList<Long> arrayList3;
        LongSparseIntArray longSparseIntArray5;
        int iMax;
        boolean z;
        int i;
        String str;
        String str2;
        String str3;
        ArrayList<Long> arrayList4;
        LongSparseIntArray longSparseIntArray6;
        int i2;
        int i3;
        LongSparseIntArray longSparseIntArray7 = longSparseIntArray;
        int i4 = 2;
        int i5 = 0;
        try {
            LongSparseIntArray longSparseIntArray8 = new LongSparseIntArray();
            LongSparseIntArray longSparseIntArray9 = new LongSparseIntArray();
            ArrayList<Long> arrayList5 = new ArrayList<>();
            String str4 = ",";
            if (isEmpty(arrayList)) {
                if (!isEmpty(longSparseIntArray)) {
                    int i6 = 0;
                    while (i6 < longSparseIntArray.size()) {
                        LongSparseIntArray longSparseIntArray10 = longSparseIntArray9;
                        long jKeyAt = longSparseIntArray7.keyAt(i6);
                        int i7 = longSparseIntArray7.get(jKeyAt);
                        int i8 = longSparseIntArray3 == null ? -2 : longSparseIntArray3.get(jKeyAt, -2);
                        if (i8 >= 0) {
                            longSparseIntArray8.put(jKeyAt, i8);
                            if (BuildVars.DEBUG_VERSION) {
                                str = jKeyAt + " update unread messages count by still unread " + i8;
                                i = i6;
                                FileLog.d(str);
                            } else {
                                i = i6;
                            }
                        } else {
                            if (longSparseIntArray3 == null || i8 == -2) {
                                z = true;
                            } else {
                                SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT start, end FROM messages_holes WHERE uid = %d AND end > %d", Long.valueOf(jKeyAt), Integer.valueOf(i7)), new Object[0]);
                                z = true;
                                while (sQLiteCursorQueryFinalized.next()) {
                                    z = false;
                                }
                                sQLiteCursorQueryFinalized.dispose();
                            }
                            if (z) {
                                i = i6;
                                SQLiteCursor sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT COUNT(mid) FROM messages_v2 WHERE uid = %d AND mid > %d AND read_state IN(0,2) AND out = 0", Long.valueOf(jKeyAt), Integer.valueOf(i7)), new Object[0]);
                                if (sQLiteCursorQueryFinalized2.next()) {
                                    int iIntValue = sQLiteCursorQueryFinalized2.intValue(0);
                                    longSparseIntArray8.put(jKeyAt, iIntValue);
                                    if (BuildVars.DEBUG_VERSION) {
                                        str2 = jKeyAt + " update unread messages count " + iIntValue;
                                        FileLog.d(str2);
                                    }
                                    sQLiteCursorQueryFinalized2.dispose();
                                } else {
                                    if (BuildVars.DEBUG_VERSION) {
                                        str2 = jKeyAt + " can't update unread messages count cursor trouble";
                                        FileLog.d(str2);
                                    }
                                    sQLiteCursorQueryFinalized2.dispose();
                                }
                            } else {
                                i = i6;
                                if (BuildVars.DEBUG_VERSION) {
                                    str = jKeyAt + " can't update unread messages count";
                                    FileLog.d(str);
                                }
                            }
                        }
                        SQLiteCursor sQLiteCursorQueryFinalized3 = this.database.queryFinalized("SELECT inbox_max FROM dialogs WHERE did = " + jKeyAt, new Object[0]);
                        int iIntValue2 = sQLiteCursorQueryFinalized3.next() ? sQLiteCursorQueryFinalized3.intValue(0) : 0;
                        sQLiteCursorQueryFinalized3.dispose();
                        FileLog.d(jKeyAt + " set inbox max " + i7);
                        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialogs SET inbox_max = max((SELECT inbox_max FROM dialogs WHERE did = ?), ?) WHERE did = ?");
                        sQLitePreparedStatementExecuteFast.requery();
                        sQLitePreparedStatementExecuteFast.bindLong(1, jKeyAt);
                        sQLitePreparedStatementExecuteFast.bindInteger(2, i7);
                        sQLitePreparedStatementExecuteFast.bindLong(3, jKeyAt);
                        sQLitePreparedStatementExecuteFast.step();
                        sQLitePreparedStatementExecuteFast.dispose();
                        if (isMonoForumOrForumWithTabs(jKeyAt)) {
                            i2 = i;
                            str3 = str4;
                            arrayList4 = arrayList5;
                            longSparseIntArray6 = longSparseIntArray10;
                            updateTopicsWithReadFromAllInternal(jKeyAt, iIntValue2, i7);
                        } else {
                            str3 = str4;
                            arrayList4 = arrayList5;
                            longSparseIntArray6 = longSparseIntArray10;
                            i2 = i;
                        }
                        i6 = i2 + 1;
                        longSparseIntArray7 = longSparseIntArray;
                        str4 = str3;
                        longSparseIntArray9 = longSparseIntArray6;
                        arrayList5 = arrayList4;
                    }
                }
                String str5 = str4;
                LongSparseIntArray longSparseIntArray11 = longSparseIntArray9;
                ArrayList<Long> arrayList6 = arrayList5;
                if (!isEmpty(longSparseArray)) {
                    int size = longSparseArray.size();
                    int i9 = 0;
                    while (i9 < size) {
                        ArrayList arrayList7 = (ArrayList) longSparseArray.valueAt(i9);
                        ArrayList arrayList8 = new ArrayList(arrayList7);
                        SQLiteCursor sQLiteCursorQueryFinalized4 = this.database.queryFinalized(String.format(Locale.US, "SELECT uid, read_state, out, mention, mid, is_channel FROM messages_v2 WHERE mid IN(%s)", TextUtils.join(str5, arrayList7)), new Object[0]);
                        long jLongValue = 0;
                        while (sQLiteCursorQueryFinalized4.next()) {
                            long jLongValue2 = sQLiteCursorQueryFinalized4.longValue(0);
                            arrayList8.remove(Integer.valueOf(sQLiteCursorQueryFinalized4.intValue(4)));
                            if (sQLiteCursorQueryFinalized4.intValue(1) < i4 && sQLiteCursorQueryFinalized4.intValue(i4) == 0 && sQLiteCursorQueryFinalized4.intValue(3) == 1) {
                                longSparseIntArray5 = longSparseIntArray11;
                                int i10 = longSparseIntArray5.get(jLongValue2, -1);
                                if (i10 < 0) {
                                    SQLiteCursor sQLiteCursorQueryFinalized5 = this.database.queryFinalized("SELECT unread_count_i FROM dialogs WHERE did = " + jLongValue2, new Object[0]);
                                    int iIntValue3 = sQLiteCursorQueryFinalized5.next() ? sQLiteCursorQueryFinalized5.intValue(0) : 0;
                                    sQLiteCursorQueryFinalized5.dispose();
                                    iMax = Math.max(0, iIntValue3 - 1);
                                } else {
                                    iMax = Math.max(0, i10 - 1);
                                }
                                longSparseIntArray5.put(jLongValue2, iMax);
                            } else {
                                longSparseIntArray5 = longSparseIntArray11;
                            }
                            jLongValue = sQLiteCursorQueryFinalized4.longValue(5);
                            longSparseIntArray11 = longSparseIntArray5;
                            i4 = 2;
                        }
                        LongSparseIntArray longSparseIntArray12 = longSparseIntArray11;
                        sQLiteCursorQueryFinalized4.dispose();
                        if (arrayList8.isEmpty() || jLongValue == 0) {
                            arrayList3 = arrayList6;
                        } else {
                            arrayList3 = arrayList6;
                            if (!arrayList3.contains(Long.valueOf(jLongValue))) {
                                arrayList3.add(Long.valueOf(jLongValue));
                            }
                        }
                        i9++;
                        arrayList6 = arrayList3;
                        longSparseIntArray11 = longSparseIntArray12;
                        i4 = 2;
                    }
                }
                longSparseIntArray4 = longSparseIntArray11;
                arrayList2 = arrayList6;
                if (!isEmpty(longSparseIntArray2)) {
                    for (int i11 = 0; i11 < longSparseIntArray2.size(); i11++) {
                        long jKeyAt2 = longSparseIntArray2.keyAt(i11);
                        int i12 = longSparseIntArray2.get(jKeyAt2);
                        SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE dialogs SET outbox_max = max((SELECT outbox_max FROM dialogs WHERE did = ?), ?) WHERE did = ?");
                        sQLitePreparedStatementExecuteFast2.requery();
                        sQLitePreparedStatementExecuteFast2.bindLong(1, jKeyAt2);
                        sQLitePreparedStatementExecuteFast2.bindInteger(2, i12);
                        sQLitePreparedStatementExecuteFast2.bindLong(3, jKeyAt2);
                        sQLitePreparedStatementExecuteFast2.step();
                        sQLitePreparedStatementExecuteFast2.dispose();
                    }
                }
            } else {
                SQLiteCursor sQLiteCursorQueryFinalized6 = this.database.queryFinalized(String.format(Locale.US, "SELECT uid, read_state, out FROM messages_v2 WHERE mid IN(%s) AND is_channel = 0", TextUtils.join(",", arrayList)), new Object[0]);
                while (sQLiteCursorQueryFinalized6.next()) {
                    if (sQLiteCursorQueryFinalized6.intValue(2) == 0 && sQLiteCursorQueryFinalized6.intValue(1) == 0) {
                        long jLongValue3 = sQLiteCursorQueryFinalized6.longValue(0);
                        int i13 = longSparseIntArray8.get(jLongValue3);
                        if (i13 == 0) {
                            longSparseIntArray8.put(jLongValue3, 1);
                        } else {
                            longSparseIntArray8.put(jLongValue3, i13 + 1);
                        }
                    }
                }
                sQLiteCursorQueryFinalized6.dispose();
                arrayList2 = arrayList5;
                longSparseIntArray4 = longSparseIntArray9;
            }
            if (longSparseIntArray8.size() > 0 || longSparseIntArray4.size() > 0) {
                this.database.beginTransaction();
                if (longSparseIntArray8.size() > 0) {
                    ArrayList<Long> arrayList9 = new ArrayList<>();
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast3 = this.database.executeFast("UPDATE dialogs SET unread_count = ? WHERE did = ?");
                    int i14 = 0;
                    while (i14 < longSparseIntArray8.size()) {
                        long jKeyAt3 = longSparseIntArray8.keyAt(i14);
                        if (!isForum(jKeyAt3)) {
                            int iValueAt = longSparseIntArray8.valueAt(i14);
                            SQLiteCursor sQLiteCursorQueryFinalized7 = this.database.queryFinalized("SELECT unread_count FROM dialogs WHERE did = " + jKeyAt3, new Object[0]);
                            int iIntValue4 = sQLiteCursorQueryFinalized7.next() ? sQLiteCursorQueryFinalized7.intValue(0) : 0;
                            sQLiteCursorQueryFinalized7.dispose();
                            if (iIntValue4 != iValueAt) {
                                sQLitePreparedStatementExecuteFast3.requery();
                                i3 = 1;
                                sQLitePreparedStatementExecuteFast3.bindInteger(1, iValueAt);
                                sQLitePreparedStatementExecuteFast3.bindLong(2, jKeyAt3);
                                sQLitePreparedStatementExecuteFast3.step();
                                arrayList9.add(Long.valueOf(jKeyAt3));
                            }
                            i14 += i3;
                        }
                        longSparseIntArray8.removeAt(i14);
                        i14--;
                        i3 = 1;
                        i14 += i3;
                    }
                    sQLitePreparedStatementExecuteFast3.dispose();
                    updateWidgets(arrayList9);
                }
                if (longSparseIntArray4.size() > 0) {
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast4 = this.database.executeFast("UPDATE dialogs SET unread_count_i = ? WHERE did = ?");
                    while (i5 < longSparseIntArray4.size()) {
                        long jKeyAt4 = longSparseIntArray4.keyAt(i5);
                        if (isForum(jKeyAt4) || isMonoForum(jKeyAt4)) {
                            longSparseIntArray4.removeAt(i5);
                            i5--;
                        } else {
                            sQLitePreparedStatementExecuteFast4.requery();
                            sQLitePreparedStatementExecuteFast4.bindInteger(1, longSparseIntArray4.valueAt(i5));
                            sQLitePreparedStatementExecuteFast4.bindLong(2, jKeyAt4);
                            sQLitePreparedStatementExecuteFast4.step();
                        }
                        i5++;
                    }
                    sQLitePreparedStatementExecuteFast4.dispose();
                }
                this.database.commitTransaction();
            }
            updateFiltersReadCounter(longSparseIntArray8, longSparseIntArray4, true);
            getMessagesController().processDialogsUpdateRead(longSparseIntArray8, longSparseIntArray4);
            if (arrayList2.isEmpty()) {
                return;
            }
            getMessagesController().reloadMentionsCountForChannels(arrayList2);
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:138:0x031e  */
    /* JADX WARN: Removed duplicated region for block: B:167:0x03a7  */
    /* JADX WARN: Removed duplicated region for block: B:169:0x03b3  */
    /* JADX WARN: Removed duplicated region for block: B:171:0x03b8  */
    /* JADX WARN: Removed duplicated region for block: B:181:0x03e0  */
    /* JADX WARN: Removed duplicated region for block: B:187:0x03f2  */
    /* JADX WARN: Removed duplicated region for block: B:188:0x03f4  */
    /* JADX WARN: Removed duplicated region for block: B:196:0x041f  */
    /* JADX WARN: Removed duplicated region for block: B:223:0x04a0 A[PHI: r7
      0x04a0: PHI (r7v101 int) = (r7v3 int), (r7v105 int) binds: [B:219:0x048c, B:221:0x0499] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:236:0x04d4 A[PHI: r7
      0x04d4: PHI (r7v95 int) = (r7v57 int), (r7v99 int) binds: [B:232:0x04c0, B:234:0x04cd] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:283:0x0586 A[PHI: r7
      0x0586: PHI (r7v79 int) = (r7v60 int), (r7v83 int) binds: [B:279:0x0572, B:281:0x057f] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:446:0x07e1 A[PHI: r7
      0x07e1: PHI (r7v48 int) = (r7v3 int), (r7v52 int) binds: [B:442:0x07cd, B:444:0x07da] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:459:0x0813 A[PHI: r7
      0x0813: PHI (r7v42 int) = (r7v4 int), (r7v46 int) binds: [B:455:0x07ff, B:457:0x080c] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:506:0x08bf A[PHI: r7
      0x08bf: PHI (r7v26 int) = (r7v7 int), (r7v30 int) binds: [B:502:0x08ab, B:504:0x08b8] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:532:0x0912  */
    /* JADX WARN: Removed duplicated region for block: B:593:0x09df  */
    /* JADX WARN: Removed duplicated region for block: B:610:0x0a16  */
    /* JADX WARN: Removed duplicated region for block: B:628:0x0a79  */
    /* JADX WARN: Removed duplicated region for block: B:629:0x0a80  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    private void updateFiltersReadCounter(LongSparseIntArray longSparseIntArray, LongSparseIntArray longSparseIntArray2, boolean z) {
        int i;
        LongSparseArray longSparseArray;
        int i2;
        int i3;
        int i4;
        MessagesController.DialogFilter dialogFilter;
        int iIntValue;
        MessagesStorage messagesStorage;
        LongSparseArray longSparseArray2;
        int i5;
        int i6;
        MessagesController.DialogFilter dialogFilter2;
        LongSparseArray longSparseArray3;
        LongSparseArray longSparseArray4;
        LongSparseArray longSparseArray5;
        int i7;
        LongSparseArray longSparseArray6;
        LongSparseArray longSparseArray7;
        char c;
        char c2;
        char c3;
        char c4;
        char c5;
        int i8;
        int i9;
        int i10;
        MessagesController.DialogFilter dialogFilter3;
        int i11;
        MessagesController.DialogFilter dialogFilter4;
        int iIntValue2;
        LongSparseArray longSparseArray8;
        int i12;
        int i13;
        LongSparseArray longSparseArray9;
        MessagesStorage messagesStorage2;
        LongSparseArray longSparseArray10;
        LongSparseArray longSparseArray11;
        int iIntValue3;
        char c6;
        char c7;
        char c8;
        char c9;
        char c10;
        int i14;
        ArrayList<TLRPC.Chat> arrayList;
        LongSparseArray longSparseArray12;
        LongSparseArray longSparseArray13;
        int iIntValue4;
        LongSparseArray longSparseArray14;
        int i15;
        int i16;
        ArrayList<TLRPC.EncryptedChat> arrayList2;
        ArrayList<TLRPC.User> arrayList3;
        LongSparseArray longSparseArray15;
        LongSparseIntArray longSparseIntArray3;
        MessagesStorage messagesStorage3 = this;
        if ((longSparseIntArray == null || longSparseIntArray.size() == 0) && (longSparseIntArray2 == null || longSparseIntArray2.size() == 0)) {
            return;
        }
        int i17 = 0;
        while (true) {
            if (i17 >= 2) {
                break;
            }
            for (int i18 = 0; i18 < 2; i18++) {
                int[] iArr = messagesStorage3.contacts[i17];
                int[] iArr2 = messagesStorage3.nonContacts[i17];
                int[] iArr3 = messagesStorage3.bots[i17];
                int[] iArr4 = messagesStorage3.channels[i17];
                messagesStorage3.groups[i17][i18] = 0;
                iArr4[i18] = 0;
                iArr3[i18] = 0;
                iArr2[i18] = 0;
                iArr[i18] = 0;
            }
            int[] iArr5 = messagesStorage3.mentionChannels;
            messagesStorage3.mentionGroups[i17] = 0;
            iArr5[i17] = 0;
            i17++;
        }
        ArrayList<TLRPC.User> arrayList4 = new ArrayList<>();
        ArrayList<TLRPC.User> arrayList5 = new ArrayList<>();
        ArrayList<TLRPC.Chat> arrayList6 = new ArrayList<>();
        ArrayList<Long> arrayList7 = new ArrayList<>();
        ArrayList arrayList8 = new ArrayList();
        ArrayList arrayList9 = new ArrayList();
        LongSparseArray longSparseArray16 = new LongSparseArray();
        LongSparseArray longSparseArray17 = new LongSparseArray();
        int i19 = 0;
        for (i = 2; i19 < i; i = 2) {
            LongSparseIntArray longSparseIntArray4 = i19 == 0 ? longSparseIntArray : longSparseIntArray2;
            if (longSparseIntArray4 != null) {
                int i20 = 0;
                while (i20 < longSparseIntArray4.size()) {
                    int iValueAt = longSparseIntArray4.valueAt(i20);
                    Integer numValueOf = Integer.valueOf(iValueAt);
                    if ((!z || iValueAt == 0) && (z || iValueAt != 0)) {
                        arrayList3 = arrayList4;
                        long jKeyAt = longSparseIntArray4.keyAt(i20);
                        if (z) {
                            (i19 == 0 ? messagesStorage3.dialogsWithUnread : messagesStorage3.dialogsWithMentions).remove(jKeyAt);
                        } else {
                            if (messagesStorage3.dialogsWithMentions.indexOfKey(jKeyAt) < 0 && messagesStorage3.dialogsWithUnread.indexOfKey(jKeyAt) < 0) {
                                longSparseArray17.put(jKeyAt, numValueOf);
                            }
                            (i19 == 0 ? messagesStorage3.dialogsWithUnread : messagesStorage3.dialogsWithMentions).put(jKeyAt, numValueOf);
                        }
                        if (longSparseArray16.indexOfKey(jKeyAt) < 0) {
                            SQLiteDatabase sQLiteDatabase = messagesStorage3.database;
                            StringBuilder sb = new StringBuilder();
                            longSparseIntArray3 = longSparseIntArray4;
                            sb.append("SELECT folder_id FROM dialogs WHERE did = ");
                            sb.append(jKeyAt);
                            longSparseArray15 = longSparseArray17;
                            SQLiteCursor sQLiteCursorQueryFinalized = sQLiteDatabase.queryFinalized(sb.toString(), new Object[0]);
                            int iIntValue5 = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : 0;
                            sQLiteCursorQueryFinalized.dispose();
                            longSparseArray16.put(jKeyAt, Integer.valueOf(iIntValue5));
                        } else {
                            longSparseArray15 = longSparseArray17;
                            longSparseIntArray3 = longSparseIntArray4;
                        }
                        if (DialogObject.isEncryptedDialog(jKeyAt)) {
                            int encryptedChatId = DialogObject.getEncryptedChatId(jKeyAt);
                            if (!arrayList9.contains(Integer.valueOf(encryptedChatId))) {
                                arrayList9.add(Integer.valueOf(encryptedChatId));
                            }
                        } else if (!DialogObject.isUserDialog(jKeyAt)) {
                            long j = -jKeyAt;
                            if (!arrayList8.contains(Long.valueOf(j))) {
                                arrayList8.add(Long.valueOf(j));
                            }
                        } else if (!arrayList7.contains(Long.valueOf(jKeyAt))) {
                            arrayList7.add(Long.valueOf(jKeyAt));
                        }
                    } else {
                        arrayList3 = arrayList4;
                        longSparseArray15 = longSparseArray17;
                        longSparseIntArray3 = longSparseIntArray4;
                    }
                    i20++;
                    arrayList4 = arrayList3;
                    longSparseArray17 = longSparseArray15;
                    longSparseIntArray4 = longSparseIntArray3;
                }
            }
            i19++;
            arrayList4 = arrayList4;
            longSparseArray17 = longSparseArray17;
        }
        ArrayList<TLRPC.User> arrayList10 = arrayList4;
        LongSparseArray longSparseArray18 = longSparseArray17;
        LongSparseArray longSparseArray19 = new LongSparseArray();
        LongSparseArray longSparseArray20 = new LongSparseArray();
        LongSparseArray longSparseArray21 = new LongSparseArray();
        LongSparseArray longSparseArray22 = new LongSparseArray();
        LongSparseArray longSparseArray23 = new LongSparseArray();
        LongSparseArray longSparseArray24 = new LongSparseArray();
        LongSparseArray longSparseArray25 = longSparseArray20;
        if (!arrayList7.isEmpty()) {
            messagesStorage3.getUsersInternal(arrayList7, arrayList10);
            int size = arrayList10.size();
            int i21 = 0;
            while (i21 < size) {
                TLRPC.User user = arrayList10.get(i21);
                ArrayList<TLRPC.Chat> arrayList11 = arrayList6;
                int i22 = size;
                ArrayList arrayList12 = arrayList8;
                ArrayList arrayList13 = arrayList9;
                boolean zIsDialogMuted = getMessagesController().isDialogMuted(user.id, 0L);
                Integer num = (Integer) longSparseArray16.get(user.id);
                int iIntValue6 = (num == null || num.intValue() < 0 || num.intValue() > 1) ? 0 : num.intValue();
                if (zIsDialogMuted) {
                    longSparseArray23.put(user.id, Boolean.TRUE);
                }
                if (iIntValue6 == 1) {
                    longSparseArray24.put(user.id, Boolean.TRUE);
                }
                if (user.bot) {
                    int[] iArr6 = messagesStorage3.bots[iIntValue6];
                    iArr6[zIsDialogMuted ? 1 : 0] = iArr6[zIsDialogMuted ? 1 : 0] + 1;
                } else if (user.self || user.contact) {
                    int[] iArr7 = messagesStorage3.contacts[iIntValue6];
                    iArr7[zIsDialogMuted ? 1 : 0] = iArr7[zIsDialogMuted ? 1 : 0] + 1;
                } else {
                    int[] iArr8 = messagesStorage3.nonContacts[iIntValue6];
                    iArr8[zIsDialogMuted ? 1 : 0] = iArr8[zIsDialogMuted ? 1 : 0] + 1;
                }
                longSparseArray19.put(user.id, user);
                i21++;
                arrayList6 = arrayList11;
                size = i22;
                arrayList8 = arrayList12;
                arrayList9 = arrayList13;
            }
        }
        ArrayList<TLRPC.Chat> arrayList14 = arrayList6;
        ArrayList arrayList15 = arrayList8;
        ArrayList arrayList16 = arrayList9;
        if (!arrayList16.isEmpty()) {
            ArrayList<Long> arrayList17 = new ArrayList<>();
            ArrayList<TLRPC.EncryptedChat> arrayList18 = new ArrayList<>();
            messagesStorage3.getEncryptedChatsInternal(TextUtils.join(",", arrayList16), arrayList18, arrayList17);
            if (arrayList17.isEmpty()) {
                longSparseArray = longSparseArray21;
            } else {
                messagesStorage3.getUsersInternal(arrayList17, arrayList5);
                int size2 = arrayList5.size();
                for (int i23 = 0; i23 < size2; i23++) {
                    TLRPC.User user2 = arrayList5.get(i23);
                    longSparseArray21.put(user2.id, user2);
                }
                longSparseArray = longSparseArray21;
                int size3 = arrayList18.size();
                int i24 = 0;
                longSparseArray19 = longSparseArray19;
                while (i24 < size3) {
                    TLRPC.User user3 = (TLRPC.User) longSparseArray.get(arrayList18.get(i24).user_id);
                    if (user3 == null) {
                        longSparseArray14 = longSparseArray19;
                        i15 = size3;
                        arrayList2 = arrayList18;
                    } else {
                        long jMakeEncryptedDialogId = DialogObject.makeEncryptedDialogId(r5.id);
                        longSparseArray14 = longSparseArray19;
                        i15 = size3;
                        boolean zIsDialogMuted2 = getMessagesController().isDialogMuted(jMakeEncryptedDialogId, 0L);
                        Integer num2 = (Integer) longSparseArray16.get(jMakeEncryptedDialogId);
                        int iIntValue7 = (num2 == null || num2.intValue() < 0 || num2.intValue() > 1) ? 0 : num2.intValue();
                        if (zIsDialogMuted2) {
                            longSparseArray23.put(user3.id, Boolean.TRUE);
                        }
                        if (iIntValue7 == 1) {
                            longSparseArray24.put(user3.id, Boolean.TRUE);
                        }
                        if (user3.self || user3.contact) {
                            i16 = 1;
                            int[] iArr9 = messagesStorage3.contacts[iIntValue7];
                            iArr9[zIsDialogMuted2 ? 1 : 0] = iArr9[zIsDialogMuted2 ? 1 : 0] + 1;
                        } else {
                            int[] iArr10 = messagesStorage3.nonContacts[iIntValue7];
                            i16 = 1;
                            iArr10[zIsDialogMuted2 ? 1 : 0] = iArr10[zIsDialogMuted2 ? 1 : 0] + 1;
                        }
                        arrayList2 = arrayList18;
                        longSparseArray22.put(user3.id, Integer.valueOf(((Integer) longSparseArray22.get(user3.id, 0)).intValue() + i16));
                    }
                    i24++;
                    arrayList18 = arrayList2;
                    longSparseArray19 = longSparseArray14;
                    size3 = i15;
                }
            }
        }
        LongSparseArray longSparseArray26 = longSparseArray19;
        if (!arrayList15.isEmpty()) {
            ArrayList<TLRPC.Chat> arrayList19 = arrayList14;
            messagesStorage3.getChatsInternal(TextUtils.join(",", arrayList15), arrayList19);
            int size4 = arrayList19.size();
            int i25 = 0;
            while (i25 < size4) {
                TLRPC.Chat chat = arrayList19.get(i25);
                if ((chat.migrated_to instanceof TLRPC.TL_inputChannel) || ChatObject.isNotInChat(chat)) {
                    i14 = size4;
                    arrayList = arrayList19;
                    longSparseArray12 = longSparseArray18;
                    longSparseArray13 = longSparseArray25;
                } else {
                    boolean zIsDialogMuted3 = getMessagesController().isDialogMuted(-chat.id, 0L, chat);
                    boolean z2 = messagesStorage3.dialogsWithUnread.indexOfKey(-chat.id) >= 0;
                    boolean z3 = messagesStorage3.dialogsWithMentions.indexOfKey(-chat.id) >= 0;
                    Integer num3 = (Integer) longSparseArray16.get(-chat.id);
                    if (num3 == null || num3.intValue() < 0) {
                        i14 = size4;
                    } else {
                        i14 = size4;
                        if (num3.intValue() <= 1) {
                            iIntValue4 = num3.intValue();
                        }
                        if (zIsDialogMuted3) {
                            arrayList = arrayList19;
                        } else {
                            arrayList = arrayList19;
                            longSparseArray23.put(-chat.id, Boolean.TRUE);
                        }
                        if (iIntValue4 == 1) {
                            longSparseArray24.put(-chat.id, Boolean.TRUE);
                        }
                        if (zIsDialogMuted3 && longSparseIntArray2 != null && longSparseIntArray2.indexOfKey(-chat.id) >= 0) {
                            if (ChatObject.isChannel(chat) || chat.megagroup) {
                                int[] iArr11 = messagesStorage3.mentionGroups;
                                iArr11[iIntValue4] = iArr11[iIntValue4] + 1;
                            } else {
                                int[] iArr12 = messagesStorage3.mentionChannels;
                                iArr12[iIntValue4] = iArr12[iIntValue4] + 1;
                            }
                        }
                        if (z || z2 || z3) {
                            if (z) {
                                longSparseArray12 = longSparseArray18;
                                if (longSparseArray12.indexOfKey(-chat.id) >= 0) {
                                }
                            } else {
                                longSparseArray12 = longSparseArray18;
                            }
                            longSparseArray13 = longSparseArray25;
                            longSparseArray13.put(chat.id, chat);
                        } else {
                            longSparseArray12 = longSparseArray18;
                        }
                        if (!ChatObject.isChannel(chat) || chat.megagroup) {
                            int[] iArr13 = messagesStorage3.groups[iIntValue4];
                            iArr13[zIsDialogMuted3 ? 1 : 0] = iArr13[zIsDialogMuted3 ? 1 : 0] + 1;
                        } else {
                            int[] iArr14 = messagesStorage3.channels[iIntValue4];
                            iArr14[zIsDialogMuted3 ? 1 : 0] = iArr14[zIsDialogMuted3 ? 1 : 0] + 1;
                        }
                        longSparseArray13 = longSparseArray25;
                        longSparseArray13.put(chat.id, chat);
                    }
                    iIntValue4 = 0;
                    if (zIsDialogMuted3) {
                    }
                    if (iIntValue4 == 1) {
                    }
                    if (zIsDialogMuted3) {
                        if (ChatObject.isChannel(chat)) {
                            int[] iArr112 = messagesStorage3.mentionGroups;
                            iArr112[iIntValue4] = iArr112[iIntValue4] + 1;
                        }
                    }
                    if (z) {
                        if (z) {
                        }
                        longSparseArray13 = longSparseArray25;
                        longSparseArray13.put(chat.id, chat);
                    }
                }
                i25++;
                longSparseArray25 = longSparseArray13;
                longSparseArray18 = longSparseArray12;
                size4 = i14;
                arrayList19 = arrayList;
            }
        }
        LongSparseArray longSparseArray27 = longSparseArray25;
        LongSparseArray longSparseArray28 = longSparseArray18;
        int size5 = messagesStorage3.dialogFilters.size();
        int i26 = 0;
        while (i26 < size5 + 2) {
            if (i26 < size5) {
                dialogFilter = messagesStorage3.dialogFilters.get(i26);
                if (dialogFilter.pendingUnreadCount < 0) {
                    messagesStorage = messagesStorage3;
                    longSparseArray2 = longSparseArray28;
                    i8 = size5;
                    i9 = i26;
                    longSparseArray5 = longSparseArray;
                    longSparseArray4 = longSparseArray26;
                    i26 = i9 + 1;
                    size5 = i8;
                    messagesStorage3 = messagesStorage;
                    longSparseArray26 = longSparseArray4;
                    longSparseArray = longSparseArray5;
                    longSparseArray28 = longSparseArray2;
                } else {
                    iIntValue = dialogFilter.pendingUnreadCount;
                    i4 = dialogFilter.flags;
                }
            } else {
                int i27 = MessagesController.DIALOG_FILTER_FLAG_ALL_CHATS;
                if (i26 == size5) {
                    i2 = messagesStorage3.pendingMainUnreadCount;
                    i27 |= MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED;
                    if (!getNotificationsController().showBadgeMuted) {
                        i3 = MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED;
                    }
                    int i28 = i2;
                    i4 = i27;
                    dialogFilter = null;
                    iIntValue = i28;
                } else {
                    i2 = messagesStorage3.pendingArchiveUnreadCount;
                    i3 = MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED;
                }
                i27 |= i3;
                int i282 = i2;
                i4 = i27;
                dialogFilter = null;
                iIntValue = i282;
            }
            if (z) {
                if ((MessagesController.DIALOG_FILTER_FLAG_CONTACTS & i4) != 0) {
                    if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                        int[] iArr15 = messagesStorage3.contacts[0];
                        iIntValue -= iArr15[0];
                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                            c10 = 1;
                            iIntValue -= iArr15[1];
                        } else {
                            c10 = 1;
                        }
                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                            int[] iArr16 = messagesStorage3.contacts[c10];
                            iIntValue -= iArr16[0];
                            if ((i4 & MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED) == 0) {
                                iIntValue -= iArr16[c10];
                            }
                        }
                    }
                    i26 = i9 + 1;
                    size5 = i8;
                    messagesStorage3 = messagesStorage;
                    longSparseArray26 = longSparseArray4;
                    longSparseArray = longSparseArray5;
                    longSparseArray28 = longSparseArray2;
                }
                if ((MessagesController.DIALOG_FILTER_FLAG_NON_CONTACTS & i4) != 0) {
                    if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                        int[] iArr17 = messagesStorage3.nonContacts[0];
                        iIntValue -= iArr17[0];
                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                            c9 = 1;
                            iIntValue -= iArr17[1];
                        } else {
                            c9 = 1;
                        }
                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                            int[] iArr18 = messagesStorage3.nonContacts[c9];
                            iIntValue -= iArr18[0];
                            if ((i4 & MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED) == 0) {
                                iIntValue -= iArr18[c9];
                            }
                        }
                    }
                    i26 = i9 + 1;
                    size5 = i8;
                    messagesStorage3 = messagesStorage;
                    longSparseArray26 = longSparseArray4;
                    longSparseArray = longSparseArray5;
                    longSparseArray28 = longSparseArray2;
                }
                if ((MessagesController.DIALOG_FILTER_FLAG_GROUPS & i4) != 0) {
                    if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                        c8 = 0;
                        int[] iArr19 = messagesStorage3.groups[0];
                        iIntValue = (iIntValue - iArr19[0]) - ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 ? iArr19[1] : messagesStorage3.mentionGroups[0]);
                    } else {
                        c8 = 0;
                    }
                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                        int[] iArr20 = messagesStorage3.groups[1];
                        iIntValue = (iIntValue - iArr20[c8]) - ((i4 & MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED) == 0 ? iArr20[1] : messagesStorage3.mentionGroups[1]);
                    }
                }
                if ((MessagesController.DIALOG_FILTER_FLAG_CHANNELS & i4) != 0) {
                    if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                        c7 = 0;
                        int[] iArr21 = messagesStorage3.channels[0];
                        iIntValue = (iIntValue - iArr21[0]) - ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 ? iArr21[1] : messagesStorage3.mentionChannels[0]);
                    } else {
                        c7 = 0;
                    }
                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                        int[] iArr22 = messagesStorage3.channels[1];
                        iIntValue = (iIntValue - iArr22[c7]) - ((i4 & MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED) == 0 ? iArr22[1] : messagesStorage3.mentionChannels[1]);
                    }
                }
                if ((MessagesController.DIALOG_FILTER_FLAG_BOTS & i4) != 0) {
                    if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                        int[] iArr23 = messagesStorage3.bots[0];
                        iIntValue -= iArr23[0];
                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                            c6 = 1;
                            iIntValue -= iArr23[1];
                        } else {
                            c6 = 1;
                        }
                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                            int[] iArr24 = messagesStorage3.bots[c6];
                            iIntValue -= iArr24[0];
                            if ((i4 & MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED) == 0) {
                                iIntValue -= iArr24[c6];
                            }
                        }
                    }
                    i26 = i9 + 1;
                    size5 = i8;
                    messagesStorage3 = messagesStorage;
                    longSparseArray26 = longSparseArray4;
                    longSparseArray = longSparseArray5;
                    longSparseArray28 = longSparseArray2;
                }
                if (dialogFilter != null) {
                    int size6 = dialogFilter.alwaysShow.size();
                    int i29 = 0;
                    while (i29 < size6) {
                        int i30 = size6;
                        long jLongValue = dialogFilter.alwaysShow.get(i29).longValue();
                        if (DialogObject.isUserDialog(jLongValue)) {
                            i12 = size5;
                            i13 = i26;
                            int i31 = 0;
                            while (i31 < 2) {
                                TLRPC.User user4 = (TLRPC.User) (i31 == 0 ? longSparseArray26 : longSparseArray).get(jLongValue);
                                if (user4 != null) {
                                    if (i31 == 0) {
                                        longSparseArray10 = longSparseArray28;
                                        longSparseArray11 = longSparseArray;
                                        iIntValue3 = 1;
                                    } else {
                                        longSparseArray11 = longSparseArray;
                                        iIntValue3 = ((Integer) longSparseArray22.get(jLongValue, 0)).intValue();
                                        longSparseArray10 = longSparseArray28;
                                        if (iIntValue3 == 0) {
                                        }
                                    }
                                    if (((user4.bot ? MessagesController.DIALOG_FILTER_FLAG_BOTS : (user4.self || user4.contact) ? MessagesController.DIALOG_FILTER_FLAG_CONTACTS : MessagesController.DIALOG_FILTER_FLAG_NON_CONTACTS) & i4) == 0 || (((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) != 0 && longSparseArray23.indexOfKey(user4.id) >= 0) || ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) != 0 && longSparseArray24.indexOfKey(user4.id) >= 0))) {
                                        iIntValue -= iIntValue3;
                                    }
                                } else {
                                    longSparseArray10 = longSparseArray28;
                                    longSparseArray11 = longSparseArray;
                                }
                                i31++;
                                longSparseArray = longSparseArray11;
                                longSparseArray28 = longSparseArray10;
                            }
                            longSparseArray8 = longSparseArray28;
                            longSparseArray9 = longSparseArray;
                        } else {
                            longSparseArray8 = longSparseArray28;
                            i12 = size5;
                            i13 = i26;
                            longSparseArray9 = longSparseArray;
                            TLRPC.Chat chat2 = (TLRPC.Chat) longSparseArray27.get(-jLongValue);
                            if (chat2 != null) {
                                if ((((!ChatObject.isChannel(chat2) || chat2.megagroup) ? MessagesController.DIALOG_FILTER_FLAG_GROUPS : MessagesController.DIALOG_FILTER_FLAG_CHANNELS) & i4) == 0) {
                                    messagesStorage2 = this;
                                } else {
                                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 || longSparseArray23.indexOfKey(-chat2.id) < 0) {
                                        messagesStorage2 = this;
                                    } else {
                                        messagesStorage2 = this;
                                        if (messagesStorage2.dialogsWithMentions.indexOfKey(-chat2.id) < 0) {
                                        }
                                    }
                                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0 || longSparseArray24.indexOfKey(-chat2.id) < 0) {
                                    }
                                }
                                iIntValue--;
                            }
                            i29++;
                            size6 = i30;
                            messagesStorage3 = messagesStorage2;
                            size5 = i12;
                            i26 = i13;
                            longSparseArray = longSparseArray9;
                            longSparseArray28 = longSparseArray8;
                        }
                        messagesStorage2 = this;
                        i29++;
                        size6 = i30;
                        messagesStorage3 = messagesStorage2;
                        size5 = i12;
                        i26 = i13;
                        longSparseArray = longSparseArray9;
                        longSparseArray28 = longSparseArray8;
                    }
                    messagesStorage = messagesStorage3;
                    longSparseArray2 = longSparseArray28;
                    i5 = size5;
                    i6 = i26;
                    longSparseArray3 = longSparseArray;
                    int size7 = dialogFilter.neverShow.size();
                    int i32 = 0;
                    while (i32 < size7) {
                        long jLongValue2 = dialogFilter.neverShow.get(i32).longValue();
                        if (longSparseIntArray2 != null && longSparseIntArray2.indexOfKey(jLongValue2) >= 0 && longSparseArray23.indexOfKey(jLongValue2) < 0) {
                            i10 = size7;
                            dialogFilter3 = dialogFilter;
                        } else if (DialogObject.isUserDialog(jLongValue2)) {
                            int i33 = 0;
                            int i34 = 2;
                            while (i33 < i34) {
                                TLRPC.User user5 = (TLRPC.User) (i33 == 0 ? longSparseArray26 : longSparseArray3).get(jLongValue2);
                                if (user5 == null) {
                                    i11 = size7;
                                    dialogFilter4 = dialogFilter;
                                } else {
                                    if (i33 == 0) {
                                        i11 = size7;
                                        iIntValue2 = 1;
                                    } else {
                                        iIntValue2 = ((Integer) longSparseArray22.get(jLongValue2, 0)).intValue();
                                        if (iIntValue2 != 0) {
                                            i11 = size7;
                                        }
                                        i11 = size7;
                                        dialogFilter4 = dialogFilter;
                                    }
                                    if (((user5.bot ? MessagesController.DIALOG_FILTER_FLAG_BOTS : (user5.self || user5.contact) ? MessagesController.DIALOG_FILTER_FLAG_CONTACTS : MessagesController.DIALOG_FILTER_FLAG_NON_CONTACTS) & i4) != 0) {
                                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) != 0) {
                                            dialogFilter4 = dialogFilter;
                                            if (longSparseArray24.indexOfKey(user5.id) < 0) {
                                            }
                                        } else {
                                            dialogFilter4 = dialogFilter;
                                        }
                                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 || longSparseArray23.indexOfKey(user5.id) < 0) {
                                            iIntValue += iIntValue2;
                                        }
                                    } else {
                                        dialogFilter4 = dialogFilter;
                                    }
                                }
                                i33++;
                                dialogFilter = dialogFilter4;
                                i34 = 2;
                                size7 = i11;
                            }
                            i10 = size7;
                            dialogFilter3 = dialogFilter;
                        } else {
                            i10 = size7;
                            dialogFilter3 = dialogFilter;
                            TLRPC.Chat chat3 = (TLRPC.Chat) longSparseArray27.get(-jLongValue2);
                            if (chat3 != null) {
                                if ((((!ChatObject.isChannel(chat3) || chat3.megagroup) ? MessagesController.DIALOG_FILTER_FLAG_GROUPS : MessagesController.DIALOG_FILTER_FLAG_CHANNELS) & i4) != 0 && (((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0 || longSparseArray24.indexOfKey(-chat3.id) < 0) && ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 || longSparseArray23.indexOfKey(-chat3.id) < 0 || messagesStorage.dialogsWithMentions.indexOfKey(-chat3.id) >= 0))) {
                                    iIntValue++;
                                }
                            }
                        }
                        i32++;
                        dialogFilter = dialogFilter3;
                        size7 = i10;
                    }
                    dialogFilter2 = dialogFilter;
                } else {
                    messagesStorage = messagesStorage3;
                    longSparseArray2 = longSparseArray28;
                    i5 = size5;
                    i6 = i26;
                    dialogFilter2 = dialogFilter;
                    longSparseArray3 = longSparseArray;
                }
                int i35 = iIntValue;
                if (i35 < 0) {
                    longSparseArray4 = longSparseArray26;
                    longSparseArray5 = longSparseArray3;
                    iIntValue = 0;
                    if (dialogFilter2 != null) {
                        dialogFilter2.pendingUnreadCount = iIntValue;
                        i8 = i5;
                        i9 = i6;
                    } else {
                        i8 = i5;
                        i9 = i6;
                        if (i9 == i8) {
                            messagesStorage.pendingMainUnreadCount = iIntValue;
                        } else if (i9 == i8 + 1) {
                            messagesStorage.pendingArchiveUnreadCount = iIntValue;
                        }
                    }
                    i26 = i9 + 1;
                    size5 = i8;
                    messagesStorage3 = messagesStorage;
                    longSparseArray26 = longSparseArray4;
                    longSparseArray = longSparseArray5;
                    longSparseArray28 = longSparseArray2;
                } else {
                    iIntValue = i35;
                }
            } else {
                messagesStorage = messagesStorage3;
                longSparseArray2 = longSparseArray28;
                i5 = size5;
                i6 = i26;
                dialogFilter2 = dialogFilter;
                longSparseArray3 = longSparseArray;
                if ((MessagesController.DIALOG_FILTER_FLAG_CONTACTS & i4) != 0) {
                    if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                        int[] iArr25 = messagesStorage.contacts[0];
                        iIntValue += iArr25[0];
                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                            c5 = 1;
                            iIntValue += iArr25[1];
                        } else {
                            c5 = 1;
                        }
                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                            int[] iArr26 = messagesStorage.contacts[c5];
                            iIntValue += iArr26[0];
                            if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                                iIntValue += iArr26[c5];
                            }
                        }
                    }
                    i26 = i9 + 1;
                    size5 = i8;
                    messagesStorage3 = messagesStorage;
                    longSparseArray26 = longSparseArray4;
                    longSparseArray = longSparseArray5;
                    longSparseArray28 = longSparseArray2;
                }
                if ((MessagesController.DIALOG_FILTER_FLAG_NON_CONTACTS & i4) != 0) {
                    if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                        int[] iArr27 = messagesStorage.nonContacts[0];
                        iIntValue += iArr27[0];
                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                            c4 = 1;
                            iIntValue += iArr27[1];
                        } else {
                            c4 = 1;
                        }
                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                            int[] iArr28 = messagesStorage.nonContacts[c4];
                            iIntValue += iArr28[0];
                            if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                                iIntValue += iArr28[c4];
                            }
                        }
                    }
                    i26 = i9 + 1;
                    size5 = i8;
                    messagesStorage3 = messagesStorage;
                    longSparseArray26 = longSparseArray4;
                    longSparseArray = longSparseArray5;
                    longSparseArray28 = longSparseArray2;
                }
                if ((MessagesController.DIALOG_FILTER_FLAG_GROUPS & i4) != 0) {
                    if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                        c3 = 0;
                        int[] iArr29 = messagesStorage.groups[0];
                        iIntValue = iIntValue + iArr29[0] + ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 ? iArr29[1] : messagesStorage.mentionGroups[0]);
                    } else {
                        c3 = 0;
                    }
                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                        int[] iArr30 = messagesStorage.groups[1];
                        iIntValue = iIntValue + iArr30[c3] + ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 ? iArr30[1] : messagesStorage.mentionGroups[1]);
                    }
                }
                if ((MessagesController.DIALOG_FILTER_FLAG_CHANNELS & i4) != 0) {
                    if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                        c2 = 0;
                        int[] iArr31 = messagesStorage.channels[0];
                        iIntValue = iIntValue + iArr31[0] + ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 ? iArr31[1] : messagesStorage.mentionChannels[0]);
                    } else {
                        c2 = 0;
                    }
                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                        int[] iArr32 = messagesStorage.channels[1];
                        iIntValue = iIntValue + iArr32[c2] + ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 ? iArr32[1] : messagesStorage.mentionChannels[1]);
                    }
                }
                if ((MessagesController.DIALOG_FILTER_FLAG_BOTS & i4) != 0) {
                    if ((MessagesController.DIALOG_FILTER_FLAG_ONLY_ARCHIVED & i4) == 0) {
                        int[] iArr33 = messagesStorage.bots[0];
                        iIntValue += iArr33[0];
                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                            c = 1;
                            iIntValue += iArr33[1];
                        } else {
                            c = 1;
                        }
                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_ARCHIVED & i4) == 0) {
                            int[] iArr34 = messagesStorage.bots[c];
                            iIntValue += iArr34[0];
                            if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0) {
                                iIntValue += iArr34[c];
                            }
                        }
                    }
                    i26 = i9 + 1;
                    size5 = i8;
                    messagesStorage3 = messagesStorage;
                    longSparseArray26 = longSparseArray4;
                    longSparseArray = longSparseArray5;
                    longSparseArray28 = longSparseArray2;
                }
                if (dialogFilter2 != null) {
                    if (!dialogFilter2.alwaysShow.isEmpty()) {
                        if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) != 0 && longSparseIntArray2 != null) {
                            int size8 = longSparseIntArray2.size();
                            for (int i36 = 0; i36 < size8; i36++) {
                                long jKeyAt2 = longSparseIntArray2.keyAt(i36);
                                TLRPC.Chat chat4 = (TLRPC.Chat) longSparseArray27.get(-jKeyAt2);
                                if (!ChatObject.isChannel(chat4) || chat4.megagroup) {
                                    if ((MessagesController.DIALOG_FILTER_FLAG_GROUPS & i4) != 0) {
                                        if (longSparseArray23.indexOfKey(jKeyAt2) >= 0 && dialogFilter2.alwaysShow.contains(Long.valueOf(jKeyAt2))) {
                                            iIntValue--;
                                        }
                                    }
                                } else if ((MessagesController.DIALOG_FILTER_FLAG_CHANNELS & i4) == 0) {
                                }
                            }
                        }
                        int size9 = dialogFilter2.alwaysShow.size();
                        int i37 = 0;
                        while (i37 < size9) {
                            long jLongValue3 = dialogFilter2.alwaysShow.get(i37).longValue();
                            LongSparseArray longSparseArray29 = longSparseArray2;
                            if (longSparseArray29.indexOfKey(jLongValue3) < 0) {
                                i7 = size9;
                                longSparseArray2 = longSparseArray29;
                                longSparseArray6 = longSparseArray26;
                                longSparseArray7 = longSparseArray3;
                            } else if (DialogObject.isUserDialog(jLongValue3)) {
                                longSparseArray6 = longSparseArray26;
                                TLRPC.User user6 = (TLRPC.User) longSparseArray6.get(jLongValue3);
                                if (user6 != null) {
                                    i7 = size9;
                                    if (((i4 & MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED) != 0 && longSparseArray23.indexOfKey(user6.id) >= 0) || (!user6.bot ? !(user6.self || user6.contact ? (MessagesController.DIALOG_FILTER_FLAG_CONTACTS & i4) != 0 : (MessagesController.DIALOG_FILTER_FLAG_NON_CONTACTS & i4) != 0) : (MessagesController.DIALOG_FILTER_FLAG_BOTS & i4) == 0)) {
                                        iIntValue++;
                                    }
                                } else {
                                    i7 = size9;
                                }
                                longSparseArray7 = longSparseArray3;
                                TLRPC.User user7 = (TLRPC.User) longSparseArray7.get(jLongValue3);
                                longSparseArray2 = longSparseArray29;
                                if (user7 != null) {
                                    int iIntValue8 = ((Integer) longSparseArray22.get(jLongValue3, 0)).intValue();
                                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 || longSparseArray23.indexOfKey(user7.id) < 0) {
                                        if (user7.bot) {
                                            if ((MessagesController.DIALOG_FILTER_FLAG_BOTS & i4) == 0) {
                                                iIntValue += iIntValue8;
                                            }
                                        } else if (user7.self || user7.contact) {
                                            if ((MessagesController.DIALOG_FILTER_FLAG_CONTACTS & i4) == 0) {
                                            }
                                        } else if ((MessagesController.DIALOG_FILTER_FLAG_NON_CONTACTS & i4) == 0) {
                                        }
                                    }
                                }
                            } else {
                                i7 = size9;
                                longSparseArray2 = longSparseArray29;
                                longSparseArray6 = longSparseArray26;
                                longSparseArray7 = longSparseArray3;
                                TLRPC.Chat chat5 = (TLRPC.Chat) longSparseArray27.get(-jLongValue3);
                                if (chat5 != null) {
                                    if ((MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED & i4) == 0 || longSparseArray23.indexOfKey(-chat5.id) < 0) {
                                        if (!ChatObject.isChannel(chat5) || chat5.megagroup) {
                                            if ((MessagesController.DIALOG_FILTER_FLAG_GROUPS & i4) == 0) {
                                                iIntValue++;
                                            }
                                        } else if ((MessagesController.DIALOG_FILTER_FLAG_CHANNELS & i4) == 0) {
                                        }
                                    }
                                }
                            }
                            i37++;
                            size9 = i7;
                            longSparseArray3 = longSparseArray7;
                            longSparseArray26 = longSparseArray6;
                        }
                    }
                    longSparseArray4 = longSparseArray26;
                    longSparseArray5 = longSparseArray3;
                    int size10 = dialogFilter2.neverShow.size();
                    for (int i38 = 0; i38 < size10; i38++) {
                        long jLongValue4 = dialogFilter2.neverShow.get(i38).longValue();
                        if (DialogObject.isUserDialog(jLongValue4)) {
                            if (((TLRPC.User) longSparseArray4.get(jLongValue4)) != null) {
                                iIntValue--;
                            }
                            if (((TLRPC.User) longSparseArray5.get(jLongValue4)) != null) {
                                iIntValue -= ((Integer) longSparseArray22.get(jLongValue4, 0)).intValue();
                            }
                        } else if (((TLRPC.Chat) longSparseArray27.get(-jLongValue4)) != null) {
                            iIntValue--;
                        }
                    }
                }
                if (dialogFilter2 != null) {
                }
                i26 = i9 + 1;
                size5 = i8;
                messagesStorage3 = messagesStorage;
                longSparseArray26 = longSparseArray4;
                longSparseArray = longSparseArray5;
                longSparseArray28 = longSparseArray2;
            }
            longSparseArray4 = longSparseArray26;
            longSparseArray5 = longSparseArray3;
            if (dialogFilter2 != null) {
            }
            i26 = i9 + 1;
            size5 = i8;
            messagesStorage3 = messagesStorage;
            longSparseArray26 = longSparseArray4;
            longSparseArray = longSparseArray5;
            longSparseArray28 = longSparseArray2;
        }
        final MessagesStorage messagesStorage4 = messagesStorage3;
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda193
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$updateFiltersReadCounter$114();
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Can't wrap try/catch for region: R(14:(1:299)|(1:127)(1:(1:133)(2:134|(1:136)(11:139|332|140|(1:142)(1:144)|143|145|(4:147|347|148|149)|159|(1:166)|167|168)))|137|138|332|140|(0)(0)|143|145|(0)|159|(0)|167|168) */
    /* JADX WARN: Can't wrap try/catch for region: R(15:289|309|187|(1:192)|(1:194)|195|(2:294|196)|197|(2:307|206)|207|295|216|223|276|277) */
    /* JADX WARN: Can't wrap try/catch for region: R(17:79|86|(13:90|300|91|(0)(0)|100|(0)(0)|117|(0)|123|(0)|(0)(0)|276|277)|81|89|300|91|(0)(0)|100|(0)(0)|117|(0)|123|(0)|(0)(0)|276|277) */
    /* JADX WARN: Code restructure failed: missing block: B:101:0x019a, code lost:
    
        checkSQLException(r0);
     */
    /* JADX WARN: Code restructure failed: missing block: B:102:0x019d, code lost:
    
        if (r10 != null) goto L103;
     */
    /* JADX WARN: Code restructure failed: missing block: B:103:0x019f, code lost:
    
        r10.dispose();
     */
    /* JADX WARN: Code restructure failed: missing block: B:157:0x023f, code lost:
    
        r0 = e;
     */
    /* JADX WARN: Code restructure failed: missing block: B:220:0x03b6, code lost:
    
        r0 = move-exception;
     */
    /* JADX WARN: Code restructure failed: missing block: B:221:0x03b7, code lost:
    
        checkSQLException(r0);
     */
    /* JADX WARN: Code restructure failed: missing block: B:222:0x03ba, code lost:
    
        if (r6 != null) goto L223;
     */
    /* JADX WARN: Code restructure failed: missing block: B:97:0x0190, code lost:
    
        r0 = move-exception;
     */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:106:0x01a7 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:109:0x01c3 A[Catch: all -> 0x01c9, Exception -> 0x01cc, TRY_LEAVE, TryCatch #36 {Exception -> 0x01cc, blocks: (B:107:0x01a9, B:109:0x01c3), top: B:302:0x01a9, outer: #12 }] */
    /* JADX WARN: Removed duplicated region for block: B:119:0x01db  */
    /* JADX WARN: Removed duplicated region for block: B:125:0x01e3 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:142:0x0211 A[Catch: all -> 0x023d, Exception -> 0x023f, TryCatch #9 {all -> 0x023d, blocks: (B:140:0x0208, B:142:0x0211, B:145:0x0216, B:147:0x021e, B:162:0x0247), top: B:299:0x01e5 }] */
    /* JADX WARN: Removed duplicated region for block: B:144:0x0214  */
    /* JADX WARN: Removed duplicated region for block: B:147:0x021e A[Catch: all -> 0x023d, Exception -> 0x023f, TRY_LEAVE, TryCatch #9 {all -> 0x023d, blocks: (B:140:0x0208, B:142:0x0211, B:145:0x0216, B:147:0x021e, B:162:0x0247), top: B:299:0x01e5 }] */
    /* JADX WARN: Removed duplicated region for block: B:166:0x0251 A[DONT_GENERATE, PHI: r6
      0x0251: PHI (r6v39 org.telegram.SQLite.SQLitePreparedStatement) = (r6v40 org.telegram.SQLite.SQLitePreparedStatement), (r6v41 org.telegram.SQLite.SQLitePreparedStatement) binds: [B:165:0x024f, B:160:0x0244] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:170:0x025f  */
    /* JADX WARN: Removed duplicated region for block: B:172:0x0264  */
    /* JADX WARN: Removed duplicated region for block: B:197:0x032c A[PHI: r6
      0x032c: PHI (r6v29 org.telegram.SQLite.SQLitePreparedStatement) = (r6v14 org.telegram.SQLite.SQLitePreparedStatement), (r6v31 org.telegram.SQLite.SQLitePreparedStatement) binds: [B:204:0x0359, B:196:0x0316] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:207:0x0372 A[PHI: r6
      0x0372: PHI (r6v26 org.telegram.SQLite.SQLitePreparedStatement) = (r6v20 org.telegram.SQLite.SQLitePreparedStatement), (r6v28 org.telegram.SQLite.SQLitePreparedStatement) binds: [B:214:0x039e, B:206:0x035c] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:234:0x03d5  */
    /* JADX WARN: Removed duplicated region for block: B:236:0x03da  */
    /* JADX WARN: Removed duplicated region for block: B:238:0x03de  */
    /* JADX WARN: Removed duplicated region for block: B:254:0x0429  */
    /* JADX WARN: Removed duplicated region for block: B:26:0x005a A[RETURN] */
    /* JADX WARN: Removed duplicated region for block: B:274:0x0484  */
    /* JADX WARN: Removed duplicated region for block: B:302:0x01a9 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:343:0x026a A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:345:0x012f A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:53:0x00ae  */
    /* JADX WARN: Removed duplicated region for block: B:55:0x00b2  */
    /* JADX WARN: Removed duplicated region for block: B:57:0x00bc  */
    /* JADX WARN: Removed duplicated region for block: B:69:0x0126 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:75:0x0149 A[Catch: all -> 0x0151, Exception -> 0x0154, TRY_LEAVE, TryCatch #14 {all -> 0x0151, blocks: (B:73:0x0143, B:75:0x0149, B:86:0x0161), top: B:304:0x0143 }] */
    /* JADX WARN: Removed duplicated region for block: B:81:0x0156 A[PHI: r10
      0x0156: PHI (r10v13 org.telegram.SQLite.SQLiteCursor) = (r10v11 org.telegram.SQLite.SQLiteCursor), (r10v21 org.telegram.SQLite.SQLiteCursor) binds: [B:87:0x0164, B:74:0x0147] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:93:0x0187 A[Catch: all -> 0x018d, Exception -> 0x0190, TRY_LEAVE, TryCatch #10 {Exception -> 0x0190, blocks: (B:91:0x016d, B:93:0x0187), top: B:300:0x016d, outer: #42 }] */
    /* JADX WARN: Removed duplicated region for block: B:99:0x0192  */
    /* JADX WARN: Type inference failed for: r11v10 */
    /* JADX WARN: Type inference failed for: r11v11 */
    /* JADX WARN: Type inference failed for: r11v12, types: [org.telegram.SQLite.SQLitePreparedStatement] */
    /* JADX WARN: Type inference failed for: r11v14 */
    /* JADX WARN: Type inference failed for: r11v17, types: [org.telegram.SQLite.SQLitePreparedStatement] */
    /* JADX WARN: Type inference failed for: r11v19 */
    /* JADX WARN: Type inference failed for: r11v2 */
    /* JADX WARN: Type inference failed for: r11v21 */
    /* JADX WARN: Type inference failed for: r11v24 */
    /* JADX WARN: Type inference failed for: r11v25 */
    /* JADX WARN: Type inference failed for: r11v9, types: [java.lang.Integer, java.lang.Object] */
    /* JADX WARN: Type inference failed for: r12v13, types: [java.lang.Object[]] */
    /* JADX WARN: Type inference failed for: r12v14, types: [java.lang.Object[]] */
    /* JADX WARN: Type inference failed for: r12v9, types: [java.lang.Object[]] */
    /* JADX WARN: Type inference failed for: r13v3, types: [java.lang.Object[]] */
    /* JADX WARN: Type inference failed for: r13v4, types: [java.lang.Object[]] */
    /* JADX WARN: Type inference failed for: r15v2, types: [java.lang.Object[]] */
    /* JADX WARN: Type inference failed for: r15v4, types: [java.lang.Object[]] */
    /* JADX WARN: Type inference failed for: r5v1, types: [java.lang.Object[]] */
    /* JADX WARN: Type inference failed for: r5v10 */
    /* JADX WARN: Type inference failed for: r5v18 */
    /* JADX WARN: Type inference failed for: r5v19 */
    /* JADX WARN: Type inference failed for: r5v20 */
    /* JADX WARN: Type inference failed for: r5v22, types: [org.telegram.SQLite.SQLitePreparedStatement] */
    /* JADX WARN: Type inference failed for: r5v23 */
    /* JADX WARN: Type inference failed for: r5v24 */
    /* JADX WARN: Type inference failed for: r5v25 */
    /* JADX WARN: Type inference failed for: r5v4 */
    /* JADX WARN: Type inference failed for: r5v5, types: [java.lang.Object[]] */
    /* JADX WARN: Type inference failed for: r5v7 */
    /* JADX WARN: Type inference failed for: r5v8 */
    /* JADX WARN: Type inference failed for: r5v9 */
    /* JADX WARN: Type inference failed for: r6v1, types: [java.lang.Object[]] */
    /* JADX WARN: Type inference failed for: r6v7, types: [java.lang.Object[]] */
    /* renamed from: updateMessageStateAndIdInternal, reason: merged with bridge method [inline-methods] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public long[] lambda$updateMessageStateAndId$199(long j, long j2, Integer num, int i, int i2, int i3, int i4) throws Throwable {
        Integer numValueOf;
        SQLiteCursor sQLiteCursorQueryFinalized;
        long jLongValue;
        ?? ExecuteFast;
        Integer num2;
        int iIntValue;
        SQLiteCursor sQLiteCursor;
        SQLiteCursor sQLiteCursorQueryFinalized2;
        long jLongValue2;
        int iIntValue2;
        ?? ExecuteFast2;
        int i5;
        long j3;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast2;
        SQLitePreparedStatement sQLitePreparedStatement2;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast3;
        SQLitePreparedStatement sQLitePreparedStatement3;
        SQLitePreparedStatement sQLitePreparedStatement4;
        SQLiteDatabase sQLiteDatabase;
        String str;
        SQLitePreparedStatement sQLitePreparedStatement5;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast4;
        int i6 = i3;
        SQLiteCursor sQLiteCursor2 = null;
        try {
            if (num == null) {
                try {
                    sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT mid, uid FROM randoms_v2 WHERE random_id = %d LIMIT 1", Long.valueOf(j)), new Object[0]);
                    try {
                        if (sQLiteCursorQueryFinalized.next()) {
                            numValueOf = Integer.valueOf(sQLiteCursorQueryFinalized.intValue(0));
                            try {
                                jLongValue = sQLiteCursorQueryFinalized.longValue(1);
                                num2 = numValueOf;
                            } catch (Exception e) {
                                e = e;
                                checkSQLException(e);
                                jLongValue = j2;
                                num2 = numValueOf;
                                ExecuteFast = numValueOf;
                                if (sQLiteCursorQueryFinalized != null) {
                                    sQLiteCursorQueryFinalized.dispose();
                                    ExecuteFast = num2;
                                }
                                if (ExecuteFast == 0) {
                                }
                                getUserConfig().getClientUserId();
                                iIntValue = ExecuteFast.intValue();
                                if (ExecuteFast.intValue() < 0) {
                                    sQLiteCursor = sQLiteCursorQueryFinalized;
                                    if (ExecuteFast.intValue() > 0) {
                                    }
                                }
                                if (i6 == -1) {
                                }
                                if (ExecuteFast2 != -1) {
                                }
                                j3 = jLongValue2;
                                if (j3 != 0) {
                                }
                                SQLitePreparedStatement sQLitePreparedStatementExecuteFast5 = null;
                                if (iIntValue != i) {
                                }
                                if (ExecuteFast2 != 0) {
                                }
                                return new long[]{j3, ExecuteFast.intValue()};
                            }
                        } else {
                            jLongValue = j2;
                            num2 = num;
                        }
                    } catch (Exception e2) {
                        e = e2;
                        numValueOf = num;
                    }
                } catch (Exception e3) {
                    e = e3;
                    numValueOf = num;
                    sQLiteCursorQueryFinalized = null;
                } catch (Throwable th) {
                    th = th;
                    if (sQLiteCursor2 != null) {
                        sQLiteCursor2.dispose();
                    }
                    throw th;
                }
                sQLiteCursorQueryFinalized.dispose();
                ExecuteFast = num2;
                if (ExecuteFast == 0) {
                    return null;
                }
            } else {
                jLongValue = j2;
                ExecuteFast = num;
                sQLiteCursorQueryFinalized = null;
            }
            getUserConfig().getClientUserId();
            iIntValue = ExecuteFast.intValue();
            if (ExecuteFast.intValue() < 0 || i6 != 1) {
                sQLiteCursor = sQLiteCursorQueryFinalized;
                if (ExecuteFast.intValue() > 0) {
                    TLRPC.TL_updateDeleteScheduledMessages tL_updateDeleteScheduledMessages = new TLRPC.TL_updateDeleteScheduledMessages();
                    tL_updateDeleteScheduledMessages.messages.add(ExecuteFast);
                    if (DialogObject.isChatDialog(jLongValue)) {
                        TLRPC.TL_peerChannel tL_peerChannel = new TLRPC.TL_peerChannel();
                        tL_updateDeleteScheduledMessages.peer = tL_peerChannel;
                        tL_peerChannel.channel_id = -jLongValue;
                    } else {
                        TLRPC.TL_peerUser tL_peerUser = new TLRPC.TL_peerUser();
                        tL_updateDeleteScheduledMessages.peer = tL_peerUser;
                        tL_peerUser.user_id = jLongValue;
                    }
                    final TLRPC.TL_updates tL_updates = new TLRPC.TL_updates();
                    tL_updates.updates.add(tL_updateDeleteScheduledMessages);
                    Utilities.stageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda33
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$updateMessageStateAndIdInternal$198(tL_updates);
                        }
                    });
                    try {
                        this.database.executeFast(String.format(Locale.US, "DELETE FROM randoms_v2 WHERE random_id = %d AND mid = %d AND uid = %d", new Object[]{Long.valueOf(j), ExecuteFast, Long.valueOf(jLongValue)})).stepThis().dispose();
                        return null;
                    } catch (Exception e4) {
                        checkSQLException(e4);
                        return null;
                    }
                }
            } else {
                try {
                    sQLitePreparedStatementExecuteFast4 = this.database.executeFast("UPDATE randoms_v2 SET mid = ? WHERE random_id = ? AND mid = ?");
                    try {
                        try {
                            sQLitePreparedStatementExecuteFast4.bindInteger(1, i);
                            sQLiteCursor = sQLiteCursorQueryFinalized;
                        } catch (Exception e5) {
                            e = e5;
                            sQLiteCursor = sQLiteCursorQueryFinalized;
                        }
                        try {
                            sQLitePreparedStatementExecuteFast4.bindLong(2, j);
                            sQLitePreparedStatementExecuteFast4.bindInteger(3, iIntValue);
                            sQLitePreparedStatementExecuteFast4.step();
                        } catch (Exception e6) {
                            e = e6;
                            checkSQLException(e);
                            if (sQLitePreparedStatementExecuteFast4 != null) {
                                sQLitePreparedStatementExecuteFast4.dispose();
                            }
                            if (i6 == -1) {
                                try {
                                    sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT uid FROM messages_v2 WHERE mid = %d LIMIT 1", new Object[]{ExecuteFast}), new Object[0]);
                                    try {
                                        try {
                                            if (sQLiteCursorQueryFinalized2.next()) {
                                            }
                                        } catch (Throwable th2) {
                                            th = th2;
                                            if (sQLiteCursorQueryFinalized2 != null) {
                                                sQLiteCursorQueryFinalized2.dispose();
                                            }
                                            throw th;
                                        }
                                    } catch (Exception e7) {
                                        e = e7;
                                        checkSQLException(e);
                                        if (sQLiteCursorQueryFinalized2 == null) {
                                            jLongValue2 = 0;
                                            sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT topic_id FROM quick_replies_messages WHERE mid = %d LIMIT 1", new Object[]{ExecuteFast}), new Object[0]);
                                            if (sQLiteCursorQueryFinalized2.next()) {
                                            }
                                            sQLiteCursorQueryFinalized2.dispose();
                                            ExecuteFast2 = i6;
                                            i5 = iIntValue2;
                                            if (ExecuteFast2 != -1) {
                                            }
                                            j3 = jLongValue2;
                                            if (j3 != 0) {
                                            }
                                            SQLitePreparedStatement sQLitePreparedStatementExecuteFast52 = null;
                                            if (iIntValue != i) {
                                            }
                                            if (ExecuteFast2 != 0) {
                                            }
                                            return new long[]{j3, ExecuteFast.intValue()};
                                        }
                                        jLongValue2 = 0;
                                        sQLiteCursorQueryFinalized2.dispose();
                                        sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT topic_id FROM quick_replies_messages WHERE mid = %d LIMIT 1", new Object[]{ExecuteFast}), new Object[0]);
                                        if (sQLiteCursorQueryFinalized2.next()) {
                                        }
                                        sQLiteCursorQueryFinalized2.dispose();
                                        ExecuteFast2 = i6;
                                        i5 = iIntValue2;
                                        if (ExecuteFast2 != -1) {
                                        }
                                        j3 = jLongValue2;
                                        if (j3 != 0) {
                                        }
                                        SQLitePreparedStatement sQLitePreparedStatementExecuteFast522 = null;
                                        if (iIntValue != i) {
                                        }
                                        if (ExecuteFast2 != 0) {
                                        }
                                        return new long[]{j3, ExecuteFast.intValue()};
                                    }
                                } catch (Exception e8) {
                                    e = e8;
                                    sQLiteCursorQueryFinalized2 = sQLiteCursor;
                                } catch (Throwable th3) {
                                    th = th3;
                                    sQLiteCursorQueryFinalized2 = sQLiteCursor;
                                }
                                sQLiteCursorQueryFinalized2.dispose();
                                try {
                                    sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT topic_id FROM quick_replies_messages WHERE mid = %d LIMIT 1", new Object[]{ExecuteFast}), new Object[0]);
                                    if (sQLiteCursorQueryFinalized2.next()) {
                                    }
                                    sQLiteCursorQueryFinalized2.dispose();
                                    ExecuteFast2 = i6;
                                    i5 = iIntValue2;
                                } catch (Throwable th4) {
                                    if (sQLiteCursorQueryFinalized2 != null) {
                                        sQLiteCursorQueryFinalized2.dispose();
                                    }
                                    throw th4;
                                }
                            }
                            if (ExecuteFast2 != -1) {
                            }
                            j3 = jLongValue2;
                            if (j3 != 0) {
                            }
                            SQLitePreparedStatement sQLitePreparedStatementExecuteFast5222 = null;
                            if (iIntValue != i) {
                            }
                            if (ExecuteFast2 != 0) {
                            }
                            return new long[]{j3, ExecuteFast.intValue()};
                        }
                    } catch (Throwable th5) {
                        th = th5;
                        sQLitePreparedStatement5 = sQLitePreparedStatementExecuteFast4;
                        if (sQLitePreparedStatement5 != null) {
                            sQLitePreparedStatement5.dispose();
                        }
                        throw th;
                    }
                } catch (Exception e9) {
                    e = e9;
                    sQLiteCursor = sQLiteCursorQueryFinalized;
                    sQLitePreparedStatementExecuteFast4 = null;
                } catch (Throwable th6) {
                    th = th6;
                    sQLitePreparedStatement5 = null;
                    if (sQLitePreparedStatement5 != null) {
                    }
                    throw th;
                }
                sQLitePreparedStatementExecuteFast4.dispose();
            }
            if (i6 == -1 || i6 == 0) {
                sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT uid FROM messages_v2 WHERE mid = %d LIMIT 1", new Object[]{ExecuteFast}), new Object[0]);
                if (sQLiteCursorQueryFinalized2.next()) {
                    jLongValue2 = 0;
                } else {
                    jLongValue2 = sQLiteCursorQueryFinalized2.longValue(0);
                    i6 = 0;
                }
                sQLiteCursorQueryFinalized2.dispose();
                sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT topic_id FROM quick_replies_messages WHERE mid = %d LIMIT 1", new Object[]{ExecuteFast}), new Object[0]);
                if (sQLiteCursorQueryFinalized2.next()) {
                    iIntValue2 = i4;
                } else {
                    iIntValue2 = sQLiteCursorQueryFinalized2.intValue(0);
                    i6 = 2;
                }
                sQLiteCursorQueryFinalized2.dispose();
                ExecuteFast2 = i6;
                i5 = iIntValue2;
                if (ExecuteFast2 != -1 || ExecuteFast2 == 1) {
                    try {
                        try {
                            sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT uid FROM scheduled_messages_v2 WHERE mid = %d LIMIT 1", new Object[]{ExecuteFast}), new Object[0]);
                            ExecuteFast2 = ExecuteFast2;
                            if (sQLiteCursorQueryFinalized2.next()) {
                                jLongValue2 = sQLiteCursorQueryFinalized2.longValue(0);
                                ExecuteFast2 = 1;
                            }
                        } catch (Throwable th7) {
                            if (sQLiteCursorQueryFinalized2 != null) {
                                sQLiteCursorQueryFinalized2.dispose();
                            }
                            throw th7;
                        }
                    } catch (Exception e10) {
                        checkSQLException(e10);
                        ExecuteFast2 = ExecuteFast2;
                        if (sQLiteCursorQueryFinalized2 != null) {
                        }
                    }
                    sQLiteCursorQueryFinalized2.dispose();
                }
                j3 = jLongValue2;
                if (j3 != 0 && ExecuteFast2 != 2) {
                    return null;
                }
                SQLitePreparedStatement sQLitePreparedStatementExecuteFast52222 = null;
                if (iIntValue != i && i2 != 0) {
                    try {
                        try {
                        } catch (Throwable th8) {
                            th = th8;
                        }
                    } catch (Exception e11) {
                        e = e11;
                        ExecuteFast = 0;
                    } catch (Throwable th9) {
                        th = th9;
                        sQLitePreparedStatement4 = null;
                        if (sQLitePreparedStatement4 != null) {
                            sQLitePreparedStatement4.dispose();
                        }
                        if (sQLitePreparedStatementExecuteFast52222 != null) {
                            sQLitePreparedStatementExecuteFast52222.dispose();
                        }
                        throw th;
                    }
                    if (ExecuteFast2 == 0) {
                        sQLiteDatabase = this.database;
                        str = "UPDATE messages_v2 SET send_state = 0, date = ? WHERE mid = ? AND uid = ?";
                    } else if (ExecuteFast2 == 1) {
                        sQLiteDatabase = this.database;
                        str = "UPDATE scheduled_messages_v2 SET send_state = 0, date = ? WHERE mid = ? AND uid = ?";
                    } else {
                        if (ExecuteFast2 != 2) {
                            ExecuteFast = 0;
                            ExecuteFast.bindInteger(1, i2);
                            ExecuteFast.bindInteger(2, i);
                            ExecuteFast.bindLong(3, ExecuteFast2 != 2 ? i5 : j3);
                            ExecuteFast.step();
                            if (ExecuteFast2 == 0) {
                                SQLitePreparedStatement sQLitePreparedStatementExecuteFast6 = this.database.executeFast("UPDATE messages_topics SET send_state = 0, date = ? WHERE mid = ? AND uid = ?");
                                try {
                                    sQLitePreparedStatementExecuteFast6.bindInteger(1, i2);
                                    sQLitePreparedStatementExecuteFast6.bindInteger(2, i);
                                    sQLitePreparedStatementExecuteFast6.bindLong(3, j3);
                                    sQLitePreparedStatementExecuteFast6.step();
                                    sQLitePreparedStatementExecuteFast52222 = sQLitePreparedStatementExecuteFast6;
                                } catch (Exception e12) {
                                    e = e12;
                                    sQLitePreparedStatementExecuteFast52222 = sQLitePreparedStatementExecuteFast6;
                                    checkSQLException(e);
                                    if (ExecuteFast != 0) {
                                        ExecuteFast.dispose();
                                    }
                                    return new long[]{j3, i};
                                } catch (Throwable th10) {
                                    th = th10;
                                    sQLitePreparedStatementExecuteFast52222 = sQLitePreparedStatementExecuteFast6;
                                    sQLitePreparedStatement4 = ExecuteFast;
                                    if (sQLitePreparedStatement4 != null) {
                                    }
                                    if (sQLitePreparedStatementExecuteFast52222 != null) {
                                    }
                                    throw th;
                                }
                            }
                            ExecuteFast.dispose();
                            if (sQLitePreparedStatementExecuteFast52222 != null) {
                            }
                            return new long[]{j3, i};
                        }
                        sQLiteDatabase = this.database;
                        str = "UPDATE quick_replies_messages SET send_state = 0, date = ? WHERE mid = ? AND topic_id = ?";
                    }
                    ExecuteFast = sQLiteDatabase.executeFast(str);
                    ExecuteFast.bindInteger(1, i2);
                    ExecuteFast.bindInteger(2, i);
                    ExecuteFast.bindLong(3, ExecuteFast2 != 2 ? i5 : j3);
                    ExecuteFast.step();
                    if (ExecuteFast2 == 0) {
                    }
                    ExecuteFast.dispose();
                    if (sQLitePreparedStatementExecuteFast52222 != null) {
                    }
                    return new long[]{j3, i};
                }
                if (ExecuteFast2 != 0) {
                    try {
                        sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE messages_v2 SET mid = ?, send_state = 0 WHERE mid = ? AND uid = ?");
                        try {
                            sQLitePreparedStatementExecuteFast2.bindInteger(1, i);
                            sQLitePreparedStatementExecuteFast2.bindInteger(2, iIntValue);
                            sQLitePreparedStatementExecuteFast2.bindLong(3, j3);
                            sQLitePreparedStatementExecuteFast2.step();
                            sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE messages_topics SET mid = ?, send_state = 0 WHERE mid = ? AND uid = ?");
                            try {
                                try {
                                    sQLitePreparedStatementExecuteFast.bindInteger(1, i);
                                    sQLitePreparedStatementExecuteFast.bindInteger(2, iIntValue);
                                    sQLitePreparedStatementExecuteFast.bindLong(3, j3);
                                    sQLitePreparedStatementExecuteFast.step();
                                    sQLitePreparedStatementExecuteFast2.dispose();
                                    sQLitePreparedStatementExecuteFast.dispose();
                                } catch (Exception unused) {
                                    try {
                                        SQLiteDatabase sQLiteDatabase2 = this.database;
                                        Locale locale = Locale.US;
                                        sQLiteDatabase2.executeFast(String.format(locale, "DELETE FROM messages_v2 WHERE mid = %d AND uid = %d", new Object[]{ExecuteFast, Long.valueOf(j3)})).stepThis().dispose();
                                        this.database.executeFast(String.format(locale, "DELETE FROM messages_seq WHERE mid = %d", new Object[]{ExecuteFast})).stepThis().dispose();
                                        this.database.executeFast(String.format(locale, "DELETE FROM messages_topics WHERE mid = %d AND uid = %d", new Object[]{ExecuteFast, Long.valueOf(j3)})).stepThis().dispose();
                                    } catch (Exception e13) {
                                        checkSQLException(e13);
                                    }
                                    if (sQLitePreparedStatementExecuteFast2 != null) {
                                        sQLitePreparedStatementExecuteFast2.dispose();
                                        sQLitePreparedStatementExecuteFast2 = null;
                                    }
                                    if (sQLitePreparedStatementExecuteFast != null) {
                                        sQLitePreparedStatementExecuteFast.dispose();
                                    }
                                    sQLitePreparedStatementExecuteFast52222 = sQLitePreparedStatementExecuteFast2;
                                    try {
                                        try {
                                            try {
                                                sQLitePreparedStatementExecuteFast52222 = this.database.executeFast("UPDATE media_v4 SET mid = ? WHERE mid = ? AND uid = ?");
                                                sQLitePreparedStatementExecuteFast52222.bindInteger(1, i);
                                                sQLitePreparedStatementExecuteFast52222.bindInteger(2, iIntValue);
                                                sQLitePreparedStatementExecuteFast52222.bindLong(3, j3);
                                                sQLitePreparedStatementExecuteFast52222.step();
                                            } finally {
                                                if (sQLitePreparedStatementExecuteFast52222 != null) {
                                                    sQLitePreparedStatementExecuteFast52222.dispose();
                                                }
                                            }
                                        } catch (Exception unused2) {
                                            this.database.executeFast(String.format(Locale.US, "DELETE FROM media_v4 WHERE mid = %d AND uid = %d", new Object[]{ExecuteFast, Long.valueOf(j3)})).stepThis().dispose();
                                            if (sQLitePreparedStatementExecuteFast52222 != null) {
                                                sQLitePreparedStatementExecuteFast52222.dispose();
                                                sQLitePreparedStatementExecuteFast52222 = null;
                                            }
                                            try {
                                                sQLitePreparedStatementExecuteFast52222 = this.database.executeFast("UPDATE media_topics SET mid = ? WHERE mid = ? AND uid = ?");
                                                sQLitePreparedStatementExecuteFast52222.bindInteger(1, i);
                                                sQLitePreparedStatementExecuteFast52222.bindInteger(2, iIntValue);
                                                sQLitePreparedStatementExecuteFast52222.bindLong(3, j3);
                                                sQLitePreparedStatementExecuteFast52222.step();
                                            } catch (Exception unused3) {
                                                this.database.executeFast(String.format(Locale.US, "DELETE FROM media_topics WHERE mid = %d AND uid = %d", new Object[]{ExecuteFast, Long.valueOf(j3)})).stepThis().dispose();
                                                if (sQLitePreparedStatementExecuteFast52222 != null) {
                                                    sQLitePreparedStatementExecuteFast52222.dispose();
                                                    sQLitePreparedStatementExecuteFast52222 = null;
                                                }
                                                sQLitePreparedStatementExecuteFast52222 = this.database.executeFast("UPDATE dialogs SET last_mid = ? WHERE last_mid = ?");
                                                sQLitePreparedStatementExecuteFast52222.bindInteger(1, i);
                                                sQLitePreparedStatementExecuteFast52222.bindInteger(2, iIntValue);
                                                sQLitePreparedStatementExecuteFast52222.step();
                                                sQLitePreparedStatementExecuteFast52222.dispose();
                                                return new long[]{j3, ExecuteFast.intValue()};
                                            }
                                            sQLitePreparedStatementExecuteFast52222.dispose();
                                            sQLitePreparedStatementExecuteFast52222 = null;
                                            sQLitePreparedStatementExecuteFast52222 = this.database.executeFast("UPDATE dialogs SET last_mid = ? WHERE last_mid = ?");
                                            sQLitePreparedStatementExecuteFast52222.bindInteger(1, i);
                                            sQLitePreparedStatementExecuteFast52222.bindInteger(2, iIntValue);
                                            sQLitePreparedStatementExecuteFast52222.step();
                                            sQLitePreparedStatementExecuteFast52222.dispose();
                                            return new long[]{j3, ExecuteFast.intValue()};
                                        }
                                        try {
                                            sQLitePreparedStatementExecuteFast52222 = this.database.executeFast("UPDATE media_topics SET mid = ? WHERE mid = ? AND uid = ?");
                                            sQLitePreparedStatementExecuteFast52222.bindInteger(1, i);
                                            sQLitePreparedStatementExecuteFast52222.bindInteger(2, iIntValue);
                                            sQLitePreparedStatementExecuteFast52222.bindLong(3, j3);
                                            sQLitePreparedStatementExecuteFast52222.step();
                                        } catch (Exception e14) {
                                            checkSQLException(e14);
                                            if (sQLitePreparedStatementExecuteFast52222 != null) {
                                            }
                                            sQLitePreparedStatementExecuteFast52222 = this.database.executeFast("UPDATE dialogs SET last_mid = ? WHERE last_mid = ?");
                                            sQLitePreparedStatementExecuteFast52222.bindInteger(1, i);
                                            sQLitePreparedStatementExecuteFast52222.bindInteger(2, iIntValue);
                                            sQLitePreparedStatementExecuteFast52222.step();
                                            sQLitePreparedStatementExecuteFast52222.dispose();
                                            return new long[]{j3, ExecuteFast.intValue()};
                                        }
                                        sQLitePreparedStatementExecuteFast52222 = this.database.executeFast("UPDATE dialogs SET last_mid = ? WHERE last_mid = ?");
                                        sQLitePreparedStatementExecuteFast52222.bindInteger(1, i);
                                        sQLitePreparedStatementExecuteFast52222.bindInteger(2, iIntValue);
                                        sQLitePreparedStatementExecuteFast52222.step();
                                        sQLitePreparedStatementExecuteFast52222.dispose();
                                        return new long[]{j3, ExecuteFast.intValue()};
                                    } catch (Throwable th11) {
                                        if (sQLitePreparedStatementExecuteFast52222 != null) {
                                            sQLitePreparedStatementExecuteFast52222.dispose();
                                        }
                                        throw th11;
                                    }
                                    sQLitePreparedStatementExecuteFast52222.dispose();
                                    sQLitePreparedStatementExecuteFast52222 = null;
                                    sQLitePreparedStatementExecuteFast52222.dispose();
                                    sQLitePreparedStatementExecuteFast52222 = null;
                                }
                            } catch (Throwable th12) {
                                th = th12;
                                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                                if (sQLitePreparedStatement != null) {
                                    sQLitePreparedStatement.dispose();
                                }
                                if (sQLitePreparedStatementExecuteFast != null) {
                                    sQLitePreparedStatementExecuteFast.dispose();
                                }
                                throw th;
                            }
                        } catch (Exception unused4) {
                            sQLitePreparedStatementExecuteFast = null;
                        } catch (Throwable th13) {
                            th = th13;
                            sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                            sQLitePreparedStatementExecuteFast = null;
                            if (sQLitePreparedStatement != null) {
                            }
                            if (sQLitePreparedStatementExecuteFast != null) {
                            }
                            throw th;
                        }
                    } catch (Exception unused5) {
                        sQLitePreparedStatementExecuteFast2 = null;
                        sQLitePreparedStatementExecuteFast = null;
                    } catch (Throwable th14) {
                        th = th14;
                        sQLitePreparedStatementExecuteFast = null;
                        sQLitePreparedStatement = null;
                    }
                    try {
                        try {
                            sQLitePreparedStatementExecuteFast52222 = this.database.executeFast("UPDATE media_v4 SET mid = ? WHERE mid = ? AND uid = ?");
                            sQLitePreparedStatementExecuteFast52222.bindInteger(1, i);
                            sQLitePreparedStatementExecuteFast52222.bindInteger(2, iIntValue);
                            sQLitePreparedStatementExecuteFast52222.bindLong(3, j3);
                            sQLitePreparedStatementExecuteFast52222.step();
                        } catch (Exception e15) {
                            checkSQLException(e15);
                            if (sQLitePreparedStatementExecuteFast52222 != null) {
                            }
                            sQLitePreparedStatementExecuteFast52222 = this.database.executeFast("UPDATE media_topics SET mid = ? WHERE mid = ? AND uid = ?");
                            sQLitePreparedStatementExecuteFast52222.bindInteger(1, i);
                            sQLitePreparedStatementExecuteFast52222.bindInteger(2, iIntValue);
                            sQLitePreparedStatementExecuteFast52222.bindLong(3, j3);
                            sQLitePreparedStatementExecuteFast52222.step();
                            sQLitePreparedStatementExecuteFast52222.dispose();
                            sQLitePreparedStatementExecuteFast52222 = null;
                            sQLitePreparedStatementExecuteFast52222 = this.database.executeFast("UPDATE dialogs SET last_mid = ? WHERE last_mid = ?");
                            sQLitePreparedStatementExecuteFast52222.bindInteger(1, i);
                            sQLitePreparedStatementExecuteFast52222.bindInteger(2, iIntValue);
                            sQLitePreparedStatementExecuteFast52222.step();
                            sQLitePreparedStatementExecuteFast52222.dispose();
                            return new long[]{j3, ExecuteFast.intValue()};
                        }
                        sQLitePreparedStatementExecuteFast52222 = this.database.executeFast("UPDATE media_topics SET mid = ? WHERE mid = ? AND uid = ?");
                        sQLitePreparedStatementExecuteFast52222.bindInteger(1, i);
                        sQLitePreparedStatementExecuteFast52222.bindInteger(2, iIntValue);
                        sQLitePreparedStatementExecuteFast52222.bindLong(3, j3);
                        sQLitePreparedStatementExecuteFast52222.step();
                        sQLitePreparedStatementExecuteFast52222.dispose();
                        sQLitePreparedStatementExecuteFast52222 = null;
                        sQLitePreparedStatementExecuteFast52222 = this.database.executeFast("UPDATE dialogs SET last_mid = ? WHERE last_mid = ?");
                        sQLitePreparedStatementExecuteFast52222.bindInteger(1, i);
                        sQLitePreparedStatementExecuteFast52222.bindInteger(2, iIntValue);
                        sQLitePreparedStatementExecuteFast52222.step();
                        sQLitePreparedStatementExecuteFast52222.dispose();
                    } finally {
                        if (sQLitePreparedStatementExecuteFast52222 != null) {
                            sQLitePreparedStatementExecuteFast52222.dispose();
                        }
                    }
                    sQLitePreparedStatementExecuteFast52222.dispose();
                    sQLitePreparedStatementExecuteFast52222 = null;
                } else if (ExecuteFast2 == 1) {
                    try {
                        sQLitePreparedStatementExecuteFast3 = this.database.executeFast("UPDATE scheduled_messages_v2 SET mid = ?, send_state = 0 WHERE mid = ? AND uid = ?");
                        try {
                            try {
                                sQLitePreparedStatementExecuteFast3.bindInteger(1, i);
                                sQLitePreparedStatementExecuteFast3.bindInteger(2, iIntValue);
                                sQLitePreparedStatementExecuteFast3.bindLong(3, j3);
                                sQLitePreparedStatementExecuteFast3.step();
                                sQLitePreparedStatementExecuteFast52222 = sQLitePreparedStatementExecuteFast3;
                                sQLitePreparedStatementExecuteFast52222.dispose();
                            } catch (Exception unused6) {
                                try {
                                    this.database.executeFast(String.format(Locale.US, "DELETE FROM scheduled_messages_v2 WHERE mid = %d AND uid = %d", new Object[]{ExecuteFast, Long.valueOf(j3)})).stepThis().dispose();
                                } catch (Exception e16) {
                                    checkSQLException(e16);
                                }
                                if (sQLitePreparedStatementExecuteFast3 != null) {
                                    sQLitePreparedStatementExecuteFast3.dispose();
                                }
                                return new long[]{j3, ExecuteFast.intValue()};
                            }
                        } catch (Throwable th15) {
                            th = th15;
                            sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast3;
                            if (sQLitePreparedStatement2 != null) {
                                sQLitePreparedStatement2.dispose();
                            }
                            throw th;
                        }
                    } catch (Exception unused7) {
                        sQLitePreparedStatementExecuteFast3 = null;
                    } catch (Throwable th16) {
                        th = th16;
                        sQLitePreparedStatement2 = null;
                        if (sQLitePreparedStatement2 != null) {
                        }
                        throw th;
                    }
                } else {
                    try {
                        if (ExecuteFast2 == 2) {
                            try {
                                ExecuteFast2 = this.database.executeFast("UPDATE quick_replies_messages SET mid = ?, topic_id = ?, send_state = 0 WHERE mid = ? AND topic_id = ?");
                                try {
                                    ExecuteFast2.bindInteger(1, i);
                                    ExecuteFast2.bindInteger(2, i4);
                                    ExecuteFast2.bindInteger(3, iIntValue);
                                    ExecuteFast2.bindLong(4, i5);
                                    ExecuteFast2.step();
                                    sQLitePreparedStatementExecuteFast52222 = ExecuteFast2;
                                    sQLitePreparedStatementExecuteFast52222.dispose();
                                } catch (Exception unused8) {
                                    try {
                                        this.database.executeFast(String.format(Locale.US, "DELETE FROM quick_replies_messages WHERE mid = %d AND topic_id = %d", new Object[]{ExecuteFast, Integer.valueOf(i5)})).stepThis().dispose();
                                    } catch (Exception e17) {
                                        checkSQLException(e17);
                                    }
                                    if (ExecuteFast2 != 0) {
                                        sQLitePreparedStatementExecuteFast3 = ExecuteFast2;
                                        sQLitePreparedStatementExecuteFast3.dispose();
                                    }
                                    return new long[]{j3, ExecuteFast.intValue()};
                                }
                            } catch (Exception unused9) {
                                ExecuteFast2 = 0;
                            } catch (Throwable th17) {
                                th = th17;
                                sQLitePreparedStatement3 = null;
                                if (sQLitePreparedStatement3 != null) {
                                }
                                throw th;
                            }
                        }
                    } catch (Throwable th18) {
                        th = th18;
                        sQLitePreparedStatement3 = ExecuteFast2;
                        if (sQLitePreparedStatement3 != null) {
                            sQLitePreparedStatement3.dispose();
                        }
                        throw th;
                    }
                }
                return new long[]{j3, ExecuteFast.intValue()};
            }
            sQLiteCursorQueryFinalized2 = sQLiteCursor;
            jLongValue2 = 0;
            ExecuteFast2 = i6;
            i5 = i4;
            if (ExecuteFast2 != -1) {
                sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT uid FROM scheduled_messages_v2 WHERE mid = %d LIMIT 1", new Object[]{ExecuteFast}), new Object[0]);
                ExecuteFast2 = ExecuteFast2;
                if (sQLiteCursorQueryFinalized2.next()) {
                }
                sQLiteCursorQueryFinalized2.dispose();
            }
            j3 = jLongValue2;
            if (j3 != 0) {
            }
            SQLitePreparedStatement sQLitePreparedStatementExecuteFast522222 = null;
            if (iIntValue != i) {
            }
            if (ExecuteFast2 != 0) {
            }
            return new long[]{j3, ExecuteFast.intValue()};
        } catch (Throwable th19) {
            th = th19;
            sQLiteCursor2 = sQLiteCursorQueryFinalized;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:123:0x02b4  */
    /* JADX WARN: Removed duplicated region for block: B:125:0x02b9  */
    /* JADX WARN: Removed duplicated region for block: B:131:0x02cc  */
    /* JADX WARN: Removed duplicated region for block: B:133:0x02d1  */
    /* JADX WARN: Removed duplicated region for block: B:139:0x01ec A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:151:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:152:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:48:0x00d6  */
    /* JADX WARN: Removed duplicated region for block: B:58:0x0130 A[Catch: all -> 0x01d0, Exception -> 0x01d4, TRY_LEAVE, TryCatch #11 {Exception -> 0x01d4, all -> 0x01d0, blocks: (B:36:0x00a3, B:38:0x00b8, B:50:0x00da, B:53:0x00f5, B:56:0x011f, B:58:0x0130, B:61:0x014b, B:69:0x0168, B:72:0x0183, B:78:0x019c, B:80:0x01a2, B:83:0x01b6), top: B:145:0x00a3 }] */
    /* JADX WARN: Removed duplicated region for block: B:99:0x01e0  */
    /* renamed from: updateRepliesMaxReadIdInternal, reason: merged with bridge method [inline-methods] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public void lambda$updateRepliesMaxReadId$187(final long j, final long j2, final int i, int i2) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLitePreparedStatement sQLitePreparedStatement2;
        SQLiteCursor sQLiteCursor;
        SQLiteCursor sQLiteCursor2;
        SQLitePreparedStatement sQLitePreparedStatement3;
        SQLiteCursor sQLiteCursor3;
        SQLiteCursor sQLiteCursorQueryFinalized;
        Locale locale;
        final int i3;
        final int i4;
        int iIntValue;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        int iIntValue2;
        SQLiteCursor sQLiteCursorQueryFinalized2;
        TLRPC.MessageReplies messageRepliesTLdeserialize;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        long j3 = -j;
        try {
            try {
                if (isForum(j3) || isMonoForum(j3)) {
                    try {
                        SQLiteDatabase sQLiteDatabase = this.database;
                        locale = Locale.US;
                        sQLiteCursorQueryFinalized = sQLiteDatabase.queryFinalized(String.format(locale, "SELECT max_read_id FROM topics WHERE did = %d AND topic_id = %d", Long.valueOf(j3), Long.valueOf(j2)), new Object[0]);
                        try {
                            boolean z = !sQLiteCursorQueryFinalized.next() && i >= sQLiteCursorQueryFinalized.intValue(0);
                            sQLiteCursorQueryFinalized.dispose();
                            this.database.executeFast(String.format(locale, "UPDATE messages_topics SET read_state = read_state | 1 WHERE uid = %d AND topic_id = %d AND mid <= %d AND read_state IN(0, 2) AND out = 0", Long.valueOf(j3), Long.valueOf(j2), Integer.valueOf(i))).stepThis().dispose();
                            this.database.executeFast(String.format(locale, "UPDATE messages_topics SET read_state = read_state | 2 WHERE uid = %d AND topic_id = %d AND mid <= %d AND read_state IN(0, 1) AND out = 0", Long.valueOf(j3), Long.valueOf(j2), Integer.valueOf(i))).stepThis().dispose();
                            if (i2 >= 0) {
                                SQLiteCursor sQLiteCursorQueryFinalized3 = this.database.queryFinalized(String.format(locale, "SELECT count(mid) FROM messages_topics WHERE uid = %d AND topic_id = %d AND mid > %d AND read_state IN(0, 2) AND out = 0", Long.valueOf(j3), Long.valueOf(j2), Integer.valueOf(i)), new Object[0]);
                                iIntValue = sQLiteCursorQueryFinalized3.next() ? sQLiteCursorQueryFinalized3.intValue(0) : 0;
                                sQLiteCursorQueryFinalized3.dispose();
                                if (iIntValue == 0) {
                                    i3 = iIntValue;
                                    i4 = 0;
                                } else {
                                    SQLiteCursor sQLiteCursorQueryFinalized4 = this.database.queryFinalized(String.format(locale, "SELECT count(mid) FROM messages_topics WHERE uid = %d AND topic_id = %d AND mid > %d AND read_state IN(0, 1) AND out = 0", Long.valueOf(j3), Long.valueOf(j2), Integer.valueOf(i)), new Object[0]);
                                    int iIntValue3 = sQLiteCursorQueryFinalized4.next() ? sQLiteCursorQueryFinalized4.intValue(0) : -1;
                                    sQLiteCursorQueryFinalized4.dispose();
                                    if (isMonoForum(j3)) {
                                        iIntValue2 = 0;
                                    } else {
                                        sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(locale, "SELECT unread_mentions FROM topics WHERE did = %d AND topic_id = %d", Long.valueOf(j3), Long.valueOf(j2)), new Object[0]);
                                        iIntValue2 = sQLiteCursorQueryFinalized.next() ? sQLiteCursorQueryFinalized.intValue(0) : 0;
                                        sQLiteCursorQueryFinalized.dispose();
                                    }
                                    i4 = iIntValue3 > iIntValue2 ? iIntValue2 : iIntValue3;
                                    i3 = iIntValue;
                                }
                                if (z) {
                                    try {
                                        isMonoForum(j3);
                                        if (i4 >= 0) {
                                            if (BuildVars.DEBUG_PRIVATE_VERSION && i4 > 0) {
                                                FileLog.d("(updateRepliesMaxReadIdInternal) new unread mentions " + i4 + " for dialog_id=" + j3 + " topic_id=" + j2);
                                            }
                                            sQLitePreparedStatementExecuteFast = this.database.executeFast(String.format(Locale.ENGLISH, "UPDATE topics SET max_read_id = %d, unread_count = %d, unread_mentions = %d WHERE did = %d AND topic_id = %d", Integer.valueOf(i), Integer.valueOf(i3), Integer.valueOf(i4), Long.valueOf(j3), Long.valueOf(j2)));
                                        } else {
                                            sQLitePreparedStatementExecuteFast = this.database.executeFast(String.format(Locale.ENGLISH, "UPDATE topics SET max_read_id = %d, unread_count = %d WHERE did = %d AND topic_id = %d", Integer.valueOf(i), Integer.valueOf(i3), Long.valueOf(j3), Long.valueOf(j2)));
                                        }
                                        sQLitePreparedStatementExecuteFast.stepThis().dispose();
                                        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda52
                                            @Override // java.lang.Runnable
                                            public final void run() {
                                                this.f$0.lambda$updateRepliesMaxReadIdInternal$186(j, j2, i, i3, i4);
                                            }
                                        });
                                        resetForumBadgeIfNeed(j3);
                                        return;
                                    } catch (Throwable th) {
                                        th = th;
                                        sQLiteCursor3 = null;
                                        sQLitePreparedStatement3 = null;
                                        SQLitePreparedStatement sQLitePreparedStatement4 = sQLitePreparedStatement3;
                                        sQLiteCursor = sQLiteCursor3;
                                        sQLitePreparedStatement = sQLitePreparedStatement4;
                                        if (sQLitePreparedStatement != null) {
                                        }
                                        if (sQLiteCursor != null) {
                                        }
                                        throw th;
                                    }
                                }
                                return;
                            }
                            if (i2 == 0) {
                                iIntValue = i2;
                                i3 = iIntValue;
                                i4 = 0;
                                if (z) {
                                }
                            } else {
                                i3 = i2;
                                i4 = -1;
                                if (z) {
                                }
                            }
                        } catch (Exception e) {
                            e = e;
                            sQLiteCursor2 = sQLiteCursorQueryFinalized;
                            sQLitePreparedStatement2 = null;
                            try {
                                checkSQLException(e);
                                if (sQLitePreparedStatement2 != null) {
                                    sQLitePreparedStatement2.dispose();
                                }
                                if (sQLiteCursor2 != null) {
                                    sQLiteCursor2.dispose();
                                    return;
                                }
                                return;
                            } catch (Throwable th2) {
                                th = th2;
                                SQLiteCursor sQLiteCursor4 = sQLiteCursor2;
                                sQLitePreparedStatement3 = sQLitePreparedStatement2;
                                sQLiteCursor3 = sQLiteCursor4;
                                SQLitePreparedStatement sQLitePreparedStatement42 = sQLitePreparedStatement3;
                                sQLiteCursor = sQLiteCursor3;
                                sQLitePreparedStatement = sQLitePreparedStatement42;
                                if (sQLitePreparedStatement != null) {
                                }
                                if (sQLiteCursor != null) {
                                }
                                throw th;
                            }
                        } catch (Throwable th3) {
                            th = th3;
                            sQLiteCursor = sQLiteCursorQueryFinalized;
                            sQLitePreparedStatement = null;
                            if (sQLitePreparedStatement != null) {
                            }
                            if (sQLiteCursor != null) {
                            }
                            throw th;
                        }
                    } catch (Exception e2) {
                        e = e2;
                        sQLiteCursorQueryFinalized = null;
                    } catch (Throwable th4) {
                        th = th4;
                        sQLiteCursorQueryFinalized = null;
                    }
                } else {
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = this.database.executeFast("UPDATE messages_v2 SET replies_data = ? WHERE mid = ? AND uid = ?");
                    try {
                        sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT replies_data FROM messages_v2 WHERE mid = %d AND uid = %d", Long.valueOf(j2), Long.valueOf(j3)), new Object[0]);
                    } catch (Exception e3) {
                        e = e3;
                        sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast2;
                        sQLiteCursor2 = null;
                        checkSQLException(e);
                        if (sQLitePreparedStatement2 != null) {
                        }
                        if (sQLiteCursor2 != null) {
                        }
                    } catch (Throwable th5) {
                        th = th5;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                        sQLiteCursor = null;
                        if (sQLitePreparedStatement != null) {
                        }
                        if (sQLiteCursor != null) {
                        }
                        throw th;
                    }
                    try {
                        if (!sQLiteCursorQueryFinalized2.next() || (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized2.byteBufferValue(0)) == null) {
                            messageRepliesTLdeserialize = null;
                        } else {
                            messageRepliesTLdeserialize = TLRPC.MessageReplies.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                            nativeByteBufferByteBufferValue.reuse();
                        }
                        sQLiteCursorQueryFinalized2.dispose();
                        if (messageRepliesTLdeserialize != null) {
                            messageRepliesTLdeserialize.read_max_id = i;
                            sQLitePreparedStatementExecuteFast2.requery();
                            NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(messageRepliesTLdeserialize.getObjectSize());
                            messageRepliesTLdeserialize.serializeToStream(nativeByteBuffer);
                            sQLitePreparedStatementExecuteFast2.bindByteBuffer(1, nativeByteBuffer);
                            sQLitePreparedStatementExecuteFast2.bindInteger(2, (int) j2);
                            sQLitePreparedStatementExecuteFast2.bindLong(3, j3);
                            sQLitePreparedStatementExecuteFast2.step();
                            nativeByteBuffer.reuse();
                        }
                        sQLitePreparedStatementExecuteFast2.dispose();
                        SQLiteDatabase sQLiteDatabase2 = this.database;
                        locale = Locale.US;
                        sQLiteCursorQueryFinalized = sQLiteDatabase2.queryFinalized(String.format(locale, "SELECT max_read_id FROM topics WHERE did = %d AND topic_id = %d", Long.valueOf(j3), Long.valueOf(j2)), new Object[0]);
                        if (sQLiteCursorQueryFinalized.next()) {
                            sQLiteCursorQueryFinalized.dispose();
                            this.database.executeFast(String.format(locale, "UPDATE messages_topics SET read_state = read_state | 1 WHERE uid = %d AND topic_id = %d AND mid <= %d AND read_state IN(0, 2) AND out = 0", Long.valueOf(j3), Long.valueOf(j2), Integer.valueOf(i))).stepThis().dispose();
                            this.database.executeFast(String.format(locale, "UPDATE messages_topics SET read_state = read_state | 2 WHERE uid = %d AND topic_id = %d AND mid <= %d AND read_state IN(0, 1) AND out = 0", Long.valueOf(j3), Long.valueOf(j2), Integer.valueOf(i))).stepThis().dispose();
                            if (i2 >= 0) {
                            }
                        }
                    } catch (Exception e4) {
                        e = e4;
                        sQLiteCursor2 = sQLiteCursorQueryFinalized2;
                        sQLitePreparedStatement2 = sQLitePreparedStatementExecuteFast2;
                        checkSQLException(e);
                        if (sQLitePreparedStatement2 != null) {
                        }
                        if (sQLiteCursor2 != null) {
                        }
                    } catch (Throwable th6) {
                        th = th6;
                        sQLiteCursor = sQLiteCursorQueryFinalized2;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast2;
                    }
                }
            } catch (Exception e5) {
                e = e5;
                sQLitePreparedStatement2 = null;
            }
        } catch (Throwable th7) {
            th = th7;
            sQLitePreparedStatement = null;
        }
        if (sQLitePreparedStatement != null) {
            sQLitePreparedStatement.dispose();
        }
        if (sQLiteCursor != null) {
            sQLiteCursor.dispose();
        }
        throw th;
    }

    private void updateTopicsWithReadFromAllInternal(long j, long j2, long j3) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT topic_id FROM topics WHERE did = %d AND max_read_id < %d AND (top_message > %d OR unread_count > 0)", Long.valueOf(j), Long.valueOf(j3), Long.valueOf(j2)), new Object[0]);
                while (sQLiteCursorQueryFinalized.next()) {
                    lambda$updateRepliesMaxReadId$187(-j, sQLiteCursorQueryFinalized.longValue(0), (int) j3, -1);
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized == null) {
                    return;
                }
            }
            sQLiteCursorQueryFinalized.dispose();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: updateUsersInternal, reason: merged with bridge method [inline-methods] */
    public void lambda$updateUsers$200(ArrayList<TLRPC.User> arrayList, boolean z, boolean z2) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                if (z) {
                    if (z2) {
                        this.database.beginTransaction();
                    }
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE users SET status = ? WHERE uid = ?");
                    try {
                        int size = arrayList.size();
                        for (int i = 0; i < size; i++) {
                            TLRPC.User user = arrayList.get(i);
                            sQLitePreparedStatementExecuteFast.requery();
                            TLRPC.UserStatus userStatus = user.status;
                            if (userStatus != null) {
                                sQLitePreparedStatementExecuteFast.bindInteger(1, userStatus.expires);
                            } else {
                                sQLitePreparedStatementExecuteFast.bindInteger(1, 0);
                            }
                            sQLitePreparedStatementExecuteFast.bindLong(2, user.id);
                            sQLitePreparedStatementExecuteFast.step();
                        }
                        sQLitePreparedStatementExecuteFast.dispose();
                        if (z2) {
                            this.database.commitTransaction();
                        }
                    } catch (Exception e) {
                        e = e;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        checkSQLException(e);
                        SQLiteDatabase sQLiteDatabase = this.database;
                        if (sQLiteDatabase != null) {
                            sQLiteDatabase.commitTransaction();
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                            return;
                        }
                        return;
                    } catch (Throwable th) {
                        th = th;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        SQLiteDatabase sQLiteDatabase2 = this.database;
                        if (sQLiteDatabase2 != null) {
                            sQLiteDatabase2.commitTransaction();
                        }
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        throw th;
                    }
                } else {
                    ArrayList<Long> arrayList2 = new ArrayList<>();
                    LongSparseArray longSparseArray = new LongSparseArray();
                    int size2 = arrayList.size();
                    for (int i2 = 0; i2 < size2; i2++) {
                        TLRPC.User user2 = arrayList.get(i2);
                        arrayList2.add(Long.valueOf(user2.id));
                        longSparseArray.put(user2.id, user2);
                    }
                    ArrayList<TLRPC.User> arrayList3 = new ArrayList<>();
                    getUsersInternal(arrayList2, arrayList3);
                    int size3 = arrayList3.size();
                    for (int i3 = 0; i3 < size3; i3++) {
                        TLRPC.User user3 = arrayList3.get(i3);
                        TLRPC.User user4 = (TLRPC.User) longSparseArray.get(user3.id);
                        if (user4 != null) {
                            if (user4.first_name == null || user4.last_name == null) {
                                TLRPC.UserProfilePhoto userProfilePhoto = user4.photo;
                                if (userProfilePhoto != null) {
                                    user3.photo = userProfilePhoto;
                                } else {
                                    String str = user4.phone;
                                    if (str != null) {
                                        user3.phone = str;
                                    }
                                }
                            } else {
                                if (!UserObject.isContact(user3)) {
                                    user3.first_name = user4.first_name;
                                    user3.last_name = user4.last_name;
                                }
                                user3.username = user4.username;
                            }
                        }
                    }
                    if (!arrayList3.isEmpty()) {
                        if (z2) {
                            this.database.beginTransaction();
                        }
                        putUsersInternal(arrayList3);
                        if (z2) {
                            this.database.commitTransaction();
                        }
                    }
                }
                SQLiteDatabase sQLiteDatabase3 = this.database;
                if (sQLiteDatabase3 != null) {
                    sQLiteDatabase3.commitTransaction();
                }
            } catch (Exception e2) {
                e = e2;
            }
        } catch (Throwable th2) {
            th = th2;
        }
    }

    private void updateWidgets(long j) {
        ArrayList<Long> arrayList = new ArrayList<>();
        arrayList.add(Long.valueOf(j));
        updateWidgets(arrayList);
    }

    private void updateWidgets(ArrayList<Long> arrayList) {
        if (arrayList.isEmpty()) {
            return;
        }
        try {
            TextUtils.join(",", arrayList);
            SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT DISTINCT id FROM shortcut_widget WHERE did IN(%s,-1)", TextUtils.join(",", arrayList)), new Object[0]);
            AppWidgetManager appWidgetManager = null;
            while (sQLiteCursorQueryFinalized.next()) {
                if (appWidgetManager == null) {
                    appWidgetManager = AppWidgetManager.getInstance(ApplicationLoader.applicationContext);
                }
                appWidgetManager.notifyAppWidgetViewDataChanged(sQLiteCursorQueryFinalized.intValue(0), R.id.list_view);
            }
            sQLiteCursorQueryFinalized.dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    public void addRecentLocalFile(final String str, final String str2, final TLRPC.Document document) {
        if (str == null || str.length() == 0) {
            return;
        }
        if ((str2 == null || str2.length() == 0) && document == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda190
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$addRecentLocalFile$79(document, str, str2);
            }
        });
    }

    public void applyPhoneBookUpdates(final String str, final String str2) {
        if (TextUtils.isEmpty(str)) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda102
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$applyPhoneBookUpdates$143(str, str2);
            }
        });
    }

    public void bindTaskToGuid(Runnable runnable, int i) {
        ArrayList<Runnable> arrayList = this.tasks.get(i);
        if (arrayList == null) {
            arrayList = new ArrayList<>();
            this.tasks.put(i, arrayList);
        }
        arrayList.add(runnable);
    }

    public void cancelTasksForGuid(int i) {
        ArrayList<Runnable> arrayList = this.tasks.get(i);
        if (arrayList == null) {
            return;
        }
        int size = arrayList.size();
        for (int i2 = 0; i2 < size; i2++) {
            this.storageQueue.cancelRunnable(arrayList.get(i2));
        }
        this.tasks.remove(i);
    }

    public void checkIfFolderEmpty(final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda211
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$checkIfFolderEmpty$229(i);
            }
        });
    }

    public void checkLoadedRemoteFilters(final ArrayList<TLRPC.DialogFilter> arrayList, final Runnable runnable) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda63
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$checkLoadedRemoteFilters$66(arrayList, runnable);
            }
        });
    }

    public boolean checkMessageByRandomId(final long j) throws InterruptedException {
        final boolean[] zArr = new boolean[1];
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda162
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$checkMessageByRandomId$148(j, zArr, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
        return zArr[0];
    }

    public boolean checkMessageId(final long j, final int i) throws InterruptedException {
        final boolean[] zArr = new boolean[1];
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda179
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$checkMessageId$149(j, i, zArr, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
        return zArr[0];
    }

    public void checkSQLException(Throwable th) {
        checkSQLException(th, true);
    }

    public void cleanup(final boolean z) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda65
            @Override // java.lang.Runnable
            public final void run() throws Exception {
                this.f$0.lambda$cleanup$6(z);
            }
        });
    }

    public void clearDatabaseValues() {
        this.lastDateValue = 0;
        this.lastSeqValue = 0;
        this.lastPtsValue = 0;
        this.lastQtsValue = 0;
        this.lastSecretVersion = 0;
        this.mainUnreadCount = 0;
        this.archiveUnreadCount = 0;
        this.pendingMainUnreadCount = 0;
        this.pendingArchiveUnreadCount = 0;
        this.dialogFilters.clear();
        this.dialogFiltersMap.clear();
        this.unknownDialogsIds.clear();
        this.lastSavedSeq = 0;
        this.lastSavedPts = 0;
        this.lastSavedDate = 0;
        this.lastSavedQts = 0;
        this.secretPBytes = null;
        this.secretG = 0;
    }

    public void clearDownloadQueue(final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda159
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$clearDownloadQueue$178(i);
            }
        });
    }

    public void clearLocalDatabase() {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda195
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$clearLocalDatabase$44();
            }
        });
    }

    public void clearSentMedia() {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda39
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$clearSentMedia$158();
            }
        });
    }

    public void clearUserPhoto(final long j, final long j2) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda89
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$clearUserPhoto$88(j, j2);
            }
        });
    }

    public void clearUserPhotos(final long j) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda168
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$clearUserPhotos$87(j);
            }
        });
    }

    public void clearWidgetDialogs(final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda240
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$clearWidgetDialogs$161(i);
            }
        });
    }

    /* JADX WARN: Removed duplicated region for block: B:141:0x047b A[Catch: all -> 0x0482, Exception -> 0x0485, TryCatch #20 {Exception -> 0x0485, all -> 0x0482, blocks: (B:139:0x046e, B:141:0x047b, B:147:0x048a), top: B:197:0x046e }] */
    /* JADX WARN: Removed duplicated region for block: B:146:0x0488  */
    /* JADX WARN: Removed duplicated region for block: B:158:0x04e5  */
    /* JADX WARN: Removed duplicated region for block: B:160:0x04ea  */
    /* JADX WARN: Removed duplicated region for block: B:211:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public void closeHolesInMedia(long j, int i, int i2, int i3, long j2) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        Throwable th;
        Exception exc;
        ArrayList arrayList;
        int i4;
        ArrayList arrayList2;
        long j3;
        SQLiteDatabase sQLiteDatabase;
        String str;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        long j4;
        int i5;
        int i6;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast2;
        Exception exc2;
        boolean z;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast3;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast4;
        int i7 = i2;
        long j5 = j2;
        int i8 = 1;
        SQLitePreparedStatement sQLitePreparedStatement = null;
        try {
            try {
                try {
                    sQLiteCursorQueryFinalized = j5 != 0 ? i3 < 0 ? this.database.queryFinalized(String.format(Locale.US, "SELECT type, start, end FROM media_holes_topics WHERE uid = %d AND topic_id = %d AND type >= 0 AND ((end >= %d AND end <= %d) OR (start >= %d AND start <= %d) OR (start >= %d AND end <= %d) OR (start <= %d AND end >= %d))", Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2)), new Object[0]) : this.database.queryFinalized(String.format(Locale.US, "SELECT type, start, end FROM media_holes_topics WHERE uid = %d AND topic_id = %d AND type = %d AND ((end >= %d AND end <= %d) OR (start >= %d AND start <= %d) OR (start >= %d AND end <= %d) OR (start <= %d AND end >= %d))", Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(i3), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2)), new Object[0]) : i3 < 0 ? this.database.queryFinalized(String.format(Locale.US, "SELECT type, start, end FROM media_holes_v2 WHERE uid = %d AND type >= 0 AND ((end >= %d AND end <= %d) OR (start >= %d AND start <= %d) OR (start >= %d AND end <= %d) OR (start <= %d AND end >= %d))", Long.valueOf(j), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2)), new Object[0]) : this.database.queryFinalized(String.format(Locale.US, "SELECT type, start, end FROM media_holes_v2 WHERE uid = %d AND type = %d AND ((end >= %d AND end <= %d) OR (start >= %d AND start <= %d) OR (start >= %d AND end <= %d) OR (start <= %d AND end >= %d))", Long.valueOf(j), Integer.valueOf(i3), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2), Integer.valueOf(i), Integer.valueOf(i2)), new Object[0]);
                    arrayList = null;
                    while (sQLiteCursorQueryFinalized.next()) {
                        try {
                            try {
                                if (arrayList == null) {
                                    arrayList = new ArrayList();
                                }
                                int iIntValue = sQLiteCursorQueryFinalized.intValue(0);
                                int iIntValue2 = sQLiteCursorQueryFinalized.intValue(1);
                                int iIntValue3 = sQLiteCursorQueryFinalized.intValue(2);
                                if (iIntValue2 != iIntValue3 || iIntValue2 != 1) {
                                    arrayList.add(new Hole(iIntValue, iIntValue2, iIntValue3));
                                }
                            } catch (Exception e) {
                                exc = e;
                            }
                        } catch (Throwable th2) {
                            th = th2;
                        }
                    }
                    sQLiteCursorQueryFinalized.dispose();
                } catch (Exception e2) {
                    e = e2;
                }
            } catch (Throwable th3) {
                th = th3;
            }
        } catch (Exception e3) {
            e = e3;
        } catch (Throwable th4) {
            th = th4;
        }
        if (arrayList != null) {
            int i9 = 0;
            while (i9 < arrayList.size()) {
                try {
                    Hole hole = (Hole) arrayList.get(i9);
                    int i10 = hole.end;
                    int i11 = i10 - 1;
                    if (i7 >= i11) {
                        arrayList2 = arrayList;
                        if (i > hole.start + i8) {
                            i4 = i9;
                        } else if (j5 != 0) {
                            i4 = i9;
                            try {
                                sQLitePreparedStatementExecuteFast4 = this.database.executeFast(String.format(Locale.US, "DELETE FROM media_holes_topics WHERE uid = %d AND topic_id = %d AND type = %d AND start = %d AND end = %d", Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(hole.type), Integer.valueOf(hole.start), Integer.valueOf(hole.end)));
                                sQLitePreparedStatementExecuteFast4.stepThis().dispose();
                                i6 = i7;
                                j3 = j5;
                                j4 = j;
                                i7 = i6;
                                i8 = 1;
                                arrayList = arrayList2;
                                i9 = i4 + 1;
                                j5 = j3;
                            } catch (Throwable th5) {
                                th = th5;
                            }
                        } else {
                            i4 = i9;
                            try {
                                sQLitePreparedStatementExecuteFast4 = this.database.executeFast(String.format(Locale.US, "DELETE FROM media_holes_v2 WHERE uid = %d AND type = %d AND start = %d AND end = %d", Long.valueOf(j), Integer.valueOf(hole.type), Integer.valueOf(hole.start), Integer.valueOf(hole.end)));
                                sQLitePreparedStatementExecuteFast4.stepThis().dispose();
                                i6 = i7;
                                j3 = j5;
                                j4 = j;
                                i7 = i6;
                                i8 = 1;
                                arrayList = arrayList2;
                                i9 = i4 + 1;
                                j5 = j3;
                            } catch (Throwable th6) {
                                th = th6;
                            }
                        }
                    } else {
                        i4 = i9;
                        arrayList2 = arrayList;
                    }
                    if (i7 < i11) {
                        int i12 = hole.start;
                        if (i <= i12 + 1) {
                            if (i12 != i7) {
                                j3 = j2;
                                if (j3 != 0) {
                                    try {
                                    } catch (Exception e4) {
                                        e = e4;
                                        exc2 = e;
                                        z = false;
                                        checkSQLException(exc2, z);
                                        j4 = j;
                                        i6 = i2;
                                        i7 = i6;
                                        i8 = 1;
                                        arrayList = arrayList2;
                                        i9 = i4 + 1;
                                        j5 = j3;
                                    }
                                    try {
                                        try {
                                            sQLitePreparedStatementExecuteFast2 = this.database.executeFast(String.format(Locale.US, "UPDATE media_holes_topics SET start = %d WHERE uid = %d AND topic_id = %d AND type = %d AND start = %d AND end = %d", Integer.valueOf(i2), Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(hole.type), Integer.valueOf(hole.start), Integer.valueOf(hole.end)));
                                            sQLitePreparedStatementExecuteFast2.stepThis().dispose();
                                        } catch (Throwable th7) {
                                            th = th7;
                                        }
                                    } catch (Exception e5) {
                                        e = e5;
                                        exc2 = e;
                                        z = false;
                                        checkSQLException(exc2, z);
                                        j4 = j;
                                        i6 = i2;
                                        i7 = i6;
                                        i8 = 1;
                                        arrayList = arrayList2;
                                        i9 = i4 + 1;
                                        j5 = j3;
                                    }
                                } else {
                                    try {
                                        sQLitePreparedStatementExecuteFast2 = this.database.executeFast(String.format(Locale.US, "UPDATE media_holes_v2 SET start = %d WHERE uid = %d AND type = %d AND start = %d AND end = %d", Integer.valueOf(i2), Long.valueOf(j), Integer.valueOf(hole.type), Integer.valueOf(hole.start), Integer.valueOf(hole.end)));
                                        sQLitePreparedStatementExecuteFast2.stepThis().dispose();
                                    } catch (Throwable th8) {
                                        th = th8;
                                    }
                                }
                            } else {
                                j3 = j2;
                            }
                            j4 = j;
                            i6 = i2;
                        } else {
                            j3 = j2;
                            if (j3 != 0) {
                                try {
                                    this.database.executeFast(String.format(Locale.US, "DELETE FROM media_holes_topics WHERE uid = %d AND topic_id = %d AND type = %d AND start = %d AND end = %d", Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(hole.type), Integer.valueOf(hole.start), Integer.valueOf(hole.end))).stepThis().dispose();
                                    str = "REPLACE INTO media_holes_topics VALUES(?, ?, ?, ?, ?)";
                                    sQLiteDatabase = this.database;
                                    sQLitePreparedStatementExecuteFast = sQLiteDatabase.executeFast(str);
                                    try {
                                        sQLitePreparedStatementExecuteFast.requery();
                                        j4 = j;
                                        sQLitePreparedStatementExecuteFast.bindLong(1, j4);
                                        if (j3 == 0) {
                                            sQLitePreparedStatementExecuteFast.bindLong(2, j3);
                                            i5 = 3;
                                        } else {
                                            i5 = 2;
                                        }
                                        sQLitePreparedStatementExecuteFast.bindInteger(i5, hole.type);
                                        sQLitePreparedStatementExecuteFast.bindInteger(i5 + 1, hole.start);
                                        sQLitePreparedStatementExecuteFast.bindInteger(i5 + 2, i);
                                        sQLitePreparedStatementExecuteFast.step();
                                        sQLitePreparedStatementExecuteFast.requery();
                                        sQLitePreparedStatementExecuteFast.bindLong(1, j4);
                                        sQLitePreparedStatementExecuteFast.bindInteger(2, hole.type);
                                        i6 = i2;
                                        sQLitePreparedStatementExecuteFast.bindInteger(3, i6);
                                        sQLitePreparedStatementExecuteFast.bindInteger(4, hole.end);
                                        sQLitePreparedStatementExecuteFast.step();
                                        sQLitePreparedStatementExecuteFast.dispose();
                                        i7 = i6;
                                        i8 = 1;
                                        arrayList = arrayList2;
                                        i9 = i4 + 1;
                                        j5 = j3;
                                    } catch (Exception e6) {
                                        exc = e6;
                                        sQLiteCursorQueryFinalized = null;
                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                        checkSQLException(exc);
                                        if (sQLitePreparedStatement != null) {
                                        }
                                        if (sQLiteCursorQueryFinalized == null) {
                                        }
                                    } catch (Throwable th9) {
                                        th = th9;
                                        sQLiteCursorQueryFinalized = null;
                                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                                    }
                                } catch (Throwable th10) {
                                    th = th10;
                                }
                            } else {
                                try {
                                    this.database.executeFast(String.format(Locale.US, "DELETE FROM media_holes_v2 WHERE uid = %d AND type = %d AND start = %d AND end = %d", Long.valueOf(j), Integer.valueOf(hole.type), Integer.valueOf(hole.start), Integer.valueOf(hole.end))).stepThis().dispose();
                                    sQLiteDatabase = this.database;
                                    str = "REPLACE INTO media_holes_v2 VALUES(?, ?, ?, ?)";
                                    sQLitePreparedStatementExecuteFast = sQLiteDatabase.executeFast(str);
                                    sQLitePreparedStatementExecuteFast.requery();
                                    j4 = j;
                                    sQLitePreparedStatementExecuteFast.bindLong(1, j4);
                                    if (j3 == 0) {
                                    }
                                    sQLitePreparedStatementExecuteFast.bindInteger(i5, hole.type);
                                    sQLitePreparedStatementExecuteFast.bindInteger(i5 + 1, hole.start);
                                    sQLitePreparedStatementExecuteFast.bindInteger(i5 + 2, i);
                                    sQLitePreparedStatementExecuteFast.step();
                                    sQLitePreparedStatementExecuteFast.requery();
                                    sQLitePreparedStatementExecuteFast.bindLong(1, j4);
                                    sQLitePreparedStatementExecuteFast.bindInteger(2, hole.type);
                                    i6 = i2;
                                    sQLitePreparedStatementExecuteFast.bindInteger(3, i6);
                                    sQLitePreparedStatementExecuteFast.bindInteger(4, hole.end);
                                    sQLitePreparedStatementExecuteFast.step();
                                    sQLitePreparedStatementExecuteFast.dispose();
                                    i7 = i6;
                                    i8 = 1;
                                    arrayList = arrayList2;
                                    i9 = i4 + 1;
                                    j5 = j3;
                                } catch (Throwable th11) {
                                    th = th11;
                                }
                            }
                        }
                        th = th;
                        sQLiteCursorQueryFinalized = null;
                        if (sQLitePreparedStatement != null) {
                            sQLitePreparedStatement.dispose();
                        }
                        if (sQLiteCursorQueryFinalized == null) {
                            throw th;
                        }
                        sQLiteCursorQueryFinalized.dispose();
                        throw th;
                    }
                    if (i10 != i) {
                        if (j5 != 0) {
                            try {
                                try {
                                    sQLitePreparedStatementExecuteFast3 = this.database.executeFast(String.format(Locale.US, "UPDATE media_holes_topics SET end = %d WHERE uid = %d AND topic_id = %d AND type = %d AND start = %d AND end = %d", Integer.valueOf(i), Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(hole.type), Integer.valueOf(hole.start), Integer.valueOf(hole.end)));
                                    sQLitePreparedStatementExecuteFast3.stepThis().dispose();
                                } catch (Throwable th12) {
                                    th = th12;
                                }
                            } catch (Exception e7) {
                                exc2 = e7;
                                z = false;
                                j3 = j2;
                                checkSQLException(exc2, z);
                                j4 = j;
                                i6 = i2;
                                i7 = i6;
                                i8 = 1;
                                arrayList = arrayList2;
                                i9 = i4 + 1;
                                j5 = j3;
                            }
                        } else {
                            try {
                                sQLitePreparedStatementExecuteFast3 = this.database.executeFast(String.format(Locale.US, "UPDATE media_holes_v2 SET end = %d WHERE uid = %d AND type = %d AND start = %d AND end = %d", Integer.valueOf(i), Long.valueOf(j), Integer.valueOf(hole.type), Integer.valueOf(hole.start), Integer.valueOf(hole.end)));
                                sQLitePreparedStatementExecuteFast3.stepThis().dispose();
                            } catch (Throwable th13) {
                                th = th13;
                            }
                        }
                    }
                    j4 = j;
                    j3 = j2;
                    i6 = i7;
                    i7 = i6;
                    i8 = 1;
                    arrayList = arrayList2;
                    i9 = i4 + 1;
                    j5 = j3;
                } catch (Exception e8) {
                    e = e8;
                    exc = e;
                    sQLiteCursorQueryFinalized = null;
                    checkSQLException(exc);
                    if (sQLitePreparedStatement != null) {
                        sQLitePreparedStatement.dispose();
                    }
                    if (sQLiteCursorQueryFinalized == null) {
                        sQLiteCursorQueryFinalized.dispose();
                        return;
                    }
                    return;
                }
            }
        }
    }

    public void completeTaskForGuid(Runnable runnable, int i) {
        ArrayList<Runnable> arrayList = this.tasks.get(i);
        if (arrayList == null) {
            return;
        }
        arrayList.remove(runnable);
        if (arrayList.isEmpty()) {
            this.tasks.remove(i);
        }
    }

    public boolean containsLocalDialog(final long j) throws InterruptedException {
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        final Boolean[] boolArr = {Boolean.FALSE};
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda175
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$containsLocalDialog$173(j, boolArr, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
        return boolArr[0].booleanValue();
    }

    public long createPendingTask(final NativeByteBuffer nativeByteBuffer) {
        if (nativeByteBuffer == null) {
            return 0L;
        }
        final long andAdd = this.lastTaskId.getAndAdd(1L);
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda58
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createPendingTask$10(andAdd, nativeByteBuffer);
            }
        });
        return andAdd;
    }

    public void createTaskForMid(final long j, final int i, final int i2, final int i3, final int i4, final boolean z) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda239
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$createTaskForMid$111(i2, i3, i4, i, z, j);
            }
        });
    }

    public void createTaskForSecretChat(final int i, final int i2, final int i3, final int i4, final ArrayList<Long> arrayList) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda62
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$createTaskForSecretChat$113(i, arrayList, i4, i2, i3);
            }
        });
    }

    public void deleteAllStoryPushMessages() {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda60
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$deleteAllStoryPushMessages$40();
            }
        });
    }

    public void deleteAllStoryReactionPushMessages() {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda80
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$deleteAllStoryReactionPushMessages$41();
            }
        });
    }

    public void deleteContacts(final ArrayList<Long> arrayList) {
        if (arrayList == null || arrayList.isEmpty()) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda145
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$deleteContacts$142(arrayList);
            }
        });
    }

    public void deleteDialog(final long j, final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda37
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$deleteDialog$85(i, j);
            }
        });
    }

    public void deleteDialogFilter(final MessagesController.DialogFilter dialogFilter) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda199
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$deleteDialogFilter$69(dialogFilter);
            }
        });
    }

    protected void deletePushMessages(long j, ArrayList<Integer> arrayList) {
        try {
            this.database.executeFast(String.format(Locale.US, "DELETE FROM unread_push_messages WHERE uid = %d AND mid IN(%s)", Long.valueOf(j), TextUtils.join(",", arrayList))).stepThis().dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    public void deleteSavedDialog(final long j) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda222
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$deleteSavedDialog$53(j);
            }
        });
    }

    public void deleteStoryPushMessage(final long j) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda128
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$deleteStoryPushMessage$39(j);
            }
        });
    }

    public void deleteUserChatHistory(final long j, final long j2) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda227
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$deleteUserChatHistory$82(j, j2);
            }
        });
    }

    public void deleteWallpaper(final long j) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda215
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$deleteWallpaper$76(j);
            }
        });
    }

    /* JADX WARN: Removed duplicated region for block: B:17:0x0083 A[Catch: all -> 0x008b, Exception -> 0x008e, TRY_ENTER, TryCatch #8 {Exception -> 0x008e, all -> 0x008b, blocks: (B:17:0x0083, B:23:0x0091), top: B:86:0x0081 }] */
    /* JADX WARN: Removed duplicated region for block: B:23:0x0091 A[Catch: all -> 0x008b, Exception -> 0x008e, TRY_LEAVE, TryCatch #8 {Exception -> 0x008e, all -> 0x008b, blocks: (B:17:0x0083, B:23:0x0091), top: B:86:0x0081 }] */
    /* JADX WARN: Removed duplicated region for block: B:41:0x00cd  */
    /* JADX WARN: Removed duplicated region for block: B:55:0x0161 A[Catch: all -> 0x0169, Exception -> 0x016c, TRY_ENTER, TryCatch #7 {Exception -> 0x016c, all -> 0x0169, blocks: (B:55:0x0161, B:61:0x016f), top: B:88:0x015f }] */
    /* JADX WARN: Removed duplicated region for block: B:61:0x016f A[Catch: all -> 0x0169, Exception -> 0x016c, TRY_LEAVE, TryCatch #7 {Exception -> 0x016c, all -> 0x0169, blocks: (B:55:0x0161, B:61:0x016f), top: B:88:0x015f }] */
    /* JADX WARN: Removed duplicated region for block: B:65:0x0182 A[Catch: all -> 0x0188, Exception -> 0x018a, TryCatch #3 {Exception -> 0x018a, blocks: (B:63:0x0176, B:65:0x0182, B:71:0x018d), top: B:82:0x0176 }] */
    /* JADX WARN: Removed duplicated region for block: B:70:0x018c  */
    /* JADX WARN: Removed duplicated region for block: B:73:0x01a4 A[ORIG_RETURN, RETURN] */
    /* JADX WARN: Removed duplicated region for block: B:76:0x01a8  */
    /* JADX WARN: Removed duplicated region for block: B:80:0x009c A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public void doneHolesInMedia(long j, int i, int i2, long j2) throws Throwable {
        SQLiteDatabase sQLiteDatabase;
        String str;
        long j3;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast;
        int i3;
        SQLiteDatabase sQLiteDatabase2;
        String str2;
        long j4;
        int i4;
        if (i2 == -1) {
            try {
                if (j2 != 0) {
                    sQLiteDatabase2 = this.database;
                    Locale locale = Locale.US;
                    if (i == 0) {
                        sQLiteDatabase2.executeFast(String.format(locale, "DELETE FROM media_holes_topics WHERE uid = %d AND topic_id = %d", Long.valueOf(j), Long.valueOf(j2))).stepThis().dispose();
                        j4 = 0;
                        sQLitePreparedStatementExecuteFast = j2 == j4 ? this.database.executeFast("REPLACE INTO media_holes_topics VALUES(?, ?, ?, ?, ?)") : this.database.executeFast("REPLACE INTO media_holes_v2 VALUES(?, ?, ?, ?)");
                        for (int i5 = 0; i5 < 8; i5++) {
                            try {
                                try {
                                    sQLitePreparedStatementExecuteFast.requery();
                                    sQLitePreparedStatementExecuteFast.bindLong(1, j);
                                    if (j2 != 0) {
                                        sQLitePreparedStatementExecuteFast.bindLong(2, j2);
                                        i4 = 3;
                                    } else {
                                        i4 = 2;
                                    }
                                    sQLitePreparedStatementExecuteFast.bindInteger(i4, i5);
                                    sQLitePreparedStatementExecuteFast.bindInteger(i4 + 1, 1);
                                    sQLitePreparedStatementExecuteFast.bindInteger(i4 + 2, 1);
                                    sQLitePreparedStatementExecuteFast.step();
                                } catch (Exception e) {
                                    throw e;
                                }
                            } catch (Throwable th) {
                                th = th;
                                if (sQLitePreparedStatementExecuteFast != null) {
                                    sQLitePreparedStatementExecuteFast.dispose();
                                }
                                throw th;
                            }
                        }
                        if (sQLitePreparedStatementExecuteFast == null) {
                            return;
                        }
                    } else {
                        str2 = String.format(locale, "DELETE FROM media_holes_topics WHERE uid = %d AND topic_id = %d AND start = 0", Long.valueOf(j), Long.valueOf(j2));
                    }
                } else {
                    sQLiteDatabase2 = this.database;
                    Locale locale2 = Locale.US;
                    Long lValueOf = Long.valueOf(j);
                    Object[] objArr = new Object[1];
                    if (i == 0) {
                        objArr[0] = lValueOf;
                        str2 = String.format(locale2, "DELETE FROM media_holes_v2 WHERE uid = %d", objArr);
                    } else {
                        objArr[0] = lValueOf;
                        str2 = String.format(locale2, "DELETE FROM media_holes_v2 WHERE uid = %d AND start = 0", objArr);
                    }
                }
                sQLitePreparedStatementExecuteFast = j2 == j4 ? this.database.executeFast("REPLACE INTO media_holes_topics VALUES(?, ?, ?, ?, ?)") : this.database.executeFast("REPLACE INTO media_holes_v2 VALUES(?, ?, ?, ?)");
                while (i5 < 8) {
                }
                if (sQLitePreparedStatementExecuteFast == null) {
                }
            } catch (Exception e2) {
                sQLitePreparedStatementExecuteFast = null;
                throw e2;
            } catch (Throwable th2) {
                th = th2;
                sQLitePreparedStatementExecuteFast = null;
                if (sQLitePreparedStatementExecuteFast != null) {
                }
                throw th;
            }
            sQLiteDatabase2.executeFast(str2).stepThis().dispose();
            j4 = 0;
        } else {
            try {
                try {
                    try {
                        if (j2 == 0) {
                            sQLiteDatabase = this.database;
                            Locale locale3 = Locale.US;
                            Long lValueOf2 = Long.valueOf(j);
                            Integer numValueOf = Integer.valueOf(i2);
                            Object[] objArr2 = new Object[2];
                            if (i == 0) {
                                objArr2[0] = lValueOf2;
                                objArr2[1] = numValueOf;
                                str = String.format(locale3, "DELETE FROM media_holes_v2 WHERE uid = %d AND type = %d", objArr2);
                            } else {
                                objArr2[0] = lValueOf2;
                                objArr2[1] = numValueOf;
                                str = String.format(locale3, "DELETE FROM media_holes_v2 WHERE uid = %d AND type = %d AND start = 0", objArr2);
                            }
                        } else if (i == 0) {
                            this.database.executeFast(String.format(Locale.US, "DELETE FROM media_holes_topics WHERE uid = %d AND topic_id = %d AND type = %d", Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(i2))).stepThis().dispose();
                            j3 = 0;
                            sQLitePreparedStatementExecuteFast = j2 == j3 ? this.database.executeFast("REPLACE INTO media_holes_topics VALUES(?, ?, ?, ?, ?)") : this.database.executeFast("REPLACE INTO media_holes_v2 VALUES(?, ?, ?, ?)");
                            sQLitePreparedStatementExecuteFast.requery();
                            sQLitePreparedStatementExecuteFast.bindLong(1, j);
                            if (j2 == 0) {
                                sQLitePreparedStatementExecuteFast.bindLong(2, j2);
                                i3 = 3;
                            } else {
                                i3 = 2;
                            }
                            sQLitePreparedStatementExecuteFast.bindInteger(i3, i2);
                            sQLitePreparedStatementExecuteFast.bindInteger(i3 + 1, 1);
                            sQLitePreparedStatementExecuteFast.bindInteger(i3 + 2, 1);
                            sQLitePreparedStatementExecuteFast.step();
                            sQLitePreparedStatementExecuteFast.dispose();
                        } else {
                            sQLiteDatabase = this.database;
                            str = String.format(Locale.US, "DELETE FROM media_holes_topics WHERE uid = %d AND topic_id = %d AND type = %d AND start = 0", Long.valueOf(j), Long.valueOf(j2), Integer.valueOf(i2));
                        }
                        sQLitePreparedStatementExecuteFast.requery();
                        sQLitePreparedStatementExecuteFast.bindLong(1, j);
                        if (j2 == 0) {
                        }
                        sQLitePreparedStatementExecuteFast.bindInteger(i3, i2);
                        sQLitePreparedStatementExecuteFast.bindInteger(i3 + 1, 1);
                        sQLitePreparedStatementExecuteFast.bindInteger(i3 + 2, 1);
                        sQLitePreparedStatementExecuteFast.step();
                        sQLitePreparedStatementExecuteFast.dispose();
                    } catch (Exception e3) {
                        throw e3;
                    }
                } catch (Throwable th3) {
                    th = th3;
                    if (sQLitePreparedStatementExecuteFast != null) {
                        sQLitePreparedStatementExecuteFast.dispose();
                    }
                    throw th;
                }
                sQLitePreparedStatementExecuteFast = j2 == j3 ? this.database.executeFast("REPLACE INTO media_holes_topics VALUES(?, ?, ?, ?, ?)") : this.database.executeFast("REPLACE INTO media_holes_v2 VALUES(?, ?, ?, ?)");
            } catch (Exception e4) {
                sQLitePreparedStatementExecuteFast = null;
                throw e4;
            } catch (Throwable th4) {
                th = th4;
                sQLitePreparedStatementExecuteFast = null;
                if (sQLitePreparedStatementExecuteFast != null) {
                }
                throw th;
            }
            sQLiteDatabase.executeFast(str).stepThis().dispose();
            j3 = 0;
        }
        sQLitePreparedStatementExecuteFast.dispose();
    }

    public void emptyMessagesMedia(final long j, final ArrayList<Integer> arrayList) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda91
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$emptyMessagesMedia$94(arrayList, j);
            }
        });
    }

    void executeNoException(String str) {
        try {
            this.database.executeFast(str).stepThis().dispose();
        } catch (Exception e) {
            FileLog.e(e);
        }
    }

    public void fixNotificationSettings() {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda139
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$fixNotificationSettings$9();
            }
        });
    }

    public void fullReset() {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda44
            @Override // java.lang.Runnable
            public final void run() throws Exception {
                this.f$0.lambda$fullReset$60();
            }
        });
    }

    public void getAnimatedEmoji(String str, ArrayList<TLRPC.Document> arrayList) {
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data FROM animated_emoji WHERE document_id IN (%s)", str), new Object[0]);
                while (sQLiteCursorQueryFinalized.next()) {
                    NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                    try {
                        TLRPC.Document documentTLdeserialize = TLRPC.Document.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(true), true);
                        if (documentTLdeserialize != null && documentTLdeserialize.id != 0) {
                            arrayList.add(documentTLdeserialize);
                        }
                    } catch (Exception e) {
                        checkSQLException(e);
                    }
                    if (nativeByteBufferByteBufferValue != null) {
                        nativeByteBufferByteBufferValue.reuse();
                    }
                }
            } catch (SQLiteException e2) {
                e2.printStackTrace();
                if (sQLiteCursorQueryFinalized == null) {
                    return;
                }
            }
            sQLiteCursorQueryFinalized.dispose();
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    public int getArchiveUnreadCount() {
        return this.archiveUnreadCount;
    }

    public void getBotCache(final String str, final RequestDelegate requestDelegate) {
        if (str == null || requestDelegate == null) {
            return;
        }
        final int currentTime = getConnectionsManager().getCurrentTime();
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda236
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$getBotCache$122(currentTime, str, requestDelegate);
            }
        });
    }

    public ArrayList<Integer> getCachedMessagesInRange(long j, int i, int i2) {
        ArrayList<Integer> arrayList = new ArrayList<>();
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT mid FROM messages_v2 WHERE uid = %d AND date >= %d AND date <= %d", Long.valueOf(j), Integer.valueOf(i), Integer.valueOf(i2)), new Object[0]);
                while (sQLiteCursorQueryFinalized.next()) {
                    try {
                        arrayList.add(Integer.valueOf(sQLiteCursorQueryFinalized.intValue(0)));
                    } catch (Exception e) {
                        checkSQLException(e);
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
            } catch (Exception e2) {
                checkSQLException(e2);
                if (0 != 0) {
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            return arrayList;
        } catch (Throwable th) {
            if (0 != 0) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    public void getCachedPhoneBook(final boolean z) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda127
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getCachedPhoneBook$145(z);
            }
        });
    }

    public int getChannelPtsSync(final long j) {
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        final Integer[] numArr = {0};
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda213
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getChannelPtsSync$240(j, numArr, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
        return numArr[0].intValue();
    }

    public TLRPC.Chat getChat(long j) {
        try {
            ArrayList<TLRPC.Chat> arrayList = new ArrayList<>();
            getChatsInternal("" + j, arrayList);
            if (!arrayList.isEmpty()) {
                return arrayList.get(0);
            }
        } catch (Exception e) {
            checkSQLException(e);
        }
        return null;
    }

    public TLRPC.Chat getChatSync(final long j) {
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        final TLRPC.Chat[] chatArr = new TLRPC.Chat[1];
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda221
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getChatSync$242(chatArr, j, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
        return chatArr[0];
    }

    public ArrayList<TLRPC.Chat> getChats(ArrayList<Long> arrayList) {
        ArrayList<TLRPC.Chat> arrayList2 = new ArrayList<>();
        try {
            getChatsInternal(TextUtils.join(",", arrayList), arrayList2);
        } catch (Exception e) {
            arrayList2.clear();
            checkSQLException(e);
        }
        return arrayList2;
    }

    public void getChatsInternal(String str, ArrayList<TLRPC.Chat> arrayList) {
        getChatsInternal(str, arrayList, true);
    }

    public void getChatsInternal(String str, ArrayList<TLRPC.Chat> arrayList, boolean z) {
        if (str == null || str.length() == 0 || arrayList == null) {
            return;
        }
        SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data FROM chats WHERE uid IN(%s)", str), new Object[0]);
        ArrayList arrayList2 = null;
        while (sQLiteCursorQueryFinalized.next()) {
            try {
                NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                if (nativeByteBufferByteBufferValue != null) {
                    TLRPC.Chat chatTLdeserialize = TLRPC.Chat.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false, z);
                    nativeByteBufferByteBufferValue.reuse();
                    if (chatTLdeserialize != null) {
                        arrayList.add(chatTLdeserialize);
                        if (chatTLdeserialize.linked_monoforum_id != 0) {
                            if (arrayList2 == null) {
                                arrayList2 = new ArrayList();
                            }
                            arrayList2.add(Long.valueOf(chatTLdeserialize.linked_monoforum_id));
                        }
                    }
                }
            } catch (Exception e) {
                checkSQLException(e);
            }
        }
        sQLiteCursorQueryFinalized.dispose();
        if (arrayList2 != null) {
            SQLiteCursor sQLiteCursorQueryFinalized2 = this.database.queryFinalized(String.format(Locale.US, "SELECT data FROM chats WHERE uid IN(%s)", TextUtils.join(", ", arrayList2)), new Object[0]);
            while (sQLiteCursorQueryFinalized2.next()) {
                try {
                    NativeByteBuffer nativeByteBufferByteBufferValue2 = sQLiteCursorQueryFinalized2.byteBufferValue(0);
                    if (nativeByteBufferByteBufferValue2 != null) {
                        TLRPC.Chat chatTLdeserialize2 = TLRPC.Chat.TLdeserialize(nativeByteBufferByteBufferValue2, nativeByteBufferByteBufferValue2.readInt32(false), false, z);
                        nativeByteBufferByteBufferValue2.reuse();
                        if (chatTLdeserialize2 != null) {
                            arrayList.add(chatTLdeserialize2);
                        }
                    }
                } catch (Exception e2) {
                    checkSQLException(e2);
                }
            }
            sQLiteCursorQueryFinalized2.dispose();
        }
    }

    public void getContacts() {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda82
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$getContacts$146();
            }
        });
    }

    public SQLiteDatabase getDatabase() {
        return this.database;
    }

    public ArrayList<File> getDatabaseFiles() {
        ArrayList<File> arrayList = new ArrayList<>();
        arrayList.add(this.cacheFile);
        arrayList.add(this.walCacheFile);
        arrayList.add(this.shmCacheFile);
        return arrayList;
    }

    public long getDatabaseSize() {
        File file = this.cacheFile;
        long length = file != null ? file.length() : 0L;
        File file2 = this.shmCacheFile;
        return file2 != null ? length + file2.length() : length;
    }

    public void getDialogFolderId(final long j, final IntCallback intCallback) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda119
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getDialogFolderId$226(j, intCallback);
            }
        });
    }

    public void getDialogMaxMessageId(final long j, final IntCallback intCallback) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda113
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getDialogMaxMessageId$238(j, intCallback);
            }
        });
    }

    public int getDialogReadMax(final boolean z, final long j) throws InterruptedException {
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        final Integer[] numArr = {0};
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda106
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getDialogReadMax$239(z, j, numArr, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
        return numArr[0].intValue();
    }

    public int getDialogReadMaxSync(boolean z, long j) {
        int iIntValue = 0;
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                if (z) {
                    sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT outbox_max FROM dialogs WHERE did = " + j, new Object[0]);
                    if (sQLiteCursorQueryFinalized.next()) {
                        iIntValue = sQLiteCursorQueryFinalized.intValue(0);
                    }
                } else {
                    sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT last_mid, inbox_max FROM dialogs WHERE did = " + j, new Object[0]);
                    if (sQLiteCursorQueryFinalized.next()) {
                        int iIntValue2 = sQLiteCursorQueryFinalized.intValue(0);
                        int iIntValue3 = sQLiteCursorQueryFinalized.intValue(1);
                        if (iIntValue3 <= iIntValue2) {
                            iIntValue = iIntValue3;
                        }
                    }
                }
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                }
            }
            sQLiteCursorQueryFinalized.dispose();
            return iIntValue;
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    public void getDialogs(final int i, final int i2, final int i3, boolean z) {
        long[] jArr;
        LongSparseArray drafts;
        int size;
        if (!z || (size = (drafts = getMediaDataController().getDrafts()).size()) <= 0) {
            jArr = null;
        } else {
            jArr = new long[size];
            for (int i4 = 0; i4 < size; i4++) {
                if (((LongSparseArray) drafts.valueAt(i4)).get(0L) != null) {
                    jArr[i4] = drafts.keyAt(i4);
                }
            }
        }
        final long[] jArr2 = jArr;
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda6
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$getDialogs$223(i, i2, i3, jArr2);
            }
        });
    }

    public void getDownloadQueue(final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda192
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$getDownloadQueue$180(i);
            }
        });
    }

    public TLRPC.EncryptedChat getEncryptedChat(long j) {
        try {
            ArrayList<TLRPC.EncryptedChat> arrayList = new ArrayList<>();
            getEncryptedChatsInternal("" + j, arrayList, null);
            if (arrayList.isEmpty()) {
                return null;
            }
            return arrayList.get(0);
        } catch (Exception e) {
            checkSQLException(e);
            return null;
        }
    }

    public void getEncryptedChat(final long j, final CountDownLatch countDownLatch, final ArrayList<TLObject> arrayList) {
        if (countDownLatch == null || arrayList == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda70
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getEncryptedChat$171(j, arrayList, countDownLatch);
            }
        });
    }

    public void getEncryptedChatsInternal(String str, ArrayList<TLRPC.EncryptedChat> arrayList, ArrayList<Long> arrayList2) {
        if (str == null || str.length() == 0 || arrayList == null) {
            return;
        }
        SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data, user, g, authkey, ttl, layer, seq_in, seq_out, use_count, exchange_id, key_date, fprint, fauthkey, khash, in_seq_no, admin_id, mtproto_seq FROM enc_chats WHERE uid IN(%s)", str), new Object[0]);
        while (sQLiteCursorQueryFinalized.next()) {
            try {
                NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                if (nativeByteBufferByteBufferValue != null) {
                    TLRPC.EncryptedChat encryptedChatTLdeserialize = TLRPC.EncryptedChat.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                    nativeByteBufferByteBufferValue.reuse();
                    if (encryptedChatTLdeserialize != null) {
                        long jLongValue = sQLiteCursorQueryFinalized.longValue(1);
                        encryptedChatTLdeserialize.user_id = jLongValue;
                        if (arrayList2 != null && !arrayList2.contains(Long.valueOf(jLongValue))) {
                            arrayList2.add(Long.valueOf(encryptedChatTLdeserialize.user_id));
                        }
                        encryptedChatTLdeserialize.a_or_b = sQLiteCursorQueryFinalized.byteArrayValue(2);
                        encryptedChatTLdeserialize.auth_key = sQLiteCursorQueryFinalized.byteArrayValue(3);
                        encryptedChatTLdeserialize.ttl = sQLiteCursorQueryFinalized.intValue(4);
                        encryptedChatTLdeserialize.layer = sQLiteCursorQueryFinalized.intValue(5);
                        encryptedChatTLdeserialize.seq_in = sQLiteCursorQueryFinalized.intValue(6);
                        encryptedChatTLdeserialize.seq_out = sQLiteCursorQueryFinalized.intValue(7);
                        int iIntValue = sQLiteCursorQueryFinalized.intValue(8);
                        encryptedChatTLdeserialize.key_use_count_in = (short) (iIntValue >> 16);
                        encryptedChatTLdeserialize.key_use_count_out = (short) iIntValue;
                        encryptedChatTLdeserialize.exchange_id = sQLiteCursorQueryFinalized.longValue(9);
                        encryptedChatTLdeserialize.key_create_date = sQLiteCursorQueryFinalized.intValue(10);
                        encryptedChatTLdeserialize.future_key_fingerprint = sQLiteCursorQueryFinalized.longValue(11);
                        encryptedChatTLdeserialize.future_auth_key = sQLiteCursorQueryFinalized.byteArrayValue(12);
                        encryptedChatTLdeserialize.key_hash = sQLiteCursorQueryFinalized.byteArrayValue(13);
                        encryptedChatTLdeserialize.in_seq_no = sQLiteCursorQueryFinalized.intValue(14);
                        long jLongValue2 = sQLiteCursorQueryFinalized.longValue(15);
                        if (jLongValue2 != 0) {
                            encryptedChatTLdeserialize.admin_id = jLongValue2;
                        }
                        encryptedChatTLdeserialize.mtproto_seq = sQLiteCursorQueryFinalized.intValue(16);
                        arrayList.add(encryptedChatTLdeserialize);
                    }
                }
            } catch (Exception e) {
                checkSQLException(e);
            }
        }
        sQLiteCursorQueryFinalized.dispose();
    }

    public int getLastDateValue() {
        ensureOpened();
        return this.lastDateValue;
    }

    public int getLastPtsValue() {
        ensureOpened();
        return this.lastPtsValue;
    }

    public int getLastQtsValue() {
        ensureOpened();
        return this.lastQtsValue;
    }

    public int getLastSecretVersion() {
        ensureOpened();
        return this.lastSecretVersion;
    }

    public int getLastSeqValue() {
        ensureOpened();
        return this.lastSeqValue;
    }

    public int getMainUnreadCount() {
        return this.mainUnreadCount;
    }

    public TLRPC.Message getMessage(final long j, final long j2) {
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        final AtomicReference atomicReference = new AtomicReference();
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda171
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getMessage$137(j, j2, atomicReference, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
        return (TLRPC.Message) atomicReference.get();
    }

    public int getMessageMediaType(TLRPC.Message message) {
        if (!(message instanceof TLRPC.TL_message_secret)) {
            if (message instanceof TLRPC.TL_message) {
                TLRPC.MessageMedia messageMedia = message.media;
                if (((messageMedia instanceof TLRPC.TL_messageMediaPhoto) || (messageMedia instanceof TLRPC.TL_messageMediaDocument)) && messageMedia.ttl_seconds != 0) {
                    return 1;
                }
            }
            return ((message.media instanceof TLRPC.TL_messageMediaPhoto) || MessageObject.isVideoMessage(message)) ? 0 : -1;
        }
        if (!(message.media instanceof TLRPC.TL_messageMediaPhoto) && !MessageObject.isGifMessage(message) && !MessageObject.isVoiceMessage(message) && !MessageObject.isVideoMessage(message) && !MessageObject.isRoundVideoMessage(message)) {
            return -1;
        }
        int i = message.ttl;
        return (i <= 0 || i > 60) ? 0 : 1;
    }

    public TLRPC.Message getMessageWithCustomParamsOnlyInternal(int i, long j) throws Throwable {
        SQLiteCursor sQLiteCursorQueryFinalized;
        boolean z;
        TLRPC.TL_message tL_message = new TLRPC.TL_message();
        SQLiteCursor sQLiteCursorQueryFinalized2 = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT custom_params FROM messages_v2 WHERE mid = ? AND uid = ?", Integer.valueOf(i), Long.valueOf(j));
            } catch (SQLiteException e) {
                e = e;
            }
        } catch (Throwable th) {
            th = th;
        }
        try {
            if (sQLiteCursorQueryFinalized.next()) {
                MessageCustomParamsHelper.readLocalParams(tL_message, sQLiteCursorQueryFinalized.byteBufferValue(0));
                z = true;
            } else {
                z = false;
            }
            sQLiteCursorQueryFinalized.dispose();
            if (!z) {
                sQLiteCursorQueryFinalized2 = this.database.queryFinalized("SELECT custom_params FROM messages_topics WHERE mid = ? AND uid = ?", Integer.valueOf(i), Long.valueOf(j));
                if (sQLiteCursorQueryFinalized2.next()) {
                    MessageCustomParamsHelper.readLocalParams(tL_message, sQLiteCursorQueryFinalized2.byteBufferValue(0));
                }
                sQLiteCursorQueryFinalized2.dispose();
            }
        } catch (SQLiteException e2) {
            e = e2;
            sQLiteCursorQueryFinalized2 = sQLiteCursorQueryFinalized;
            checkSQLException(e);
            if (sQLiteCursorQueryFinalized2 != null) {
                sQLiteCursorQueryFinalized2.dispose();
            }
            return tL_message;
        } catch (Throwable th2) {
            th = th2;
            sQLiteCursorQueryFinalized2 = sQLiteCursorQueryFinalized;
            if (sQLiteCursorQueryFinalized2 != null) {
                sQLiteCursorQueryFinalized2.dispose();
            }
            throw th;
        }
        return tL_message;
    }

    public void getMessages(final long j, final long j2, boolean z, final int i, final int i2, final int i3, final int i4, final int i5, final int i6, final int i7, final long j3, final int i8, final boolean z2, final boolean z3, final Timer timer) {
        final Timer.Task taskStart = Timer.start(timer, "MessagesStorage.getMessages: storageQueue.postRunnable");
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda166
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getMessages$157(taskStart, timer, j, j2, i, i2, i3, i4, i5, i6, i7, j3, i8, z2, z3);
            }
        });
    }

    public void getMessagesCount(final long j, final IntCallback intCallback) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda155
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getMessagesCount$153(j, intCallback);
            }
        });
    }

    /*  JADX ERROR: Type inference failed
        jadx.core.utils.exceptions.JadxOverflowException: Type inference error: updates count limit reached
        	at jadx.core.utils.ErrorsCounter.addError(ErrorsCounter.java:59)
        	at jadx.core.utils.ErrorsCounter.error(ErrorsCounter.java:31)
        	at jadx.core.dex.attributes.nodes.NotificationAttrNode.addError(NotificationAttrNode.java:19)
        	at jadx.core.dex.visitors.typeinference.TypeInferenceVisitor.visit(TypeInferenceVisitor.java:77)
        */
    /* JADX WARN: Not initialized variable reg: 53, insn: 0x04ad: MOVE (r9 I:??[OBJECT, ARRAY]) = (r53 I:??[OBJECT, ARRAY]), block:B:237:0x04a8 */
    /* JADX WARN: Unreachable blocks removed: 2, instructions: 3 */
    /* JADX WARN: Unsupported multi-entry loop pattern (BACK_EDGE: B:1732:0x24ec -> B:1733:0x24fa). Please report as a decompilation issue!!! */
    public java.lang.Runnable getMessagesInternal(long r66, long r68, int r70, int r71, int r72, int r73, int r74, int r75, int r76, long r77, int r79, boolean r80, boolean r81, org.telegram.messenger.Timer r82) {
        /*
            Method dump skipped, instructions count: 9623
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.messenger.MessagesStorage.getMessagesInternal(long, long, int, int, int, int, int, int, int, long, int, boolean, boolean, org.telegram.messenger.Timer):java.lang.Runnable");
    }

    public void getNewTask(final LongSparseArray longSparseArray, final LongSparseArray longSparseArray2) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda81
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$getNewTask$106(longSparseArray, longSparseArray2);
            }
        });
    }

    public void getSavedDialogMaxMessageId(final long j, final IntCallback intCallback) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda208
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getSavedDialogMaxMessageId$51(j, intCallback);
            }
        });
    }

    public int getSecretG() {
        ensureOpened();
        return this.secretG;
    }

    public byte[] getSecretPBytes() {
        ensureOpened();
        return this.secretPBytes;
    }

    public Object[] getSentFile(final String str, final int i) throws InterruptedException {
        if (str == null || str.toLowerCase().endsWith("attheme")) {
            return null;
        }
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        final Object[] objArr = new Object[2];
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda126
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getSentFile$159(str, i, objArr, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
        if (objArr[0] != null) {
            return objArr;
        }
        return null;
    }

    public HashMap<Long, Integer> getSmallGroupsParticipantsCount() {
        HashMap<Long, Integer> map = new HashMap<>();
        SQLiteCursor sQLiteCursorQueryFinalized = null;
        try {
            try {
                sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT uid, info, participants_count FROM chat_settings_v2 WHERE participants_count > 1", new Object[0]);
                while (sQLiteCursorQueryFinalized.next()) {
                    long jLongValue = sQLiteCursorQueryFinalized.longValue(0);
                    NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(1);
                    int iIntValue = sQLiteCursorQueryFinalized.intValue(2);
                    if (nativeByteBufferByteBufferValue != null) {
                        TLRPC.ChatFull chatFullTLdeserialize = TLRPC.ChatFull.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                        nativeByteBufferByteBufferValue.reuse();
                        if (chatFullTLdeserialize instanceof TLRPC.TL_channelFull) {
                            map.put(Long.valueOf(jLongValue), Integer.valueOf(iIntValue));
                        }
                    }
                }
                sQLiteCursorQueryFinalized.dispose();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLiteCursorQueryFinalized != null) {
                    sQLiteCursorQueryFinalized.dispose();
                }
            }
            return map;
        } catch (Throwable th) {
            if (sQLiteCursorQueryFinalized != null) {
                sQLiteCursorQueryFinalized.dispose();
            }
            throw th;
        }
    }

    public DispatchQueue getStorageQueue() {
        return this.storageQueue;
    }

    public void getUnreadMention(final long j, final long j2, final IntCallback intCallback) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda72
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getUnreadMention$151(j2, j, intCallback);
            }
        });
    }

    public void getUnsentMessages(final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda197
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$getUnsentMessages$147(i);
            }
        });
    }

    public TLRPC.User getUser(long j) {
        try {
            ArrayList<TLRPC.User> arrayList = new ArrayList<>();
            ArrayList<Long> arrayList2 = new ArrayList<>();
            arrayList2.add(Long.valueOf(j));
            getUsersInternal(arrayList2, arrayList);
            if (!arrayList.isEmpty()) {
                return arrayList.get(0);
            }
        } catch (Exception e) {
            checkSQLException(e);
        }
        return null;
    }

    public TLRPC.User getUserSync(final long j) {
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        final TLRPC.User[] userArr = new TLRPC.User[1];
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda114
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getUserSync$241(userArr, j, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
        return userArr[0];
    }

    public ArrayList<TLRPC.User> getUsers(ArrayList<Long> arrayList) {
        ArrayList<TLRPC.User> arrayList2 = new ArrayList<>();
        try {
            getUsersInternal(arrayList, arrayList2);
        } catch (Exception e) {
            arrayList2.clear();
            checkSQLException(e);
        }
        return arrayList2;
    }

    public void getUsersInternal(ArrayList<Long> arrayList, ArrayList<TLRPC.User> arrayList2) {
        getUsersInternal(arrayList, arrayList2, false);
    }

    public void getUsersInternal(ArrayList<Long> arrayList, ArrayList<TLRPC.User> arrayList2, boolean z) {
        if (arrayList == null || arrayList.isEmpty() || arrayList2 == null) {
            return;
        }
        if (arrayList.size() > 50) {
            int i = 0;
            while (i < arrayList.size()) {
                Long l = arrayList.get(i);
                l.longValue();
                TLRPC.User user = getMessagesController().getUser(l);
                if (user != null) {
                    arrayList2.add(user);
                    arrayList.remove(i);
                    i--;
                }
                i++;
            }
        }
        if (arrayList.isEmpty()) {
            return;
        }
        SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data, status FROM users WHERE uid IN(%s)", TextUtils.join(",", arrayList)), new Object[0]);
        while (sQLiteCursorQueryFinalized.next()) {
            try {
                NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                if (nativeByteBufferByteBufferValue != null) {
                    TLRPC.User userTLdeserialize = TLRPC.User.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                    nativeByteBufferByteBufferValue.reuse();
                    if (userTLdeserialize != null) {
                        TLRPC.UserStatus userStatus = userTLdeserialize.status;
                        if (userStatus != null) {
                            userStatus.expires = sQLiteCursorQueryFinalized.intValue(1);
                        }
                        arrayList2.add(userTLdeserialize);
                        if (arrayList.size() > 50 && z) {
                            getMessagesController().putUser(userTLdeserialize, true, false);
                        }
                    }
                }
            } catch (Exception e) {
                checkSQLException(e);
            }
        }
        sQLiteCursorQueryFinalized.dispose();
    }

    public void getUsersInternal(HashSet<Long> hashSet, ArrayList<TLRPC.User> arrayList) {
        if (hashSet == null || hashSet.isEmpty() || arrayList == null) {
            return;
        }
        if (hashSet.size() > 50) {
            Iterator<Long> it = hashSet.iterator();
            while (it.hasNext()) {
                TLRPC.User user = getMessagesController().getUser(it.next());
                if (user != null) {
                    arrayList.add(user);
                    it.remove();
                }
            }
        }
        if (hashSet.isEmpty()) {
            return;
        }
        SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data, status FROM users WHERE uid IN(%s)", TextUtils.join(",", hashSet)), new Object[0]);
        while (sQLiteCursorQueryFinalized.next()) {
            try {
                NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                if (nativeByteBufferByteBufferValue != null) {
                    TLRPC.User userTLdeserialize = TLRPC.User.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                    nativeByteBufferByteBufferValue.reuse();
                    if (userTLdeserialize != null) {
                        TLRPC.UserStatus userStatus = userTLdeserialize.status;
                        if (userStatus != null) {
                            userStatus.expires = sQLiteCursorQueryFinalized.intValue(1);
                        }
                        arrayList.add(userTLdeserialize);
                    }
                }
            } catch (Exception e) {
                checkSQLException(e);
            }
        }
        sQLiteCursorQueryFinalized.dispose();
    }

    public void getWallpapers() {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda156
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$getWallpapers$78();
            }
        });
    }

    public void getWidgetDialogIds(final int i, final int i2, final ArrayList<Long> arrayList, final ArrayList<TLRPC.User> arrayList2, final ArrayList<TLRPC.Chat> arrayList3, final boolean z) throws InterruptedException {
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda176
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$getWidgetDialogIds$162(i, arrayList, arrayList2, arrayList3, z, i2, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    public void getWidgetDialogs(final int i, final int i2, final ArrayList<Long> arrayList, final LongSparseArray longSparseArray, final LongSparseArray longSparseArray2, final ArrayList<TLRPC.User> arrayList2, final ArrayList<TLRPC.Chat> arrayList3) throws InterruptedException {
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda138
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$getWidgetDialogs$163(i, arrayList, i2, longSparseArray, longSparseArray2, arrayList3, arrayList2, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
    }

    public boolean hasAuthMessage(final int i) throws InterruptedException {
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        final boolean[] zArr = new boolean[1];
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda186
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$hasAuthMessage$170(i, zArr, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
        return zArr[0];
    }

    public boolean hasInviteMeMessage(final long j) throws InterruptedException {
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        final boolean[] zArr = new boolean[1];
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda76
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$hasInviteMeMessage$138(j, zArr, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
        return zArr[0];
    }

    public boolean isDatabaseMigrationInProgress() {
        return this.databaseMigrationInProgress;
    }

    public void isDialogHasTopMessage(final long j, final Runnable runnable) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda11
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$isDialogHasTopMessage$169(j, runnable);
            }
        });
    }

    public boolean isMigratedChat(final long j) throws InterruptedException {
        final CountDownLatch countDownLatch = new CountDownLatch(1);
        final boolean[] zArr = new boolean[1];
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda8
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$isMigratedChat$136(j, zArr, countDownLatch);
            }
        });
        try {
            countDownLatch.await();
        } catch (Exception e) {
            checkSQLException(e);
        }
        return zArr[0];
    }

    public boolean isMonoForum(long j) {
        int i = this.dialogIsMonoForum.get(j, -1);
        if (i == -1) {
            TLRPC.Chat chat = getChat(-j);
            i = (chat == null || !chat.monoforum) ? 0 : 1;
            this.dialogIsMonoForum.put(j, i);
        }
        return i == 1;
    }

    public void loadChannelAdmins(final long j) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda5
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$loadChannelAdmins$118(j);
            }
        });
    }

    public TLRPC.ChatFull loadChatInfo(long j, boolean z, CountDownLatch countDownLatch, boolean z2, boolean z3) {
        return loadChatInfo(j, z, countDownLatch, z2, z3, 0);
    }

    public TLRPC.ChatFull loadChatInfo(final long j, final boolean z, final CountDownLatch countDownLatch, final boolean z2, final boolean z3, final int i) {
        final TLRPC.ChatFull[] chatFullArr = new TLRPC.ChatFull[1];
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda169
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$loadChatInfo$139(chatFullArr, j, z, z2, z3, i, countDownLatch);
            }
        });
        if (countDownLatch != null) {
            try {
                countDownLatch.await();
            } catch (Throwable unused) {
            }
        }
        return chatFullArr[0];
    }

    public TLRPC.ChatFull loadChatInfoInQueue(long j, boolean z, boolean z2, boolean z3, int i) {
        return loadChatInfoInternal(j, z, z2, z3, i);
    }

    public void loadGroupedMessagesForTopicUpdates(ArrayList<TopicsController.TopicUpdate> arrayList) {
        if (arrayList == null) {
            return;
        }
        try {
            LongSparseArray longSparseArray = new LongSparseArray();
            for (int i = 0; i < arrayList.size(); i++) {
                if (!arrayList.get(i).reloadTopic && !arrayList.get(i).onlyCounters && arrayList.get(i).topMessage != null) {
                    long j = arrayList.get(i).topMessage.grouped_id;
                    if (j != 0) {
                        ArrayList arrayList2 = (ArrayList) longSparseArray.get(j);
                        if (arrayList2 == null) {
                            arrayList2 = new ArrayList();
                            longSparseArray.put(j, arrayList2);
                        }
                        arrayList2.add(arrayList.get(i));
                    }
                }
            }
            for (int i2 = 0; i2 < longSparseArray.size(); i2++) {
                long jKeyAt = longSparseArray.keyAt(i2);
                ArrayList arrayList3 = (ArrayList) longSparseArray.valueAt(i2);
                SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data FROM messages_v2 WHERE uid = %s AND group_id = %s ORDER BY date DESC", Long.valueOf(((TopicsController.TopicUpdate) arrayList3.get(0)).dialogId), Long.valueOf(jKeyAt)), new Object[0]);
                ArrayList<MessageObject> arrayList4 = null;
                while (sQLiteCursorQueryFinalized.next()) {
                    NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                    TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                    if (messageTLdeserialize != null) {
                        messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, UserConfig.getInstance(this.currentAccount).clientUserId);
                    }
                    if (arrayList4 == null) {
                        arrayList4 = new ArrayList<>();
                    }
                    arrayList4.add(new MessageObject(this.currentAccount, messageTLdeserialize, false, false));
                }
                sQLiteCursorQueryFinalized.dispose();
                for (int i3 = 0; i3 < arrayList3.size(); i3++) {
                    ((TopicsController.TopicUpdate) arrayList3.get(i3)).groupedMessages = arrayList4;
                }
            }
        } catch (Throwable th) {
            checkSQLException(th);
        }
    }

    public void loadGroupedMessagesForTopics(long j, ArrayList<TLRPC.TL_forumTopic> arrayList) {
        if (arrayList == null) {
            return;
        }
        try {
            LongSparseArray longSparseArray = new LongSparseArray();
            for (int i = 0; i < arrayList.size(); i++) {
                if (arrayList.get(i).topMessage != null) {
                    long j2 = arrayList.get(i).topMessage.grouped_id;
                    if (j2 != 0) {
                        ArrayList arrayList2 = (ArrayList) longSparseArray.get(j2);
                        if (arrayList2 == null) {
                            arrayList2 = new ArrayList();
                            longSparseArray.put(j2, arrayList2);
                        }
                        arrayList2.add(arrayList.get(i));
                    }
                }
            }
            for (int i2 = 0; i2 < longSparseArray.size(); i2++) {
                long jKeyAt = longSparseArray.keyAt(i2);
                ArrayList arrayList3 = (ArrayList) longSparseArray.valueAt(i2);
                SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data FROM messages_v2 WHERE uid = %s AND group_id = %s ORDER BY date DESC", Long.valueOf(j), Long.valueOf(jKeyAt)), new Object[0]);
                ArrayList arrayList4 = null;
                while (sQLiteCursorQueryFinalized.next()) {
                    NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                    TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                    if (messageTLdeserialize != null) {
                        messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, UserConfig.getInstance(this.currentAccount).clientUserId);
                    }
                    if (arrayList4 == null) {
                        arrayList4 = new ArrayList();
                    }
                    arrayList4.add(new MessageObject(this.currentAccount, messageTLdeserialize, false, false));
                }
                sQLiteCursorQueryFinalized.dispose();
                for (int i3 = 0; i3 < arrayList3.size(); i3++) {
                    ((TLRPC.TL_forumTopic) arrayList3.get(i3)).groupedMessages = arrayList4;
                }
            }
        } catch (Throwable th) {
            checkSQLException(th);
        }
    }

    public void loadMessageAttachPaths(final ArrayList<MessageObject> arrayList, final Runnable runnable) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda132
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$loadMessageAttachPaths$218(arrayList, runnable);
            }
        });
    }

    /* JADX WARN: Code restructure failed: missing block: B:76:0x016c, code lost:
    
        r11 = r20;
     */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:39:0x00f4 A[Catch: all -> 0x0136, Exception -> 0x013a, TryCatch #4 {Exception -> 0x013a, all -> 0x0136, blocks: (B:37:0x00ee, B:39:0x00f4, B:41:0x00fa, B:43:0x0121, B:50:0x0145, B:52:0x0152, B:54:0x0159, B:49:0x013e, B:58:0x0173), top: B:74:0x00ee }] */
    /* JADX WARN: Removed duplicated region for block: B:58:0x0173 A[Catch: all -> 0x0136, Exception -> 0x013a, TRY_LEAVE, TryCatch #4 {Exception -> 0x013a, all -> 0x0136, blocks: (B:37:0x00ee, B:39:0x00f4, B:41:0x00fa, B:43:0x0121, B:50:0x0145, B:52:0x0152, B:54:0x0159, B:49:0x013e, B:58:0x0173), top: B:74:0x00ee }] */
    /* JADX WARN: Removed duplicated region for block: B:63:0x0194  */
    /* JADX WARN: Type inference failed for: r10v10 */
    /* JADX WARN: Type inference failed for: r10v3, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r10v8 */
    /* JADX WARN: Type inference failed for: r3v6 */
    /* JADX WARN: Unsupported multi-entry loop pattern (BACK_EDGE: B:57:0x016e -> B:56:0x016c). Please report as a decompilation issue!!! */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    protected void loadReplyMessages(LongSparseArray longSparseArray, LongSparseArray longSparseArray2, ArrayList<Long> arrayList, ArrayList<Long> arrayList2, int i) throws Throwable {
        boolean z;
        int i2;
        int i3;
        boolean z2;
        int i4;
        SQLiteCursor sQLiteCursorQueryFinalized;
        int i5;
        ?? r10;
        long j;
        int i6;
        LongSparseArray longSparseArray3 = longSparseArray;
        int i7 = 2;
        int i8 = 1;
        if (longSparseArray.isEmpty()) {
            return;
        }
        boolean z3 = i == 1;
        boolean z4 = i == 5;
        long clientUserId = getUserConfig().getClientUserId();
        int size = longSparseArray.size();
        int i9 = 0;
        while (i9 < size) {
            long jKeyAt = longSparseArray3.keyAt(i9);
            SparseArray sparseArray = (SparseArray) longSparseArray3.valueAt(i9);
            ArrayList arrayList3 = (ArrayList) longSparseArray2.get(jKeyAt);
            if (arrayList3 == null) {
                z = z3;
                i2 = size;
                i3 = i9;
            } else {
                int i10 = 0;
                SQLiteCursor sQLiteCursor = null;
                while (i10 < i7) {
                    if (i10 != i8 || z3) {
                        boolean z5 = i10 == i8;
                        try {
                            if (z4) {
                                try {
                                    try {
                                        z2 = z3;
                                        i4 = size;
                                        sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data, mid, date, topic_id FROM quick_replies_messages WHERE mid IN(%s) AND topic_id = %d", TextUtils.join(",", arrayList3), Long.valueOf(jKeyAt)), new Object[0]);
                                        i5 = i9;
                                    } catch (Exception e) {
                                        throw e;
                                    }
                                } catch (Throwable th) {
                                    th = th;
                                    if (sQLiteCursor != null) {
                                        sQLiteCursor.dispose();
                                    }
                                    throw th;
                                }
                            } else {
                                z2 = z3;
                                i4 = size;
                                if (z5) {
                                    i5 = i9;
                                    sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data, mid, date, uid FROM scheduled_messages_v2 WHERE mid IN(%s) AND uid = %d", TextUtils.join(",", arrayList3), Long.valueOf(jKeyAt)), new Object[0]);
                                } else {
                                    i5 = i9;
                                    r10 = 0;
                                    sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data, mid, date, uid FROM messages_v2 WHERE mid IN(%s) AND uid = %d", TextUtils.join(",", arrayList3), Long.valueOf(jKeyAt)), new Object[0]);
                                    if (sQLiteCursorQueryFinalized.next()) {
                                        NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(r10);
                                        if (nativeByteBufferByteBufferValue != 0) {
                                            TLRPC.Message messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(r10), r10);
                                            long j2 = jKeyAt;
                                            messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                                            nativeByteBufferByteBufferValue.reuse();
                                            messageTLdeserialize.id = sQLiteCursorQueryFinalized.intValue(1);
                                            messageTLdeserialize.date = sQLiteCursorQueryFinalized.intValue(2);
                                            if (z4) {
                                                messageTLdeserialize.dialog_id = clientUserId;
                                                messageTLdeserialize.flags |= 1073741824;
                                                messageTLdeserialize.quick_reply_shortcut_id = sQLiteCursorQueryFinalized.intValue(3);
                                            } else {
                                                messageTLdeserialize.dialog_id = sQLiteCursorQueryFinalized.longValue(3);
                                            }
                                            addUsersAndChatsFromMessage(messageTLdeserialize, arrayList, arrayList2, null);
                                            ArrayList arrayList4 = (ArrayList) sparseArray.get(messageTLdeserialize.id);
                                            if (arrayList4 != null) {
                                                int size2 = arrayList4.size();
                                                for (int i11 = 0; i11 < size2; i11++) {
                                                    ((TLRPC.Message) arrayList4.get(i11)).replyMessage = messageTLdeserialize;
                                                    MessageObject.getDialogId(messageTLdeserialize);
                                                }
                                                jKeyAt = j2;
                                            } else {
                                                jKeyAt = j2;
                                            }
                                        }
                                    } else {
                                        j = jKeyAt;
                                        sQLiteCursorQueryFinalized.dispose();
                                        sQLiteCursor = sQLiteCursorQueryFinalized;
                                        i6 = 1;
                                    }
                                }
                            }
                            if (sQLiteCursorQueryFinalized.next()) {
                            }
                        } catch (Exception e2) {
                            throw e2;
                        } catch (Throwable th2) {
                            th = th2;
                            sQLiteCursor = sQLiteCursorQueryFinalized;
                            if (sQLiteCursor != null) {
                            }
                            throw th;
                        }
                        r10 = 0;
                        sQLiteCursorQueryFinalized = sQLiteCursorQueryFinalized;
                    } else {
                        z2 = z3;
                        i4 = size;
                        i5 = i9;
                        j = jKeyAt;
                        i6 = 1;
                    }
                    i10 += i6;
                    i9 = i5;
                    z3 = z2;
                    size = i4;
                    jKeyAt = j;
                    i7 = 2;
                    i8 = 1;
                }
                z = z3;
                i2 = size;
                i3 = i9;
                if (sQLiteCursor != null) {
                    sQLiteCursor.dispose();
                }
            }
            i9 = i3 + 1;
            longSparseArray3 = longSparseArray;
            z3 = z;
            size = i2;
            i7 = 2;
            i8 = 1;
        }
    }

    public void loadTopics(final long j, final Consumer<ArrayList<TLRPC.TL_forumTopic>> consumer) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda59
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$loadTopics$49(j, consumer);
            }
        });
    }

    public void loadUnreadMessages() {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda177
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$loadUnreadMessages$74();
            }
        });
    }

    public void loadUserInfo(final TLRPC.User user, final boolean z, final int i, int i2) {
        if (user == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda206
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$loadUserInfo$124(user, z, i);
            }
        });
    }

    public ArrayList<TLRPC.UserFull> loadUserInfos(HashSet<Long> hashSet) {
        ArrayList<TLRPC.UserFull> arrayList = new ArrayList<>();
        try {
            String strJoin = TextUtils.join(",", hashSet);
            SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT info, pinned FROM user_settings WHERE uid IN(" + strJoin + ")", new Object[0]);
            while (sQLiteCursorQueryFinalized.next()) {
                NativeByteBuffer nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                if (nativeByteBufferByteBufferValue != null) {
                    TLRPC.UserFull userFullTLdeserialize = TLRPC.UserFull.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                    userFullTLdeserialize.pinned_msg_id = sQLiteCursorQueryFinalized.intValue(1);
                    arrayList.add(userFullTLdeserialize);
                    nativeByteBufferByteBufferValue.reuse();
                }
            }
            sQLiteCursorQueryFinalized.dispose();
        } catch (Exception e) {
            checkSQLException(e);
        }
        return arrayList;
    }

    /* JADX WARN: Can't wrap try/catch for region: R(21:6|(1:15)|(1:17)(1:18)|19|(1:21)|22|482|(7:24|484|25|26|503|27|28)(3:40|486|41)|541|(5:44|(2:56|(2:58|(2:60|(3:74|81|537))(2:75|(2:77|535)(2:78|(3:80|81|537)(1:536))))(1:(2:85|(2:87|540)(1:539))(1:538)))(1:529)|49|519|42)|527|88|89|(5:91|517|92|(0)(5:95|515|104|105|(22:114|513|115|(3:117|(1:119)|(2:121|122))|123|124|(9:126|127|511|128|129|130|(15:133|(1:135)|136|137|(3:139|505|140)(1:146)|147|(1:(6:149|(2:151|(0)(5:(2:154|(2:156|(1:158)))|(1:163)(1:162)|(2:167|(2:169|(1:548))(0))(1:184)|174|185))(1:164)|165|(0)(0)|174|185)(3:546|186|545))|175|(1:177)|178|(1:180)(1:181)|182|543|183|131)|542|187)(1:193)|499|194|(9:490|196|197|523|198|199|(9:202|(1:204)|205|(4:207|(2:209|(3:216|219|(4:221|(2:(2:224|(1:226))(1:218)|237)(1:228)|227|(5:238|(7:240|241|(1:243)|246|(1:248)|249|(2:251|(1:574)(2:(2:254|(2:256|(2:569|258))(1:575))|259))(1:573))(2:572|261)|262|(1:567)(5:268|(1:270)(1:272)|271|273|565)|274)(1:237))(1:571))(4:(5:212|(4:214|(0)|218|237)|216|219|(0)(0))|217|218|237))(0)|491|260)|570|275|568|274|200)|564|276)(1:288)|497|289|(1:366)(9:495|293|294|501|295|296|(11:299|(1:301)(1:302)|303|(1:305)(1:310)|311|(1:(2:313|(2:315|(2:328|(6:552|330|(1:332)(1:333)|334|(1:336)(1:337)|(1:1)(8:340|(1:342)|343|(1:345)|346|(1:348)(1:349)|350|550))(1:353))(3:(4:318|(2:320|(1:322))|328|(0)(0))|(1:327)(1:326)|(0)(0)))(0))(1:553))|352|551|351|297|509)|549|354)|493|367|(6:507|370|(1:374)|375|380|368)|554|381|(3:384|385|382)|555|386|(1:579)(5:394|(4:397|(3:558|399|561)(9:557|400|(1:402)(1:403)|404|(1:406)(1:410)|411|(1:(4:413|(2:415|(0)(3:(2:418|(2:420|(1:422)))|(1:426)|(3:562|430|(5:432|(1:434)|435|(1:437)(1:438)|439)(0))(1:441)))(1:427)|428|(0)(0))(2:563|442))|440|560)|559|395)|556|443|581))(0))|(2:478|480)(1:582))(1:100)|94|521|101|(0)(1:110)|105|(14:112|114|513|115|(0)|123|124|(0)(0)|499|194|(0)(0)|497|289|(11:291|366|493|367|(1:368)|554|381|(1:382)|555|386|(2:388|577)(1:576))(0))(0)|(0)(0)) */
    /* JADX WARN: Code restructure failed: missing block: B:465:0x08c3, code lost:
    
        r0 = th;
     */
    /* JADX WARN: Code restructure failed: missing block: B:467:0x08c7, code lost:
    
        r0 = e;
     */
    /* JADX WARN: Code restructure failed: missing block: B:468:0x08c8, code lost:
    
        r12 = null;
        r2 = r28;
     */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:114:0x01d4  */
    /* JADX WARN: Removed duplicated region for block: B:117:0x01dc A[Catch: all -> 0x01bc, Exception -> 0x01c1, TRY_ENTER, TryCatch #29 {Exception -> 0x01c1, all -> 0x01bc, blocks: (B:112:0x01cc, B:117:0x01dc, B:119:0x01ed, B:121:0x01fe, B:104:0x019f), top: B:515:0x019f }] */
    /* JADX WARN: Removed duplicated region for block: B:126:0x0224 A[Catch: all -> 0x0189, Exception -> 0x018f, TRY_ENTER, TRY_LEAVE, TryCatch #28 {Exception -> 0x018f, all -> 0x0189, blocks: (B:92:0x017d, B:126:0x0224, B:129:0x023a), top: B:517:0x017d }] */
    /* JADX WARN: Removed duplicated region for block: B:167:0x02d1 A[Catch: all -> 0x0101, Exception -> 0x0108, TryCatch #27 {Exception -> 0x0108, all -> 0x0101, blocks: (B:42:0x00ce, B:44:0x00d4, B:47:0x00f2, B:56:0x010d, B:58:0x0113, B:72:0x012b, B:74:0x0135, B:81:0x014f, B:78:0x013f, B:80:0x014a, B:85:0x0158, B:87:0x0166, B:88:0x016e, B:131:0x0246, B:133:0x024c, B:136:0x0260, B:149:0x0282, B:151:0x028a, B:154:0x02a3, B:156:0x02a9, B:160:0x02c1, B:167:0x02d1, B:169:0x02dc, B:172:0x02ef, B:185:0x035a, B:175:0x02fd, B:177:0x0309, B:180:0x0313, B:182:0x0343, B:181:0x031c, B:187:0x036e, B:200:0x03a6, B:202:0x03ac, B:207:0x03c5, B:209:0x03cd, B:212:0x03e4, B:214:0x03ea, B:219:0x0407, B:221:0x040d, B:224:0x0420, B:230:0x0439, B:235:0x0443, B:238:0x044f), top: B:519:0x00ce }] */
    /* JADX WARN: Removed duplicated region for block: B:184:0x0353  */
    /* JADX WARN: Removed duplicated region for block: B:193:0x037c  */
    /* JADX WARN: Removed duplicated region for block: B:216:0x03ff  */
    /* JADX WARN: Removed duplicated region for block: B:221:0x040d A[Catch: all -> 0x0101, Exception -> 0x0108, TryCatch #27 {Exception -> 0x0108, all -> 0x0101, blocks: (B:42:0x00ce, B:44:0x00d4, B:47:0x00f2, B:56:0x010d, B:58:0x0113, B:72:0x012b, B:74:0x0135, B:81:0x014f, B:78:0x013f, B:80:0x014a, B:85:0x0158, B:87:0x0166, B:88:0x016e, B:131:0x0246, B:133:0x024c, B:136:0x0260, B:149:0x0282, B:151:0x028a, B:154:0x02a3, B:156:0x02a9, B:160:0x02c1, B:167:0x02d1, B:169:0x02dc, B:172:0x02ef, B:185:0x035a, B:175:0x02fd, B:177:0x0309, B:180:0x0313, B:182:0x0343, B:181:0x031c, B:187:0x036e, B:200:0x03a6, B:202:0x03ac, B:207:0x03c5, B:209:0x03cd, B:212:0x03e4, B:214:0x03ea, B:219:0x0407, B:221:0x040d, B:224:0x0420, B:230:0x0439, B:235:0x0443, B:238:0x044f), top: B:519:0x00ce }] */
    /* JADX WARN: Removed duplicated region for block: B:288:0x051a  */
    /* JADX WARN: Removed duplicated region for block: B:328:0x05cc  */
    /* JADX WARN: Removed duplicated region for block: B:353:0x070a A[Catch: all -> 0x0575, Exception -> 0x0579, LOOP:4: B:312:0x0580->B:353:0x070a, LOOP_END, TryCatch #32 {Exception -> 0x0579, all -> 0x0575, blocks: (B:297:0x0548, B:299:0x054e, B:303:0x0567, B:305:0x056e, B:313:0x0582, B:315:0x058a, B:318:0x05a3, B:320:0x05a9, B:324:0x05c1, B:330:0x05cf, B:332:0x05d6, B:334:0x05e5, B:336:0x05eb, B:340:0x05fd, B:342:0x068e, B:343:0x0690, B:345:0x069c, B:348:0x06a6, B:350:0x06f6, B:349:0x06cd, B:353:0x070a, B:354:0x071a), top: B:509:0x0548 }] */
    /* JADX WARN: Removed duplicated region for block: B:366:0x0736  */
    /* JADX WARN: Removed duplicated region for block: B:384:0x0770 A[Catch: all -> 0x0757, Exception -> 0x075b, TRY_ENTER, TRY_LEAVE, TryCatch #33 {Exception -> 0x075b, all -> 0x0757, blocks: (B:370:0x0744, B:372:0x074e, B:374:0x0752, B:384:0x0770), top: B:507:0x0744 }] */
    /* JADX WARN: Removed duplicated region for block: B:441:0x0891 A[Catch: all -> 0x0461, Exception -> 0x07de, LOOP:8: B:412:0x07e8->B:441:0x0891, LOOP_END, TryCatch #41 {Exception -> 0x07de, all -> 0x0461, blocks: (B:260:0x04b1, B:241:0x0455, B:246:0x0464, B:249:0x0477, B:251:0x047d, B:254:0x0494, B:256:0x049a, B:262:0x04b9, B:264:0x04bd, B:266:0x04c3, B:268:0x04c9, B:270:0x04d6, B:273:0x04e1, B:272:0x04de, B:276:0x04f6, B:395:0x07a5, B:397:0x07ab, B:400:0x07b7, B:404:0x07d0, B:406:0x07d8, B:413:0x07ea, B:415:0x07f2, B:418:0x080b, B:420:0x0811, B:424:0x0829, B:430:0x0836, B:432:0x083d, B:434:0x084c, B:437:0x0856, B:439:0x0887, B:438:0x0860, B:441:0x0891, B:443:0x089f), top: B:491:0x04b1 }] */
    /* JADX WARN: Removed duplicated region for block: B:473:0x08d5  */
    /* JADX WARN: Removed duplicated region for block: B:478:0x08de  */
    /* JADX WARN: Removed duplicated region for block: B:490:0x038a A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:507:0x0744 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:552:0x05cf A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:562:0x0836 A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:571:0x04f1 A[EDGE_INSN: B:571:0x04f1->B:275:0x04f1 BREAK  A[LOOP:10: B:206:0x03c3->B:260:0x04b1], SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:580:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:582:? A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:95:0x0186 A[PHI: r6
      0x0186: PHI (r6v4 java.lang.String) = (r6v41 java.lang.String), (r6v42 java.lang.String) binds: [B:102:0x019c, B:93:0x0181] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Type inference failed for: r11v44 */
    /* JADX WARN: Type inference failed for: r11v45 */
    /* JADX WARN: Type inference failed for: r11v50 */
    /* JADX WARN: Type inference failed for: r11v52 */
    /* JADX WARN: Type inference failed for: r31v0, types: [java.util.ArrayList, java.util.ArrayList<java.lang.Object>] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public void localSearch(int i, String str, ArrayList<Object> arrayList, ArrayList<CharSequence> arrayList2, ArrayList<TLRPC.User> arrayList3, ArrayList<Long> arrayList4, int i2) {
        MessagesStorage messagesStorage;
        SQLiteCursor sQLiteCursor;
        SQLiteCursor sQLiteCursor2;
        Throwable th;
        SQLiteCursor sQLiteCursor3;
        Exception exc;
        Throwable th2;
        String lowerCase;
        String str2;
        int i3;
        String str3;
        SQLiteCursor sQLiteCursorQueryFinalized;
        Throwable th3;
        Exception e;
        String str4;
        MessagesStorage messagesStorage2;
        int i4;
        ArrayList arrayList5;
        String str5;
        int i5;
        int i6;
        int i7;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        String translitString;
        String str6;
        int i8;
        int i9;
        ArrayList arrayList6;
        int i10;
        int i11;
        String str7;
        String str8;
        int i12;
        int i13;
        TLRPC.EncryptedChat encryptedChatTLdeserialize;
        TLRPC.User userTLdeserialize;
        String strSubstring;
        int i14;
        String str9;
        ?? r11;
        String str10;
        String str11;
        String str12;
        TLRPC.User userTLdeserialize2;
        Long lValueOf;
        ArrayList arrayList7;
        int i15 = i;
        ArrayList<Long> arrayList8 = arrayList4;
        long clientUserId = UserConfig.getInstance(this.currentAccount).getClientUserId();
        try {
            lowerCase = str.trim().toLowerCase();
        } catch (Exception e2) {
            e = e2;
            messagesStorage = this;
            sQLiteCursor = null;
        } catch (Throwable th4) {
            th = th4;
        }
        if (TextUtils.isEmpty(lowerCase)) {
            return;
        }
        String lowerCase2 = LocaleController.getString(R.string.SavedMessages).toLowerCase();
        String str13 = "saved messages";
        String lowerCase3 = LocaleController.getString(R.string.RepliesTitle).toLowerCase();
        String translitString2 = LocaleController.getInstance().getTranslitString(lowerCase);
        if (lowerCase.equals(translitString2) || translitString2.length() == 0) {
            translitString2 = null;
        }
        int i16 = (translitString2 != null ? 1 : 0) + 1;
        String[] strArr = new String[i16];
        strArr[0] = lowerCase;
        if (translitString2 != null) {
            strArr[1] = translitString2;
        }
        ArrayList arrayList9 = new ArrayList();
        ArrayList arrayList10 = new ArrayList();
        ArrayList arrayList11 = new ArrayList();
        LongSparseArray longSparseArray = new LongSparseArray();
        try {
            if (i2 >= 0) {
                i3 = i16;
                try {
                    str2 = "replies";
                    str3 = lowerCase3;
                } catch (Throwable th5) {
                    th = th5;
                    th = th;
                    sQLiteCursor2 = null;
                    sQLiteCursor3 = sQLiteCursor2;
                    if (sQLiteCursor3 != null) {
                    }
                }
                try {
                    sQLiteCursorQueryFinalized = getDatabase().queryFinalized("SELECT did, date FROM dialogs WHERE folder_id = ? ORDER BY date DESC LIMIT 600", Integer.valueOf(i2));
                } catch (Exception e3) {
                    e = e3;
                    exc = e;
                    sQLiteCursor3 = null;
                    messagesStorage = this;
                    try {
                        messagesStorage.checkSQLException(exc);
                        if (sQLiteCursor3 == null) {
                        }
                    } catch (Throwable th6) {
                        th2 = th6;
                        th = th2;
                        if (sQLiteCursor3 != null) {
                        }
                    }
                } catch (Throwable th7) {
                    th3 = th7;
                    th = th3;
                    sQLiteCursor3 = null;
                    if (sQLiteCursor3 != null) {
                    }
                }
            } else {
                str2 = "replies";
                i3 = i16;
                str3 = lowerCase3;
                try {
                    sQLiteCursorQueryFinalized = getDatabase().queryFinalized("SELECT did, date FROM dialogs ORDER BY date DESC LIMIT 600", new Object[0]);
                } catch (Throwable th8) {
                    th = th8;
                    sQLiteCursor2 = null;
                    th = th;
                    sQLiteCursor3 = sQLiteCursor2;
                    if (sQLiteCursor3 != null) {
                    }
                }
            }
            while (sQLiteCursorQueryFinalized.next()) {
                try {
                    String str14 = lowerCase;
                    long jLongValue = sQLiteCursorQueryFinalized.longValue(0);
                    DialogsSearchAdapter.DialogSearchResult dialogSearchResult = new DialogsSearchAdapter.DialogSearchResult();
                    String str15 = str13;
                    dialogSearchResult.date = sQLiteCursorQueryFinalized.intValue(1);
                    longSparseArray.put(jLongValue, dialogSearchResult);
                    if (i15 != 15 || (arrayList8 != null && arrayList8.contains(Long.valueOf(jLongValue)))) {
                        if (DialogObject.isEncryptedDialog(jLongValue)) {
                            if (i15 == 0 || i15 == 3) {
                                int encryptedChatId = DialogObject.getEncryptedChatId(jLongValue);
                                if (!arrayList11.contains(Integer.valueOf(encryptedChatId))) {
                                    arrayList11.add(Integer.valueOf(encryptedChatId));
                                }
                            }
                        } else if (DialogObject.isUserDialog(jLongValue)) {
                            if ((i15 != 4 || jLongValue != clientUserId) && i15 != 6 && i15 != 5 && i15 != 2 && !arrayList9.contains(Long.valueOf(jLongValue))) {
                                lValueOf = Long.valueOf(jLongValue);
                                arrayList7 = arrayList9;
                                arrayList7.add(lValueOf);
                            }
                        } else if (i15 != 4) {
                            long j = -jLongValue;
                            if (!arrayList10.contains(Long.valueOf(j))) {
                                lValueOf = Long.valueOf(j);
                                arrayList7 = arrayList10;
                                arrayList7.add(lValueOf);
                            }
                        }
                    }
                    lowerCase = str14;
                    str13 = str15;
                } catch (Exception e4) {
                    e = e4;
                    messagesStorage = this;
                } catch (Throwable th9) {
                    th2 = th9;
                }
            }
            String str16 = str13;
            String str17 = lowerCase;
            sQLiteCursorQueryFinalized.dispose();
            if (i15 != 4) {
                str4 = str17;
                try {
                    if (lowerCase2.startsWith(str4)) {
                        messagesStorage2 = this;
                        try {
                            TLRPC.User currentUser = UserConfig.getInstance(messagesStorage2.currentAccount).getCurrentUser();
                            DialogsSearchAdapter.DialogSearchResult dialogSearchResult2 = new DialogsSearchAdapter.DialogSearchResult();
                            dialogSearchResult2.date = Integer.MAX_VALUE;
                            dialogSearchResult2.name = lowerCase2;
                            dialogSearchResult2.object = currentUser;
                            longSparseArray.put(currentUser.id, dialogSearchResult2);
                            i4 = 1;
                            if (i15 != 4 || !str3.startsWith(str4)) {
                                try {
                                    if (str2.startsWith(str4)) {
                                        TLRPC.User user = getMessagesController().getUser((Long) 708513L);
                                        if (user == null) {
                                            user = getMessagesController().getUser(Long.valueOf(UserObject.REPLY_BOT));
                                        }
                                        if (user != null) {
                                            DialogsSearchAdapter.DialogSearchResult dialogSearchResult3 = new DialogsSearchAdapter.DialogSearchResult();
                                            dialogSearchResult3.date = Integer.MAX_VALUE;
                                            dialogSearchResult3.name = LocaleController.getString(R.string.RepliesTitle);
                                            dialogSearchResult3.object = user;
                                            longSparseArray.put(user.id, dialogSearchResult3);
                                            i4++;
                                        }
                                    }
                                    String str18 = ";;;";
                                    if (arrayList9.isEmpty()) {
                                        arrayList5 = arrayList11;
                                        int i17 = i4;
                                        try {
                                            SQLiteCursor sQLiteCursorQueryFinalized2 = getDatabase().queryFinalized(String.format(Locale.US, "SELECT data, status, name FROM users WHERE uid IN(%s)", TextUtils.join(",", arrayList9)), new Object[0]);
                                            i4 = i17;
                                            while (sQLiteCursorQueryFinalized2.next()) {
                                                String strStringValue = sQLiteCursorQueryFinalized2.stringValue(2);
                                                String translitString3 = LocaleController.getInstance().getTranslitString(strStringValue);
                                                if (strStringValue.equals(translitString3)) {
                                                    translitString3 = null;
                                                }
                                                int iLastIndexOf = strStringValue.lastIndexOf(str18);
                                                if (iLastIndexOf != -1) {
                                                    try {
                                                        strSubstring = strStringValue.substring(iLastIndexOf + 3);
                                                    } catch (Exception e5) {
                                                        e = e5;
                                                        sQLiteCursor3 = sQLiteCursorQueryFinalized2;
                                                        messagesStorage = messagesStorage2;
                                                        exc = e;
                                                        messagesStorage.checkSQLException(exc);
                                                        if (sQLiteCursor3 == null) {
                                                        }
                                                    } catch (Throwable th10) {
                                                        th2 = th10;
                                                        sQLiteCursor3 = sQLiteCursorQueryFinalized2;
                                                        th = th2;
                                                        if (sQLiteCursor3 != null) {
                                                        }
                                                    }
                                                } else {
                                                    strSubstring = null;
                                                }
                                                String str19 = str18;
                                                int i18 = i3;
                                                int i19 = 0;
                                                boolean z = false;
                                                while (true) {
                                                    if (i19 >= i18) {
                                                        i14 = i18;
                                                        break;
                                                    }
                                                    str9 = strArr[i19];
                                                    if (strStringValue.startsWith(str9)) {
                                                        i14 = i18;
                                                    } else {
                                                        i14 = i18;
                                                        if (!strStringValue.contains(" " + str9)) {
                                                            if (translitString3 != null) {
                                                                if (!translitString3.startsWith(str9)) {
                                                                    if (translitString3.contains(" " + str9)) {
                                                                    }
                                                                }
                                                            }
                                                            r11 = (strSubstring == null || !strSubstring.startsWith(str9)) ? z : 2;
                                                            if (r11 == 0) {
                                                                str10 = translitString3;
                                                                str11 = strStringValue;
                                                                NativeByteBuffer nativeByteBufferByteBufferValue2 = sQLiteCursorQueryFinalized2.byteBufferValue(0);
                                                                if (nativeByteBufferByteBufferValue2 != null) {
                                                                    str12 = strSubstring;
                                                                    userTLdeserialize2 = TLRPC.User.TLdeserialize(nativeByteBufferByteBufferValue2, nativeByteBufferByteBufferValue2.readInt32(false), false);
                                                                    nativeByteBufferByteBufferValue2.reuse();
                                                                    if (i15 != 15 || (arrayList8 != null && arrayList8.contains(Long.valueOf(userTLdeserialize2.id)))) {
                                                                        break;
                                                                    }
                                                                }
                                                            } else {
                                                                str10 = translitString3;
                                                                str11 = strStringValue;
                                                                str12 = strSubstring;
                                                            }
                                                            i19++;
                                                            i15 = i;
                                                            translitString3 = str10;
                                                            strStringValue = str11;
                                                            strSubstring = str12;
                                                            z = r11;
                                                            i18 = i14;
                                                        }
                                                    }
                                                    r11 = 1;
                                                    if (r11 == 0) {
                                                    }
                                                    i19++;
                                                    i15 = i;
                                                    translitString3 = str10;
                                                    strStringValue = str11;
                                                    strSubstring = str12;
                                                    z = r11;
                                                    i18 = i14;
                                                }
                                                DialogsSearchAdapter.DialogSearchResult dialogSearchResult4 = (DialogsSearchAdapter.DialogSearchResult) longSparseArray.get(userTLdeserialize2.id);
                                                TLRPC.UserStatus userStatus = userTLdeserialize2.status;
                                                if (userStatus != null) {
                                                    userStatus.expires = sQLiteCursorQueryFinalized2.intValue(1);
                                                }
                                                dialogSearchResult4.name = r11 == 1 ? AndroidUtilities.generateSearchName(userTLdeserialize2.first_name, userTLdeserialize2.last_name, str9) : AndroidUtilities.generateSearchName("@" + UserObject.getPublicUsername(userTLdeserialize2), null, "@" + str9);
                                                dialogSearchResult4.object = userTLdeserialize2;
                                                i4++;
                                                messagesStorage2 = this;
                                                i15 = i;
                                                str18 = str19;
                                                i3 = i14;
                                            }
                                            str5 = str18;
                                            i5 = i3;
                                            sQLiteCursorQueryFinalized2.dispose();
                                        } catch (Exception e6) {
                                            e = e6;
                                            exc = e;
                                            sQLiteCursor3 = null;
                                            messagesStorage = this;
                                            messagesStorage.checkSQLException(exc);
                                            if (sQLiteCursor3 == null) {
                                            }
                                        } catch (Throwable th11) {
                                            th3 = th11;
                                            th = th3;
                                            sQLiteCursor3 = null;
                                            if (sQLiteCursor3 != null) {
                                            }
                                        }
                                    } else {
                                        arrayList5 = arrayList11;
                                        str5 = ";;;";
                                        i5 = i3;
                                    }
                                    try {
                                        if (arrayList10.isEmpty()) {
                                            try {
                                            } catch (Exception e7) {
                                                e = e7;
                                                messagesStorage = this;
                                                exc = e;
                                                sQLiteCursor = null;
                                                sQLiteCursor3 = sQLiteCursor;
                                                messagesStorage.checkSQLException(exc);
                                                if (sQLiteCursor3 == null) {
                                                    sQLiteCursor3.dispose();
                                                    return;
                                                }
                                                return;
                                            }
                                            try {
                                                sQLiteCursorQueryFinalized = getDatabase().queryFinalized(String.format(Locale.US, "SELECT data, name FROM chats WHERE uid IN(%s)", TextUtils.join(",", arrayList10)), new Object[0]);
                                                while (sQLiteCursorQueryFinalized.next()) {
                                                    String strStringValue2 = sQLiteCursorQueryFinalized.stringValue(1);
                                                    String translitString4 = LocaleController.getInstance().getTranslitString(strStringValue2);
                                                    if (strStringValue2.equals(translitString4)) {
                                                        translitString4 = null;
                                                    }
                                                    int i20 = i5;
                                                    int i21 = 0;
                                                    while (i21 < i20) {
                                                        String str20 = strArr[i21];
                                                        if (!strStringValue2.startsWith(str20)) {
                                                            if (strStringValue2.contains(" " + str20)) {
                                                                nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                                                                if (nativeByteBufferByteBufferValue != null) {
                                                                    break;
                                                                }
                                                                TLRPC.Chat chatTLdeserialize = TLRPC.Chat.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                                                                nativeByteBufferByteBufferValue.reuse();
                                                                if (i == 15) {
                                                                    if (arrayList8 != null) {
                                                                        translitString = translitString4;
                                                                        str6 = strStringValue2;
                                                                        if (!arrayList8.contains(Long.valueOf(-chatTLdeserialize.id))) {
                                                                        }
                                                                    } else {
                                                                        translitString = translitString4;
                                                                        str6 = strStringValue2;
                                                                    }
                                                                    i8 = 1;
                                                                    messagesStorage = this;
                                                                    strStringValue2 = str6;
                                                                } else {
                                                                    translitString = translitString4;
                                                                    str6 = strStringValue2;
                                                                }
                                                                if (!(i == 6 && ChatObject.isChannelAndNotMegaGroup(chatTLdeserialize)) && (i != 5 || ChatObject.isChannelAndNotMegaGroup(chatTLdeserialize))) {
                                                                    if (chatTLdeserialize.monoforum) {
                                                                        messagesStorage = this;
                                                                        String monoForumTitle = ForumUtilities.getMonoForumTitle(messagesStorage.currentAccount, chatTLdeserialize, true);
                                                                        if (monoForumTitle == null) {
                                                                            monoForumTitle = "";
                                                                        }
                                                                        strStringValue2 = monoForumTitle.toLowerCase();
                                                                        translitString = LocaleController.getInstance().getTranslitString(strStringValue2);
                                                                        if (strStringValue2.equals(translitString)) {
                                                                            translitString = null;
                                                                        }
                                                                        if (!strStringValue2.startsWith(str20)) {
                                                                            if (!strStringValue2.contains(" " + str20)) {
                                                                                if (translitString != null) {
                                                                                    if (!translitString.startsWith(str20)) {
                                                                                        if (translitString.contains(" " + str20)) {
                                                                                        }
                                                                                    }
                                                                                }
                                                                                i8 = 1;
                                                                            }
                                                                        }
                                                                    } else {
                                                                        messagesStorage = this;
                                                                    }
                                                                    if (!chatTLdeserialize.deactivated && (!ChatObject.isChannel(chatTLdeserialize) || !ChatObject.isNotInChat(chatTLdeserialize))) {
                                                                        DialogsSearchAdapter.DialogSearchResult dialogSearchResult5 = (DialogsSearchAdapter.DialogSearchResult) longSparseArray.get(-chatTLdeserialize.id);
                                                                        dialogSearchResult5.name = AndroidUtilities.generateSearchName(chatTLdeserialize.monoforum ? ForumUtilities.getMonoForumTitle(messagesStorage.currentAccount, chatTLdeserialize) : chatTLdeserialize.title, null, str20);
                                                                        dialogSearchResult5.object = chatTLdeserialize;
                                                                        i4++;
                                                                    }
                                                                    arrayList8 = arrayList4;
                                                                    i5 = i20;
                                                                } else {
                                                                    i8 = 1;
                                                                    messagesStorage = this;
                                                                    strStringValue2 = str6;
                                                                }
                                                            } else {
                                                                if (translitString4 != null) {
                                                                    if (!translitString4.startsWith(str20)) {
                                                                        if (translitString4.contains(" " + str20)) {
                                                                        }
                                                                        translitString = translitString4;
                                                                        str6 = strStringValue2;
                                                                        i8 = 1;
                                                                        messagesStorage = this;
                                                                        strStringValue2 = str6;
                                                                    }
                                                                    nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0);
                                                                    if (nativeByteBufferByteBufferValue != null) {
                                                                    }
                                                                }
                                                                translitString = translitString4;
                                                                str6 = strStringValue2;
                                                                i8 = 1;
                                                                messagesStorage = this;
                                                                strStringValue2 = str6;
                                                            }
                                                        }
                                                        try {
                                                            i21 += i8;
                                                            arrayList8 = arrayList4;
                                                            translitString4 = translitString;
                                                        } catch (Exception e8) {
                                                            e = e8;
                                                            sQLiteCursor3 = sQLiteCursorQueryFinalized;
                                                            exc = e;
                                                            messagesStorage.checkSQLException(exc);
                                                            if (sQLiteCursor3 == null) {
                                                            }
                                                        } catch (Throwable th12) {
                                                            th2 = th12;
                                                            sQLiteCursor3 = sQLiteCursorQueryFinalized;
                                                            th = th2;
                                                            if (sQLiteCursor3 != null) {
                                                            }
                                                        }
                                                    }
                                                    arrayList8 = arrayList4;
                                                    i5 = i20;
                                                }
                                                messagesStorage = this;
                                                i6 = i;
                                                i7 = i5;
                                                sQLiteCursorQueryFinalized.dispose();
                                            } catch (Exception e9) {
                                                e = e9;
                                                messagesStorage = this;
                                                exc = e;
                                                sQLiteCursor3 = null;
                                                messagesStorage.checkSQLException(exc);
                                                if (sQLiteCursor3 == null) {
                                                }
                                            } catch (Throwable th13) {
                                                th = th13;
                                                th = th;
                                                sQLiteCursor3 = null;
                                                if (sQLiteCursor3 != null) {
                                                }
                                            }
                                        } else {
                                            messagesStorage = this;
                                            i6 = i;
                                            i7 = i5;
                                        }
                                        try {
                                            if (!arrayList5.isEmpty() || i6 == 15) {
                                                i9 = i7;
                                            } else {
                                                try {
                                                } catch (Exception e10) {
                                                    e = e10;
                                                    exc = e;
                                                    sQLiteCursor = null;
                                                    sQLiteCursor3 = sQLiteCursor;
                                                    messagesStorage.checkSQLException(exc);
                                                    if (sQLiteCursor3 == null) {
                                                    }
                                                } catch (Throwable th14) {
                                                    th = th14;
                                                    th = th;
                                                    sQLiteCursor2 = null;
                                                    sQLiteCursor3 = sQLiteCursor2;
                                                    if (sQLiteCursor3 != null) {
                                                    }
                                                }
                                                try {
                                                    SQLiteCursor sQLiteCursorQueryFinalized3 = getDatabase().queryFinalized(String.format(Locale.US, "SELECT q.data, u.name, q.user, q.g, q.authkey, q.ttl, u.data, u.status, q.layer, q.seq_in, q.seq_out, q.use_count, q.exchange_id, q.key_date, q.fprint, q.fauthkey, q.khash, q.in_seq_no, q.admin_id, q.mtproto_seq FROM enc_chats as q INNER JOIN users as u ON q.user = u.uid WHERE q.uid IN(%s)", TextUtils.join(",", arrayList5)), new Object[0]);
                                                    while (sQLiteCursorQueryFinalized3.next()) {
                                                        try {
                                                            String strStringValue3 = sQLiteCursorQueryFinalized3.stringValue(1);
                                                            String translitString5 = LocaleController.getInstance().getTranslitString(strStringValue3);
                                                            if (strStringValue3.equals(translitString5)) {
                                                                str8 = str5;
                                                                translitString5 = null;
                                                            } else {
                                                                str8 = str5;
                                                            }
                                                            int iLastIndexOf2 = strStringValue3.lastIndexOf(str8);
                                                            String strSubstring2 = iLastIndexOf2 != -1 ? strStringValue3.substring(iLastIndexOf2 + 2) : null;
                                                            char c = 0;
                                                            int i22 = 0;
                                                            while (true) {
                                                                if (i22 >= i7) {
                                                                    break;
                                                                }
                                                                String str21 = strArr[i22];
                                                                if (!strStringValue3.startsWith(str21)) {
                                                                    char c2 = c;
                                                                    if (strStringValue3.contains(" " + str21)) {
                                                                        c = 1;
                                                                        if (c != 0) {
                                                                            NativeByteBuffer nativeByteBufferByteBufferValue3 = sQLiteCursorQueryFinalized3.byteBufferValue(0);
                                                                            if (nativeByteBufferByteBufferValue3 != null) {
                                                                                encryptedChatTLdeserialize = TLRPC.EncryptedChat.TLdeserialize(nativeByteBufferByteBufferValue3, nativeByteBufferByteBufferValue3.readInt32(false), false);
                                                                                nativeByteBufferByteBufferValue3.reuse();
                                                                                i13 = 6;
                                                                            } else {
                                                                                i13 = 6;
                                                                                encryptedChatTLdeserialize = null;
                                                                            }
                                                                            NativeByteBuffer nativeByteBufferByteBufferValue4 = sQLiteCursorQueryFinalized3.byteBufferValue(i13);
                                                                            if (nativeByteBufferByteBufferValue4 != null) {
                                                                                userTLdeserialize = TLRPC.User.TLdeserialize(nativeByteBufferByteBufferValue4, nativeByteBufferByteBufferValue4.readInt32(false), false);
                                                                                nativeByteBufferByteBufferValue4.reuse();
                                                                            } else {
                                                                                userTLdeserialize = null;
                                                                            }
                                                                            if (encryptedChatTLdeserialize == null || userTLdeserialize == null) {
                                                                                break;
                                                                            }
                                                                            DialogsSearchAdapter.DialogSearchResult dialogSearchResult6 = (DialogsSearchAdapter.DialogSearchResult) longSparseArray.get(DialogObject.makeEncryptedDialogId(encryptedChatTLdeserialize.id));
                                                                            str5 = str8;
                                                                            i12 = i7;
                                                                            encryptedChatTLdeserialize.user_id = sQLiteCursorQueryFinalized3.longValue(2);
                                                                            encryptedChatTLdeserialize.a_or_b = sQLiteCursorQueryFinalized3.byteArrayValue(3);
                                                                            encryptedChatTLdeserialize.auth_key = sQLiteCursorQueryFinalized3.byteArrayValue(4);
                                                                            encryptedChatTLdeserialize.ttl = sQLiteCursorQueryFinalized3.intValue(5);
                                                                            encryptedChatTLdeserialize.layer = sQLiteCursorQueryFinalized3.intValue(8);
                                                                            encryptedChatTLdeserialize.seq_in = sQLiteCursorQueryFinalized3.intValue(9);
                                                                            encryptedChatTLdeserialize.seq_out = sQLiteCursorQueryFinalized3.intValue(10);
                                                                            int iIntValue = sQLiteCursorQueryFinalized3.intValue(11);
                                                                            encryptedChatTLdeserialize.key_use_count_in = (short) (iIntValue >> 16);
                                                                            encryptedChatTLdeserialize.key_use_count_out = (short) iIntValue;
                                                                            encryptedChatTLdeserialize.exchange_id = sQLiteCursorQueryFinalized3.longValue(12);
                                                                            encryptedChatTLdeserialize.key_create_date = sQLiteCursorQueryFinalized3.intValue(13);
                                                                            encryptedChatTLdeserialize.future_key_fingerprint = sQLiteCursorQueryFinalized3.longValue(14);
                                                                            encryptedChatTLdeserialize.future_auth_key = sQLiteCursorQueryFinalized3.byteArrayValue(15);
                                                                            encryptedChatTLdeserialize.key_hash = sQLiteCursorQueryFinalized3.byteArrayValue(16);
                                                                            encryptedChatTLdeserialize.in_seq_no = sQLiteCursorQueryFinalized3.intValue(17);
                                                                            long jLongValue2 = sQLiteCursorQueryFinalized3.longValue(18);
                                                                            if (jLongValue2 != 0) {
                                                                                encryptedChatTLdeserialize.admin_id = jLongValue2;
                                                                            }
                                                                            encryptedChatTLdeserialize.mtproto_seq = sQLiteCursorQueryFinalized3.intValue(19);
                                                                            TLRPC.UserStatus userStatus2 = userTLdeserialize.status;
                                                                            if (userStatus2 != null) {
                                                                                userStatus2.expires = sQLiteCursorQueryFinalized3.intValue(7);
                                                                            }
                                                                            if (c == 1) {
                                                                                SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(ContactsController.formatName(userTLdeserialize.first_name, userTLdeserialize.last_name));
                                                                                dialogSearchResult6.name = spannableStringBuilder;
                                                                                spannableStringBuilder.setSpan(new ForegroundColorSpan(Theme.getColor(Theme.key_chats_secretName)), 0, dialogSearchResult6.name.length(), 33);
                                                                            } else {
                                                                                dialogSearchResult6.name = AndroidUtilities.generateSearchName("@" + UserObject.getPublicUsername(userTLdeserialize), null, "@" + str21);
                                                                            }
                                                                            dialogSearchResult6.object = encryptedChatTLdeserialize;
                                                                            arrayList3.add(userTLdeserialize);
                                                                            i4++;
                                                                        } else {
                                                                            i22++;
                                                                            translitString5 = translitString5;
                                                                            str8 = str8;
                                                                        }
                                                                    } else {
                                                                        if (translitString5 != null) {
                                                                            if (!translitString5.startsWith(str21)) {
                                                                                if (translitString5.contains(" " + str21)) {
                                                                                }
                                                                            }
                                                                            c = 1;
                                                                            if (c != 0) {
                                                                            }
                                                                        }
                                                                        c = (strSubstring2 == null || !strSubstring2.startsWith(str21)) ? c2 : (char) 2;
                                                                        if (c != 0) {
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                            str5 = str8;
                                                            i12 = i7;
                                                            i7 = i12;
                                                        } catch (Exception e11) {
                                                            sQLiteCursor3 = sQLiteCursorQueryFinalized3;
                                                            exc = e11;
                                                            messagesStorage.checkSQLException(exc);
                                                            if (sQLiteCursor3 == null) {
                                                            }
                                                        } catch (Throwable th15) {
                                                            sQLiteCursor3 = sQLiteCursorQueryFinalized3;
                                                            th = th15;
                                                        }
                                                    }
                                                    i9 = i7;
                                                    sQLiteCursorQueryFinalized3.dispose();
                                                } catch (Exception e12) {
                                                    e = e12;
                                                    exc = e;
                                                    sQLiteCursor3 = null;
                                                    messagesStorage.checkSQLException(exc);
                                                    if (sQLiteCursor3 == null) {
                                                    }
                                                } catch (Throwable th16) {
                                                    th = th16;
                                                    th = th;
                                                    sQLiteCursor3 = null;
                                                    if (sQLiteCursor3 != null) {
                                                    }
                                                }
                                            }
                                            try {
                                                arrayList6 = new ArrayList(i4);
                                                for (i10 = 0; i10 < longSparseArray.size(); i10++) {
                                                    try {
                                                        DialogsSearchAdapter.DialogSearchResult dialogSearchResult7 = (DialogsSearchAdapter.DialogSearchResult) longSparseArray.valueAt(i10);
                                                        if (dialogSearchResult7.object != null && dialogSearchResult7.name != null) {
                                                            arrayList6.add(dialogSearchResult7);
                                                        }
                                                    } catch (Exception e13) {
                                                        e = e13;
                                                        exc = e;
                                                        sQLiteCursor3 = null;
                                                        messagesStorage.checkSQLException(exc);
                                                        if (sQLiteCursor3 == null) {
                                                        }
                                                    } catch (Throwable th17) {
                                                        th = th17;
                                                        th = th;
                                                        sQLiteCursor3 = null;
                                                        if (sQLiteCursor3 != null) {
                                                        }
                                                    }
                                                }
                                                Collections.sort(arrayList6, new Comparator() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda48
                                                    @Override // java.util.Comparator
                                                    public final int compare(Object obj, Object obj2) {
                                                        return MessagesStorage.lambda$localSearch$243((DialogsSearchAdapter.DialogSearchResult) obj, (DialogsSearchAdapter.DialogSearchResult) obj2);
                                                    }
                                                });
                                                for (i11 = 0; i11 < arrayList6.size(); i11++) {
                                                    DialogsSearchAdapter.DialogSearchResult dialogSearchResult8 = (DialogsSearchAdapter.DialogSearchResult) arrayList6.get(i11);
                                                    arrayList.add(dialogSearchResult8.object);
                                                    arrayList2.add(dialogSearchResult8.name);
                                                }
                                                if (i6 != 2 || i6 == 15 || i6 == 6 || i6 == 5) {
                                                    return;
                                                }
                                                sQLiteCursorQueryFinalized = getDatabase().queryFinalized("SELECT u.data, u.status, u.name, u.uid FROM users as u INNER JOIN contacts as c ON u.uid = c.uid", new Object[0]);
                                                while (sQLiteCursorQueryFinalized.next()) {
                                                    if (longSparseArray.indexOfKey(sQLiteCursorQueryFinalized.longValue(3)) < 0) {
                                                        String strStringValue4 = sQLiteCursorQueryFinalized.stringValue(2);
                                                        String translitString6 = LocaleController.getInstance().getTranslitString(strStringValue4);
                                                        if (strStringValue4.equals(translitString6)) {
                                                            str7 = str5;
                                                            translitString6 = null;
                                                        } else {
                                                            str7 = str5;
                                                        }
                                                        int iLastIndexOf3 = strStringValue4.lastIndexOf(str7);
                                                        String strSubstring3 = iLastIndexOf3 != -1 ? strStringValue4.substring(iLastIndexOf3 + 3) : null;
                                                        int i23 = i9;
                                                        int i24 = 0;
                                                        char c3 = 0;
                                                        while (true) {
                                                            if (i24 >= i23) {
                                                                str5 = str7;
                                                                break;
                                                            }
                                                            String str22 = strArr[i24];
                                                            if (strStringValue4.startsWith(str22)) {
                                                                str5 = str7;
                                                            } else {
                                                                str5 = str7;
                                                                if (!strStringValue4.contains(" " + str22)) {
                                                                    if (translitString6 != null) {
                                                                        if (!translitString6.startsWith(str22)) {
                                                                            if (translitString6.contains(" " + str22)) {
                                                                            }
                                                                        }
                                                                    }
                                                                    if (strSubstring3 != null && strSubstring3.startsWith(str22)) {
                                                                        c3 = 2;
                                                                    }
                                                                    if (c3 == 0) {
                                                                        NativeByteBuffer nativeByteBufferByteBufferValue5 = sQLiteCursorQueryFinalized.byteBufferValue(0);
                                                                        if (nativeByteBufferByteBufferValue5 != null) {
                                                                            TLRPC.User userTLdeserialize3 = TLRPC.User.TLdeserialize(nativeByteBufferByteBufferValue5, nativeByteBufferByteBufferValue5.readInt32(false), false);
                                                                            nativeByteBufferByteBufferValue5.reuse();
                                                                            TLRPC.UserStatus userStatus3 = userTLdeserialize3.status;
                                                                            if (userStatus3 != null) {
                                                                                userStatus3.expires = sQLiteCursorQueryFinalized.intValue(1);
                                                                            }
                                                                            arrayList2.add(c3 == 1 ? AndroidUtilities.generateSearchName(userTLdeserialize3.first_name, userTLdeserialize3.last_name, str22) : AndroidUtilities.generateSearchName("@" + UserObject.getPublicUsername(userTLdeserialize3), null, "@" + str22));
                                                                            arrayList.add(userTLdeserialize3);
                                                                        }
                                                                    } else {
                                                                        i24++;
                                                                        str7 = str5;
                                                                    }
                                                                }
                                                            }
                                                            c3 = 1;
                                                            if (c3 == 0) {
                                                            }
                                                        }
                                                        i9 = i23;
                                                    }
                                                }
                                                sQLiteCursorQueryFinalized.dispose();
                                                return;
                                            } catch (Exception e14) {
                                                e = e14;
                                                sQLiteCursor = null;
                                                exc = e;
                                                sQLiteCursor3 = sQLiteCursor;
                                                messagesStorage.checkSQLException(exc);
                                                if (sQLiteCursor3 == null) {
                                                }
                                            } catch (Throwable th18) {
                                                th = th18;
                                                sQLiteCursor2 = null;
                                                th = th;
                                                sQLiteCursor3 = sQLiteCursor2;
                                                if (sQLiteCursor3 != null) {
                                                }
                                            }
                                        } catch (Exception e15) {
                                            e = e15;
                                            sQLiteCursor = null;
                                            exc = e;
                                            sQLiteCursor3 = sQLiteCursor;
                                            messagesStorage.checkSQLException(exc);
                                            if (sQLiteCursor3 == null) {
                                            }
                                        } catch (Throwable th19) {
                                            th = th19;
                                        }
                                    } catch (Exception e16) {
                                        e = e16;
                                        sQLiteCursor = null;
                                        messagesStorage = this;
                                    } catch (Throwable th20) {
                                        th = th20;
                                    }
                                } catch (Exception e17) {
                                    e = e17;
                                    messagesStorage = messagesStorage2;
                                    sQLiteCursor = null;
                                    exc = e;
                                    sQLiteCursor3 = sQLiteCursor;
                                    messagesStorage.checkSQLException(exc);
                                    if (sQLiteCursor3 == null) {
                                    }
                                } catch (Throwable th21) {
                                    th = th21;
                                    sQLiteCursor2 = null;
                                    th = th;
                                    sQLiteCursor3 = sQLiteCursor2;
                                    if (sQLiteCursor3 != null) {
                                    }
                                }
                            }
                        } catch (Exception e18) {
                            exc = e18;
                            messagesStorage = messagesStorage2;
                            sQLiteCursor3 = null;
                            messagesStorage.checkSQLException(exc);
                            if (sQLiteCursor3 == null) {
                            }
                        } catch (Throwable th22) {
                            th = th22;
                            sQLiteCursor3 = null;
                            if (sQLiteCursor3 != null) {
                            }
                        }
                    }
                } catch (Exception e19) {
                    e = e19;
                    sQLiteCursor3 = null;
                    messagesStorage = this;
                    exc = e;
                    messagesStorage.checkSQLException(exc);
                    if (sQLiteCursor3 == null) {
                    }
                } catch (Throwable th23) {
                    th2 = th23;
                    sQLiteCursor3 = null;
                    th = th2;
                    if (sQLiteCursor3 != null) {
                    }
                }
                if (sQLiteCursor3 != null) {
                    throw th;
                }
                sQLiteCursor3.dispose();
                throw th;
            }
            str4 = str17;
            if (!str16.startsWith(str4)) {
                messagesStorage2 = this;
                i4 = 0;
            }
            if (i15 != 4) {
                if (str2.startsWith(str4)) {
                }
                String str182 = ";;;";
                if (arrayList9.isEmpty()) {
                }
                if (arrayList10.isEmpty()) {
                }
                if (arrayList5.isEmpty()) {
                    i9 = i7;
                    arrayList6 = new ArrayList(i4);
                    while (i10 < longSparseArray.size()) {
                    }
                    Collections.sort(arrayList6, new Comparator() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda48
                        @Override // java.util.Comparator
                        public final int compare(Object obj, Object obj2) {
                            return MessagesStorage.lambda$localSearch$243((DialogsSearchAdapter.DialogSearchResult) obj, (DialogsSearchAdapter.DialogSearchResult) obj2);
                        }
                    });
                    while (i11 < arrayList6.size()) {
                    }
                    if (i6 != 2) {
                        return;
                    } else {
                        return;
                    }
                }
            }
        } catch (Exception e20) {
            e = e20;
            sQLiteCursor = null;
            messagesStorage = this;
        }
        if (sQLiteCursor3 != null) {
        }
    }

    public void markMentionMessageAsRead(final long j, final int i, final long j2) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda64
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$markMentionMessageAsRead$107(i, j, j2);
            }
        });
    }

    public void markMessageAsMention(final long j, final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda154
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$markMessageAsMention$108(i, j);
            }
        });
    }

    public void markMessageAsSendError(final TLRPC.Message message, final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda173
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$markMessageAsSendError$195(i, message);
            }
        });
    }

    public void markMessageAsSendErrorWithParams(final TLRPC.Message message, long j, long j2) {
        final long clientUserId = getUserConfig().getClientUserId();
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda118
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$markMessageAsSendErrorWithParams$196(message, clientUserId);
            }
        });
    }

    public void markMessageReactionsAsRead(final long j, final long j2, final int i, boolean z) {
        if (z) {
            getStorageQueue().postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda92
                @Override // java.lang.Runnable
                public final void run() throws Throwable {
                    this.f$0.lambda$markMessageReactionsAsRead$245(j, j2, i);
                }
            });
        } else {
            lambda$markMessageReactionsAsRead$245(j, j2, i);
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:119:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:86:0x018c  */
    /* JADX WARN: Removed duplicated region for block: B:88:0x0191  */
    /* JADX WARN: Removed duplicated region for block: B:91:0x0198  */
    /* JADX WARN: Removed duplicated region for block: B:93:0x019d  */
    /* renamed from: markMessageReactionsAsReadInternal, reason: merged with bridge method [inline-methods] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public void lambda$markMessageReactionsAsRead$245(long j, long j2, int i) throws Throwable {
        SQLitePreparedStatement sQLitePreparedStatement;
        SQLiteDatabase sQLiteDatabase;
        Locale locale;
        Long lValueOf;
        Integer numValueOf;
        SQLiteCursor sQLiteCursorQueryFinalized;
        SQLiteCursor sQLiteCursor;
        TLRPC.Message messageTLdeserialize;
        SQLiteDatabase database;
        String str;
        NativeByteBuffer nativeByteBufferByteBufferValue;
        int i2 = 1;
        int i3 = 0;
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        while (i3 < 2) {
            boolean z = i3 == i2;
            if (!z || j2 != 0) {
                if (z) {
                    SQLitePreparedStatement sQLitePreparedStatementExecuteFast2 = getMessagesStorage().getDatabase().executeFast("UPDATE reaction_mentions_topics SET state = 0 WHERE message_id = ? AND dialog_id = ? AND topic_id = ? ");
                    sQLitePreparedStatementExecuteFast2.bindInteger(i2, i);
                    sQLitePreparedStatementExecuteFast2.bindLong(2, j);
                    sQLitePreparedStatementExecuteFast2.bindLong(3, j2);
                    sQLitePreparedStatementExecuteFast2.step();
                    sQLitePreparedStatementExecuteFast2.dispose();
                    sQLiteCursorQueryFinalized = this.database.queryFinalized(String.format(Locale.US, "SELECT data FROM messages_topics WHERE uid = %d AND mid = %d", Long.valueOf(j), Integer.valueOf(i)), new Object[0]);
                } else {
                    try {
                        sQLitePreparedStatementExecuteFast = getMessagesStorage().getDatabase().executeFast("UPDATE reaction_mentions SET state = 0 WHERE message_id = ? AND dialog_id = ?");
                        sQLitePreparedStatementExecuteFast.bindInteger(i2, i);
                        sQLitePreparedStatementExecuteFast.bindLong(2, j);
                        sQLitePreparedStatementExecuteFast.step();
                        sQLitePreparedStatementExecuteFast.dispose();
                    } catch (SQLiteException e) {
                        e = e;
                    } catch (Throwable th) {
                        th = th;
                    }
                    try {
                        sQLiteDatabase = this.database;
                        locale = Locale.US;
                        lValueOf = Long.valueOf(j);
                        numValueOf = Integer.valueOf(i);
                    } catch (SQLiteException e2) {
                        e = e2;
                        sQLitePreparedStatementExecuteFast = null;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        sQLiteCursor = null;
                        try {
                            checkSQLException(e);
                            if (sQLitePreparedStatement != null) {
                            }
                            if (sQLiteCursor == null) {
                            }
                        } catch (Throwable th2) {
                            th = th2;
                            if (sQLitePreparedStatement != null) {
                            }
                            if (sQLiteCursor != null) {
                            }
                            throw th;
                        }
                    } catch (Throwable th3) {
                        th = th3;
                        sQLitePreparedStatementExecuteFast = null;
                        sQLitePreparedStatement = sQLitePreparedStatementExecuteFast;
                        sQLiteCursor = null;
                        if (sQLitePreparedStatement != null) {
                        }
                        if (sQLiteCursor != null) {
                        }
                        throw th;
                    }
                    try {
                        Object[] objArr = new Object[2];
                        objArr[0] = lValueOf;
                        objArr[i2] = numValueOf;
                        sQLiteCursorQueryFinalized = sQLiteDatabase.queryFinalized(String.format(locale, "SELECT data FROM messages_v2 WHERE uid = %d AND mid = %d", objArr), new Object[0]);
                    } catch (SQLiteException e3) {
                        e = e3;
                        sQLitePreparedStatement = null;
                        sQLiteCursor = null;
                        checkSQLException(e);
                        if (sQLitePreparedStatement != null) {
                        }
                        if (sQLiteCursor == null) {
                        }
                    } catch (Throwable th4) {
                        th = th4;
                        sQLitePreparedStatement = null;
                        sQLiteCursor = null;
                        if (sQLitePreparedStatement != null) {
                        }
                        if (sQLiteCursor != null) {
                        }
                        throw th;
                    }
                }
                try {
                    if (!sQLiteCursorQueryFinalized.next() || (nativeByteBufferByteBufferValue = sQLiteCursorQueryFinalized.byteBufferValue(0)) == null) {
                        messageTLdeserialize = null;
                    } else {
                        messageTLdeserialize = TLRPC.Message.TLdeserialize(nativeByteBufferByteBufferValue, nativeByteBufferByteBufferValue.readInt32(false), false);
                        messageTLdeserialize.readAttachPath(nativeByteBufferByteBufferValue, getUserConfig().clientUserId);
                        nativeByteBufferByteBufferValue.reuse();
                        TLRPC.TL_messageReactions tL_messageReactions = messageTLdeserialize.reactions;
                        if (tL_messageReactions != null && tL_messageReactions.recent_reactions != null) {
                            for (int i4 = 0; i4 < messageTLdeserialize.reactions.recent_reactions.size(); i4++) {
                                ((TLRPC.MessagePeerReaction) messageTLdeserialize.reactions.recent_reactions.get(i4)).unread = false;
                            }
                        }
                    }
                    sQLiteCursorQueryFinalized.dispose();
                    if (messageTLdeserialize != null) {
                        if (z) {
                            database = getMessagesStorage().getDatabase();
                            str = String.format(Locale.US, "UPDATE messages_topics SET data = ? WHERE uid = %d AND mid = %d", Long.valueOf(j), Integer.valueOf(i));
                        } else {
                            try {
                                database = getMessagesStorage().getDatabase();
                                str = String.format(Locale.US, "UPDATE messages_v2 SET data = ? WHERE uid = %d AND mid = %d", Long.valueOf(j), Integer.valueOf(i));
                            } catch (SQLiteException e4) {
                                e = e4;
                                sQLiteCursorQueryFinalized = null;
                                sQLiteCursor = sQLiteCursorQueryFinalized;
                                sQLitePreparedStatement = null;
                                checkSQLException(e);
                                if (sQLitePreparedStatement != null) {
                                }
                                if (sQLiteCursor == null) {
                                }
                            } catch (Throwable th5) {
                                th = th5;
                                sQLiteCursorQueryFinalized = null;
                                sQLiteCursor = sQLiteCursorQueryFinalized;
                                sQLitePreparedStatement = null;
                                if (sQLitePreparedStatement != null) {
                                }
                                if (sQLiteCursor != null) {
                                }
                                throw th;
                            }
                        }
                        SQLitePreparedStatement sQLitePreparedStatementExecuteFast3 = database.executeFast(str);
                        try {
                            try {
                                MessageObject.normalizeFlags(messageTLdeserialize);
                                NativeByteBuffer nativeByteBuffer = new NativeByteBuffer(messageTLdeserialize.getObjectSize());
                                messageTLdeserialize.serializeToStream(nativeByteBuffer);
                                sQLitePreparedStatementExecuteFast3.bindByteBuffer(1, nativeByteBuffer);
                                sQLitePreparedStatementExecuteFast3.step();
                                sQLitePreparedStatementExecuteFast3.dispose();
                                nativeByteBuffer.reuse();
                            } catch (Throwable th6) {
                                th = th6;
                                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast3;
                                sQLiteCursor = null;
                                if (sQLitePreparedStatement != null) {
                                    sQLitePreparedStatement.dispose();
                                }
                                if (sQLiteCursor != null) {
                                    sQLiteCursor.dispose();
                                }
                                throw th;
                            }
                        } catch (Exception e5) {
                            try {
                                FileLog.e(e5);
                            } catch (SQLiteException e6) {
                                e = e6;
                                sQLitePreparedStatement = sQLitePreparedStatementExecuteFast3;
                                sQLiteCursor = null;
                                checkSQLException(e);
                                if (sQLitePreparedStatement != null) {
                                    sQLitePreparedStatement.dispose();
                                }
                                if (sQLiteCursor == null) {
                                    sQLiteCursor.dispose();
                                    return;
                                }
                                return;
                            }
                        }
                        sQLitePreparedStatementExecuteFast = sQLitePreparedStatementExecuteFast3;
                        i2 = 1;
                    } else {
                        i2 = 1;
                        sQLitePreparedStatementExecuteFast = null;
                    }
                } catch (SQLiteException e7) {
                    e = e7;
                } catch (Throwable th7) {
                    th = th7;
                }
            }
            i3 += i2;
        }
        if (sQLitePreparedStatementExecuteFast != null) {
            sQLitePreparedStatementExecuteFast.dispose();
        }
    }

    public ArrayList<Long> markMessagesAsDeleted(final long j, final int i, boolean z, final boolean z2) {
        if (!z) {
            return lambda$markMessagesAsDeleted$214(j, i, z2);
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda99
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$markMessagesAsDeleted$214(j, i, z2);
            }
        });
        return null;
    }

    public ArrayList<Long> markMessagesAsDeleted(final long j, final ArrayList<Integer> arrayList, boolean z, final boolean z2, final int i, final int i2) {
        if (arrayList.isEmpty()) {
            return null;
        }
        if (!z) {
            return lambda$markMessagesAsDeleted$212(j, arrayList, z2, i, i2);
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda144
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$markMessagesAsDeleted$212(j, arrayList, z2, i, i2);
            }
        });
        return null;
    }

    public void markMessagesAsDeletedByRandoms(final ArrayList<Long> arrayList) {
        if (arrayList.isEmpty()) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda194
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$markMessagesAsDeletedByRandoms$204(arrayList);
            }
        });
    }

    public void markMessagesAsRead(final LongSparseIntArray longSparseIntArray, final LongSparseIntArray longSparseIntArray2, final SparseIntArray sparseIntArray, boolean z) {
        if (z) {
            this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda212
                @Override // java.lang.Runnable
                public final void run() throws Throwable {
                    this.f$0.lambda$markMessagesAsRead$202(longSparseIntArray, longSparseIntArray2, sparseIntArray);
                }
            });
        } else {
            lambda$markMessagesAsRead$202(longSparseIntArray, longSparseIntArray2, sparseIntArray);
        }
    }

    public void markMessagesContentAsRead(final long j, final ArrayList<Integer> arrayList, final int i, final int i2) {
        if (isEmpty(arrayList)) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda111
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$markMessagesContentAsRead$201(j, arrayList, i2, i);
            }
        });
    }

    public void onDeleteQueryComplete(final long j) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda231
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$onDeleteQueryComplete$86(j);
            }
        });
    }

    public void openDatabase(int i) throws Exception {
        if (!NativeLoader.loaded()) {
            int i2 = 0;
            while (!NativeLoader.loaded()) {
                try {
                    Thread.sleep(1000L);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                i2++;
                if (i2 > 5) {
                    break;
                }
            }
        }
        File filesDirFixed = ApplicationLoader.getFilesDirFixed();
        if (this.currentAccount != 0) {
            File file = new File(filesDirFixed, "account" + this.currentAccount + "/");
            file.mkdirs();
            filesDirFixed = file;
        }
        this.cacheFile = new File(filesDirFixed, "cache4.db");
        this.walCacheFile = new File(filesDirFixed, "cache4.db-wal");
        this.shmCacheFile = new File(filesDirFixed, "cache4.db-shm");
        this.databaseCreated = false;
        boolean z = !this.cacheFile.exists();
        try {
            SQLiteDatabase sQLiteDatabase = new SQLiteDatabase(this.cacheFile.getPath());
            this.database = sQLiteDatabase;
            sQLiteDatabase.executeFast("PRAGMA secure_delete = ON").stepThis().dispose();
            this.database.executeFast("PRAGMA temp_store = MEMORY").stepThis().dispose();
            this.database.executeFast("PRAGMA journal_mode = WAL").stepThis().dispose();
            this.database.executeFast("PRAGMA journal_size_limit = 10485760").stepThis().dispose();
            if (z) {
                if (BuildVars.LOGS_ENABLED) {
                    FileLog.d("create new database");
                }
                createTables(this.database);
            } else {
                int iIntValue = this.database.executeInt("PRAGMA user_version", new Object[0]).intValue();
                if (BuildVars.LOGS_ENABLED) {
                    FileLog.d("current db version = " + iIntValue);
                }
                if (iIntValue == 0) {
                    throw new Exception("malformed");
                }
                try {
                    SQLiteCursor sQLiteCursorQueryFinalized = this.database.queryFinalized("SELECT seq, pts, date, qts, lsv, sg, pbytes FROM params WHERE id = 1", new Object[0]);
                    if (sQLiteCursorQueryFinalized.next()) {
                        this.lastSeqValue = sQLiteCursorQueryFinalized.intValue(0);
                        this.lastPtsValue = sQLiteCursorQueryFinalized.intValue(1);
                        this.lastDateValue = sQLiteCursorQueryFinalized.intValue(2);
                        this.lastQtsValue = sQLiteCursorQueryFinalized.intValue(3);
                        this.lastSecretVersion = sQLiteCursorQueryFinalized.intValue(4);
                        this.secretG = sQLiteCursorQueryFinalized.intValue(5);
                        if (!sQLiteCursorQueryFinalized.isNull(6)) {
                            byte[] bArrByteArrayValue = sQLiteCursorQueryFinalized.byteArrayValue(6);
                            this.secretPBytes = bArrByteArrayValue;
                            if (bArrByteArrayValue != null && bArrByteArrayValue.length == 1) {
                            }
                        }
                        this.secretPBytes = null;
                    }
                    sQLiteCursorQueryFinalized.dispose();
                } catch (Exception e2) {
                    FileLog.e(e2);
                    if (e2.getMessage() != null && e2.getMessage().contains("malformed")) {
                        throw new RuntimeException("malformed");
                    }
                    try {
                        this.database.executeFast("CREATE TABLE IF NOT EXISTS params(id INTEGER PRIMARY KEY, seq INTEGER, pts INTEGER, date INTEGER, qts INTEGER, lsv INTEGER, sg INTEGER, pbytes BLOB)").stepThis().dispose();
                        this.database.executeFast("INSERT INTO params VALUES(1, 0, 0, 0, 0, 0, 0, NULL)").stepThis().dispose();
                    } catch (Exception e3) {
                        FileLog.e(e3);
                    }
                }
                if (iIntValue < 165) {
                    try {
                        updateDbToLastVersion(iIntValue);
                    } catch (Exception e4) {
                        if (BuildVars.DEBUG_PRIVATE_VERSION) {
                            throw e4;
                        }
                        FileLog.e(e4);
                        throw new RuntimeException("malformed");
                    }
                }
            }
            this.databaseCreated = true;
        } catch (Exception e5) {
            FileLog.e(e5);
            if (i < 3 && e5.getMessage() != null && e5.getMessage().contains("malformed")) {
                if (i == 2) {
                    cleanupInternal(true);
                    clearLoadingDialogsOffsets();
                } else {
                    cleanupInternal(false);
                }
                openDatabase(i == 1 ? 2 : 3);
                return;
            }
        }
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda183
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openDatabase$1();
            }
        });
        loadDialogFilters();
        loadUnreadMessages();
        loadPendingTasks();
        try {
            this.openSync.countDown();
        } catch (Throwable unused) {
        }
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda184
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openDatabase$2();
            }
        });
    }

    public void overwriteChannel(final long j, final TLRPC.TL_updates_channelDifferenceTooLong tL_updates_channelDifferenceTooLong, final int i, final Runnable runnable) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda214
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$overwriteChannel$184(j, i, tL_updates_channelDifferenceTooLong, runnable);
            }
        });
    }

    protected void processLoadedFilterPeers(final TLRPC.messages_Dialogs messages_dialogs, final TLRPC.messages_Dialogs messages_dialogs2, final ArrayList<TLRPC.User> arrayList, final ArrayList<TLRPC.Chat> arrayList2, final ArrayList<MessagesController.DialogFilter> arrayList3, final SparseArray<MessagesController.DialogFilter> sparseArray, final ArrayList<Integer> arrayList4, final HashMap<Integer, HashSet<Long>> map, final HashSet<Integer> hashSet, final Runnable runnable) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda51
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$processLoadedFilterPeers$68(messages_dialogs, messages_dialogs2, arrayList, arrayList2, arrayList3, sparseArray, arrayList4, map, hashSet, runnable);
            }
        });
    }

    public void processPendingRead(final long j, final int i, final int i2, final int i3) {
        final int i4 = this.lastSavedDate;
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda210
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$processPendingRead$140(j, i, i3, i4, i2);
            }
        });
    }

    public void putCachedPhoneBook(final HashMap<String, ContactsController.Contact> map, final boolean z, boolean z2) {
        if (map != null) {
            if (!map.isEmpty() || z || z2) {
                this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda122
                    @Override // java.lang.Runnable
                    public final void run() throws Throwable {
                        this.f$0.lambda$putCachedPhoneBook$144(map, z);
                    }
                });
            }
        }
    }

    public void putChannelAdmins(final long j, final LongSparseArray longSparseArray) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda61
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$putChannelAdmins$119(j, longSparseArray);
            }
        });
    }

    public void putChannelViews(final LongSparseArray longSparseArray, final LongSparseArray longSparseArray2, final LongSparseArray longSparseArray3, final boolean z) {
        if (isEmpty(longSparseArray) && isEmpty(longSparseArray2) && isEmpty(longSparseArray3)) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda93
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$putChannelViews$185(longSparseArray, longSparseArray2, longSparseArray3, z);
            }
        });
    }

    public void putContacts(ArrayList<TLRPC.TL_contact> arrayList, final boolean z) {
        if (!arrayList.isEmpty() || z) {
            final ArrayList arrayList2 = new ArrayList(arrayList);
            this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda54
                @Override // java.lang.Runnable
                public final void run() throws Throwable {
                    this.f$0.lambda$putContacts$141(z, arrayList2);
                }
            });
        }
    }

    public void putDialogs(final TLRPC.messages_Dialogs messages_dialogs, final int i) {
        if (messages_dialogs.dialogs.isEmpty()) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda55
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$putDialogs$236(messages_dialogs, i);
            }
        });
    }

    public void putEncryptedChat(final TLRPC.EncryptedChat encryptedChat, final TLRPC.User user, final TLRPC.Dialog dialog) {
        if (encryptedChat == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda188
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$putEncryptedChat$172(encryptedChat, user, dialog);
            }
        });
    }

    public void putMessages(ArrayList<TLRPC.Message> arrayList, boolean z, boolean z2, boolean z3, int i, int i2, long j) {
        putMessages(arrayList, z, z2, z3, i, false, i2, j);
    }

    public void putMessages(final ArrayList<TLRPC.Message> arrayList, final boolean z, boolean z2, final boolean z3, final int i, final boolean z4, final int i2, final long j) {
        if (arrayList.size() == 0) {
            return;
        }
        if (z2) {
            this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda49
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$putMessages$194(arrayList, z, z3, i, z4, i2, j);
                }
            });
        } else {
            lambda$putMessages$194(arrayList, z, z3, i, z4, i2, j);
        }
    }

    public void putMessages(final TLRPC.messages_Messages messages_messages, final long j, final int i, final int i2, final boolean z, final int i3, final long j2) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda140
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$putMessages$221(i3, messages_messages, j, j2, i, i2, z);
            }
        });
    }

    public void putPushMessage(final MessageObject messageObject) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda125
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$putPushMessage$42(messageObject);
            }
        });
    }

    public void putSentFile(final String str, final TLObject tLObject, final int i, final String str2) {
        if (str == null || tLObject == null || str2 == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda74
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$putSentFile$164(str, tLObject, i, str2);
            }
        });
    }

    public void putStoryPushMessage(final NotificationsController.StoryNotification storyNotification) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda233
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$putStoryPushMessage$38(storyNotification);
            }
        });
    }

    public void putUsersAndChats(final List<TLRPC.User> list, final List<TLRPC.Chat> list2, final boolean z, boolean z2) {
        if (list == null || !list.isEmpty() || list2 == null || !list2.isEmpty()) {
            if (z2) {
                this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda167
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$putUsersAndChats$175(list, list2, z);
                    }
                });
            } else {
                lambda$putUsersAndChats$175(list, list2, z);
            }
        }
    }

    public void putWallpapers(final ArrayList<TLRPC.WallPaper> arrayList, final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda164
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$putWallpapers$75(i, arrayList);
            }
        });
    }

    public void putWebPages(final LongSparseArray longSparseArray) {
        if (isEmpty(longSparseArray)) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda242
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$putWebPages$182(longSparseArray);
            }
        });
    }

    public void putWidgetDialogs(final int i, final ArrayList<TopicKey> arrayList) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda217
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$putWidgetDialogs$160(i, arrayList);
            }
        });
    }

    public void readAllDialogs(final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda124
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$readAllDialogs$62(i);
            }
        });
    }

    public void removeFromDownloadQueue(final long j, final int i, final boolean z) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda160
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$removeFromDownloadQueue$176(z, i, j);
            }
        });
    }

    public void removePendingTask(final long j) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda232
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$removePendingTask$11(j);
            }
        });
    }

    public void removeTopic(final long j, final long j2) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda191
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$removeTopic$54(j, j2);
            }
        });
    }

    public void removeTopics(final long j, final ArrayList<Long> arrayList) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda69
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$removeTopics$55(arrayList, j);
            }
        });
    }

    public void replaceMessageIfExists(final TLRPC.Message message, final ArrayList<TLRPC.User> arrayList, final ArrayList<TLRPC.Chat> arrayList2, final boolean z) {
        if (message == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda120
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$replaceMessageIfExists$217(message, z, arrayList, arrayList2);
            }
        });
    }

    public void reset() {
        clearDatabaseValues();
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda241
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$reset$58();
            }
        });
    }

    public void resetAllUnreadCounters(boolean z) {
        int size = this.dialogFilters.size();
        for (int i = 0; i < size; i++) {
            MessagesController.DialogFilter dialogFilter = this.dialogFilters.get(i);
            if (!z || (dialogFilter.flags & MessagesController.DIALOG_FILTER_FLAG_EXCLUDE_MUTED) != 0) {
                dialogFilter.pendingUnreadCount = -1;
            }
        }
        calcUnreadCounters(false);
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda238
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$resetAllUnreadCounters$233();
            }
        });
    }

    public void resetDialogs(final TLRPC.messages_Dialogs messages_dialogs, final int i, final int i2, final int i3, final int i4, final int i5, final LongSparseArray longSparseArray, final LongSparseArray longSparseArray2, final TLRPC.Message message, final int i6) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda73
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$resetDialogs$90(messages_dialogs, i6, i2, i3, i4, i5, message, i, longSparseArray, longSparseArray2);
            }
        });
    }

    public void resetMentionsCount(final long j, final long j2, final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda77
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$resetMentionsCount$109(j2, j, i);
            }
        });
    }

    public void saveBotCache(final String str, final TLObject tLObject) {
        if (tLObject == null || TextUtils.isEmpty(str)) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda86
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$saveBotCache$121(tLObject, str);
            }
        });
    }

    public void saveChannelPts(final long j, final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda136
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$saveChannelPts$34(i, j);
            }
        });
    }

    public void saveChatInviter(final long j, final long j2) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda108
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$saveChatInviter$127(j2, j);
            }
        });
    }

    public void saveChatLinksCount(final long j, final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda4
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$saveChatLinksCount$128(i, j);
            }
        });
    }

    public void saveDialogFilter(final MessagesController.DialogFilter dialogFilter, final boolean z, final boolean z2) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda170
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$saveDialogFilter$71(dialogFilter, z, z2);
            }
        });
    }

    public void saveDialogFiltersOrder() {
        final ArrayList arrayList = new ArrayList(getMessagesController().dialogFilters);
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda42
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$saveDialogFiltersOrder$72(arrayList);
            }
        });
    }

    public void saveDialogFiltersOrderInternal() {
        SQLitePreparedStatement sQLitePreparedStatementExecuteFast = null;
        try {
            try {
                sQLitePreparedStatementExecuteFast = this.database.executeFast("UPDATE dialog_filter SET ord = ?, flags = ? WHERE id = ?");
                int size = this.dialogFilters.size();
                for (int i = 0; i < size; i++) {
                    MessagesController.DialogFilter dialogFilter = this.dialogFilters.get(i);
                    sQLitePreparedStatementExecuteFast.requery();
                    sQLitePreparedStatementExecuteFast.bindInteger(1, dialogFilter.order);
                    sQLitePreparedStatementExecuteFast.bindInteger(2, dialogFilter.flags);
                    sQLitePreparedStatementExecuteFast.bindInteger(3, dialogFilter.id);
                    sQLitePreparedStatementExecuteFast.step();
                }
                sQLitePreparedStatementExecuteFast.dispose();
            } catch (Exception e) {
                checkSQLException(e);
                if (sQLitePreparedStatementExecuteFast != null) {
                    sQLitePreparedStatementExecuteFast.dispose();
                }
            }
        } catch (Throwable th) {
            if (sQLitePreparedStatementExecuteFast != null) {
                sQLitePreparedStatementExecuteFast.dispose();
            }
            throw th;
        }
    }

    public void saveDiffParams(final int i, final int i2, final int i3, final int i4) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda110
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$saveDiffParams$35(i, i2, i3, i4);
            }
        });
    }

    public void saveSecretParams(final int i, final int i2, final byte[] bArr) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda146
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$saveSecretParams$7(i, i2, bArr);
            }
        });
    }

    public void saveTopics(final long j, final List<TLRPC.TL_forumTopic> list, final boolean z, boolean z2, final int i) throws Throwable {
        if (z2) {
            this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda216
                @Override // java.lang.Runnable
                public final void run() throws Throwable {
                    this.f$0.lambda$saveTopics$45(j, list, z, i);
                }
            });
        } else {
            saveTopicsInternal(j, list, z, false, i);
        }
    }

    public void searchSavedByTag(final TLRPC.Reaction reaction, final long j, final String str, final int i, final int i2, final Utilities.Callback4<ArrayList<MessageObject>, ArrayList<TLRPC.User>, ArrayList<TLRPC.Chat>, ArrayList<TLRPC.Document>> callback4, final boolean z) {
        if (callback4 == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda94
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$searchSavedByTag$98(str, j, reaction, i, i2, z, callback4);
            }
        });
    }

    public void setDialogFlags(final long j, final long j2) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda165
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$setDialogFlags$37(j, j2);
            }
        });
    }

    public void setDialogPinned(final long j, final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda204
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$setDialogPinned$234(i, j);
            }
        });
    }

    public void setDialogTtl(final long j, final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda235
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$setDialogTtl$57(i, j);
            }
        });
    }

    public void setDialogUnread(final long j, final boolean z) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda228
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$setDialogUnread$231(j, z);
            }
        });
    }

    public void setDialogViewThreadAsMessages(final long j, final boolean z) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda36
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$setDialogViewThreadAsMessages$232(j, z);
            }
        });
    }

    public void setDialogsFolderId(final ArrayList<TLRPC.TL_folderPeer> arrayList, final ArrayList<TLRPC.TL_inputFolderPeer> arrayList2, final long j, final int i) {
        if (arrayList == null && arrayList2 == null && j == 0) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda50
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$setDialogsFolderId$227(arrayList, arrayList2, i, j);
            }
        });
    }

    public void setDialogsPinned(final ArrayList<Long> arrayList, final ArrayList<Integer> arrayList2) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda209
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$setDialogsPinned$235(arrayList, arrayList2);
            }
        });
    }

    public void setLastDateValue(int i) {
        ensureOpened();
        this.lastDateValue = i;
    }

    public void setLastPtsValue(int i) {
        ensureOpened();
        this.lastPtsValue = i;
    }

    public void setLastQtsValue(int i) {
        ensureOpened();
        this.lastQtsValue = i;
    }

    public void setLastSecretVersion(int i) {
        ensureOpened();
        this.lastSecretVersion = i;
    }

    public void setLastSeqValue(int i) {
        ensureOpened();
        this.lastSeqValue = i;
    }

    public void setMessageSeq(final int i, final int i2, final int i3) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda57
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$setMessageSeq$197(i, i2, i3);
            }
        });
    }

    public void setSecretG(int i) {
        ensureOpened();
        this.secretG = i;
    }

    public void setSecretPBytes(byte[] bArr) {
        ensureOpened();
        this.secretPBytes = bArr;
    }

    public void toggleTodo(final long j, final int i, final int i2, final boolean z) {
        final long clientUserId = getUserConfig().getClientUserId();
        final int currentTime = getConnectionsManager().getCurrentTime();
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda87
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$toggleTodo$95(j, i, clientUserId, i2, z, currentTime);
            }
        });
    }

    public void unpinAllDialogsExceptNew(final ArrayList<Long> arrayList, final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda174
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$unpinAllDialogsExceptNew$230(arrayList, i);
            }
        });
    }

    public void updateChannelUsers(final long j, final ArrayList<TLRPC.ChannelParticipant> arrayList) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda103
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateChannelUsers$120(j, arrayList);
            }
        });
    }

    public void updateChatDefaultBannedRights(final long j, final TLRPC.TL_chatBannedRights tL_chatBannedRights, final int i) {
        if (tL_chatBannedRights == null || j == 0) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda45
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateChatDefaultBannedRights$174(j, i, tL_chatBannedRights);
            }
        });
    }

    public void updateChatInfo(final long j, final long j2, final int i, final long j3, final int i2) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda243
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateChatInfo$135(j, i, j2, j3, i2);
            }
        });
    }

    public void updateChatInfo(final TLRPC.ChatFull chatFull, final boolean z) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda223
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateChatInfo$129(chatFull, z);
            }
        });
    }

    public void updateChatOnlineCount(final long j, final int i) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda43
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$updateChatOnlineCount$130(i, j);
            }
        });
    }

    public void updateChatParticipants(final TLRPC.ChatParticipants chatParticipants) {
        if (chatParticipants == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda198
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateChatParticipants$117(chatParticipants);
            }
        });
    }

    public void updateDialogData(final TLRPC.Dialog dialog) {
        if (dialog == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda3
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateDialogData$224(dialog);
            }
        });
    }

    public void updateDialogUnreadReactions(final long j, final long j2, final int i, final boolean z) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda225
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateDialogUnreadReactions$246(z, j, i, j2);
            }
        });
    }

    public void updateDialogsWithDeletedMessages(final long j, final long j2, final ArrayList<Integer> arrayList, final ArrayList<Long> arrayList2, boolean z) {
        if (z) {
            this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda66
                @Override // java.lang.Runnable
                public final void run() throws Throwable {
                    this.f$0.lambda$updateDialogsWithDeletedMessages$211(j, j2, arrayList, arrayList2);
                }
            });
        } else {
            lambda$updateDialogsWithDeletedMessages$211(j, j2, arrayList, arrayList2);
        }
    }

    public void updateDialogsWithReadMessages(final LongSparseIntArray longSparseIntArray, final LongSparseIntArray longSparseIntArray2, final LongSparseArray longSparseArray, final LongSparseIntArray longSparseIntArray3, boolean z) {
        if (isEmpty(longSparseIntArray) && isEmpty(longSparseIntArray2) && isEmpty(longSparseArray) && isEmpty(longSparseIntArray3)) {
            return;
        }
        if (z) {
            this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda178
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$updateDialogsWithReadMessages$115(longSparseIntArray, longSparseIntArray2, longSparseArray, longSparseIntArray3);
                }
            });
        } else {
            updateDialogsWithReadMessagesInternal(null, longSparseIntArray, longSparseIntArray2, longSparseArray, longSparseIntArray3);
        }
    }

    public void updateEncryptedChat(final TLRPC.EncryptedChat encryptedChat) {
        if (encryptedChat == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda158
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$updateEncryptedChat$168(encryptedChat);
            }
        });
    }

    public void updateEncryptedChatLayer(final TLRPC.EncryptedChat encryptedChat) {
        if (encryptedChat == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda187
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$updateEncryptedChatLayer$167(encryptedChat);
            }
        });
    }

    public void updateEncryptedChatSeq(final TLRPC.EncryptedChat encryptedChat, final boolean z) {
        if (encryptedChat == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda134
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$updateEncryptedChatSeq$165(encryptedChat, z);
            }
        });
    }

    public void updateEncryptedChatTTL(final TLRPC.EncryptedChat encryptedChat) {
        if (encryptedChat == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda7
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$updateEncryptedChatTTL$166(encryptedChat);
            }
        });
    }

    public void updateMessageCustomParams(final long j, final TLRPC.Message message) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda88
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateMessageCustomParams$105(message, j);
            }
        });
    }

    public void updateMessagePollResults(final long j, final TLRPC.Poll poll, final TLRPC.PollResults pollResults) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda95
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateMessagePollResults$96(j, poll, pollResults);
            }
        });
    }

    public void updateMessageReactions(final long j, final int i, final TLRPC.TL_messageReactions tL_messageReactions) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda137
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateMessageReactions$99(i, j, tL_messageReactions);
            }
        });
    }

    public long[] updateMessageStateAndId(final long j, final long j2, final Integer num, final int i, final int i2, boolean z, final int i3, final int i4) {
        if (!z) {
            return lambda$updateMessageStateAndId$199(j, j2, num, i, i2, i3, i4);
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda135
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateMessageStateAndId$199(j, j2, num, i, i2, i3, i4);
            }
        });
        return null;
    }

    public void updateMessageVerifyFlags(final ArrayList<TLRPC.Message> arrayList) {
        Utilities.stageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda147
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateMessageVerifyFlags$189(arrayList);
            }
        });
    }

    public void updateMessageVoiceTranscription(final long j, final int i, final String str, final long j2, final boolean z) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda105
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateMessageVoiceTranscription$103(i, j, z, j2, str);
            }
        });
    }

    public void updateMessageVoiceTranscription(final long j, final int i, final String str, final TLRPC.Message message) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda226
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateMessageVoiceTranscription$104(i, j, message, str);
            }
        });
    }

    public void updateMessageVoiceTranscriptionOpen(final long j, final int i, final TLRPC.Message message) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda129
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateMessageVoiceTranscriptionOpen$102(i, j, message);
            }
        });
    }

    public void updateMutedDialogsFiltersCounters() {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda1
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$updateMutedDialogsFiltersCounters$36();
            }
        });
    }

    public void updatePinnedMessages(final long j, final ArrayList<Integer> arrayList, final boolean z, final int i, final int i2, final boolean z2, final HashMap<Integer, MessageObject> map) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda107
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updatePinnedMessages$133(z, map, i2, j, arrayList, i, z2);
            }
        });
    }

    public void updateRepliesCount(final long j, final int i, final ArrayList<TLRPC.Peer> arrayList, final int i2, final int i3) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda245
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateRepliesCount$188(i, j, i3, arrayList, i2);
            }
        });
    }

    public void updateRepliesMaxReadId(final long j, final long j2, final int i, final int i2, boolean z) {
        if (z) {
            this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda229
                @Override // java.lang.Runnable
                public final void run() throws Throwable {
                    this.f$0.lambda$updateRepliesMaxReadId$187(j, j2, i, i2);
                }
            });
        } else {
            lambda$updateRepliesMaxReadId$187(j, j2, i, i2);
        }
    }

    public void updateTopicData(long j, TLRPC.TL_forumTopic tL_forumTopic, int i) {
        updateTopicData(j, tL_forumTopic, i, getConnectionsManager().getCurrentTime());
    }

    public void updateTopicData(final long j, final TLRPC.TL_forumTopic tL_forumTopic, final int i, final int i2) {
        if (tL_forumTopic == null) {
            return;
        }
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda109
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateTopicData$47(i, tL_forumTopic, j, i2);
            }
        });
    }

    public void updateTopicsWithReadMessages(final HashMap<TopicKey, Integer> map) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda90
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$updateTopicsWithReadMessages$56(map);
            }
        });
    }

    public void updateUnreadReactionsCount(long j, long j2, int i) {
        updateUnreadReactionsCount(j, j2, i, false);
    }

    public void updateUnreadReactionsCount(final long j, final long j2, final int i, final boolean z) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda143
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateUnreadReactionsCount$244(j2, z, j, i);
            }
        });
    }

    public void updateUserInfo(final TLRPC.UserFull userFull, final boolean z) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda0
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateUserInfo$125(userFull, z);
            }
        });
    }

    public void updateUserInfoContactBlocked(final long j, final TL_account$RequirementToContact tL_account$RequirementToContact) {
        this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda10
            @Override // java.lang.Runnable
            public final void run() throws Throwable {
                this.f$0.lambda$updateUserInfoContactBlocked$126(j, tL_account$RequirementToContact);
            }
        });
    }

    public void updateUsers(final ArrayList<TLRPC.User> arrayList, final boolean z, final boolean z2, boolean z3) {
        if (arrayList == null || arrayList.isEmpty()) {
            return;
        }
        if (z3) {
            this.storageQueue.postRunnable(new Runnable() { // from class: org.telegram.messenger.MessagesStorage$$ExternalSyntheticLambda244
                @Override // java.lang.Runnable
                public final void run() throws Throwable {
                    this.f$0.lambda$updateUsers$200(arrayList, z, z2);
                }
            });
        } else {
            lambda$updateUsers$200(arrayList, z, z2);
        }
    }
}
